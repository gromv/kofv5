/* BENNU /*
/* BENNU_WII /*
/* BENNU_WIZ /*
/* BENNU_GCW0 /**/
/* GEMIX /*
/**/

/* BENNU /*
import "mod_debug"
import "mod_draw"
import "mod_file"
import "mod_key"
import "mod_joy"
import "mod_grproc"
import "mod_map"
import "mod_math"
import "mod_rand"
import "mod_screen"
import "mod_scroll"
import "mod_sound"
import "mod_string"
import "mod_text"
import "mod_mouse" // mouse
import "mod_cd" // cd
import "mod_video" // set_mode, set_fps
import "mod_wm" // window_status, set_icon, set_title
import "mod_proc" // s_kill, s_freeze, etcetc
import "mod_blendop" // blendop
import "mod_time" // debug
import "mod_say" // debug

/* BENNU_WII /*
import "mod_draw"
import "mod_file"
import "mod_key"
import "mod_joy"
import "mod_grproc"
import "mod_map"
import "mod_math"
import "mod_rand"
import "mod_screen"
import "mod_scroll"
import "mod_sound"
import "mod_string"
import "mod_text"
import "mod_timers" // chronometer in centesics
import "mod_mouse" // mouse
import "mod_video" // set_mode, set_fps
import "mod_proc" // s_kill, s_freeze, etcetc
import "mod_blendop" // blendop
import "mod_time" // debug

/* BENNU_WIZ /*
import "mod_debug"
import "mod_draw"
import "mod_file"
import "mod_key"
import "mod_joy"
import "mod_grproc"
import "mod_map"
import "mod_math"
import "mod_rand"
import "mod_screen"
import "mod_scroll"
import "mod_sound"
import "mod_string"
import "mod_text"
import "mod_mouse" // mouse
import "mod_video" // set_mode, set_fps
import "mod_wm" // window_status, set_icon, set_title
import "mod_proc" // s_kill, s_freeze, etcetc
import "mod_blendop" // blendop
import "mod_time" // debug
//import "mod_say" // debug

/* BENNU_GCW0 /**/
import "mod_debug"
import "mod_draw"
import "mod_file"
import "mod_key"
import "mod_joy"
import "mod_grproc"
import "mod_map"
import "mod_math"
import "mod_rand"
import "mod_screen"
import "mod_scroll"
import "mod_sound"
import "mod_string"
import "mod_text"
import "mod_mouse" // mouse
import "mod_video" // set_mode, set_fps
import "mod_wm" // window_status, set_icon, set_title
import "mod_proc" // s_kill, s_freeze, etcetc
import "mod_blendop" // blendop
import "mod_time" // debug
//import "mod_say" // debug

/* GEMIX /*

compiler_options _use_cstyle_matrix;
//compiler_options _ignore_errors;

PROGRAM THE_KING_OF_SESQUIS;
/**/

const
	
	developing = false;
	sound_active = true;
	
	/* BENNU /*
	ARRAY_INDEX = 0;
	ANGLE_FLAGS_EXTRA = 180000;
	DIV = 4;
	JOY_RANGE = 8000;
	all_drawing = 0;
	DIV_SINCOS = 1;
	MAIN_MENU_Y0 = 80;
	MAIN_MENU_Y1 = 170;
	PUSH_SCAPE_TO_OPTION = "Press Scape Button To Option Menu";
	GFXTEST_XBUTTON = " X button = fullsc  ";
	GFXTEST_ABUTTON = " A button = graph+ ";
	GFXTEST_BBUTTON = " B button = graph- ";
	GFXTEST_ZBUTTON = " Z button = size+ ";
	GFXTEST_CBUTTON = " C button = size- ";
	GFXTEST_ESCAPE = "   escape = return ";
	
	/* BENNU_WII /*
	ARRAY_INDEX = 0;
	ANGLE_FLAGS_EXTRA = 180000;
	DIV = 4;
	JOY_RANGE = 8000;
	all_drawing = 0;
	DIV_SINCOS = 1;
	MAIN_MENU_Y0 = 80;
	MAIN_MENU_Y1 = 170;
	PUSH_SCAPE_TO_OPTION = "Press Scape Button To Option Menu";
	GFXTEST_XBUTTON = " Y button = fullsc  ";
	GFXTEST_ABUTTON = " B button = graph+ ";
	GFXTEST_BBUTTON = " A button = graph- ";
	GFXTEST_ZBUTTON = " R button = size+ ";
	GFXTEST_CBUTTON = " L button = size- ";
	GFXTEST_ESCAPE = "   select = return ";
	
	/* BENNU_WIZ /*
	ARRAY_INDEX = 0;
	ANGLE_FLAGS_EXTRA = 180000;
	DIV = 4;
	JOY_RANGE = 8000;
	all_drawing = 0;
	DIV_SINCOS = 1;
	MAIN_MENU_Y0 = 90;
	MAIN_MENU_Y1 = 150;
	PUSH_SCAPE_TO_OPTION = "Press Menu Button To Option Menu";
	GFXTEST_XBUTTON = " X button = fullsc  ";
	GFXTEST_ABUTTON = " A button = graph+ ";
	GFXTEST_BBUTTON = " B button = graph- ";
	GFXTEST_ZBUTTON = " R button = size+ ";
	GFXTEST_CBUTTON = " L button = size- ";
	GFXTEST_ESCAPE = "      menu = return ";

	/* BENNU_GCW0 /**/
	ARRAY_INDEX = 0;
	ANGLE_FLAGS_EXTRA = 180000;
	DIV = 4;
	JOY_RANGE = 8000;
	all_drawing = 0;
	DIV_SINCOS = 1;
	MAIN_MENU_Y0 = 90;
	MAIN_MENU_Y1 = 150;
	PUSH_SCAPE_TO_OPTION = "Press Menu Button To Option Menu";
	GFXTEST_XBUTTON = " X button = fullsc  ";
	GFXTEST_ABUTTON = " A button = graph+ ";
	GFXTEST_BBUTTON = " B button = graph- ";
	GFXTEST_ZBUTTON = " R button = size+ ";
	GFXTEST_CBUTTON = " L button = size- ";
	GFXTEST_ESCAPE = "      menu = return ";
	
	/* GEMIX /*
	ARRAY_INDEX = 1;
	STATUS_FROZEN = 1;
	ANGLE_FLAGS_EXTRA = 0;
	DIV = 1;
	JOY_RANGE = 800;
	window_status = 1;
	exit_status = 0;
	DIV_SINCOS = 1000;
	MAIN_MENU_Y0 = 80;
	MAIN_MENU_Y1 = 170;
	PUSH_SCAPE_TO_OPTION = "Press Scape Button To Option Menu";
	GFXTEST_XBUTTON = " X button = fullsc  ";
	GFXTEST_ABUTTON = " A button = graph+ ";
	GFXTEST_BBUTTON = " B button = graph- ";
	GFXTEST_ZBUTTON = " Z button = size+ ";
	GFXTEST_CBUTTON = " C button = size- ";
	GFXTEST_ESCAPE = "   escape = return ";
	/**/
	
	
	// estados
	_normal=0;
	_avanzar=1;
	_retroceder=2;
	_agachar=3;
	_agachado=4;
	_agachadoguardia=5;
	_burla=6;
	_charge=7;
	_rodar=8;
	_correr=9;
	
	_lpunch1=10;
	_lpunch2=11;
	_lkick1=12;
	_lkick2=13;
	_spunch1=14;
	_spunch2=15;
	_skick1=16;
	_skick2=17;
	_lpunchaga=18;
	_lkickaga=19;
	_spunchaga=20;
	_skickaga=21;
	_toss1=22;
	_saltar=23;
	_saltar_atras=24;
	_lpunchair=25;
	_lkickair=26;
	_spunchair=27;
	_skickair=28;
	_tossair=29;
	
	_recibir_fuertes_suelo=30;
	_recibir_flojos_suelo=31;
	_recibir_fuertes_agachado=32;
	_recibir_flojos_agachado=33;
	_recibir_fuertes_bozo=34;
	_recibir_genjuro=35;
	_recibir_fuertes_aire=36;
	_recibir_flojos_bozo=37;
	_recibir_barridos_fuertes=46;
	_recibir_colleja=47;
	_recibir_toss=38;
	_guardiaalta=39;
	_guardiabaja=40;
	_guardiaaltafloja=41;
	_guardiabajafloja=42;

	_voltear=43;
	_gesto_princ=44;
	_levantandose=45;
	_shoryuken=48;
	_ayuken=49;
	_u_kick=50;
	_uatras_punch=51;
	_uatras_kick=52;
	_satras_kick=53;
	_extra_move=54;

	_special1=55;
	_special2=56;

	_ganar=57;
	_perder=58;
	_pajaritos=59;
	
	// grupos de estados
	_neutral = 0;
	_vulnerable = 1;
	_invulnerable = 2;
	_attack = 3;
	_defense = 4;
	_damage = 5;
	
	// controles
	SALTAR=0;
	AGACHAR=1;
	AVANZAR=2;
	RETROCEDER=3;
	L_PUNCH=4;
	S_PUNCH=5;
	TOSS=6;
	L_KICK=7;
	S_KICK=8;
	GUASA=9;
	CHARGE=10;
	RODAR=11;
	STRIKER=12;
	CUATRO=13;
	
	// tipo de ataque
	NULO=0;
	ALTO=1;
	NORMAL=2;
	BAJO=3;
	COJER=4;
	VULN=5;
	
	control_teclado1=1;
	control_teclado2=2;
	control_pad=3; //deprecated
	control_menu=3;
	control_cpu=4;
	
	MUSIC_KYO96   = 0;
	MUSIC_KYO94   = 1;
	MUSIC_ATHEN   = 2;
	MUSIC_IORIY   = 3;
	MUSIC_CRIMS   = 4;
	MUSIC_TERRY   = 5;
	MUSIC_KASUM   = 6;
	MUSIC_TAKUM   = 7;
	MUSIC_K       = 8;
	MUSIC_KULAD   = 9;
	MUSIC_K9999   = 10;
	MUSIC_SELECT  = 11;
	
	FIGHTER_KYO = 0;
	FIGHTER_KYO94 = 5;
	FIGHTER_ATHENA = 1;
	FIGHTER_IORI = 2;
	FIGHTER_CRIMSON = 4;
	FIGHTER_TERRY = 3;
	FIGHTER_TERRY94 = 8;
	FIGHTER_KASUMI = 6;
	FIGHTER_TAKUMA = 7;
	FIGHTER_K = 9;
	FIGHTER_KULA = 10;
	FIGHTER_K9999 = 11;
	
	STG_KYO = 0;
	STG_KYO94 = 5;
	STG_ATHENA = 1;
	STG_IORI = 2;
	STG_CRIMSON = 4;
	STG_TERRY = 3;
	STG_TERRY94 = 8;
	STG_KASUMI = 6;
	STG_TAKUMA = 7;
	STG_K = 9;
	STG_KULA = 10;
	STG_K9999 = 11;
	
	FPS_BASE = 60;
	FPS_BASE2 = 30;
	
	CHANNEL_CHARGE1 = 26;
	CHANNEL_CHARGE2 = 27;
	CHANNEL_VOICE1 = 28;
	CHANNEL_VOICE2 = 29;
	
	C_8BIT = 8;
	C_16BIT = 16;
	color_deep = C_8BIT;	
	
	SIZEX = 320;
	SIZEY = 240;
	SIZEX2 = 160;
	SIZEY2 = 120;
	
	// states
	ST_INIT = 0;
	ST_BENNU = 1;
	ST_LOGO = 2;
	ST_TITLE = 3;
	ST_MAIN = 4;
	ST_OPTIONS = 5;
	ST_SELECT = 6;
	ST_PLAYING = 7;
	ST_GAME_OVER = 8;
	
	// options
	OPT_MAIN = 0;
	OPT_GAME = 1;
	OPT_SETUP = 2;
	OPT_SOUND = 3;
	OPT_KEYS = 4;
	OPT_GFXS = 5;
	
	// modes
	MODE_VS2P = 0;
	MODE_TRAINING = 1;
	MODE_ARCADE = 2;
	
	MAX_FASES = 10;
	MAX_BEATS = 5;
	
	INCX_GUARD_W = 4;
	INCX_GUARD_S = 6;
	INCX_GUARD_X = 8;
	
	INCX_W = 5;
	INCX_S = 10;
	INCX_X = 12;
	
	PRECISION_BITS = 8;
	MAX_LIFE = 118<<PRECISION_BITS;
	DANGER_LIFE = 24<<PRECISION_BITS;
	
	MENU_X0 = 30-150;
	MENU_X1 = 285-150;
	
	INTRO_X0 = 0;
	INTRO_X1 = 160;
	INTRO_SLICES = 8;
	INTRO_SLICESIZE = INTRO_X1/INTRO_SLICES;

	// sistema particulas
	NUM_PARTICLES = 60;	
	PART_ALIVE = 0;
	PART_X = 1;
	PART_Y = 2;
	PART_INC_X = 3;
	PART_INC_Y = 4;
	PART_ACC_X = 5;
	PART_ACC_Y = 6;
	PART_FRAME = 7;
	PART_TYPE = 8;
	
GLOBAL
	
	i;
	
	/* BENNU /*
	draw_z = 0;
	
	channel[32];
	blend_pow[3+ARRAY_INDEX];
	blend_red;
	blend_pur;
	blend_ice;
	blend_ray;
	
	BLEND_INTENSITY = 0.7;
	blendIntensity;
	
	/* BENNU_WII /*
	draw_z = 0;
	
	channel[32];
	blend_pow[3+ARRAY_INDEX];
	blend_red;
	blend_pur;
	blend_ice;
	blend_ray;
	
	BLEND_INTENSITY = 0.7;
	blendIntensity;
		
	/* BENNU_WIZ /*
	draw_z = 0;
	
	channel[32];
	blend_pow[3+ARRAY_INDEX];
	blend_red;
	blend_pur;
	blend_ice;
	blend_ray;
	
	BLEND_INTENSITY = 0.7;
	blendIntensity;

	MAX_VOLUME = 100;
	master_volume = 80;
	final_volume;
	show_volume_frames;
	
	/* BENNU_GCW0 /**/
	draw_z = 0;
	
	channel[32];
	blend_pow[3+ARRAY_INDEX];
	blend_red;
	blend_pur;
	blend_ice;
	blend_ray;
	
	BLEND_INTENSITY = 0.7;
	blendIntensity;

	/**/
	
	// pad controls
	pad_1 = 0;
	pad_2 = 0;	
	pad_1_start;
	pad_2_start;
	
	
	p1_joy_x, p1_joy_y, p1_hat;
	p1_hat_up, p1_hat_down, p1_hat_right, p1_hat_left;
	p1_button_a, p1_button_b, p1_button_c;
	p1_button_x, p1_button_y, p1_button_z;
	p1_control_a, p1_control_b, p1_control_c;
	p1_control_x, p1_control_y, p1_control_z;
	p1_button_start, p1_button_cancel;
	
	p2_joy_x, p2_joy_y, p2_hat;
	p2_hat_up, p2_hat_down, p2_hat_right, p2_hat_left;
	p2_button_a, p2_button_b, p2_button_c;
	p2_button_x, p2_button_y, p2_button_z;
	p2_control_a, p2_control_b, p2_control_c;
	p2_control_x, p2_control_y, p2_control_z;
	p2_button_start, p2_button_cancel;	
	
	control_up = 0;
	control_down = 0;
	control_right = 0;
	control_left = 0;
	control_button = 0;
	control_enter = 0;
	control_cancel = 0;
	control_home = 0;
	control_volup = 0;
	control_voldown = 0;

	kmap1[9+ARRAY_INDEX]=_w,_s,_a,_d,_f,_g,_h,_r,_t,_y;//teclas
	kmap2[9+ARRAY_INDEX]=_up,_down,_left,_right,_del,_end,_pgdn,_ins,_home,_pgup;//teclas
	pmap1[7+ARRAY_INDEX]=0,1,2,3,4,5,6,7;
	pmap2[7+ARRAY_INDEX]=0,1,2,3,4,5,6,7;
	save_cmap[35+ARRAY_INDEX];
	
	
	fich_game;
	font_p1;
	font_p2;
	font_p3;
	fontstriker1;
	fontstriker2;
	fontstriker3;
	font_menu;
	
	plano1;
	plano2;
	mapa;

	fich1;
	fich2;
	fichstr1;
	fichstr2;
	fichad;
	fich_select;
	fichtxt;
	fichstg;
	
	// menu	
	/* BENNU /*
	MENUST_MAIN[] = OPT_GAME, OPT_SETUP, OPT_SOUND, OPT_KEYS, OPT_GFXS;
	MENUTXT_MAIN[] = "Game Settings", "Computer Set Up", "Sound Options", "Control Configuration", "Graphic Test";
	
	/* BENNU_WII /*
	MENUST_MAIN[] = OPT_GAME, OPT_SETUP, OPT_SOUND, OPT_GFXS;
	MENUTXT_MAIN[] = "Game Settings", "Computer Set Up", "Sound Options", "Graphic Test";
	
	/* BENNU_WIZ /*
	MENUST_MAIN[] = OPT_GAME, OPT_SOUND, OPT_GFXS;
	MENUTXT_MAIN[] = "Game Settings", "Sound Options", "Graphic Test";
	MAIN_Y1 = 120;

	/* BENNU_GCW0 /**/
	MENUST_MAIN[] = OPT_GAME, OPT_SOUND, OPT_GFXS;
	MENUTXT_MAIN[] = "Game Settings", "Sound Options", "Graphic Test";
	MAIN_Y1 = 120;
	
	/* GEMIX /*
	MENUST_MAIN[] = OPT_GAME, OPT_SETUP, OPT_SOUND, OPT_KEYS, OPT_GFXS;
	MENUTXT_MAIN[] = "Game Settings", "Computer Set Up", "Sound Options", "Control Configuration", "Graphic Test";
	/**/
	
	
	menu_index;
	subm_index;
	confirmed_w_pad;
	cd_drive;
	bPausa;
	
	
	time=15;
	digit_0, digit_1;
	game_state;
    game_frame;
	random;
	game_over_type;

	id_constructor;
	id_select;
	id_option;
	font_numbers;
	id_pow1;
	id_pow2;
	id_vie1;
	id_vie2;
	define_vie1;
	define_vie2;
	id_rand;
	
	luchador1=0;
	luchador2=0;
	choose1=1;
	choose2=1;
	id_luchador1;
	id_luchador2;
	id_alive1;
	id_alive2;
	display=0;
	escenario=0;

	especial=0;
	cputype=0;

	rojo=0;
	blanquear=0;
	parpadeo_final;

	estado_juego=0;
	game_mode=0;
	
	striker1=0;
	striker2=0;
	wins1=0;
	wins2=0;
	counter;
	cleared_games;

	mosca;
	bennuLogo;
	moscon=false;

	colorp1=0;
	colorp2=0;
	damegi1=0;
	damegi2=0;
	damegi1txt=0;
	damegi2txt=0;
	camara_x=0;
	camara_y=0;
	camara_y2=0;
	scroll_x, scroll_y;
	round=1;
	maxcombo1=0;
	maxcombo2=0;
	
	
	// nombres
	nombres[]="Kyo Kusanagi","Athena Asamiya","Iori Yagami","Terry Bogard",
	"Iori Yagami","Kyo Kusanagi","Kasumi Todo","Takuma Sakazaki",
	"Terry Bogard","K'","Kula","K'9999";
	Strikerkyo[]="Kazuki Kazama","Ryu Hoshi","Benimaru Nikaido","Moe";
	Strikerathena[]="Akari","Jin Chon Rei","Hotaru Futaba","Moe";
	Strikeriori[]="Genjuro Kibagami","Blanka","Eiji Kisaragi","Indi";
	Strikerterry[]="Galford","Guile","Joe Higashi";
	Strikercrimson[]="Sogetsu Kazama","Kaede","Len";
	Strikertodo[]="Nakoruru","Ryoko","Xiang Fei";
	Strikertakuma[]="Jubei Yagyu","Tung Fu Rue","Ryo Sakazaki";
	Strikerk[]="Setsuna","Hattori Hanzo","Maxima";
	Strikerkura[]="Rimururu","Yuki","Candy";
	Strikertetsuo[]="Tetsuo Shima","Krisalid","Basara","Indi";

	// animaciones (60fps)
	stars[]=1,1,2,2,3,3,4,4,5,5,6,6,7,7;
	s_guardia[]=55,55,9,9,56,56,57,57,58,58,59,59,60,60;
	m_guardia[]=15,15,16,16,17,17,18,18,19,19,20,20,21,21,22,22;
	cut[]=37,37,38,38,39,39,40,40,41,41,42,42,43,43;
	blood[]=44,44,45,45,46,46,47,47,48,48,49,49,50,50,51,51,52,52,53,53,54,54;
	caer[]=23,23,24,24,25,25,26,26,27,27,28,28,29,29;
	pawa[]=23,23,24,24,63,63,64,64,65,65,66,66,67,67;
	catched[]=30,30,31,31,32,32,33,33,34,34,34,34,35,35,35,35,36,36,36,36,36,36;
	ath_catch[]=210,210,211,211,212,212,213,213,210,210,211,211,213,213,210,210,211,211,213,213,213,213;
	sicobol[]=222,222,223,223,224,224,225,225,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,233,233;

	//paletas
	red_kyo[]=0,31,2,3,28,27,26,7,8,9,10,11,40,13,14,32,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,12,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,41,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	//frac_kyo[]=0,3,2,3,7,9,11,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	green_kyo[]=0,1,2,3,167,95,166,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,103,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	blue_kyo[]=0,71,2,3,127,125,124,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	new_athena[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,52,54,55,27,37,38,39,23,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,8,7,124,125,126,127,128,129,130,131,132,133,35,135,136,137,138,139,140,141,142,143,144,145,146,147,148,6,150,151,152,129,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,128,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,4,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	green_athena[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,130,131,132,27,76,77,78,208,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,64,97,98,122,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,164,165,124,125,126,127,128,129,130,131,132,133,75,135,136,137,138,139,140,141,142,143,144,145,146,147,148,166,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,65,171,172,173,203,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,167,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	blue_athena[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,84,85,86,27,68,70,71,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,107,108,124,125,126,127,128,129,130,131,132,133,67,87,136,137,138,139,140,141,142,143,144,145,146,147,148,109,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,30,206,207,208,209,210,211,212,213,214,215,216,111,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	normal_iori[]=0,0,1,151,150,5,149,7,8,8,112,11,11,15,15,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,25,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,105,154,155,108,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,114,232,233,234,235,236,237,238,239,240,241,28,243,244,245,134,247,248,249,250,251,252,253,254,255,256;
	gold_iori[]=0,0,1,79,78,5,77,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,159,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,171,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,155,134,135,168,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,169,154,155,173,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,158,243,244,245,157,247,248,249,250,251,252,253,254,255,256;
	blue_iori[]=0,0,71,205,218,5,223,7,8,227,10,11,228,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,127,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,122,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,105,154,155,108,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,126,243,244,245,124,247,248,249,250,251,252,253,254,255,256;
	purple_iori[]=0,0,1,3,5,5,7,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,45,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,41,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,105,154,155,108,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,44,243,244,245,43,247,248,249,250,251,252,253,254,255,256;
	normal_terry[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,205,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,122,123,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	blue_terry[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,122,100,101,102,71,104,105,121,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,124,126,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	final_terry[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,70,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,75,122,123,124,125,126,127,128,129,130,131,132,133,131,135,136,137,138,139,140,141,142,143,144,73,74,75,76,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,220,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255;
	rare_terry[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,11,10,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,4,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,58,100,101,102,143,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,10,122,123,124,125,126,127,128,129,130,131,132,133,139,141,136,137,138,139,140,141,142,143,144,10,11,9,8,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,6,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	crimson_normal[]=0,0,1,150,149,5,148,7,8,146,10,11,144,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,52,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,105,154,155,108,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,27,243,244,245,25,247,248,249,250,251,252,253,254,255,256;
	silver_crimsom[]=0,0,1,3,4,5,6,7,8,187,10,11,184,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,5,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,110,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,107,131,132,13,134,135,104,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,105,154,155,108,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,8,243,244,245,10,247,248,249,250,251,252,253,254,255,256;
	outlaw_crimsom[]=0,0,1,236,23,5,21,7,8,147,10,11,145,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,127,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,110,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,107,131,132,65,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,108,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,69,243,244,245,67,247,248,249,250,251,252,253,254,255,256;
	green_crimsom[]=0,0,2,3,4,5,6,7,8,122,10,11,120,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,167,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,110,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,107,131,132,161,134,135,104,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,105,154,155,189,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,165,243,244,245,163,247,248,249,250,251,252,253,254,255,256;
	normal_kas[]=0,1,2,3,4,5,6,7,8,9,10,11,170,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,125,150,71,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,100,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,214,218,219,220,126,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	magent_kas[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,43,44,28,235,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,117,118,136,137,138,139,140,141,142,143,144,145,146,147,148,17,150,23,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,13,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,21,218,219,220,19,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	sombra_kas[]=0,1,2,3,4,5,6,7,8,9,10,11,146,13,14,15,16,17,18,19,20,21,22,23,24,25,132,133,28,135,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,133,134,136,137,138,139,140,141,142,143,144,145,146,147,148,253,150,87,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,144,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,148,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,202,218,219,220,203,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	masayo_kas[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,66,67,28,69,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,67,68,136,137,138,139,140,141,142,143,144,145,146,147,148,6,150,3,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,4,218,219,220,5,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	takuma_naranja[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,51,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,52,185,54,187,29,189,190,31,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	takuma_juanh[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,10,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,8,185,6,187,4,189,190,2,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	takuma_azulon[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,64,185,66,187,68,189,190,70,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	k_azul[]=0,240,2,3,127,5,126,124,157,156,155,11,12,56,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,147,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	k_mage[]=0,1,2,3,23,5,21,19,150,149,148,11,12,11,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,180,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	k_verd[]=0,1,2,3,208,5,79,78,246,132,51,11,12,56,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,92,183,184,185,186,187,188,189,190,191,92,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,1,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	kula_topa[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,79,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,163,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,76,77,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,165,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	kula_rubi[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,22,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,123,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,16,19,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,125,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	kula_kuro[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,4,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,28,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,9,6,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,1,210,211,212,213,214,215,216,217,218,219,220,29,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	tetsuo_hort[]=0,1,2,3,202,5,94,93,90,9,10,80,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,154,131,156,133,134,158,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	tetsuo_bars[]=0,1,2,3,205,5,221,224,75,9,10,72,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,149,124,150,126,127,128,129,24,131,17,133,134,20,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,151,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	tetsuo_rojo[]=0,1,2,3,30,5,28,27,193,9,10,176,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,149,124,150,126,127,128,129,14,131,12,133,134,9,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,151,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	kazuki1[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,104,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,110,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,107,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,105,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	kazuki2[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,147,148,149,150,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,104,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,110,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,107,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,105,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	eiji[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,155,27,28,191,30,31,32,33,34,10,36,8,38,6,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,175,103,104,105,106,172,173,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,169,170,130,131,132,133,134,189,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,168,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,5,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	sogetsu_kaz[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,36,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,19,21,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,175,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,36,38,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,120,145,122,123,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,39,223,117,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,16,249,250,251,252,253,254,255,256;
	rimururu[]=0,1,2,3,4,5,6,7,123,9,120,11,12,32,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,74,51,76,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,175,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,18,125,21,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,78,197,198,199,200,201,202,203,204,205,22,207,208,209,210,211,212,213,214,215,216,217,20,219,220,221,222,17,224,225,226,227,228,24,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	guile[]=0,1,2,3,4,23,6,245,100,9,10,11,12,13,96,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,186,149,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,64,81,82,83,66,67,86,214,88,89,90,91,92,93,94,95,96,97,98,99,108,109,150,103,104,105,106,107,196,109,110,111,112,113,114,115,116,117,118,119,120,24,18,20,124,23,126,127,128,129,130,217,27,133,134,135,136,137,56,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,188,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,128,65,187,188,189,190,191,192,193,194,195,196,197,198,199,200,222,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,229,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,206,247,248,249,250,251,252,253,254,255,256;
	hotaru[]=0,1,2,3,4,5,6,7,8,122,10,120,12,144,168,15,133,17,134,19,135,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,130,132,53,54,55,56,64,65,59,60,61,68,63,169,16,18,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,287,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,9,125,126,127,128,129,130,131,132,133,163,166,136,137,138,139,140,66,142,143,144,145,146,147,148,149,150,151,144,49,154,51,156,246,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,67,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,95,94,219,220,221,222,92,229,225,226,227,24,19,21,23,232,233,6,3,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	ryu[]=0,1,2,3,4,5,6,190,8,9,10,11,12,184,207,15,16,17,18,19,20,21,22,23,24,25,91,94,28,29,30,31,32,33,34,35,36,37,38,39,24,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,20,22,47,72,73,74,75,76,77,78,79,80,14,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,23,128,129,130,123,132,133,125,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,127,176,177,178,179,180,26,182,183,184,185,186,187,188,189,190,191,188,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,229,225,226,227,228,229,230,231,232,233,234,235,236,237,238,238,240,241,242,243,244,245,246,247,10,249,250,251,252,253,254,255,256;
	benimaru[]=0,1,2,3,4,5,20,7,18,9,16,11,12,130,14,129,16,17,18,19,20,21,22,23,24,25,161,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,32,33,58,35,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,5,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,107,116,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,238,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	joe[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,129,16,17,18,19,20,21,22,23,24,164,161,86,28,87,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,34,53,161,55,168,57,58,35,60,61,62,63,64,65,66,67,68,118,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,35,131,36,37,134,135,136,137,138,139,140,141,142,143,144,145,146,7,148,5,150,151,152,32,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,107,196,197,198,199,200,201,202,16,21,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,116,231,232,233,234,235,236,237,238,238,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	kaede1[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,35,25,37,38,39,10,30,151,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,15,13,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,8,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	kaede2[]=0,1,2,3,208,150,149,7,8,9,118,118,12,36,14,34,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,108,110,110,9,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,187,187,189,189,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,187,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,13,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,111,111,189,190,191,119,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,4,244,245,191,247,248,249,250,251,252,253,254,255,256;
	xiang[]=0,1,2,3,4,5,6,149,8,147,10,145,12,144,14,15,114,115,18,116,117,21,22,23,24,25,26,27,28,119,30,1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,7,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,99,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,93,125,126,127,128,129,130,131,132,133,6,4,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,2,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,4,219,220,79,222,5,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,101,247,248,249,250,251,252,253,254,255,256;
	nakoruru[]=0,1,2,3,4,5,6,7,148,9,146,11,144,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,121,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,144,97,98,99,100,101,5,103,104,105,106,107,108,149,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,83,132,85,134,87,136,137,138,139,140,141,142,143,144,145,146,24,27,149,150,151,152,144,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,148,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,77,219,220,30,222,75,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	ryoko[]=0,1,2,127,126,125,124,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,26,28,30,88,89,90,91,92,93,94,95,144,97,122,99,124,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,120,186,187,188,150,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,20,247,248,249,250,251,252,253,254,255,256;
	jubei[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,125,126,127,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,224,150,151,104,105,106,107,108,109,202,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,106,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,104,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,148,149,174,150,176,177,178,179,180,181,182,183,184,185,186,187,188,149,190,150,148,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,71,239,240,205,242,243,244,221,200,247,248,249,250,251,252,253,254,255,256;
	ryo[]=0,1,2,8,4,10,12,15,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,115,116,117,29,30,31,32,33,34,131,36,133,134,39,40,41,42,43,44,45,46,47,48,49,50,90,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,95,104,105,106,107,108,173,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,91,92,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,175,243,244,245,93,247,248,249,250,251,252,253,254,255,256;
	akari[]=0,1,2,3,4,5,6,149,8,148,147,146,145,144,14,15,16,17,18,19,20,21,22,23,24,25,92,27,95,167,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,130,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,195,108,109,110,111,112,113,114,115,116,117,22,119,120,121,122,17,19,125,126,127,128,129,130,131,132,133,134,94,136,137,138,139,140,141,142,143,144,145,146,147,148,7,5,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,128,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,2,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	kandi[]=0,1,2,151,150,149,148,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,179,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,29,218,219,220,27,222,25,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	koreda[]=0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,31,30,29,28,27,26,25,24,39,38,37,36,35,34,33,32,47,46,45,44,43,42,41,40,55,54,53,52,51,50,49,48,63,62,61,60,59,58,57,56,71,70,69,68,67,66,65,64,79,78,77,76,75,74,73,72,87,86,85,84,83,82,81,80,95,94,93,92,91,90,89,88,103,102,101,100,99,98,97,96,111,110,109,108,107,106,105,104,119,118,117,116,115,114,113,112,127,126,125,124,123,122,121,120,135,134,133,132,131,130,129,128,143,142,141,140,139,138,137,136,151,150,149,148,147,146,145,144,159,158,157,156,155,154,153,152,167,166,165,164,163,162,161,160,175,174,173,172,171,170,169,168,183,182,181,180,179,178,177,176,191,190,189,188,187,186,185,184,199,198,197,196,195,194,193,192,207,206,205,204,203,202,201,200,215,214,213,212,211,210,209,208,223,233,221,220,219,218,217,216,231,230,229,228,227,226,225,224,239,238,237,236,235,234,233,232,247,246,245,244,243,242,241,240,255,254,253,252,251,250,249,248;
	
	/* GEMIX /*
	//burn_kyo[]=0,55,2,55,54,53,52,54,8,53,10,52,49,13,14,15,16,17,18,19,20,21,22,23,24,25,52,53,54,132,132,55,15,33,34,35,36,37,38,39,49,192,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,49,65,66,67,68,69,70,55,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,175,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,52,53,126,54,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,51,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,131,247,248,249,250,251,252,253,254,255,256;
	//anti_kyo[]=0,119,2,119,118,117,116,118,8,117,10,116,112,13,14,15,16,17,18,19,20,21,22,23,24,25,116,117,118,38,38,119,32,33,34,35,36,37,38,39,112,41,42,43,44,45,46,47,48,49,42,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,119,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,116,117,126,118,128,33,35,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,32,185,186,187,188,189,190,191,114,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,37,247,248,249,250,251,252,253,254,255,256;
	//fres_kyo[]=0,70,2,70,67,66,65,67,8,66,10,65,254,13,14,15,16,17,18,19,20,21,22,23,24,25,65,66,67,29,68,70,32,33,34,35,36,37,38,39,254,123,42,43,44,45,46,47,48,49,121,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,70,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,65,66,126,67,128,228,226,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,64,185,186,187,188,189,190,191,123,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,229,247,248,249,250,251,252,253,254,255,256;	
	burn_kyo[]=0,55,2,55,54,53,52,54,8,53,10,52,49,13,14,15,16,17,18,19,20,21,22,23,24,25,52,53,54,132,132,55,15,33,34,35,36,37,38,39,49,192,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,49,65,66,67,68,69,70,55,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,53,96,97,98,99,100,131,175,132,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,52,53,126,54,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,
    52,54,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,51,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,131,247,248,249,250,251,252,253,254,255,256;
	anti_kyo[]=0,119,2,119,118,117,116,118,8,117,10,116,112,13,14,15,16,17,18,19,20,21,22,23,24,25,116,117,118,38,38,119,32,33,34,35,36,37,38,39,112,41,42,43,44,45,46,47,48,49,42,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,119,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,117,96,97,98,99,100,37,102,38,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,116,117,126,118,128,33,35,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,116,118,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,32,185,186,187,188,189,190,191,114,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,37,247,248,249,250,251,252,253,254,255,256;
	fres_kyo[]=0,70,2,70,67,66,65,67,8,66,10,65,254,13,14,15,16,17,18,19,20,21,22,23,24,25,65,66,67,29,68,70,32,33,34,35,36,37,38,39,254,123,42,43,44,45,46,47,48,49,121,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,70,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,66,96,97,98,99,100,229,102,68,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,65,66,126,67,128,228,226,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,65,67,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,64,185,186,187,188,189,190,191,123,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,229,247,248,249,250,251,252,253,254,255,256;
	return_kyo[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,184,129,34,130,36,246,29,39,40,41,50,43,44,45,46,47,48,12,50,192,6,5,4,1,56,57,58,59,60,61,62,63,184,6,5,4,30,69,1,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,175,103,104,105,106,107,108,109,110,111,12,113,192,115,6,5,4,1,120,50,122,192,124,125,126,127,128,129,130,246,29,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,130,227,129,246,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,12,255,256;
	burn_ath[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,55,24,25,26,27,52,53,54,55,32,33,34,51,36,52,53,54,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,48,49,66,51,52,69,53,54,72,73,74,51,52,53,54,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,48,97,98,50,100,101,102,103,104,105,106,50,108,27,110,111,112,113,114,115,116,117,118,119,120,121,50,123,124,125,126,127,128,129,130,131,132,133,51,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,49,171,172,173,132,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,133,196,197,198,199,200,201,202,132,204,205,206,207,55,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	anti_ath[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,118,24,25,26,27,115,116,117,118,32,33,34,114,36,115,116,117,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,114,115,116,117,71,72,73,74,114,115,116,117,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,112,100,101,102,103,104,105,106,107,108,43,110,111,112,113,114,115,116,117,118,119,120,121,112,123,124,125,126,127,32,40,41,131,132,133,114,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,40,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,113,175,176,177,178,179,180,181,182,183,32,185,186,187,188,189,190,191,192,193,194,42,196,197,198,199,200,201,202,113,204,205,206,207,118,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	fres_ath[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,127,24,25,26,27,68,70,71,127,32,33,34,66,36,68,70,71,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,120,121,66,66,68,69,70,71,72,73,74,66,68,70,71,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,120,97,98,123,100,101,102,103,104,105,106,107,108,69,110,111,112,113,114,115,116,117,118,119,120,121,123,123,124,125,126,127,72,228,226,131,132,133,66,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,228,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,121,171,172,173,125,175,176,177,178,179,180,181,182,183,72,185,186,187,188,189,190,191,192,193,194,229,196,197,198,199,200,201,202,125,204,205,206,207,127,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	return_ath[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,24,25,26,109,28,29,30,31,184,33,34,134,36,28,29,30,153,130,195,109,44,45,46,47,96,170,99,134,28,29,30,31,56,57,58,59,60,61,62,63,96,170,134,67,28,109,29,30,184,73,74,134,28,29,30,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,99,174,134,28,29,30,31,119,96,170,122,99,124,174,126,31,184,153,130,131,174,195,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,174,204,205,206,207,31,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,130,227,153,195,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	burn_iori[]=0,54,54,132,131,131,130,130,49,49,10,48,48,13,14,15,16,17,18,19,20,21,22,23,24,50,26,27,52,29,53,31,32,33,34,35,36,37,38,39,40,50,42,51,52,53,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,54,72,73,74,75,76,130,131,132,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,128,129,107,55,109,110,111,112,113,114,115,116,117,131,119,120,121,50,123,51,125,52,53,128,129,130,131,132,133,51,135,136,137,138,139,140,141,142,143,144,145,146,147,148,130,131,132,152,153,154,50,156,51,52,53,160,161,162,163,164,165,166,167,168,128,170,129,172,55,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,132,206,207,208,209,210,211,212,213,214,215,216,217,131,219,220,221,222,130,224,225,226,49,48,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	fres_iori[]=0,71,2,70,4,233,6,67,227,227,10,228,228,13,14,15,16,17,18,19,20,21,22,23,24,65,26,27,68,29,69,31,32,33,34,35,36,37,38,39,40,65,42,66,68,69,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,67,233,70,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,120,121,107,230,109,110,111,112,113,114,115,116,117,118,119,120,121,65,123,66,125,68,127,128,129,130,131,132,133,66,135,64,137,138,139,140,141,142,143,144,145,146,147,148,67,233,70,152,153,154,65,156,66,68,69,160,161,162,163,164,165,166,167,64,120,170,121,172,230,174,175,176,69,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,70,206,207,208,209,210,211,212,213,214,215,216,217,233,219,220,221,222,67,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	anti_iori[]=0,38,38,116,115,115,114,114,33,33,10,32,32,13,14,15,16,17,18,19,20,21,22,23,24,34,26,27,36,29,37,31,32,33,34,35,36,37,38,39,40,34,42,35,36,37,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,38,72,73,74,75,76,114,115,116,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,112,113,107,39,109,110,111,112,113,114,115,116,117,118,119,120,121,34,123,35,125,36,37,128,129,130,131,132,133,35,135,176,137,138,139,140,141,142,143,144,145,146,147,148,114,115,116,152,153,154,34,156,35,36,37,160,161,162,163,164,165,166,167,176,112,170,113,172,39,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,116,206,207,208,209,210,211,212,213,214,215,216,217,115,219,220,221,222,114,224,225,226,33,32,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	return_iori[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,12,9,133,246,242,30,2,156,40,41,42,43,44,45,46,47,12,9,133,246,242,30,2,156,56,57,58,59,60,61,62,63,136,133,246,6,242,30,3,2,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,153,106,6,4,3,117,118,119,153,106,122,123,124,125,126,127,153,106,6,4,3,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,136,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,9,12,229,156,231,232,4,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	burn_terry[]=0,1,2,3,53,5,52,7,51,49,48,14,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,133,72,48,74,49,51,77,78,53,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,133,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,48,49,51,131,125,132,127,128,129,130,131,132,133,131,132,136,137,138,131,140,132,142,133,144,48,146,49,51,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,53,206,207,208,54,210,211,212,213,214,215,216,217,218,219,52,52,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,25,247,248,249,250,251,252,253,254,255,256;
	anti_terry[]=0,1,2,3,36,5,35,7,34,33,32,14,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,112,51,52,53,54,55,56,57,112,59,60,61,62,63,64,65,66,67,68,69,70,38,72,32,74,33,34,77,78,36,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,38,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,33,34,114,125,37,127,128,40,130,114,132,133,114,37,136,137,138,114,140,37,142,38,144,32,146,33,34,149,150,151,152,153,154,155,156,33,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,176,185,186,187,188,189,190,191,192,193,194,115,196,197,198,199,200,201,202,203,204,36,206,207,208,39,210,211,212,213,214,215,216,217,218,219,35,35,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,116,247,248,249,250,251,252,253,254,255,256;
	fres_terry[]=0,1,2,3,127,5,125,7,231,120,144,14,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,229,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,70,72,144,74,120,231,77,78,127,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,70,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,120,231,66,125,68,127,128,65,130,66,132,133,66,68,136,137,138,66,140,68,142,70,144,144,146,120,231,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,67,196,197,198,199,200,201,202,203,204,127,206,207,208,209,210,211,212,213,214,215,216,217,218,219,125,125,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,69,247,248,249,250,251,252,253,254,255,256;
	return_terry[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,246,26,27,28,29,30,31,145,147,148,221,79,135,103,209,129,41,42,43,44,45,46,47,145,147,50,148,221,79,209,55,56,57,58,59,60,61,62,63,184,129,134,195,135,246,103,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,50,113,134,195,246,117,118,119,147,121,122,123,124,221,126,79,128,129,195,134,135,103,134,135,136,137,138,139,140,141,142,143,145,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,184,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,50,230,148,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	burn_crimsom[]=0,54,54,132,131,53,130,7,24,9,51,11,12,50,14,15,16,17,18,19,20,130,22,131,24,51,26,24,53,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,50,53,54,55,56,57,58,59,60,61,62,63,64,50,66,51,68,24,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,136,128,129,107,55,110,110,111,112,113,114,115,116,117,118,119,48,121,49,123,124,125,126,53,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,48,48,49,49,130,131,132,151,152,128,154,155,156,157,158,159,160,50,162,51,164,24,166,53,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,48,185,186,49,188,55,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,132,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	anti_crimsom[]=0,38,38,116,115,37,114,7,36,9,35,11,12,34,14,15,16,17,18,19,20,114,22,115,24,35,26,36,37,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,34,53,54,55,56,57,58,59,60,61,62,63,64,34,66,35,68,36,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,176,112,113,107,39,110,110,111,112,113,114,115,116,117,118,119,32,121,33,123,124,125,126,37,128,129,130,131,132,133,134,135,176,137,138,139,140,141,142,143,32,32,33,33,114,115,116,151,152,112,154,155,156,157,158,159,160,34,162,35,164,36,166,37,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,32,185,186,33,188,39,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,116,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	blue_crimsom[]=0,71,71,70,233,127,66,7,69,9,67,11,12,65,14,15,16,17,18,19,20,66,22,233,24,67,26,69,127,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,65,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,64,120,121,107,230,109,110,111,112,13,114,115,116,117,118,119,228,121,227,123,124,125,126,127,128,129,130,131,132,133,134,135,64,137,138,139,140,141,142,143,228,228,227,227,66,233,70,151,152,120,154,155,156,157,158,159,160,65,162,67,164,69,166,127,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,228,185,186,227,188,230,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,70,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	return_crimsom[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,242,25,26,27,28,29,30,31,12,9,133,246,242,30,2,156,40,41,42,43,44,45,46,47,12,9,133,246,52,30,2,156,56,57,58,59,60,61,62,63,136,133,6,246,68,242,3,2,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,110,110,111,153,106,6,4,3,117,118,119,153,106,122,123,124,125,126,30,153,106,6,4,3,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,136,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,9,12,229,156,231,232,4,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	burn_kasumi[]=0,30,2,28,134,132,50,7,8,9,10,11,129,128,136,15,16,50,18,132,20,134,22,28,24,25,26,52,28,55,30,31,32,33,34,35,36,37,38,39,40,41,42,43,52,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,52,68,55,70,28,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,28,88,89,90,91,92,93,94,95,96,97,98,99,131,101,102,133,104,105,106,107,108,54,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,50,132,127,128,129,130,131,132,52,134,55,136,137,138,139,140,141,142,143,128,145,129,147,131,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,128,169,129,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,131,193,194,195,196,197,198,199,200,201,134,132,204,205,206,207,208,209,210,211,212,213,134,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,55,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,50,254,255,256;
	anti_kasumi[]=0,119,2,118,117,116,43,7,8,9,10,11,114,113,40,15,16,43,18,116,20,117,22,118,119,25,26,44,28,39,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,44,68,39,70,118,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,118,88,89,90,91,92,93,94,95,96,97,98,99,115,101,102,133,104,33,106,107,108,38,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,43,116,127,128,129,35,131,132,44,134,39,136,137,138,139,140,141,142,143,113,145,114,147,115,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,113,169,114,171,172,173,174,175,176,177,178,179,180,181,182,183,32,185,186,187,188,189,190,191,115,193,194,195,196,197,198,199,200,201,117,116,204,205,206,207,208,209,210,211,212,213,117,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,39,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,43,254,255,256;
	blue_kasumi[]=0,127,2,70,124,123,121,7,8,9,10,11,65,64,14,15,16,121,18,123,20,124,22,70,24,25,26,67,28,69,30,31,32,33,34,35,36,37,38,39,40,41,42,43,67,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,70,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,70,88,89,90,91,92,93,94,95,96,97,98,99,66,101,102,103,104,227,106,107,108,232,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,121,123,127,128,129,229,131,132,67,134,69,136,137,138,139,140,141,142,143,64,145,65,147,66,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,64,169,65,171,172,173,174,175,176,177,178,179,180,181,182,183,144,185,186,187,188,189,190,191,66,193,194,195,196,197,198,199,200,201,124,123,204,205,206,207,208,209,210,211,212,213,124,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,69,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,121,254,255,256;
	return_kasumi[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,151,29,1,31,184,105,34,130,36,37,109,29,14,41,42,149,27,45,46,47,48,49,149,51,27,53,109,29,56,57,58,59,60,61,62,63,168,12,192,27,68,29,151,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,133,104,105,106,107,108,109,110,111,112,168,12,192,221,217,151,1,120,149,122,221,217,125,126,1,168,12,130,192,221,133,217,135,14,137,138,139,140,141,142,143,184,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,105,228,130,230,231,109,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	burn_takuma[]=0,135,28,3,27,5,54,7,52,9,50,11,12,13,50,15,16,17,18,28,20,21,22,23,24,25,26,27,28,27,30,28,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,134,48,49,50,50,52,53,54,55,56,57,58,59,60,61,62,63,52,65,54,67,27,69,28,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,133,102,104,105,130,107,132,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,153,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,52,185,54,187,27,189,190,28,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	anti_takuma[]=0,119,117,3,115,5,114,7,40,9,176,11,12,13,176,15,16,17,18,19,20,21,22,23,24,25,26,27,28,115,30,117,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,118,48,49,50,176,40,53,114,55,56,57,58,59,60,61,62,63,40,65,114,67,115,69,117,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,116,103,104,105,41,107,43,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,32,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,256,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,40,185,114,187,115,189,190,117,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	blue_takuma[]=0,71,70,3,68,5,66,7,64,9,14,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,68,30,70,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,126,48,49,50,14,64,53,66,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,229,103,104,105,121,107,122,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,228,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,233,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,64,185,66,187,68,189,190,70,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	return_takuma[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,188,191,29,30,31,128,33,34,35,36,37,38,39,184,106,42,108,44,45,46,47,48,49,14,51,184,53,186,55,56,57,58,59,60,61,62,63,184,65,186,67,188,69,191,1,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,186,188,102,191,47,1,120,106,108,123,124,125,47,127,128,129,106,131,108,102,47,1,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,128,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,14,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,128,102,230,231,232,156,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,156;
	burn_k[]=0,135,2,3,134,5,52,50,133,9,51,56,12,56,14,15,16,17,18,50,20,52,22,134,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,50,52,80,81,82,83,84,85,86,87,88,89,90,91,154,93,94,95,96,97,98,99,100,101,132,103,104,105,128,107,130,109,110,55,112,113,114,115,116,117,118,119,120,121,122,123,50,125,52,134,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,154,51,149,133,151,152,153,154,51,156,133,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,154,181,182,183,184,185,186,187,188,189,190,191,154,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,134,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,135,241,242,243,244,245,133,247,248,249,250,251,252,253,254,255,256;
	anti_k[]=0,119,2,3,118,5,117,115,116,9,114,112,12,112,14,15,16,17,18,115,20,117,22,118,24,41,26,43,28,45,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,114,52,53,54,55,112,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,115,117,80,81,82,83,84,85,86,87,88,89,90,91,113,93,94,95,96,97,98,99,100,101,37,103,104,105,34,107,35,109,110,39,112,113,114,115,116,117,118,119,120,121,122,123,115,125,117,118,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,113,114,149,116,151,152,153,154,114,156,116,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,113,181,182,183,184,185,186,187,188,189,190,191,113,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,119,241,242,243,244,245,116,247,248,249,250,251,252,253,254,255,256;
	blue_k[]=0,70,2,3,69,5,68,66,224,9,226,64,12,64,14,15,16,17,18,66,20,68,22,69,24,145,26,229,28,233,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,226,52,53,54,55,64,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,66,68,80,81,82,83,84,85,86,87,88,89,90,91,15,93,94,95,96,97,98,99,100,101,231,103,104,105,65,107,67,109,110,215,112,113,114,115,116,117,118,119,120,121,122,123,66,125,68,69,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,15,226,149,224,151,152,153,154,226,156,224,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,15,181,182,183,184,185,186,187,188,189,190,191,15,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,69,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,70,241,242,243,244,245,224,247,248,249,250,251,252,253,254,255,256;
	return_k[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,192,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,106,108,36,102,38,111,40,25,42,27,44,29,46,47,48,49,7,10,6,53,54,111,13,57,58,59,60,61,62,63,13,106,7,108,6,4,1,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,13,192,10,7,8,6,4,1,120,121,122,123,124,125,126,127,106,129,108,131,102,8,4,1,136,137,138,139,140,141,142,143,144,25,146,147,148,149,150,151,152,153,192,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,111,216,217,218,219,220,221,222,223,8,225,10,227,228,27,230,102,232,29,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	burn_kula[]=0,27, 2,3,55 ,5,51 ,7,8,49 ,10,131,12,13,14,15,49 ,17,18,51 ,20,21,55 ,23,24,25,26,27,132,133,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,55 ,46,47,48,49,50,51,52,53,54,55,56,57,50,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,49 ,51 ,78,55 ,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,132,124,133,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,152,145,146,147,148,132,150,151,152,153,154,155,156,157,158,159,160,161,162,132,164,26 ,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,49 ,51 ,183,184,185,186,187,53,189,190,191,134,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,27 ,210,211,212,213,214,215,216,217,218,219,220,133,222,223,224,225,226,227,155,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	anti_kula[]=0,118,2,3,116,5,114,7,8,112,10,41 ,12,13,14,15,112,17,18,114,20,21,116,23,24,25,26,27,37 ,38 ,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,116,46,47,48,49,50,51,52,53,54,55,56,57,34,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,112,114,78,116,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,37 ,124,38 ,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,32 ,145,146,147,148,37 ,150,151,152,153,154,155,156,157,158,159,160,161,162,37 ,164,38,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,112,114,183,184,185,186,187,36,189,190,191,115,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,118,210,211,212,213,214,215,216,217,218,219,220,38 ,222,223,224,225,226,227,40 ,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	blue_kula[]=0,127,2,3,124,5,226,7,8,64 ,10,66 ,12,13,14,15,64 ,17,18,226,20,21,124,23,24,25,26,27,123,125,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,124,46,47,48,49,50,51,52,53,54,55,56,57,65,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,64 ,226,78,124,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,123,150,151,152,153,154,155,156,157,158,159,160,161,162,123,164,125,166,167,168,72 ,170,171,172,173,174,175,176,177,178,179,180,64 ,226,183,184,185,186,187,67,189,190,191,68 ,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,127,210,211,212,213,214,215,216,217,218,219,220,125,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	return_kula[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,221,209,28,29,30,31,144,33,58,35,188,149,221,39,228,192,42,43,44,45,46,47,48,181,58,182,52,188,54,45,56,57,58,59,60,61,62,63,181,58,11,188,192,69,70,71,169,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,181,113,182,192,45,117,209,119,120,121,122,149,45,221,126,209,128,129,130,11,149,221,192,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,144,153,154,228,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,182,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	burn_tetsuo[]=0,134,2,3,54,5,52,50,155,135,10,137,132,13,49,15,16,132,18,19,135,21,22,23,49,25,26,50,52,29,54,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,137,73,74,155,76,77,78,79,137,81,82,83,84,85,86,87,88,89,155,91,92,50,52,95,96,97,98,99,100,101,102,103,104,105,106,129,108,131,246,111,112,113,114,115,116,117,118,119,120,121,122,51,124,133,126,127,128,129,49,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,51,133,29,152,153,49,155,132,157,135,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,137,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,155,194,195,196,197,198,199,200,201,54,203,204,54,206,207,208,209,210,211,212,29,214,215,216,217,218,219,220,52,222,223,50,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	anti_tetsuo[]=0,236,2,3,119,5,117,115,36,118,10,33,43,13,41,15,16,43,18,19,118,21,22,23,41,25,26,115,117,29,119,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,33,73,74,36,76,77,78,79,33,81,82,83,84,85,86,87,88,89,36,91,92,115,117,95,96,97,98,99,100,101,102,103,104,112,106,113,108,44,39,111,112,113,114,115,116,117,118,119,120,121,122,42,124,45,126,127,128,129,41,131,43,133,134,118,32,137,138,139,140,141,142,143,144,145,146,147,148,42,45,47,152,153,41,155,43,157,118,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,33,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,36,194,195,196,197,198,199,200,201,119,203,204,119,206,207,208,209,210,211,212,47,214,215,216,217,218,219,220,117,222,223,115,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	blue_tetsuo[]=0,211,2,3,126,5,68,66,228,69,10,72,67,13,227,15,16,67,18,19,69,21,22,23,227,25,26,66,68,29,126,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,228,76,77,78,79,72,81,82,83,84,85,86,87,88,89,228,91,92,66,68,95,96,97,98,99,100,101,102,103,104,65,106,229,108,231,70,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,227,131,67,133,134,69,64,137,138,139,140,141,142,143,144,145,146,147,148,123,125,213,152,153,227,155,67,157,69,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,72,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,228,194,195,196,197,198,199,200,201,126,203,204,126,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,68,222,223,66,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	return_tetsuo[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,213,30,31,136,11,34,35,8,37,38,110,40,130,123,132,109,125,46,213,48,130,7,123,6,53,4,55,56,57,58,59,60,61,62,63,136,105,7,132,6,135,110,71,11,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,105,107,114,7,116,6,135,4,120,121,122,123,124,125,4,127,128,107,130,109,132,125,1,135,136,11,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,8,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,1,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,130,8,107,230,109,232,233,234,235,1,237,238,239,240,241,242,243,244,245,110,247,248,249,250,251,252,253,254,255,256;
	/**/
	
	rojoxazul[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,120,122,229,230,53,54,55,56,57,58,59,60,61,62,63,128,129,130,131,132,133,134,135,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,144,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,49,121,50,123,124,125,126,118,64,65,66,67,68,69,70,71,136,137,138,139,140,141,142,143,96,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,51,52,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	rojoxazul2[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,104,15,16,17,18,19,20,21,22,23,227,25,66,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,128,65,26,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,14,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,134,124,125,126,127,64,228,130,131,132,133,123,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,24,129,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	naranxlila[]=0,0,2,3,4,5,6,7,8,9,10,11,12,13,56,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,51,34,35,36,37,38,39,40,41,42,43,134,45,46,47,48,49,50,33,113,53,54,55,14,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,117,109,110,111,130,52,114,132,196,108,246,119,120,121,122,123,124,125,126,127,128,129,112,131,115,133,44,135,168,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,176,154,155,156,157,158,159,160,161,162,163,164,165,166,167,136,169,170,171,172,173,174,175,153,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,116,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	naranxlila2[]=0,0,2,3,4,5,6,7,8,9,10,11,12,13,144,14,16,17,18,19,20,21,22,23,24,25,26,27,28,29,119,31,137,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,114,115,53,54,55,56,57,58,59,60,61,62,63,228,227,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,153,113,51,52,132,134,135,30,120,121,122,123,124,125,126,127,128,129,130,131,116,133,117,118,136,32,138,139,140,141,142,143,64,145,146,147,148,149,150,151,152,112,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,15,65,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	special[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,176,15,16,124,125,126,20,215,22,23,122,123,155,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,127,47,48,49,120,51,52,53,54,55,56,57,58,59,60,61,62,63,177,65,180,181,68,69,70,238,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,50,130,24,25,17,18,19,46,169,170,121,131,132,133,35,37,136,14,138,139,140,141,142,143,153,145,146,147,148,149,150,151,168,144,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,14,64,228,227,66,67,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,21,216,217,218,219,220,221,222,223,224,225,226,179,178,229,230,231,232,233,234,235,236,237,71,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	stagep1[]=0,4,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,15,12,10,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,8,7,210,211,212,213,214,215,216,217,218,13,14,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,6,5,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	//paleta_base[]=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256;
	
	////////////////////KYO KUS.////////////////////////
	inicio_kyo[]=200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,
    200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,
    200,200,200,200,200,200,200,200,201,201,201,201,201,201,201,201,202,202,202,202,202,202,202,202,202,202,203,203,203,
    203,203,203,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,204,205,205,
    205,205,205,205,206,206,206,206,206,206,206,206,206,206,206,206,206,206,206,206,206,206,206,206,1;
	kyovsiori[]=230,230,230,230,230,230,230,230,230,230,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,
    231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,
    231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,231,
    231,231,231,231,231,232,232,232,232,232,232,233,233,233,233,233,233,233,233,234,234,234,234,235,235,235,235,230,230,
    230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,231,231,231,231,231,
    231,236,236,236,236,236,236,214,214,214,214,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,
    215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,
    215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,
    215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,
    215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,215,
    215,215,215,215,215,215,215,215,215,215,214,214,214,214,214,214,213,213,213,213,213,213,213,213,1,1,1,1,1,1,1,1,1,1;
	pos_kyo[]=1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10;
	avanz_kyo[]=11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,9,9,9,9,9,9;
	retro_kyo[]=16,16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20,21,21,21,21,21,21;	
	salt_kyo[]=24,24,24,24,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,27,27,27,27,27,27,28,28,28,28,28,28;
	salt_kyo_alante[]=24,24,24,24,25,25,25,25,25,25,29,29,30,30,30,30,31,31,31,31,32,32,32,32,33,33,33,33,34,34,34,34,35,35;
	salt_kyo_atras[]=24,24,24,24,34,34,34,34,34,34,34,34,33,33,33,33,32,32,31,31,31,31,30,30,30,30,29,29,29,29,29,29,29,29;
	
	lpunch2_kyo[]=36,36,106,106,106,106,36,36,36,36,36,36;
	lkick1_kyo[]=38,38,39,39,40,40,41,41,41,41,40,40,40,40,39,39,39,39,42,42,42,42;
	lkick2_kyo[]=38,38,39,39,107,107,107,107,39,39,39,39,38,38,38,38;

	spunch1_kyo[]=43,43,43,43,44,44,44,44,44,44,44,44,45,45,46,46,46,46,46,46,46,46,46,46,46,46,47,47,47,47,47,47,47,47,
    47,47,47,47;
	spunch2_kyo[]=87,87,88,88,88,88,88,88,89,89,89,89,89,89,89,89,90,90,90,90,90,90,90,90;
	toss1_kyo[]=108,108,108,108,108,108,108,108,109,109,109,109,109,109,110,110,110,110,111,111,112,112,113,113,111,111,
    111,111,111,111,110,110,110,110,110,110,110,110;
	skick1_kyo[]=48,48,48,48,49,49,50,50,50,50,51,51,51,51,52,52,52,52,52,52,53,53,53,53,53,53,22,22,22,22,1,1;
	skick2_kyo[]=91,91,91,91,92,92,93,93,93,93,94,94,95,95,96,96,96,96,97,97,97,97,98,98,98,98,99,99,99,99;
	lpunch3_kyo[]=73,73,74,74,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,76,76;
	spunch3_kyo[]=73,73,74,74,74,74,81,81,81,81,81,81,81,81,76,76,76,76,76,76,53,53,53,53,53,53,53,53;
	lkick3_kyo[]=73,73,73,73,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,53,53,53,53;
	lkick3false_kyo[]=73,73,73,73,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,53,53,53,53;
	skick3_kyo[]=30,30,31,31,84,84,85,85,85,85,86,86,86,86,86,86,86,86,26,26,26,26,26,26,26,26,25,25,25,25,25,25,25,25,25,25,25,25;
	skickfalse_kyo[]=82,82,82,82,82,82,82,82,83,83,83,83,83,83,83,83,83,83,83,83,82,82,82,82,82,82,82,82,26,26;
	toss2_kyo[]=114,114,114,114,114,114,114,114,115,115,115,115,116,116,116,116,116,116,116,116,116,116,116,116,116,116,
    117,117,117,117,117,117,117,117,25,25;
	lpunch4_kyo[]=54,54,55,55,55,55,54,54,54,54,54,54;
	lkick4_kyo[]=56,56,57,57,57,57,56,56,56,56,56,56;
	spunch4_kyo[]=58,58,59,59,59,59,60,60,60,60,61,61,61,61,62,62,62,62,62,62,62,62,62,62,60,60,60,60,60,60,60,60,60,60;
	skick4_kyo[]=64,64,64,64,65,65,65,65,66,66,67,67,68,68,68,68,68,68,69,69,69,69,70,70,70,70,71,71,71,71,72,72;
	skick1_kyo94[]=340,340,340,340,340,340,340,340,341,341,341,341,341,341,343,343,343,343,342,342,342,342,340,340,340,
    340,340,340,22,22,22,22,22,22;
	skick2_kyo94[]=197,197,197,197,309,309,309,309,310,310,311,311,311,311,312,312,313,313,314,314,315,315,316,316,317,
    317,22,22,22,22,22,22,22,22;
	spunch3_kyo94[]=355,355,356,356,356,356,357,357,357,357,357,357,357,357,27,27,27,27,27,27,35,35,35,35;
	barrido94[]=344,344,344,344,345,345,346,346,346,346,347,347,347,347,348,348,349,349,350,350,350,350,350,350,349,349,
    348,348,348,348,347,347,347,347,347,347;
	spunch5_kyo[]=359,359,359,359,359,359,359,359,360,360,360,360,361,361,362,362,363,363,364,364,364,364,364,364,364,
    364,364,364,364,364,365,365,365,365,365,365,366,366,366,366,366,366;
	kyo_carga[]=358,358,300,300,300,300,301,301,302,302;
	rodarala_kyo[]=24,24,24,24,100,100,100,100,101,101,101,101,102,102,102,102,103,103,103,103,104,104,104,104,105,105,
    105,105,1,1;
	rodaratra_kyo[]=105,105,105,105,104,104,104,104,103,103,103,103,102,102,102,102,101,101,101,101,100,100,100,100,24,
    24,24,24,1,1;
	correr_kyo[]=303,303,303,303,304,304,304,304,304,304,305,305,305,305,306,306,306,306,307,307,307,307,307,307,308,
    308,308,308;
	getup_kyo[]=426,426,426,426,427,427,427,427,428,428,428,428,32,32,33,33,24,24,22,22;
	burla_kyo[]=207,207,207,207,207,207,207,207,207,207,208,208,208,208,208,208,208,208,209,209,209,209,209,209,209,209,
    210,210,210,210,210,210,210,210,209,209,209,209,209,209,209,209,208,208,208,208,208,208,208,208,209,209,209,209,209,
    209,209,209,210,210,210,210,210,210,210,210,209,209,209,209,209,209,209,209,208,208,208,208,208,208,208,208,207,207,
    207,207,207,207,1;
	guard1_kyo[]=388,388,388,388,389,389,400,400,400,400;

	esmoniga[]=138,138,139,139,140,140,141,142,143,143,144,144,145,145,145,145,145,145,146,146,146,146,146,146,146,146,
    146,146,147,147,147,147,147,147,147,147,148,148,148,148,148,148,149,149,149,149,150,150,122,122;
	esmoniga2[]=152,152,152,152,153,153,154,154,155,155,156,156,157,157,157,157,157,157,
	157,157,157,157,157,157,157,158,158,158,158,158,158,159,159,159,159,159,159;
	esmoniga3[]=160,160,160,160,160,160,160,160,161,161,161,161,161,161,162,162,162,162,120,120,121,120,121,120,120,120,
    120,120,120,120,120,120,120,163,163,158,158,158,158,159,159,159,159,159,159;
	esmoniga_kick[]=164,164,164,164,165,165,166,166,167,167,168,168,168,168,168,168,168,168,
	168,168,164,164,164,164,164,164,164,164,1,1;
	esmoniga4[]=169,169,169,169,169,169,169,169,169,169,169,169,170,170,170,170,171,171,172,172,173,173,173,173,173,173,
    173,173,173,173,174,174,175,175,176,176,176,176,177,177,177,177,177,177;

	kore1[]=178,178,142,142,179,179,199,199,180,180,181,181,182,182,183,183,184,184,185,
	185,186,186,186,186,187,187,187,187,158,158,158,158,159,159,159,159,159,159;
	kore2[]=188,188,188,188,189,189,189,189,190,190,190,190,190,190,190,190,190,190,190,190,190,190,190,190,189,189,188,
    188,187,187,187,187,158,158,158,158,159,159,159,159;
	kore3[]=191,191,191,191,191,191,192,192,192,192,193,193,193,193,194,194,194,194,194,194,195,195,195,195,195,195,195,
    195,195,195,158,158,158,158,159,159,159,159,159,159;
	shoryu_kyo[]=110,110,111,111,119,119,119,119,130,130,130,130,131,131,131,131,132,132,132,132,133,133,133,133,134,
    134,134,134,135,135,135,135,135,135,136,136,136,136,24,24,24,24,24,24,24,24,24,24;
	shoryu_kyo2[]=0,0,0,0,0,0,0,0,0,0,111,111,119,119,130,130,130,130,131,131,131,131,132,132,133,133,134,134,134,134,
    135,135,135,135,136,136,136,136,24,24,24,24,24,24,24,24;

	ngm[]=196,196,196,196,197,197,198,198,309,309,309,309,310,311,311,311,311,311,311,311,311,311,312,312,312,312,312,
    312,312,312,317,317,317,317,22,22,22,22,22,22,22,22;
	ngm2[]=313,313,313,313,314,315,315,315,315,315,315,315,315,315,316,316,316,316,
	317,317,317,317,317,317,22,22,22,22,22,22,22,22,22,22;
	cortacabezas[]=318,318,318,318,319,319,319,319,319,319,319,319,320,320,320,320,
	321,321,322,322,323,323,324,324,325,325,325,325,24,24,24,24,24,24,24,24,24,24,24,24;
	cortacabezas94[]=48,48,318,318,318,318,351,351,351,351,351,352,352,352,352,352,49,49,49,49,50,50,351,351,351,
	352,352,352,352,352,30,30,31,31,84,84,85,85,85,86,86,86,86,86,353,353,353,353,354,354,354,354,355,355,355,355;
	urrya[]=87,87,87,87,87,87,87,87,303,303,303,303,303,303,304,304,304,304,304,304,305,305,305,305,305,305,306,306,306,
    306,306,306,22,22,22,22,22,22,326,326,326,326,327,327,327,327,328,328,329,329,330,330,330,330,331,331,331,331,331,
    331,332,332,332,332,332,332,332,332,333,333,333,333,333,333,333,333,333,333,333,333,333,333,333,333,333,333,333,333,
    333,333,333,333,333,333,333,333,333,333,333,333,333,333,333,333,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,
    60,60,60,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,1,1,1,1;
	kurae[]=108,108,109,109,109,109,109,109,108,459,459,459,459,460,460,460,460,460,
	460,460,460,460,460,460,460,460,460,460,460,460,460,461,461,461,461,461,461,461,461;

	oreno[]=219,219,219,219,219,219,219,219,219,219,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,
    220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,
    220,220,220,220,221,221,222,221,221,221,221,221,221,221,221,221,222,221,221,221,221,221,221,221,223,223,223,223;
	anta[]=207,207,207,207,207,207,208,208,208,208,208,208,209,209,209,209,209,209,210,210,210,210,210,210,210,210,210,
    210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,211,
	211,211,211,211,211,212,212,212,212,212,212,213,213,213,213,213,213,214,214,214,214,214,214,215,215,215,215;
	moetarou[]=207,207,207,207,207,207,208,208,208,208,208,208,209,209,209,209,209,209,210,210,210,210,210,210,216,216,
    216,216,216,216,216,216,216,216,216,216,216,216,216,216,217,217,217,217,217,217,218,218,218,218,218,218;
	perder_kyo[]=224,224,224,224,224,224,224,224,225,225,225,225,225,225,226,226,226,226,226,226,226,226,226,226,226,
    226,226,226,227,227,227,227,227,227,227,227,228,228,228,228,229,229,229,229,229,229;
	
	sp_kyo2[]=334,334,335,335,335,335,335,335,335,335,335,335,335,335,335,335,335,335,335,335,336,336,336,336,336,336,
    336,336,335,335,335,335,335,335,336,336,336,336,336,336,335,335,335,335,335,336,336,336,335,335,335,336,336,336,335,
    335,335,336,336,336,335,335,335,336,336,336,335,335,336,336,335,335,336,336,335,335,336,336,335,335,336,336,335,335,
	336,336,335,335,336,336,205,205,206,206,108,108,109,109,109,109,459,459,459,459,460,460,460,460,460,460,460,460,460,
    460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,460,
    460,460,460,460,461,461,461,461,461,461,461,461,110,110,110,110,110,110,1,1;
	sp_kyo3[]=331,331,333,333,333,333,178,178,179,179,180,180,181,181,184,184,184,184,184,184,184,184,184,184,185,185,
    185,185,185,185,185,185,186,186,186,186,186,186,186,186,187,187,187,187,187,187,1,1;
	sp_kyo4[]=210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,
    210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,210,63,63,63,63,63,63,63,63,207,207,207,207,207,207,207,
    207,159,159,159,159,1,1;

	honto[]=205,205,206,206,109,109,459,459,460,460,460,460,460,460,178,178,179,179,180,180,181,181,182,182,183,183,184,
    184,184,184,184,184,184,184,184,184,0,0,0,0,184,184,184,184,184,184,184,184,184,184,0,0,0,0,184,184,184,184,184,184,
    184,184,184,184,0,0,0,0,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,184,185,185,185,185,185,
    185,185,185,186,186,186,186,186,186,187,187,187,187,158,158,158,158,159,159;
	spdmk[]=178,178,179,179,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,191,
    191,192,192,193,193,194,194,130,130,130,130,131,131,132,132,133,133,134,134,135,135,136,136,24,24,24,24;


	/////////////athena asamiya///////////////////////////
	pos_ath[]=1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,6,6,6,6,7,7,8,8,9,9,10,10,10,10,11,11,11,11,12,12,12,12,12,12;
	avan_ath[]=13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18;
	retro_ath[]=19,19,19,19,19,19,20,20,20,20,20,20,21,21,21,21,21,21,21,21,22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24;
	ath_carga[]=300,300,300,300,300,300,301,301,301,301,302,302,303,303,304,304,305,305,306,306;
	salto_ath[]=25,25,25,25,27,27,27,27,27,27,28,28,28,28,28,28,29,29,29,29,29,29,30,30,30,30,31,31,31,31,31,31,32,32,
    32,32,33,33,33,33;
	saltoala_ath[]=25,25,25,25,27,27,27,27,28,28,28,28,34,34,34,34,35,35,35,35,36,36,36,36,37,37,37,37,32,32,33,33,33,33;
	saltoatrasath[]=25,25,25,25,25,25,27,27,27,27,28,28,28,28,28,28,37,37,37,37,36,36,36,36,35,35,35,35,34,34,34,34,32,32,32,32,33,33,33,33;
	correr_ath[]=309,309,309,309,310,310,310,310,310,310,311,311,311,311,312,312,312,312,307,307,307,307,307,307,308,308,308,308;

	lpunch1_ath[]=50,50,51,51,52,52,53,53,53,53,52,52,51,51,50,50,50,50;
	lpunch2_ath[]=50,50,51,51,65,65,65,65,65,65,51,51,51,51,50,50,50,50;
	lpunch3_ath[]=84,84,84,84,98,98,98,98,98,98,98,98,98,98,98,98,86,86,86,86,32,32,32,32,33,33;
	lpunch4_ath[]=68,68,76,76,76,76,68,68,68,68,68,68;
	lpunch3b_ath[]=84,84,84,84,85,85,85,85,85,85,85,85,85,85,85,85,86,86,86,86,32,32,32,32,33,33;
	spunch1_ath[]=38,38,38,38,39,39,39,39,40,40,40,40,40,40,41,41,41,41,41,41,41,41,62,62,62,62,62,62,62,62;
	spunch2_ath[]=38,38,39,39,39,39,59,59,59,59,60,60,60,60,60,60,60,62,62,60,62,62,38,38,38,38;
	spunch3_ath[]=88,88,88,88,89,89,89,89,90,90,91,91,91,91,91,91,92,92;
	spunch3b_ath[]=79,79,79,79,80,80,80,80,80,80,81,81,81,81,81,81,81,81,80,80,80,80,79,79,79,79,32,32,32,32,33,33;
	spunch4_ath[]=68,69,69,68,69,69,70,70,70,70,70,70,71,71,71,71,71,71,71,71,69,69,69,69,68,68,68,68;
	spunch5_ath[]=189,189,189,189,189,189,189,189,190,190,190,190,190,190,191,191,191,191,191,191,191,191,191,191,189,189,189,189,189,189;
	lkick1_ath[]=54,54,55,55,56,56,57,57,57,57,58,58,58,58,58,56,56,56;
	lkick2_ath[]=66,66,67,67,67,67,66,66,66,66,66,66;
	lkick3_ath[]=79,79,80,80,80,80,97,97,97,97,97,97,97,97,97,97,80,80,79,79,32,32,32,32,33,33;
	lkick3b_ath[]=79,79,80,80,80,80,87,87,87,87,87,87,87,87,87,87,80,80,79,79,32,32,32,32,33,33;
	lkick4_ath[]=77,77,78,78,78,78,77,77,77,77,77,77;
	skick1_ath[]=42,42,42,42,42,42,43,43,44,44,45,45,45,45,45,45,45,45,45,45,46,46,46,46,46,46,47,47,47,47,48,48,48,48,
    49,49,49,49;
	skick2_ath[]=52,52,61,61,62,62,63,63,64,64,64,64,64,64,64,64,63,63,63,63,63,63,62,62,62,62,62,62;
	skick3_ath[]=79,79,93,93,93,93,94,94,94,94,95,95,95,95,95,95,96,96,96,96,79,79,79,79,32,32,33,33;
	skick3b_ath[]=79,79,82,82,82,82,83,83,83,83,83,83,83,83,82,82,79,79,79,79,32,32,32,32,33,33;
	skick4_ath[]=72,72,73,73,73,73,74,74,74,74,74,74,75,75,75,75,75,75,75,75,74,74,73,73,73,73,72,72,72,72;
	skick5_ath[]=61,61,192,192,193,193,193,193,194,194,194,194,195,195,196,196,196,196,196,196,196,196,195,195,192,192,
    25,25,25,25,25,25;
	toss1_ath[]=61,61,61,61,62,62,62,62,102,102,102,102,102,102,103,103,103,103,103,103,103,103,61,61,61,61,61,61,62,
    62,62,62,62,62;
	tossair_ath[]=99,99,99,99,99,99,99,99,100,100,100,100,100,100,101,101,101,101,101,101,96,96,96,96,99,99,99,99,30,30,30,30,
    31,31,31,31,32,32,32,32,33,33;
	rodaratr_ath[]=62,62,62,62,61,61,61,61,104,104,104,104,105,105,105,105,106,106,107,107,108,108,62,62,61,61,61,61,1,1;
	rodarala_ath[]=61,61,61,61,62,62,62,62,108,108,108,108,107,107,107,107,106,106,105,105,104,104,62,62,61,61,61,61,1,1;
	recuperar_ath[]=0,0,0,0,0,0,170,170,0,0,0,0,170,170,0,0,170,170,0,0,170,170,22,22;
	getup_ath[]=426,426,426,426,426,426,426,426,427,427,427,427,427,427,25,25;
	inicio_ath[]=200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,201,201,201,201,202,202,202,202,
    203,203,203,203,204,204,204,204,205,205,205,205,205,205,205,205,205,205,205,205,205,204,204,204,204,204,203,203,203,
    203,202,202,202,202,201,201,201,206,206,206,206,206,206,206,206,206,206,207,207,208,208,209,209,210,210,211,211,212,
    212,213,213,213,214,214,214,215,215,215,216,216,216,216,217,217,217,217,218,218,218,218,218,218,218,218,219,219,219,
    219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,220,220,220,220,220,
	220,221,221,221,221,221,1;
	burla_ath[]=222,222,222,222,223,223,224,224,225,225,225,225,226,226,226,226,226,226,227,227,227,227,227,227,228,228,
    228,228,228,228,229,229,229,229,229,229,230,230,230,230,230,230,230,230,231,231,231,231,231,231,232,232,232,232,232,
    232,231,231,231,231,232,232,232,232,231,231,231,231,232,232,232,232,231,231,231,231,232,232,232,232,232,232,232,232,
    232,232,232,232,232,232,233,233,233,233,233,233,234,234,234,234,234,234,235,235,235,235,235,235,1;

	psyco_boru[]=130,130,130,131,131,131,132,132,132,132,133,133,133,133,133,133,134,135,135,135,135,135,135,135,135,
    135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,136,136,136,136,136,136,136,136;
	psyco_sodo[]=137,137,138,138,139,139,140,140,141,141,141,141,142,142,142,142,256,256,256,256,257,257,257,257,258,
    258,258,258,259,259,260,260,33,33,33,33,143,143,144,144,145,145,145,145,25,25;
	psyco_rifu[]=146,146,146,146,146,146,147,147,147,147,148,148,149,149,149,149,121,121,122,122,122,122,121,121,121,
    121,122,122,122,122,123,123,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,111,111,111,111,111,111,
    111,111,1;
	psyco_tere[]=211,211,211,211,212,212,212,212,213,213,214,214,215,215,216,216,217,217,218,218,154,154,154,154,155,
    155,154,154,155,155,154,154,155,155,154,154,155,155,154,154,155,155,154,154,156,156,61,61,62,62,62,62;
	phoenix[]=149,149,149,149,149,149,149,149,157,157,157,157,157,157,158,158,158,158,158,158,158,158,159,159,159,159,
    160,160,160,160,160,160,160,160,160,160,161,161,161,161,457,457,457,457,457,457,26,26,26,26,26,26;
	psyco_pres[]=120,120,121,121,122,122,123,123,123,123,124,124,124,124,124,124,124,124,124,124,124,124,124,124,120,
    120,120,120,120,120,162,163,163,163,163,162,163,163,163,163,125,125;

	sp_ath2[]=
    300,300,301,301,302,302,303,303,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,
    305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,
    305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,
    304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,
    304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,
    306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,304,304,305,305,306,306,303,303,303,303,
	302,302,302,302,301,301,301,301,301,301,301,301,300,300;
	sp_ath3[]=150,150,150,150,162,162,162,162,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,
    163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,
    163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,163,
    175,175,176,176,176,176,177,177,177,177,177,177,177,177,177,177,177,177,177,177,177,177,177,177,39,39,38,38;
	sp_ath3_air[]=178,178,179,179,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,
    180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,
	180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,181,181,182,
    182,182,182,183,183,183,183,183,183,183,183,183,183;

	yatta[]=256,256,256,256,256,256,257,257,257,257,257,257,257,257,258,258,258,258,258,258,259,259,259,259,259,259,260,
    260,260,260,260,260,260,260,261,261,261,261,261,261,261,261,262,262,262,262,262,262,262,262,262,262,264,264,263,263,
    263,263,263,263,263,263,263,263,264,264,264,264,265,265,265,265,266,266,266,266,267,267,268,268,269,269,270,270;
	dedos[]=281,281,281,281,281,281,281,281,281,281,282,282,282,282,282,282,282,282,283,283,283,283,283,283,283,283,284,
    284,284,284,284,284,284,284,284,284,285,285,285,285,285,285,285,285,285,285,286,286,286,286,286,286,287,287,287,287,
    287,287,288,288,288,288,289,289,289,289,290,290,290,290,291,291,291,291,292,292,292,292;
	makenai[]=271,271,271,271,272,272,272,272,273,273,273,273,273,273,274,274,274,274,274,274,275,275,275,275,275,275,
    276,276,276,276,277,277,277,277,278,278,278,278,279,279,279,279,280,280,280,280;
	perder_ath[]=236,236,236,236,237,237,237,237,237,237,238,238,238,238,239,239,239,239,240,240,240,240,241,241,241,
    241,242,242,242,242,243,243,243,243,244,244,244,244,244,244,245,245,245,245,246,246,246,246,247,247,247,247,248,248,
    248,248,249,249,249,249,239,239,239,239,239,239,240,240,240,240,241,241,241,241,242,242,242,242,243,243,243,243,244,
    244,244,244,244,244,250,250,250,250,250,250,250,251,251,251,251,251,251,251,251,251,251,251,251,251,251,251,251,251,
    251,251,251,252,252,252,252,253,253,253,253,254,254,254,254,254,254,255,255,255,255,254,254,254,254,254,254,255,255,
    255,255,255,255;
	
	////////////////////iori yagami/////////////////////
	pos_vd[]=1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9;
	ava_vd[]=12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,
    17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20,21,21,21,21,21,21;
	ret_vd[]=22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,25,25,25,25,25,25,26,26,26,26,26,26,27,27,27,27,27,
    27,28,28,28,28,28,28,29,29,29,29,29,29,30,30,30,30,30,30;
	agachado_vd[]=33,33,33,33,33,33,33,33,34,34,34,34,34,34,34,34,35,35,35,35,35,35,35,35,36,36,36,36,36,36,36,36,37,37,
    37,37,37,37,37,37,38,38,38,38,38,38,38,38;
	salto_vd[]=40,40,40,40,41,41,41,41,41,41,42,42,43,43,43,43,44,44,44,44,44,44,45,45,45,45,45,45,44,44,43,43,42,42,41,
    41,41,41;

	lpunch1_vd[]=46,46,47,47,48,48,48,48,49,49,47,47,47,47;
	lpunch2_vd[]=71,71,72,72,73,73,46,46,46,46;
	lkick1_vd[]=50,50,51,51,52,52,53,53,51,51,50,50,50,50;
	lkick2_vd[]=74,74,75,75,76,76,77,77,74,74,74,74;
	spunch1_vd[]=54,54,54,54,55,55,55,55,56,56,57,57,58,58,58,58,59,59,59,59,60,60,60,60,60,60,61,61,61,61,61,61,62,62,
    62,62,62,62;
	spunch2_vd[]=78,78,78,78,79,79,80,80,80,80,81,81,81,81,81,81,82,82,82,82,83,83,83,83,84,84,84,84,84;
	skick1_vd[]=63,63,63,63,64,64,64,64,65,65,66,66,66,66,66,66,67,67,67,67,68,68,69,69,70,70,23,23,23,23;
	skick2_vd[]=85,85,86,86,87,87,88,88,88,88,88,88,87,87,87,87,86,86,86,86,85,85,85,85,89,89,89,89;
	
	correr_vd[]=306,306,306,306,307,307,307,307,307,307,308,308,308,308,309,309,
    309,309,310,310,310,310,303,303,303,303,303,303,304,304,304,304,305,305,305,305;
	barrido_vd[]=108,108,108,108,109,109,110,110,110,110,110,110,111,111,111,111,112,112,112,112,113,113,113,113,114,
    114,114,114,115,115,115,115,116,116,116,116,108,108,108,108,108,108,117,117,117,117,117,117;
	spunchaga_vd[]=99,99,99,99,100,100,100,100,101,101,102,102,103,103,103,103,103,103,
    104,104,104,104,105,105,105,105,106,106,106,106,107,107,107,107;
	toss1_vd[]=138,138,138,138,138,138,139,139,140,140,141,141,141,141,142,142,142,142,
    143,143,143,143,143,143,144,144,144,144,144,144,145,145,145,145,145,145;

	lpunch4_vd[]=90,90,91,91,92,92,92,92,93,93,94,94,90,90,90,90;
	lkick4_vd[]=95,95,96,96,97,97,98,98,98,98,97,97,96,96,90,90,90,90;
	lpunchair_vd[]=43,43,118,118,119,119,120,120,120,120,120,120,120,120,119,119,119,119,119,119,121,121,121,121,122,122;
	lkick3_vd[]=123,123,124,124,124,124,124,124,124,124,124,124,124,124,122,122,122,122;
	spunchair_vd[]=125,125,126,126,127,127,128,128,129,129,129,129,129,129,130,130,131,131;
	skick3_vd[]=132,132,133,133,134,134,135,135,135,135,136,136,136,136,137,137,137,137;
	getup_vd[]=114,114,114,114,114,114,115,115,115,115,115,115,116,116,116,116,116,116,117,117,117,117,117,117,31;
	toss2_vd[]=146,146,146,146,146,146,147,147,148,148,148,148,149,149,149,149,150,150,150,150;

	rodarayala_vd[]=40,40,162,162,162,162,163,163,163,163,164,164,164,164,164,164,
    165,165,165,165,166,166,167,167,168,168,168,168,1,1;
	rodaratra_vd[]=151,151,151,151,152,152,152,152,153,153,153,153,154,154,155,155,
	156,156,157,157,157,157,158,158,159,159,159,159,1,1;
	guasilla_vd[]=207,207,207,207,207,207,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,
    208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,
    208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,207,207,207,207,207,207,1;
	sugu_raku[]=200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,
    200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,201,201,201,201,201,201,201,201,201,201,201,
    201,202,202,202,202,202,202,203,203,203,203,203,203,203,203,204,204,204,204,204,204,204,204,205,205,205,205,205,205,
    205,205,206,206,206,206,206,206,206,206,1;

	iorivskyo[]=227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,227,
    227,227,227,227,228,228,228,228,228,228,229,229,229,229,229,229,228,228,228,228,229,229,229,229,229,229,228,228,228,
    228,228,228,229,229,229,229,228,228,228,228,229,229,229,229,229,229,228,228,228,228,228,228,229,229,229,229,229,229,
    229,229,228,228,228,228,228,228,229,229,229,229,229,229,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,
    228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,230,230,230,230,
    230,230,256,256,256,256,256,256,207,207,207,207,207,207,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1;
	shoryu_iori[]=181,181,182,182,183,183,183,183,184,184,184,184,185,185,186,186,187,187,188,188,188,188,189,189,190,
    190,189,189,40,40,40,40,33,33,33,33,33,33,33,33,40,40,40,40,40,40;
	doshita[]=191,191,192,192,192,192,192,192,192,192,193,193,194,194,194,194,194,194,194,194,195,195,195,195,196,196,
    196,196,196,196,197,197,197,197,197,197,197,197,198,198,198,198,198,198,198,198,198,198,198,198,1;
	aoibana[]=311,311,311,311,312,312,313,313,313,313,314,314,314,314,314,314,315,315,315,315,315,315,315,315,316,316,
    316,316,316,316,316,316;
	aoibana2[]=311,311,311,311,318,318,317,317,318,318,318,318,318,318,
	319,319,319,319,319,319,319,319,320,320,320,320,320,320,320,320,320,320;
	aoibana3[]=40,40,321,321,321,321,321,321,321,321,322,322,323,323,
	324,324,324,324,324,324,324,324,324,324,324,324,324,324,324,324,40,40,40,40;
	uuuoo[]=162,162,162,162,303,303,303,303,304,304,304,304,305,305,305,305,306,306,306,306,307,307,307,307,308,308,308,
    308,31,31,31,31,31,31,325,325,326,326,327,327,328,328,328,328,329,329,330,330,331,331,332,332,333,333,333,333,333,
    333,334,334,334,334,334,334,333,333,333,333,333,333,334,334,334,334,334,334,334,334,334,334,334,334,335,335,335,335,
    335,335,335,335,335,335,336,336,336,336,336,336,336,336,336,336,336,336,1,1,1,1,1,1;
	jugar[]=337,337,338,338,338,338,339,339,339,339,339,339,339,339,339,339,339,339,339,339,338,338,338,338,338,338,337,
	337,337,337,337,337,340,340,340,340,340,340,341,341,341,341,342,342,343,343,344,344,344,344,344,344,345,345,345,345,
	346,346,347,347,347,347,348,348,348,348,348,348,348,348,348,348,348,348,349,349,349,349,349,349,350,350,350,350,1;

	sono[]=215,215,215,215,215,215,216,216,216,216,216,216,216,216,217,217,217,217,217,217,217,217,217,217,217,217,217,
    217,217,217,217,217,217,217,217,217,217,217,217,217,217,217,217,217,217,217,216,216,216,216,219,219,218,218,218,218,
    219,219,219,219;
	risillas[]=231,231,231,231,232,232,232,232,232,232,233,233,233,233,233,233,232,232,232,232,232,232,233,233,233,233,
    233,233,233,233,232,232,232,232,232,232,232,232,233,233,233,233,233,233,233,233,232,232,232,232,232,232,232,232,233,
    233,233,233,233,233,233,233,234,234,234,234,234,234,234,234,234,234,235,235,235,235,235,235,235,235,236,236,236,236,
    236,236,235,235,235,235,235,235,236,236,236,236,236,236,235,235,235,235,235,235,235,236,236,236,236,236,236,236,236,
    235,235,235,235,235,235,235,235,236,236,236,236,236,236,236,236,235,235,235,235,235,235,236,236,236,236,236,236,235,
    235,235,235,235,235,236,236,236,236,236,236,235,235,235,235,235,235,236,236,236,236,236,236,236,236,236,236,236,236,
    236,236,237,237,237,237,237,237,237,237,237,237,238,238,238,238,238,238,239,239,239,239,239,238,238,238,238,238,238,
    239,239,239,239,239,239,238,238,238,238,238,238,239,239,239,239,239,239,238,238,238,238,238,238,239,239,239,239,239,
    239,238,238,238,238,238,238,239,239,239,239,239,239;
	tsuki[]=220,220,220,220,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,
    221,221,221,221,221,222,222,222,222,222,222,223,223,223,223,223,223,224,224,224,224,224,224,225,225,225,225,225,225,
    226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,
    226,226,226,226,226,226,226;

	sp_iori2[]=352,352,351,351,351,351,352,352,352,352,162,162,162,162,163,163,163,163,164,164,164,164,165,165,165,165,
    166,166,166,166,166,166,167,167,167,167,167,167,167,167,168,168,168,168,168,168,168,168,168,168,40;
	sp_iori3[]=168,168,71,71,72,72,73,73,71,71,45,47,48,48,49,49,47,78,79,80,81,81,82,82,83,84,191,192,193,193,196,196,
    197,198,54,55,56,57,58,58,59,60,61,61,358,358,359,360,361,362,54,54,55,55,56,56,57,57,58,58,59,59,60,60,61,61,353,
    353,353,353,353,353,353,353,354,354,354,354,354,354,355,355,356,356,355,355,355,355,355,355,355,355,355,355,355,355,
    355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,354,354,354,354,354,
    354,354,354,354,354,356,356,356,356,356,356,356,356,356,356,356,356,356,356,355,355,355,355,357,357,357,357,1;
	sp_iori4[]=330,330,331,331,332,332,333,333,333,333,333,333,334,334,334,334,334,334,333,333,333,333,333,333,333,333,
    333,333,334,334,334,334,334,334,334,334,334,334,334,334,333,333,333,333,333,333,333,333,333,333,334,334,334,334,334,
    334,334,334,334,334,334,334,333,333,333,333,333,333,333,333,333,333,334,334,334,334,334,334,334,334,334,334,334,334,
    334,334,334,334,334,334,335,335,335,335,346,346,347,347,347,347,348,348,348,348,348,348,349,349,349,349,349,349,349,
    349,349,349,349,349,349,349,349,349,349,349,350,350,350,350,350,350,1;

	perder_iori[]=209,209,209,209,209,209,209,209,210,210,210,210,210,210,210,210,210,210,210,210,210,210,211,211,211,
    211,212,212,212,212,213,213,213,213,214,214,214,214;

	sp_honto[]=191,191,192,192,192,192,193,193,193,193,194,194,194,194,195,195,195,195,195,195,196,196,196,196,196,196,
    257,257,257,257,258,258,258,258,259,259,259,259,260,260,260,260,261,261,261,261,262,262,262,262,263,263,263,263,264,
	264,264,264,265,265,265,265,265,265,198,198,198,198,198,198,198,198,1,1,266,266,266,266,266,266,267,267,267,267,267,
    267,268,268,268,268,268,268,269,269,269,269,269,269,270,270,270,270,270,270,270,270,270,270,270,270,270,270,269,269,
    268,268,267,267,266,266,271,271,272,272,272,272,273,273,273,273,274,274,274,274,275,275,275,275,273,273,273,273,274,
    274,274,274,275,275,275,275,273,273,273,273,274,274,274,274,275,275,275,275,273,273,273,273,274,274,274,274,275,275,
    275,275,275,275,275,275,275,275,275,275,275,275,275,275,275,275,275,275,275,275,275,275,162,162,162,162,162,162,162,
    162,1;
	
	////////////////////terry b.///////////////////////
    pos[]=1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,4,4,4,4,4,4,3,3,3,3,3,3,2,2,2,2,2,2;
	avan[]=6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,1,1,1,1,1,1;
	retro[]=10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14;
	salto[]=15,15,15,15,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,
    20,20,20,20,20,20,19,19,19,19,19,19,18,18,18,18,18,18,17,17,17,17;
	
	lpunch1[]=21,21,22,22,22,22,21,21,21,21,21,21;
	lkick1[]=23,23,24,24,25,25,25,25,26,26,26,26,27,27,27,27,27,27;
	spunch1[]=28,28,28,28,28,28,29,29,29,29,30,30,30,30,30,30,30,30,31,31,31,31,31,31,32,32,32,32,32,32,32,32;
	skick1[]=69,69,70,70,71,71,72,72,73,73,74,74,74,74,75,75,76,76,77,77,77,77,78,78,78,78,79,79,79,79,80,80,80,80,71,
    71,71,71,70,70,70,70;
	lpunch2[]=32,32,97,97,97,97,21,21,21,21,21,21;
	lkick2[]=98,98,98,98,99,99,99,99,98,98,98,98;
	spunch2[]=39,39,39,39,39,39,40,40,40,40,40,40,41,41,41,41,41,41,41,41,41,41,40,40,40,40,40,40,39,39,39,39,39,39;
	skick2[]=42,42,42,42,98,98,43,43,44,44,44,44,45,45,45,45,46,46,46,46,47,47,47,47,47,47;
	lpunch3[]=57,57,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,117,117,117,117;
	lkick3[]=59,59,60,60,61,61,60,60,61,61,60,60,61,61,60,60,61,61,59,59,117,117,117,117;
	spunch3[]=62,62,62,62,62,62,63,63,63,63,63,63,63,63,63,63,62,62,62,62,62,62,19,19,19,19,18,18,17,17,17,17;
	skick3[]=64,64,64,64,64,64,65,65,65,65,66,66,66,66,66,66,66,66,67,67,67,67,67,67,68,68,68,68,19,19,19,19,18,18,18,
    18,17,17,17,17;
	lpunch4[]=48,48,49,49,49,49,48,48,48,48,48,48;
	lkick4[]=50,50,51,51,51,51,50,50,50,50,50,50;
	spunch4[]=52,52,52,52,52,52,53,53,53,53,53,53,53,53,53,53,52,52,52,52,52,52,52,52;
	skick4[]=54,54,54,54,55,55,55,55,56,56,56,56,56,56,56,56,56,56,56,56,55,55,55,55,55,55,54,54,54,54,54,54;
	spunch5[]=192,192,193,193,193,193,194,194,194,194,195,195,195,195,196,196,196,196,196,196,197,197,197,197,197,197,
    198,198,198,198,198,198,198,198,198,198,198,198,199,199,199,199,199,199,1;
	skick5[]=33,33,33,33,34,34,34,34,35,35,35,35,185,185,186,186,186,186,187,187,187,
    187,188,188,188,188,188,188,189,189,189,189,189,189,190,190,190,190,190,190,1;
	toss1[]=33,33,34,34,34,34,35,35,35,35,36,36,36,36,36,36,37,37,37,37,38,38,38,38,38,38,15,15,15,15,15,15,15,15,15,15,15,15;
	toss2[]=59,59,59,59,59,59,94,94,94,94,94,94,95,95,95,95,95,95,95,95,96,96,96,96,96,96,96,96,59,59,59,59,59,59,18,18,18,18,18,18,17,17,17,17,17,17;
	skick94[]=170,170,170,170,171,171,171,171,172,172,172,172,172,172,172,172,172,172,171,171,171,171,171,171,170,170,170,170,170,170,170,170;
	askick94[]=134,134,122,122,122,122,131,131,131,131,131,131,131,131,132,132,132,132,132,132,132,132,134,134,134,134,18,18,18,18,17,17,17,17;
	askick95[]=34,34,35,35,35,35,173,173,173,173,173,173,173,173,174,174,174,174,174,174,19,19,19,19,19,19,18,18,18,18,17,17,17,17;
	alkick94[]=175,175,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,175,175,175,175,18,18,18,18,17,17,17,17;

	arenfri[]=125,125,125,125,126,126,126,126,127,127,128,128,129,129,130,130,130,130,130,130,130,
	130,130,130,130,130,130,130,130,130,130,130,130,128,128,128,128,128,128,15,15,15,15,15,15;
	burn_knu[]=236,236,236,118,118,118,118,119,119,120,120,121,121,121,121,121,121,121,121,121,
    121,121,121,121,121,121,121,121,121,109,109,109,109,109,109,109,109,109,109,108,108;
	spinning[]=110,110,111,111,112,112,113,113,114,114,114,114,115,115,116,116,116,116,113,113,113,113,114,114,114,114,
    115,115,116,116,116,116,117,117,117,117,117,117,15,15,16,16,16,16,16,16,15,15,15,15;
	crack_shoot[]=100,100,101,101,102,102,102,102,102,102,103,103,103,103,104,104,105,105,
    106,106,107,107,107,107,107,107,108,108,109,109,109,109,109,109,108,108,108,108,108,108;
	power_charge[]=159,159,159,159,160,160,161,161,162,162,163,163,163,163,164,164,164,164,
    164,164,164,164,164,164,164,164,165,165,165,165,165,165,166,166,166,166,166,166,1;
	power_dunk[]=108,108,109,109,120,120,147,147,147,147,147,147,148,148,148,148,149,149,149,149,150,150,151,151,152,
    152,153,153,154,154,153,153,154,154,154,154,154,154,155,155,156,156,156,156,157,157,157,157,158,158,158,158;
	dashkick[]=177,177,177,177,178,178,178,178,179,179,180,180,180,180,180,180,180,180,180,180,181,181,182,182,182,182,
    183,183,184,184,185,185,186,186,187,187,187,187,187,187,187,187,187,187,188,188,188,188,188,188,189,189,189,189,189,
    189,190,190,190,190,190,190,1;
	dashmis[]=191,191,191,191,191,191,191,191,426,426,426,426,426,426,426,426,
    427,427,427,427,427,427,16,16,16,16,16,16,15,15,15,15,1;
	final[]=79,79,79,79,79,79,28,28,120,120,121,121,133,133,121,121,133,133,121,121,133,
    133,108,108,109,109,109,109,109,109,109,109,109,109,109,109,108,108,108,108,108,108,1;
	power_geiser[]=123,123,124,124,125,125,126,126,127,127,128,128,129,129,130,130,130,
    130,130,130,130,130,130,130,130,130,130,130,130,130,128,128,127,127,127,127;
	super_power[]=124,124,124,124,124,124,124,124,167,167,168,168,169,169,169,169,169,169,124,124,125,125,126,126,127,
    127,129,129,130,130,130,130,130,130,130,130,130,130,130,130,127,127,127,127,127,127;

	getup[]=426,426,426,426,426,426,426,426,427,427,427,427,427,427,15,15;
	correr[]=81,81,81,81,81,81,82,82,82,82,83,83,83,83,84,84,84,84,84,84,85,85,85,85,86,86,86,86;
	rodarala[]=135,135,135,135,136,136,136,136,137,137,137,137,138,138,138,138,139,139,140,140,141,141,141,141,142,142,
    142,142,1,1;
	rodaratra[]=142,142,142,142,141,141,141,141,140,140,140,140,139,139,138,
	138,137,137,137,137,136,136,136,136,135,135,135,135,1,1;
	vacile_inicial[]=1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,213,213,213,213,213,213,213,213,214,214,214,
    214,214,214,214,214,215,215,215,215,215,215,215,215,214,214,214,214,214,214,214,214,215,215,215,215,215,215,215,215,
    214,214,214,214,214,214,214,214,215,215,215,215,215,215,215,215,213,213,213,213,213,213,216,216,216,216,216,216,216,
    216,217,217,217,217,217,217,217,217,216,216,216,216,216,216,216,216,217,217,217,217,217,217,217,217,216,216,216,216,
    216,216,216,216,217,217,217,217,217,217,217,217;
	hey_comeon[]=213,213,213,213,213,213,213,213,214,214,214,214,214,214,214,214,215,215,215,215,215,215,215,215,214,
    214,214,214,214,214,214,214,215,215,215,215,215,215,215,215,214,214,214,214,214,214,214,214,215,215,215,215,215,215,
    215,215,213,213,213,213,213,213,216,216,216,216,216,216,216,216,217,217,217,217,217,217,217,217,216,216,216,216,216,
    216,216,216,217,217,217,217,217,217,217,217,216,216,216,216,216,216,216,216,217,217,217,217,217,217,217,217;
	ok[]=224,224,224,224,225,225,225,225,226,226,226,226,227,227,227,227,228,228,228,228,229,229,229,229,229,229,230,
    230,230,230,231,231,231,231;
	ok2[]=218,218,218,218,218,218,219,219,219,219,219,219,220,220,220,220,220,220,
    221,221,221,221,221,221,221,221,221,221,221,221,222,222,223,223,223,223,223,223;
	gorra_puta[]=200,200,201,201,201,201,202,202,202,202,203,203,203,203,204,204,204,204,205,205,205,205,206,206,206,
    206,206,206,207,207,207,207,207,207,207,207,206,206,206,206,205,205,205,205,205,205,204,204,204,204,204,204,205,205,
    205,205,206,206,206,206,206,206,207,207,207,207,207,207,207,207,206,206,206,206,205,205,205,205,204,204,204,204,208,
    208,208,208,208,208,209,209,209,209,209,209,209,209,210,210,210,210,210,210,211,211,211,211,211,211,211,211,212,212,
    212,212,212,212;
	perder_terry1[]=232,232,232,232,232,232,233,233,233,233,233,233,234,234,234,234,234,234,235,235,235,235;
	perder_terry2[]=15,15,15,15,16,16,16,16,16,16,427,427,427,427;

	///////////////////crimson yagami new animations//////
	llamanar[]=1,1,1,1,1,1,1,1,243,243,244,244,244,244,245,245,245,245,246,246,246,246,247,247,247,247,248,248,248,248,
    249,249,249,249,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
    250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
	250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
    250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
    250,250,250,250,250,250,250,250,251,251,252,252,252,252,253,253,253,253,253,253,253,253,253,253,254,254,254,254,254,
    254,254,254,254,254,254,254,254,254,254,254,254,254,254,254,254,254,254,254,255,255,255,255,255,255,255,255,1,1,1,
    1,1,1,1,1,1,1;
	fogata1[]=55,55,55,55,56,56,57,57,58,58,58,58,59,59,59,59,60,60,60,60,60,60,60,60,61,61,61,61,62,62,62,62;
	fogata2[]=60,60,60,60,358,358,358,358,359,359,359,359,360,360,360,360,361,361,361,361,361,361,362,362,362,362,362,362,362,362,1;
	taconcr[]=288,288,289,289,290,290,290,290,291,291,291,291,291,291,292,292,292,292,293,293,294,294,295,295,295,295,
    295,295,295,295,296,296,296,296,296,296,297,297,297,297,297,297,298,298,298,298,298,298,299,299,299,299,299,299;
	patadat[]=380,380,380,380,380,380,381,381,382,382,381,381,381,381,381,381,381,381,381,381,380,380,122,122,380,380,122,122;
	usted_crimson[]=354,354,354,354,354,354,355,355,356,356,356,356,355,355,355,355,355,355,355,355,355,355,355,355,355,
    355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,355,354,354,354,354,354,354,356,356,
    356,356,356,356,356,356,355,355,355,355,355,355,355,355,355,355,357,357,357,357,145,145,145,145,145,145,145,145,145,
    145,145,145,145,145,145,145,145,145,145,145,145,145,1,1,1;
	doshita_cr[]=191,191,191,191,191,191,192,192,192,192,193,193,194,194,194,194,194,194,194,194,195,195,195,195,195,
    195,196,196,196,196,196,196,197,197,197,197,197,197,197,197,198,198,198,198,198,198,198,198,198,198,198,198;
	spk_crimson[]=365,365,366,366,367,367,368,368,369,369,370,370,371,371,372,372,373,373,374,374,375,375,376,376,376,
    376,376,376,376,376,376,376,376,376,377,377,377,377,377,377,378,378,378,378,379,379,379,379,1;
	spk_crimson2[]=365,365,365,366,366,366,367,367,367,368,368,368,369,369,369,370,370,370,371,371,371,372,372,372,373,
    373,373,374,374,374,375,375,375,376,376,376,376,376,376,376,376,376,376,376,376,377,377,377,377,377,377,378,378,378,
    378,379,379,379,379,1;

	sp_crimson2[]=244,244,245,245,246,246,249,249,249,249,192,192,193,193,194,194,
    194,194,194,194,194,194,195,195,196,196,197,197,198,198,198,198;
	sp_crimson[]=99,99,100,100,101,101,102,102,104,104,55,55, 57,57,58,58,59,59,181,181,182,182,183,183,184,184,185,185,
	186,186,187,187,188,188,189,189,190,190,189,189,190,190,189,189,190,190,31,31,32,32,32,32,33,33;
	sp_crimson3[]=99,99,100,100,101,101,102,102,104,104,55,55, 57,57,58,58,59,59, 181,181,182,182,183,183,184,184,185,
    185,187,187,188,188,180,180,181,181,182,182,183,183,184,184,185,185,186,186,187,187,188,188,189,189,190,190,189,189,
    190,190,189,189,190,190,31,31,32,32,32,32,33,33,31,31,231,231,233,233,234,234,234,234,235,235,235,235,235,235,235,
    235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,235,236,236,236,236,236,236,236,236,236,236,
    236,236,236,236,236,236,236,236,233,231,231,1;

	perder_crimson[]=234,234,234,234,236,236,236,236,235,235,235,235,235,235,235,
    235,235,235,235,235,235,235,235,235,235,235,236,236,236,236;
	aoi_crimson[]=311,311,311,311,311,311,311,311,317,317,318,318,318,318,319,319,319,
    319,319,319,320,320,320,320,320,320,320,320,320,320,1;
	pasota[]=206,206,206,206,205,205,205,205,204,204,204,204,204,204,203,203,203,203,203,203,203,203,203,203,203,203;
	ganar_crimson[]=220,220,220,220,221,221,221,221,240,240,240,240,240,240,240,240,240,240,240,240;


	///////////////kasumi todo////////////////////

	pos_kas[]=2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,
	4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,
	3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,
	2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,
	7,7,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1;
	avz_kas[]=8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,11,11,11,11,11,11,10,10,
	10,10,10,10,9,9,9,9,9,9;
	rew_kas[]=12,12,12,12,12,12,11,11,11,11,11,11,10,10,10,10,10,10,9,9,9,9,9,9,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,
	10,10,11,11,11,11,11,11;
	sal_kas[]=14,14,14,14,17,17,17,17,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20,20,20,21,21,21,21;
	sal_kas_avz[]=14,14,14,14,17,17,17,17,17,17,22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,25,25,25,25,25,25,21,21,21,21;
	sal_kas_rew[]=14,14,14,14,17,17,17,17,25,25,25,25,24,24,24,24,23,23,23,23,22,22,22,22,21,21,21,21;

	lpunch1_kas[]=26,26,27,27,28,28,28,28,26,26,26,26,26,26;
	lpunch2_kas[]=26,26,48,48,48,48,49,49,49,49,49,49,49,49;
	lpunch3_kas[]=129,129,130,130,131,131,132,132,132,132,132,132,133,133,134,134,134,134,134,134,134,134,134,134,134,
	134,134,134,132,132,132,132,132,132,132,132,131,131,131,131,131,131,41,41,41,41,1;
	lkick1_kasu[]=29,29,30,30,31,31,32,32,33,33,33,33,32,32,32,32,34,34,34,34,34,34,1;
	lkick2_kasu[]=47,47,50,50,51,51,52,52,53,53,53,53,54,54,54,54,47,47,47,47;
	
    spunch1_kas[]=35,35,35,35,35,35,36,36,36,36,37,37,38,38,39,39,39,39,39,39,
	40,40,40,40,40,40,40,40,40,40,39,39,39,39,39,39,38,38,38,38,29,29,1;
	spunch2_kas[]=55,55,56,56,56,56,57,57,57,57,58,58,58,58,58,58,58,58,56,56,56,56,56,56;
	skick1_kasu[]=29,29,29,29,41,41,41,41,42,42,42,42,43,43,43,43,43,43,
	44,44,44,44,44,44,44, 45,45,45,45,45,46,46,46,46,46,1;
	skick2_kasu[]=75,75,75,75,76,76,77,77,78,78,78,78,78,78,78,78,79,79,79,79,77,77,77,77,77,77,29,29;
	dlpunch_kas[]=16,16,59,59,60,60,60,60,61,61,61,61,62,62,62,62,62,62;
	dlkick_kasu[]=63,63,64,64,64,64,64,64,65,65,65,65,63,63,63,63,63,63;
	dspunch_kas[]=59,59,59,59,66,66,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,68,68,68,68,98,98,98,98;
	dskick_kasu[]=69,69,70,70,71,71,71,71,72,72,72,72,72,72,73,73,73,73,73,73,74,74,74,74,74,74,69,69,69,69,69,69,16,16;
	alpunch_kas[]=80,80,81,81,82,82,82,82,83,83,83,83,83,83,83,83,83,83,83,
    83,83,83,83,83,83,83,83,83,83,83,20,20,20,20,20,20,21,21;
	alkick_kasu[]=80,80,84,84,85,85,86,86,86,86,86,86,87,87,87,87,87,87,87,87,87,
    87,87,87,87,87,87,87,87,87,20,20,20,20,20,20,21,21;
	aspunch_kas[]=81,81,81,81,88,88,89,89,89,89,89,89,90,90,90,90,20,20,20,20,20,20,21,21,21,21;
	askick_kasu[]=80,80,91,91,91,91,91,91,92,92,93,93,94,94,93,93,94,94,93,93,94,94,92,92,92,92,20,20,20,20,21,21;
	tossflr_kas[]=13,13,13,13,59,59,95,95,96,96,96,96,96,96,97,97,97,97,97,97,97,97,98,98,98,98,98,98,98,98,98,98;
	tossair_kas[]=84,84,85,85,100,100,101,101,102,102,103,103,104,104,104,104,104,104,105,105,20,20,20,20,20,20,21,21;

	rodara_kas[]=14,14,125,125,125,125,107,107,107,107,108,108,108,108,108,108,
    109,109,109,109,109,109,127,127,128,128,14,14,1,1;
	rodarb_kas[]=106,106,106,106,106,106,107,107,107,107,107,107,108,108,108,
	108,108,108,109,109,109,109,127,127,127,127,128,128,1,1;

	kasumi_pres[]=200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,
	200,200,200,200,200,201,201,201,201,201,201,201,201,202,202,202,202,202,202,202,202,203,203,203,203,203,203,203,
    203,204,204,204,204,204,204,204,204,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,206,206,206,
	206,206,206,206,206,207,207,207,207,207,207,207,207,208,208,208,208,208,208,208,208,209,209,209,209,209,209,209,
	209,210,210,210,210,210,210,210,210,211,211,211,211,211,211,211,211,209,209,209,209,209,209,209,209,98,98,98,98,
	98,98,1,1,1,1,1,1;
	kyokugenryu[]=220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,
	220,220,220,220,220,221,221,221,221,221,221,221,221,249,249,249,249,249,249,249,249,250,250,250,250,250,250,250,
	250,250,250,250,250,250,250,249,249,249,249,249,249,221,221,221,221,221,221,220,220,220,220,220,220,220,220,220,
	220,219,219,219,219,219,219,219,219,251,251,251,251,251,251,251,251,252,252,252,252,252,252,252,252,253,253,253,
	253,253,253,253,253,253,253,254,254,254,254,254,254,255,255,255,255,255,255,255,255,1,1,1,1,1;
	chouhatsuka[]=212,212,213,213,213,213,300,300,300,300,300,300,214,214,215,215,215,215,215,215,216,216,216,216,216,
	216,216,216,215,215,215,215,216,216,216,216,215,215,215,215,215,215,216,216,216,216,216,216,216,216,215,215,215,
    215,215,215,216,216,216,216,216,216,216,216,216,216,215,215,215,215,215,215,216,216,216,216,216,216,216,216,216,
	216,216,216,216,216,217,217,217,217,217,217;

	countera1[]=135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,136,
	136,136,136,137,137,137,137,138,138,138,138;
	countera2[]=144,144,144,144,144,144,145,145,145,145,145,145,146,146,146,146,146,146,146,146,146,146,146,146,147,
	147,147,147,148,148,149,149,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,110,
	110,110,110,110,110,111,111,111,111,111,111;
	counterb1[]=139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,139,140,
	140,140,140,140,140,141,141,141;
	counterb2[]=142,142,142,142,143,143,143,143,30,30,31,31,32,32,33,33,33,33,33,33,32,32,32,32,34,34,34,34,34,1;

	mvkasumi1[]=119,119,119,119,120,120,120,120,121,121,121,121,122,122,122,122,122,122,122,122,122,122,122,122,122,
	122,122,122,122,122,122,122,122,122,122,122,122,122,123,123,124,124,125,125,125,125,126,126,126,126,126,126,126,
	126,126,126,126,126,126,126,126,126,127,127,127,127,127,127,128,128,128,128,128,128,98,98,98,98,98,98;
	mvkasumi2[]=35,35,36,36,37,37,38,38,39,39,39,39,39,39,41,41,41,41,55,55,56,56,57,57,58,58,58,58,58,58,58,58,56,56,56,56,56,56;
	mvkasumi3[]=156,156,157,157,158,158,158,158,158,158,159,159,160,160,159,159,159,159,159,159,158,158,158,158,158,
	158,157,157,157,157,157,157,156,156,156,156,156,156,41,41,41,41,41,41,1;
	mvkasumi4[]=389,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,398,
	398,398,398,398,398,150,150,150,150,151,151,151,151,152,152,153,153,154,154,155,155,155,155,155,155,155,155,155,
	155,155,155,155,155,153,153,153,153,153,153,153,153,41,41,41,41,41,41,1;
	mvkasumi5[]=84,84,85,85,100,100,101,101,102,102,102,102,103,103,104,104,105,105,80,80,107,107,108,108,109,109,59,
	59,95,95,96,96,96,96,97,97,97,97,97,97,97,97,97,97,98,98,98,98,98,98,98,98;
	mvkasumi6[]=304,304,304,304,304,304,73,73,73,73,70,70,64,64,64,64,65,65,16,16,42,42,42,43,43,43,43,44,44,44,44,
	44,45,45,45,45,45,45,46,46,46,46,46,46,47,47,47,47,47,47;
	mvkasumi7[]=26,26,27,27,28,28,35,35,36,36,37,37,38,38,39,39,42,42,43,43,69,69,73,73,72,72,71,71,69,69,150,150,161,
	161,163,163,162,162,162,162,162,162,162,162,161,161,161,161,13;
	mvkasumi8[]=164,164,164,164,165,165,166,166,167,167,168,168,168,168,168,168,168,168,168,168,168,168;
	spkasumi1[]=169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,
    169,169,169,169,169,169,169,169,169,169,169,169,169,170,170,170,170,170,170;
	win1_kasu[]=26,26,26,26,48,48,48,48,48,48,49,49,49,49,49,49,49,49,49,49,26,26,26,26,27,27,27,27,27,27,28,28,28,28,
	28,28,26,26,26,26,26,26,47,47,47,47,50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,54,54,54,54,47,47,47,47,55,55,
	55,55,56,56,57,57,57,57,58,58,58,58,58,58,58,58,58,58,56,56,56,56,56,56,212,212,212,212,212,212,213,213,213,213,213,
	213,229,229,229,229,229,229,229,229,229,229,230,230,230,230,230,230,231,231,231,231,231,231,232,232,232,232,232,232;
	win2_kasu[]=218,218,218,218,218,218,219,219,219,219,219,219,219,219,220,220,220,220,220,220,220,220,221,221,221,221,
	221,221,221,221,222,222,222,222,222,222,222,222,223,223,223,223,223,223,224,224,224,224,224,224,223,223,223,223,223,
	223,223,223,224,224,224,224,224,224,224,224,224,224,222,222,222,222,222,222,222,222,221,221,221,221,221,221,225,225,
	225,225,225,225,225,225,226,226,226,226,226,226,227,227,227,227,228,228,228,228,227,227,227,227,228,228,228,228,227,
	227,227,227,228,228,228,228,227,227,227,227;
	win3_kasu[]=218,218,218,218,218,218,219,219,219,219,219,219,219,219,220,220,220,220,220,220,220,220,233,233,233,233,
	233,233,233,233,234,234,234,234,234,234,235,235,235,235,235,235,234,234,234,234,234,234,235,235,235,235,235,235,236,
	236,236,236,236,236,236,236,237,237,237,237,237,237,238,238,238,238,238,238,239,239,239,239,239,239,240,240,240,240,
	240,240,240,241,241,241,241,241,241,241,241,242,242,242,242,242,242,242,242,242,242,243,243,243,243;
	lose_kasu[]=244,244,244,244,244,244,396,396,396,396,396,396,245,245,245,245,245,245,245,245,245,245,246,246,246,246,
	246,246,247,247,247,247,247,247,248,248,248,248;

	spkasumi2[]=144,144,144,144,144,144,144,144,144,144,144,144,144,144,144,144,145,145,145,145,146,146,146,146,146,146,
	171,171,171,171,171,171,171,171,172,172,172,172,172,172,173,173,173,173,174,174,174,174,175,175,176,176,177,177,177,
	177,177,177,177,177,128,128,128,128,26,26,178,178,179,179,180,180,180,180,180,180,181,181,182,182,182,182,182,182,
	182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,182,128,182,182,182,182,182,
	128,128,128,128,128,128,128,128,128,128,128,98,98,98,98,98,98,1;
	spkasumi3[]=26,26,48,48,49,49,55,55,56,56,67,67,68,68,57,57,58,58,56,56,51,51,52,52,53,53,54,54,47,47,47,47;

	
	/////////takuma//////////////////////////
	pos_taku[]=1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,5,5,5,5,
	5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2;
	ava_taku[]=7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12;
	ret_taku[]=12,12,12,12,12,12,12,12,11,11,11,11,11,11,11,11,10,10,10,10,10,10,10,10,9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7;
	antonio []=200,200,200,200,200,200,201,201,201,201,201,201,202,202,202,202,202,202,203,203,203,203,203,203,202,202,
	202,202,202,202,201,201,201,201,201,201,202,202,202,202,202,202,203,203,203,203,203,203,202,202,202,202,202,202,201,
	201,201,201,201,201,200,200,200,200,200,200,1;
	run_taku[]=304,304,304,304,304,304,305,305,305,305,306,306,306,306,307,307,307,307,307,307,308,308,308,308,309,309,309,309;
	sal_taku[]=13,13,13,13,16,16,16,16,16,16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20;
	sal_taku_ret[]=13,13,13,13,13,13,16,16,16,16,16,16,24,24,24,24,24,24,23,23,23,23,22,22,22,22,21,21,21,21,20,20,20,20;
	sal_taku_ava[]=13,13,13,13,13,13,16,16,16,16,16,16,17,17,17,17,17,17,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24;
	lpunch1_taku[]=25,25,26,26,26,26,27,27,27,27,27,27;
	lpunch2_taku[]=50,50,51,51,52,52,52,52,53,53,53,53,53,53;
	lpunch3_taku[]=103,103,134,134,135,136,136,137,137,137,137,137,137,137,137,138,138,138,138,138,138,138,138,58,58,58,
	58,58,58,59,59,59,59;
	lpuncha_taku[]=69,69,70,70,70,70,69,69,69,69,69,69;
	lpunchair_taku[]=85,85,85,85,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,86,85,85,85,85,85,85,19,19,19,19;
	lkick1_taku[]=28,28,29,29,30,30,31,31,31,31,32,32,30,30,29,29,28,28;
	lkick2_taku[]=28,28,54,54,55,55,56,56,56,56,55,55,54,54,28,28,28,28;
	lkick3_taku[]=323,323,323,323,324,324,325,325,326,326,327,327,328,328,329,329,330,330,330,330,330,330,330,330,331,331,
	331,331,331,331,332,332,332,332,332,332,332,332,333,333,333,333,333,333,333,333,53,53,53,53,53,53,53,53;
	lkicka_taku[]=71,71,72,72,72,72,71,71,71,71,71,71;
	lkickairx_taku[]=87,87,87,87,88,88,88,88,88,88,88,88,88,88,88,88,88,88,87,87,87,87,87,87,19,19,19,19;
	lkickair_taku[]=89,89,90,90,91,91,92,92,92,92,92,92,92,92,92,92,92,92,92,92,93,93,93,93,19,19,19,19;
	spunch1_taku[]=25,25,33,33,33,33,34,34,34,34,35,35,36,36,36,36,36,36,36,36,36,36,37,37,37,37,37,37,38,38,38,38,39,39,39,39;
	spunch2_taku[]=57,57,57,57,57,57,58,58,58,58,58,58,58,58,58,58,58,58,58,58,59,59,59,59,59,59,59,59;
	spuncha_taku[]=14,14,14,14,77,77,77,77,73,73,74,74,75,75,75,75,76,76,76,76,76,76,74,74,74,74,73,73,73,73,77,77,77,77,14,14,14,14;
	spunchair_taku[]=94,94,95,95,95,95,95,95,96,96,96,96,97,97,97,97,97,97,98,98,98,98,98,98,98,98,99,99,99,99,99,99,19,19,19,19;
	skick1_taku[]=40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45,45,45,45,45,45,46,46,46,46,47,47,47,47,
	48,48,48,48,49,49,49,49;
	skick2_taku[]=60,60,60,60,61,61,61,61,62,62,62,62,63,63,64,64,65,65,65,65,66,66,66,66,67,67,67,67,67,68,68,68,68,68,68;
	skicka_taku[]=69,69,69,69,69,69,78,78,78,78,79,79,79,79,79,79,79,79,79,79,
	80,80,80,80,80,80,81,81,81,81,82,82,82,82,83,83,83,83,84,84,84,84;
	skick3_taku[]=355,355,356,356,356,356,356,356,357,357,357,357,358,358,358,358,358,358,359,359,359,359,359,359,356,356,
	356,356,356,356,356,356,356,356,28,28,28,28,28,28,27,27,27,27;
	skickair_taku[]=89,89,89,90,90,90,91,91,100,100,100,101,101,101,101,101,101,101,102,102,102,102,93,93,93,93,19,19,19,19;
	toss_taku[]=103,103,103,103,103,103,57,57,57,57,58,58,104,104,104,104,104,
	104,104,104,105,105,105,105,105,105,105,105,58,58,58,58,58,58,59,59,59,59,59,59;
	tossair_taku[]=29,29,29,29,90,90,90,90,91,91,106,106,107,107,107,107,107,107,108,108,108,108,109,109,109,109,109,109,19,19;
	start_taku[]=204,204,204,204,205,205,205,205,206,206,206,206,1;
	
	win1_taku[]=227,227,227,227,227,227,227,227,228,228,228,228,228,228,228,228,229,229,229,229,229,229,229,229,230,230,
	230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,231,231,231,231,231,231,231,
	231,232,232,232,232,232,232,233,233,233,233,233,233,234,234,234,234,234,234,235,235,235,235;
	win2_taku[]=241,241,241,241,241,241,242,242,242,242,242,242,242,242,
	242,242,242,242,243,243,243,243,243,243,244,244,244,244;
	win3_taku[]=245,245,245,245,246,246,246,246,247,247,247,247,249,249,249,249,249,249,248,248,248,248,248,248,249,249,
	249,249,249,249,248,248,248,248,249,249,249,249,249,249,248,248,248,248,248,248,249,249,249,249,249,249,249,249,248,
	248,248,248,249,249,249,249,249,249,248,248,248,248,248,248,248,248,249,249,249,249,249,249,249,249,248,248,248,248,
	249,249,249,249,249,249,248,248;
	time_taku[]=236,236,236,236,236,236,237,237,237,237,237,237,238,238,238,238,238,238,239,239,239,239,239,239,240,240,240,240,240,240;
	rodar_taku[]=110,110,110,110,110,110,111,111,111,111,111,111,112,112,112,112,112,112,113,113,113,113,114,114,114,114,115,115,115,115,1;
	kohken[]=144,144,145,145,146,146,147,147,148,148,149,149,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,
	150,150,150,150,150,150,150,151,151,151,151,151,151,1;
	isenkyaku[]=165,165,165,165,165,165,165,165,165,165,165,165,165,165,304,304,304,304,305,305,305,305,306,306,306,306,
	307,307,307,307,308,308,308,308,309,309,309,309,166,166,166,166,165,165,165,165,165,165;
	megitta[]=152,152,153,153,153,153,153,153,153,153,153,153,153,153,153,153,153,153,153,153,153,154,154,154,155,155,156,
	156,157,157,158,159,160,160,161,161,161,161,161,161,161,161,162,162,162,162,162,162,38,38,38,38,38,38,39,39,39,39,39,39;
	vacile[]=161,161,161,161,161,161,189,189,189,189,189,189,190,190,190,190,190,190,191,191,191,191,191,191,192,192,192,
	192,192,192,193,193,193,193,193,193,193,193,193,193,193,193,193,193,193,193,193,193,194,194,194,194,194,194;
	zanretsu[]=145,146,147,147,148,148,26,26,181,181,182,182,183,183,184,184,185,185,26,26,181,181,182,182,182,186,186,187,
	187,188,188,26,26,181,181,182,182,183,183,184,184,185,185,26,26,181,181,182,182,186,186,187,187,188,188,164,164,164,164,1;
	retsuken[]=187,187,188,188,187,187,188,188,181,181,182,182,181,181,182,182,184,184,185,185,181,181,182,182,184,184,185,
	185,184,184,185,185,184,184,184,184,185,185,185,185,185,154,154,155,155,156,156,73,73,74,74,75,75,76,76,76,76,76,76,76,
	76,76,76,76,76,76,76,76,76,74,74,74,74,73,73,73,73,77,77,77,77,14,14,14,14;
	shokohken[]=170,170,170,170,171,171,171,171,172,172,172,172,173,173,173,173,174,174,174,174,175,175,175,175,175,175,
	175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,175,176,176,176,176,176,176,175,
	175,175,175,175,175,176,176,176,176,175,175,175,175,176,176,176,175,175,175,176,176,176,175,175,175,176,176,175,175,
	176,176,175,175,176,176,175,175,176,176,175,175,177,177,178,178,179,179,180,180,180,180,180,180,180,180,180,180,180,
	180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,180,151,151,151,151,151,151,1;
	takumakc[]=312,312,312,312,312,312,312,312,312,312,100,100,313,313,313,313,313,313,313,313,313,313,313,313,313,313,
	313,313,313,313,89,89,89,89,90,90,90,90,91,91,92,92,92,92,92,92,92,92,92,92,93,93,93,93,13,13,13,13,13,13,13,13;
	sp_takuma1[]=170,170,171,171,171,171,171,171,165,165,195,195,195,195,196,196,195,195,196,196,195,195,196,196,195,195,
	195,195,196,196,166,166,166,166,165,165,165,165,165,165,165,165,165,165,165,165,165,165,165,165;
	sp_takuma2[]=25,25,26,26,33,33,34,34,35,35,36,37,38,38,60,60,61,61,62,62,63,63,64,64,65,65,66,66,67,67,25,25,26,26,
	33,33,34,34,35,35,36,37,38,38,39,39,55,55,56,56,55,55,54,54,103,103,57,57,58,58,59,59,73,73,74,74,75,75,74,74,74,74,
	310,310,310,310,145,145,197,197,197,197,198,198,178,178,178,178,179,179,180,180,180,180,180,180,180,180,180,180,180,
	180,180,180,180,180,180,180,180,180,180,180,180,180,180,180;
	sp_takuma3[]=191,191,192,192,193,193,194,194,103,103,103,103,57,57,57,57,58,58,58,58,58,58,59,59,59,59,156,156,157,
	157,158,158,159,159,160,160,161,161,161,161,161,161,314,314,315,315,316,316,317,317,318,318,319,319,319,319,319,319,
	319,319,320,320,320,320,320,320,321,321,321,321,321,321,321,321,322,322,322,322,322,322,322,322;
	sp_takuma4[]=191,191,192,192,193,193,194,194,103,103,103,103,57,57,57,57,58,58,58,58,58,58,59,59,59,59,156,156,157,
	157,158,158,159,159,160,160,161,161,161,161,161,161,103,103,103,103,134,134,135,135,136,136,136,136,137,137,137,137,
	137,137,137,137,324,325,326,326,327,327,328,328,329,329,330,330,330,330,330,330,331,331,331,331,332,332,332,332,332,
	332,333,333,333,333,53,53,53,53;
	sp_takuma5[]=334,334,334,334,335,335,336,336,337,337,338,338,339,339,340,340,341,341,341,341,341,341,341,341,341,341,
	341,341,342,342,342,342,342,342,343,343,343,343,343,343,344,344,344,344,344,344,345,345,345,345,345,345,345,345,346,
	346,346,346,346,346,346,346,346,346,346,346,346,346,346,346,347,347,347,347,347,347,68,68,68,68,68,68;
	
	gitano[]=350,350,350,350,349,349,349,349,348,348,348,348,348,348,349,349,350,350,351,352,353,353,354,354,353,353,
	354,354,353,353,354,354,353,353,354,354,353,353,354,354,353,353,354,354,353,353,354,354,351,351,351,351,350,350,
	350,350,349,349,349,349,348,348,348,348,348,349,350,351,352,353,354,354,354,354,354,354,354,354,354,354,354,354,
	54,54,54,54,28,28,28,28,1;
	
	sp_takuma6[]=50,50,52,52,52,52,53,53,25,25,26,26,33,33,35,35,36,36,38,38,57,57,58,58,59,59,324,325,326,326,327,327,
	328,328,329,330,331,331,153,154,155,156,157,158,159,159,160,160,161,161,38,38,103,103,28,28,30,30,31,31,32,32,55,
	56,57,57,58,58,59,59,60,61,62,62,63,63,64,64,65,65,66,66,67,67,57,57,339,339,340,340,341,342,343,343,68,68,310,310,
	310,310,145,145,197,197,197,197,198,198,178,178,178,178,179,179,180,180,38,38,197,197,197,197,198,198,178,178,178,
	178,179,179,180,180,38,38,197,197,197,197,198,198,178,178,178,178,179,179,180,180,180,180,180,180,180,180,180,180,
	180,180,180,180,180,180,180,180,180,180,180,180;

	///////////kkkkkkkk///////////////////////////////////////////////
	pos_k[]=1,1,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,
	11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
	11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,
	11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,13,13,13,13,
	13,13,13,13,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,
	18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,
	20,20,20,20,20,20,20,20,20,20,20,20;
	
	ava_k[]=21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,25,25,25,
	25,25,25,25,25,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,30,
	30,30,30,30,30,30,30,31,31,31,31,31,31,31,31,32,32,32,32,32,32,32,32;
	ret_k[]=33,33,33,33,33,33,33,33,34,34,34,34,34,34,34,34,35,35,35,35,35,35,35,35,36,36,36,36,36,36,36,36,37,37,37,
	37,37,37,37,37,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,40,40,40,40,40,40,40,40,41,41,41,41,41,41,41,41,42,
	42,42,42,42,42,42,42,43,43,43,43,43,43,43,43,44,44,44,44,44,44,44,44;
	aga_k[]=47,47,47,47,47,47,48,48,48,48,48,48,49,49,49,49,49,49,50,50,50,50,50,50,51,51,51,51,51,51,52,52,52,52,52,52,53,53,53,53,53,53;
	slt_k[]=54,54,54,54,55,55,55,55,55,55,55,55,56,56,56,56,57,57,57,57,57,57,56,56,56,56,56,56,56,56,55,55,55,55;
	lpunch1_k[]=82,82,83,83,83,84,84,84,84,84,85,85,85,85,86,86,86,86;
	lpunch2_k[]=139,139,139,139,140,140,140,140,141,141,141,141,141,141,142,142,142,142,142,142,86,86,86,86,86,86;
	lpunch3_k[]=113,113,113,113,114,114,114,114,115,115,115,115,116,116,116,116,116,117,117,117,117,117,117;
	lpunch4_k[]=160,160,160,160,161,161,161,161,161,161,161,161,161,161,161,161,161,161,161,161,161,161,161,161,162,162,163,163,163,163;
	lpunch5_k[]=324,324,325,325,326,326,327,327,328,328,329,329,329,329,329,329,329,329,
	329,329,329,329,329,329,329,329,330,330,330,330,330,330,330,330,331,331,331,331,331,331,332,332,332,332,332,332,1,1,1;

	spunch1_k[]=58,58,59,59,59,60,60,60,61,61,61,61,62,62,62,62,62,63,63,63,63,63,64,64,64,64,65,65,65,65,66,66,66,67,67,67,68,68,68;
	spunch2_k[]=124,124,124,125,125,125,126,126,126,126,127,127,128,128,128,128,128,128,128,128,129,129,129,129,
	129,129,130,130,130,130,68,68,68,68,68,68;
	spunch3_k[]=94,94,94,94,95,95,95,96,96,97,97,98,98,98,98,98,98,98,98,98,98,99,99,99,99,99,99,100,100,100,100,
	100,100,101,101,101,101,101,101,102,102,102,102,102,102;
	spunch4_k[]=147,147,147,147,147,147,147,148,148,148,148,149,149,149,149,149,149,150,150,150,150,151,151,151,151,151,151,152,152;
	spunch5_k[]=340,340,340,340,341,341,342,342,343,343,343,343,343,343,343,343,344,344,344,344,344,344,345,345,345,345,346,346,346,1;
	
	lkick1_k[]=87,87,87,88,88,88,89,89,89,90,90,90,91,91,91,92,92,92,93,93,93,93;
	lkick2_k[]=131,131,143,143,143,144,144,144,145,145,145,145,146,146,146,131,131,131,131;
	lkick3_k[]=118,118,118,118,118,118,119,119,119,119,120,120,120,120,121,121,120,120,121,121,121,121,118,118,118,118,118,118;
	lkick4_k[]=164,164,164,164,165,165,165,165,166,166,165,165,165,165,166,166,166,166,165,165,165,165,166,166,
	166,166,165,165,165,165,166,166,166,166,165,165,165,165,167,167,167,167,167,167,152,152;
	lkick5_k[]=164,164,164,164,168,168,168,168,169,169,169,169,168,168,168,168,169,169,169,169;
	lkick6_k[]=87,87,333,333,334,334,335,335,336,336,336,336,336,336,337,337,337,337,337,337,338,338,338,338,
	338,338,339,339,339339,339,339,339,339,45,45,46,46,46,46,45,45,45,45;

	skick1_k[]=69,69,69,70,70,70,71,71,71,72,72,72,73,73,73,74,74,74,75,75,75,76,76,76,76,76,77,77,77,77,
	78,78,78,79,79,79,80,80,80,81,81,81;
	skick2_k[]=131,131,131,131,132,132,133,133,134,134,135,135,135,135,136,136,136,136,137,137,137,137,138,138,138,138,1;
	skick3_k[]=103,103,103,103,104,104,104,104,104,104,105,105,105,105,106,106,107,107,107,107,108,108,
	108,108,109,109,109,109,110,110,110,110,110,110,111,111,111,111,111,111,112,112,112,112,112,112,112,112;
	skick4_k[]=153,153,153,153,154,154,154,154,155,155,155,155,156,156,156,156,157,157,157,157,158,158,158,
	158,158,159,159,159,159,159,159,159,159,55;

	toss_k[]=170,170,170,171,171,171,172,172,172,172,173,173,174,174,175,175,175,175,175,175,175,175,174,
	174,174,174,176,176,176,176,177,177,177,177,91,91,91,91,92,92,92,92,92,93,93,93;
	atoss_k[]=178,178,178,178,178,178,179,179,179,179,180,180,181,181,181,181,181,181,182,182,182,182,182,
	182,182,182,182,182,183,183,183,183,183,183,183,183;

	rodar_ala_k[]=24,24,24,24,184,184,184,184,185,185,185,185,186,186,184,184,186,186,185,185,185,185,184,184,184,184,1;
	rodar_atr_k[]=187,187,187,187,188,188,188,188,189,189,189,189,189,189,188,188,188,188,187,187,187,187,190,190,190,190,1;
	rodar_monte[]=285,285,286,286,287,287,287,287,287,287,287,287,286,286,286,286,286,286,285,285,285,285,285,285,46,46,45,45;

	pre_k[]=200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,
	200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,201,201,201,201,201,201,202,202,202,202,202,202,
	202,202,203,203,203,203,203,203,204,204,204,204,204,204,205,205,205,205,205,205,206,206,206,206,206,206,206,206,
	206,206,207,207,207,207,207,207,207,207,208,208,208,208,208,208,209,209,209,209,209,209,210,210,210,210,210,210,
	211,211,211,211,211,211,212,212,212,212,212,212,213,213,213,213,213,213,213,213,213,213,213,213,213,213,213,213,
	214,214,214,214,214,214,214,214,215,215,215,215,215,215,1,1,1,1,1,1,1,1,1,1;
	kvskyo[]=1,1,1,1,1,1,1,1,262,262,262,262,262,262,263,263,263,263,263,263,264,264,264,264,264,264,264,264,264,264,
	264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,
	264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,
	264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,264,
	264,264,264,264,264,264,264,264,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,265,
	265,265,266,266,266,266,266,266,266,266,267,267,267,267,267,267,267,267,268,268,268,268,268,268,268,268,269,269,
	269,269,269,269,269,269,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,
	270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,270,15,15,15,15,15,15,15,15,15,15,1,1,1,1,1;
	mofa_k[]=216,216,216,216,217,217,218,218,219,219,219,219,220,220,220,220,220,220,221,221,221,221,221,221,221,221,
	221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,
	221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,
	221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,
	221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,
	221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,221,
	221,221,221,216,216,216,216,216,216;
	
	win1_k[]=215,215,215,215,215,215,214,214,214,214,214,214,213,213,213,213,213,213,212,212,212,212,212,212,211,211,
	211,211,211,211,210,210,210,210,210,210,209,209,209,209,209,209,208,208,208,208,208,208,207,207,207,207,207,207,
	207,207,206,206,206,206,206,206,206,206,205,205,205,205,205,205,204,204,204,204,204,204,204,204,203,203,203,203,
	203,203,203,203,203,203,202,202,202,202,202,202,202,202,202,202,222,222,222,222,222,222,222,222,223,223,223,223;
	win2_k[]=224,224,224,224,225,225,225,225,226,226,226,226,227,227,227,227,228,228,228,228,229,229,229,229,
	229,229,229,229,229,229,229,229,230,230,230,230,231,231,231,231,232,232,232,232,233,233,233,233,233,233;
	win3_k[]=234,234,234,234,234,234,235,235,235,235,235,235,236,236,236,236,236,236,237,237,237,237,237,237,
	237,237,238,238,238,238,238,238,238,238,239,239,239,239,239,239,239,239,239,239,239,239,239,239,239,239,
	239,239,239,239,240,240,240,240,240,240,241,241,241,241,242,242,242,242,242,242,243,243;
	lose_k[]=243,243,243,243,244,244,245,245,245,245,245,245,245,245,246,246,246,246,246,246,246,246,246,246,
	247,247,247,247,247,247,247,247,247,247,247,247,247,247,248,248,248,248,248,248,248,248,247,247,247,247,
	246,246,246,246,249,249,249,249,249,249,249,249,250,250,250,250,250,250,250,250,251,251;
	getup_k[]=426,426,426,426,426,426,427,427,427,427,427,427,428,428,428,428,428,428,46,46,46,46;
	fogata[]=347,347,348,348,348,348,349,349,349,349,349,349,350,350,351,351,351,351,352,352,352,352,352,352,352,352,
	353,353,353,353,353,353,353,353,353,353,354,354,354,354,354,354,354,354,354,354,355,355,355,355,355,355,68,68,68,68;
	strike_k[]=369,369,369,369,370,370,370,370,371,371,371,371,372,372,372,372,372,372,373,373,373,373,374,
	374,374,374,374,374,54,54,54,54,54,54,45,45,45,45;
	suela[]=54,54,54,54,293,293,294,294,295,295,295,295,296,296,297,297,297,297,298,298,299,299,299,299,300,
	300,300,300,301,301,301,301,301,301,45,45,45,45,45,45,302,302,302,302,302,302,302,302,54,54,54,54,45,45,45,45;
	fantasma[]=289,289,289,289,290,290,290,290,291,291,291,291,0,0,291,291,0,0,291,291,0,0,291,291,291,291,
	290,290,290,290,290,290,45,45,45,45,45,45;
	asocial[]=385,385,385,385,386,386,386,386,387,387,387,387,387,387,387,387,386,386,386,386,385,385,385,385,
	385,385,289,289,289,289,289,289,45,45,45,45,45,45;
	shoryu_k[]=358,358,358,358,359,359,360,360,361,361,362,362,362,362,363,363,363,363,363,363,363,363,364,364,
	364,364,364,364,365,365,365,365,365,365,366,366,366,366,366,366,367,367,367,367,367,367,54,54,302,302,302,
	302,302,302,54,54,54,54,45,45,45,45,45,45;
	infacek[]=153,153,153,153,154,154,154,154,155,155,155,155,156,156,156,156,157,157,157,157,158,158,158,158,
	158,158,159,159,159,159,159,159,55,55,55,55,55,55,55,55,55,55,55,55,55,55,54,54,302,302,302,302,302,302,
	302,302,54,54,54,54,45,45,45,45;
	
	special_k1[]=253,253,253,253,254,254,255,255,255,255,256,256,256,256,256,256,257,257,257,257,257,257,258,
	258,258,258,258,258,259,259,259,259,260,260,260,260,261,261,261,261,261,261,261,261,261,261,261,261,261,
	261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,
	261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,
	261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,261,375,375,376,
	376,377,377,378,378,0,0,0,0,0,0,379,379,379,379,380,380,380,380,381,381,381,381,381,381,381,381,381,381,
	381,381,381,381,381,381,381,381,382,382,382,382,382,382,382,382,383,383,383,383,383,383,384,384,384,384,
	384,384,1,1,1,1,1,1;
	special_k2[]=213,213,213,213,212,212,212,212,211,211,211,211,271,271,271,271,271,271,272,272,272,272,273,
	273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,273,
	273,273,273,280,280,280,280,280,280,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,340,340,341,341,342,342,
	343,343,344,344,344,344,344,344,345,345,345,345,345,345,346,346,346,346,346,346,139,139,139,139,140,140,
	141,141,142,142,82,82,83,83,84,84,85,85,86,86,131,131,143,143,143,144,143,144,145,145,146,146,87,87,88,
	88,89,89,90,91,92,92,126,126,127,127,128,128,129,130,131,131,132,132,133,133,134,134,135,135,136,136,137,
	137,60,60,61,62,63,64,65,65,66,66,67,68,69,69,70,71,72,72,73,74,75,76,77,78,79,79,95,95,96,96,97,97,98,
	98,99,99,325,325,326,326,327,327,327,327,327,327,327,327,328,328,328,328,328,328,328,328,328,328,328,328,
	330,330,330,330,330,330,331,331,331,331,331,331,332,332,332,332,332,332;

	super_k[]=124,124,124,124,125,125,126,126,0,0,0,0,324,325,326,326,327,327,328,328,328,328,329,329,329,329,
	329,329,329,329,329,329,329,329,329,329,329,329,329,329,330,330,330,330,330,330,330,330,330,330,330,330,
	330,330,331,331,331,331,331,331,331,331,331,331,331,331,332,332,332,332,332,332,332,332,1,1,1,1,1,1;
	
	
	///////////kula//////////////////////////////////////
	pos_kula[]=1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,6,6,6,6,6,6,
	6,6,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,12,
	12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,1,1,1,1,1,
	1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,
	8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,
	13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,
	3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,
	9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,
	14,14,14,14,14,14,14,14,15,15,15,15,15,15,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,
	8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,1,1,1,1,2,2,2,2,3,3,3,
	3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,
	11,11,11,11,12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15;
	pre_kula[]=200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,201,201,201,
	201,201,201,202,202,202,202,202,203,202,203,203,203,203,203,204,204,204,204,204,204,205,205,205,205,205,
	205,206,206,206,206,206,206,207,207,207,207,207,207,208,208,208,208,208,208,209,209,209,209,209,209,210,
	210,210,210,210,210,210,210,211,211,211,211,212,212,212,212,213,213,213,213,213,213,7,7,7,7,7,7,6,6,6,6,
	6,6,5,5,5,5,5,5,4,4,4,4,4,4,3,3,3,3,3,3,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1;
	burla_kula[]=214,214,214,214,214,214,215,215,215,215,215,215,215,215,216,216,216,216,216,216,217,217,217,
	217,217,217,219,219,219,219,219,219,219,219,218,218,218,218,218,218,218,218,219,219,219,219,219,219,219,
	219,218,218,218,218,218,218,218,218,218,218,219,219,219,219,219,219,219,219,219,219,219,219,220,220,220,
	220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220,220;
	av_kula[]=16,16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,20,20,20,20,20,20,21,
	21,21,21,21,21,22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,25,25,25,25,25,25;
	re_kula[]=26,26,26,26,26,26,26,26,27,27,27,27,27,27,28,28,28,28,28,28,29,29,29,29,30,30,30,30,31,31,31,31,31,31;
	ag_kula[]=34,34,34,34,35,35,35,35,36,36,36,36,37,37,37,37,38,38,38,38;
	s1_kula[]=46,46,46,46,39,39,39,39,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45,45;
	s2_kula[]=46,46,46,46,47,47,47,47,47,47,48,48,48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51;
	run_kula[]=300,300,300,300,300,300,301,301,301,301,302,302,302,302,303,303,303,303,304,304,305,305,305,
	305,305,305,306,306,306,306,307,307,307,307,308,308,308,308,309,309,309,309;
	getup_kula[]=166,166,166,166,166,166,167,167,167,167,167,167,46,46,46,46,46,46,32,32,32,32,32,32;
	lpunch1_kula[]=52,52,53,53,54,54,55,55,55,55,56,56,56,56,57,57,57,57,57,57;
	lpunch2_kula[]=110,110,111,111,111,111,112,112,112,112,113,113,113,113;
	lpunch3_kula[]=132,132,132,132,132,132,133,133,133,133,134,134,134,134,135,135,135,135;
	lpunch4_kula[]=52,52,52,52,154,154,154,154,155,155,156,156,156,156,156,156,
	156,156,156,156,156,156,155,155,155,155,155,155,155,155,57,57,57,57,57,57,52,52,52,52,52,52;
	spunch1_kula[]=80,80,80,80,81,81,82,82,83,83,83,83,84,84,84,84,85,85,
	85,85,86,86,86,86,87,87,87,87,88,88,88,88,89,89,89,89,90,90,90,90,80,80,80,80;
	spunch2_kula[]=99,99,99,99,100,100,100,101,101,101,102,102,102,103,103,104,104,105,105,105,105,106,106,
	106,106,106,106,107,107,107,107,107,107,108,108,108,108,108,108,109,109,109,109,109,109;
	spunch3_kula[]=118,118,118,118,119,119,119,119,120,120,120,120,120,120,120,120,120,120,120,120,120,120,
	120,120,120,120,121,121,121,121,121,121,122,122,122,122,122,122,123,123,123,123;
	spunch4_kula[]=131,131,131,131,131,131,132,132,132,132,133,133,133,133,134,134,134,134,135,135,135,135,
	133,133,133,133,134,134,134,134,135,135,135,135,133,133,133,133,134,134,134,134,135,135,135,135;
	spunch5_kula[]=52,52,52,52,52,52,168,168,168,168,168,168,169,169,169,169,169,169,168,168,168,168,168,168,
	169,169,169,169,169,169,168,168,168,168,168,168,169,169,169,169,169,169,168,168,168,168,168,168,169,169,
	169,169,169,169,52,52,52,52,52,52,109,109,109,109,109,109;
	lkick1_kula[]=58,58,59,59,60,60,61,61,62,62,63,63,64,64,65,65,66,66,66,66,62,62,62,62,63,63,64,64,65,65,
	66,66,67,67,67,67,68,68,68,68,68,68;
	lkick2_kula[]=114,114,114,114,115,115,115,115,115,115,116,116,116,116,116,116,117,117,117,117,117,117;
	lkick3_kula[]=136,136,137,137,138,138,138,138,138,138,139,139,139,139,140,140,140,140,141,141,141,141,142,142,142,142,143,143,143,143;
	lkick4_kula[]=157,157,157,157,158,158,159,159,160,160,161,161,161,161,162,162,162,162,163,163,163,163,
	164,164,164,164,164,164,165,165,165,165,165,165,166,166,166,166,166,166,167,167,167,167,167,167,46,46,
	46,46,46,46,32,32,32,32;
	skick1_kula[]=69,69,69,69,70,70,71,71,72,72,72,72,73,73,73,73,74,74,74,74,74,74,75,75,76,76,77,77,77,77,
	78,78,78,78,78,78,79,79,79,79,79,79;
	skick2_kula[]=91,91,91,91,92,92,92,92,93,93,93,93,94,94,94,94,95,95,95,95,96,96,96,96,97,97,97,97,97,97,
	98,98,98,98,98,98;
	skick3_kula[]=124,124,124,124,125,125,126,126,126,126,126,126,127,127,127,127,128,128,128,128,129,129,
	129,129,130,130,130,130,130,130;
	skick4_kula[]=143,143,143,143,143,143,144,144,144,144,146,146,146,146,147,147,147,147,147,147,147,147,
	143,143,143,143,44,44,44,44,45,45,45,45;
	toss_kula[]=52,52,80,80,80,80,148,148,148,148,149,149,150,150,150,150,150,150,151,151,151,151,151,151,
	152,152,152,152,152,152,153,153,153,153,149,149,149,149,148,148,148,148,80,80,80,80,52,52,52,52;
	rodral_kula[]=190,190,190,190,190,190,191,191,191,191,191,191,192,192,192,192,192,192,193,193,193,193,
	193,193,32,32,32,32,1,1;
	rodrat_kula[]=32,32,32,32,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,32,32,32,32,1,1;
	rodext_kula[]=310,310,310,310,348,348,348,348,349,349,349,349,349,349,349,349,348,348,348,348,348,348,
	310,310,310,310,310,310,310,310;
	pajaritos_kula[]=312,312,312,312,312,312,313,313,314,314,314,314,315,315,315,315,316,316,316,316,317,317,
	317,317,318,318,318,318,319,319,319,319,319,319,320,320,320,320,320,320,321,321,321,321,321,321,450,450,
	450,450,322,322,322,322,323,323,323,323,324,324,324,324,325,325,325,325,326,326,326,326,327,327,327,327,
	328,328,328,328,329,329,329,329,330,330,330,330,331,331,331,331,332,332,332,332,333,333,333,334,333,334,
	334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,
	334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,334,
	334,334,334,334,334,334,334,334;
	fuuu[]=180,180,180,180,180,180,180,180,180,180,180,180,181,181,181,181,181,181,182,182,182,182,183,183,
	183,183,184,184,184,184,184,184,185,185,185,185,185,185,186,186,186,186,186,186,187,187,187,187,188,188,
	188,188,188,188,189,189,189,189,189,189,189,189,189,189,189,189;
	shokura[]=190,190,191,191,192,192,193,193,193,193,194,194,194,194,195,195,195,195,196,196,196,196,196,196,
	196,196,197,197,197,197,198,198,198,198,199,199,199,199,199,199,199,199,46,46,46,46,34,34,35,35,36,36,36,
	36,36,36,33,33,33,33,33,33,32,32,32,32,32,32;
	iranai[]=290,290,290,290,291,291,291,291,292,292,292,292,293,293,293,293,293,293,294,294,294,294,294,294,
	295,295,295,295,296,296,296,296,296,296,297,297,297,297,297,297,298,298,298,298,298,298,299,299,299,299,
	299,299,299,299,299,299,299,299,1;
	sakura[]=46,46,58,58,59,59,60,60,61,61,62,62,63,63,64,64,65,65,66,66,66,66,62,62,62,62,63,63,64,64,65,65,
	66,66,67,67,67,67,68,68,68,68,68,68,46,46,34,34,35,35,36,36,36,36,36,36,33,33,33,33,33,33,32,32,32,32;
	byebye[]=80,80,80,80,80,80,221,221,221,221,221,221,222,222,222,222,222,222,223,223,223,223,223,223,224,
	224,224,224,224,224,225,225,225,225,225,225,226,226,226,226,226,226,227,227,227,227,227,227,227,227,228,
	228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,
	228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,228,229,229,229,
	229,229,229,229,229,230,230,230,230,230,230,230,230,231,231,231,231,231,231,231,231,230,230,230,230,230,
	230,230,230,231,231,231,231,231,231,231,231;
	iikura[]=12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,1,1,1,1,1,1,1,1,1,1,1,1,
	1,1,1,1,244,244,244,244,244,244,244,244,244,244,245,245,245,245,245,245,245,245,245,245,246,246,246,246,
	246,246,246,246,247,247,247,247,247,247,247,247,248,248,248,248,248,248,248,248,249,249,249,249,249,249,
	249,249,250,250,250,250,250,250,250,250,251,251,251,251,251,251,252,252,252,252,252,252,252,252,252,252,
	252,252,253,253,253,253,253,253,253,253,253,253,254,254,254,254,254,254,254,254,254,254,253,253,253,253,
	253,253,253,253,253,253,254,254,254,254,254,254,254,254,254,254;
	ikio[]=279,279,279,279,279,279,280,280,280,280,281,281,281,281,282,282,282,282,282,282,283,283,283,283,
	283,283,284,284,284,284,284,284,285,285,285,285,285,285,282,282,282,282,282,282,283,283,283,283,283,283,
	284,284,284,284,284,284,285,285,285,285,285,285,282,282,282,282,282,282,283,283,283,283,283,283,284,284,
	284,284,284,284,285,285,285,285,285,285,286,286,286,286,286,286,286,286,287,287,287,287,287,287,287,287,
	288,288,288,288,288,288,288,288,33,33,33,33,33,33,33,33,289,289,289,289,289,289,289,289,1;
	shiranai[]=335,335,335,335,336,336,336,336,336,336,336,336,337,337,337,337,337,337,337,337,338,338,338,
	338,338,338,339,339,339,339,339,339,340,340,340,340,340,340,340,340,340,340,341,341,341,341,342,342,342,
	342,343,343,343,343,344,344,344,344,342,342,342,342,343,343,343,343,344,344,344,344,342,342,342,342,343,
	343,343,343,344,344,344,344,342,342,342,342,343,343,343,343,344,344,344,344,342,342,342,342,343,343,343,
	343,344,344,344,344,342,342,342,342,343,343,343,343,344,344,344,344,342,342,342,342,343,343,343,343,344,
	344,344,344,345,345,345,345,345,345,345,345,346,346,346,346,346,346,346,346,347,347,347,347,347,347,347,
	347,1,1,1,1,1,1;
	llorona[]=256,256,256,256,256,256,257,257,257,257,257,257,257,257,259,259,259,259,259,259,259,259,257,
	257,257,257,257,257,257,257,258,258,258,258,258,258,257,257,257,257,257,257,258,258,258,258,258,258,257,
	257,257,257,257,257,258,258,258,258,258,258,257,257,257,257,257,257,258,258,258,258,258,258,260,260,260,
	260,260,260,261,261,261,261,261,261,262,262,262,262,262,262,263,263,263,263,264,264,264,264,265,265,265,
	265,265,265,266,266,266,266,266,266,267,267,267,267,267,267,268,268,268,268,268,268,269,269,269,269;
	
	movil[]=12,12,12,12,12,12,13,13,13,13,13,13,14,14,14,14,14,14,233,233,233,233,233,233,233,233,234,234,
	234,234,234,234,234,234,235,235,235,235,235,235,235,235,236,236,236,236,236,236,236,236,236,236,236,236,
	236,236,236,236,237,237,237,237,237,237,237,237,237,237,237,237,237,237,237,237,237,237,237,237,237,237,
	237,237,237,237,237,237,237,237,238,238,238,238,238,238,238,238,238,238,238,238,239,239,239,239,239,239,
	239,239,240,240,240,240,240,240,241,241,241,241,241,241,240,240,240,240,240,240,240,240,240,240,240,240,
	240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,
	240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,
	240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,
	240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,
	240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,
	240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,
	240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,240,242,242,242,242,242,242,243,243,243,243,
	242,242,243,243,243,243,243,243,243,243,242,242,242,242,242,242,242,242,243,243,243,243,243,243,243,243,
	243,243;
	

	////////////////////tetsuo shima////////////////////////////
	pre_tetsuo[]=200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,
	200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,
	200,200,200,200,200,200,200,201,201,201,201,201,201,202,202,202,202,202,202,203,203,203,203,203,203,204,204,
	204,204,204,204,205,205,205,205,205,205,206,206,206,206,206,206,207,207,207,207,207,207,208,208,208,208,208,
	208,208,208,208,208,209,209,209,209,209,209,209,209,210,210,210,210,210,210,210,210,211,211,211,211,211,211,
	211,211,212,212,212,212,212,212,212,212,213,213,213,213,213,213,213,213,214,214,214,214,214,214;
	pre_nonest[]=220,220,220,220,220,220,221,221,221,221,221,221,222,222,222,222,222,222,223,223,223,223,223,223,
	224,224,224,224,224,224,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,
	225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,
	225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,
	225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,
	225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,
	225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,
	225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225,225;
	pos_tetsuo[]=1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,
	5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,
	3,3,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1;
	av_tetsuo[]=7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,11,11,11,12,12,12,12,12,12,13,13,
	13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18,19,19,
	19,19,19,19,20,20,20,20,20,20;
	re_tetsuo[]=21,21,21,21,21,21,22,22,22,22,22,22,23,23,23,23,23,23,24,24,24,24,24,24,25,25,25,25,25,25,26,26,
	26,26,26,26,27,27,27,27,27,27,28,28,28,28,28,28,29,29,29,29,29,29,30,30,30,30,30,30,31,31,31,31,31,31,32,32,
	32,32,32,32,33,33,33,33,33,33,34,34,34,34,34,34;
	st_tetsuo[]=35,35,35,35,39,39,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,
	45,45,46,46,46,46;
	bu_tetsuo[]=215,215,215,215,215,215,215,215,216,216,216,216,216,216,217,217,217,217,217,217,218,218,218,218,
	218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,
	218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,
	218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,
	218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,218,
	218,218,219,219,219,219;
	rd_tetsuo[]=35,35,36,36,179,179,179,179,179,179,180,180,180,180,181,181,181,181,182,182,182,182,183,183,183,183,35,35,35,35;
	getup_tetsuo[]=426,426,426,426,426,426,427,427,427,427,427,427,428,428,428,428,428,428,429,429,429,429;
	lpunch1_tetsuo[]=47,47,47,48,48,48,49,49,49,50,50,50;
	lpunch2_tetsuo[]=98,98,99,99,100,100,100,100,101,101,101,101,101,101,101,101,98,98,98,98;
	lpunch3_tetsuo[]=120,120,120,120,120,120,121,121,121,121,122,122,122,122,123,123,123,123,122,122,122,122;

	spunch1_tetsuo[]=57,57,57,57,57,57,58,58,58,58,59,59,60,60,60,60,61,61,61,61,62,62,62,62,63,63,63,63,64,64,
	64,64,65,65,65,65,66,66,66,66,66,67,67,67,67,67,68,68,68,68,68;
	spunch2_tetsuo[]=80,80,81,81,82,82,82,82,83,83,83,83,84,84,84,84,85,85,85,85,86,86,86,86,86,86,86,86,86,86,87,87,87,87,87,87;
	spunch3_tetsuo[]=106,106,106,106,107,107,108,108,109,109,110,110,110,110,111,111,111,111,112,112,112,112,113,
	113,113,113,114,114,114,114,115,115,115,115,116,116,116,116,116,116,116,116;
	spunch4_tetsuo[]=130,130,130,130,131,131,131,131,131,131,132,132,132,132,133,133,133,133,133,133,134,134,134,
	134,134,134,135,135,135,135,136,136,136,136,136,136,40,40,40,40,39,39,39,39,44,44,44,44,45,45,45,45;
	lkick1_tetsuo[]=51,51,52,52,53,53,53,53,54,54,54,54,54,54,55,55,55,55,56,56,56,56,56,56;
	lkick2_tetsuo[]=102,102,102,102,103,103,103,103,104,104,104,104,105,105,105,105,106,106,106,106;
	lkick3_tetsuo[]=124,124,125,125,125,125,126,126,126,126,126,126,126,126,126,126,126,127,127,127,
	127,127,127,127,127,127,127,127,125,125,125,125,125,125,128,128,128,128,129,129,129,129,44,44,44,44,45,45,45,45;
	skick1_tetsuo[]=69,69,69,69,70,70,71,71,72,72,72,72,73,73,73,73,74,74,74,75,75,75,76,76,76,77,77,77,78,78,78,79,79,79;
	skick2_tetsuo[]=88,88,88,88,89,89,89,89,90,90,90,90,91,91,91,91,92,92,92,92,93,93,93,93,93,93,93,93,93,93,94,94,94,94,
	95,95,95,95,96,96,96,96,96,96,96,97,97,97,97,97,97,97,97;
	skick3_tetsuo[]=117,117,117,117,118,118,118,118,118,118,118,118,118,118,119,119,119,119,119,119,119,119,117,117,
	117,117,117,117;
	skick4_tetsuo[]=124,124,124,124,125,125,125,125,125,125,137,137,137,137,137,137,138,138,138,138,138,138,138,138,
	128,128,128,128,129,129,129,129,44,44,44,44,45,45,45,45;
	toss_tetsuo[]=139,139,139,139,139,139,140,140,141,141,142,142,143,143,143,143,144,144,144,144,145,145,145,145,
	145,145,145,145,146,146,146,146,146,146,147,147,147,147,147,147;
	atss_tetsuo[]=148,148,148,148,148,148,149,149,150,150,151,151,151,151,152,152,152,152,153,153,153,153,128,128,
	128,128,129,129,129,129,44,44,44,44,45,45,45,45;
	uala_tetsuo[]=166,166,167,167,168,168,169,169,170,170,170,170,171,171,171,171,172,172,172,172,173,173,173,173,
	174,174,174,174,175,175,175,175,176,176,176,176,177,177,177,177,177,177,178,178,178,178,178,178,1;
	shou_tetsuo[]=154,154,154,154,154,154,155,155,155,155,156,156,156,156,157,157,158,158,159,159,160,160,160,160,
	161,161,161,161,162,162,162,162,162,162,162,162,162,162,163,163,163,163,163,163,163,163,163,163,164,164,164,164,
	164,164,164,164,165,165,165,165,165,165,165,165;
	proj_tetsuo[]=189,189,190,190,190,190,191,191,191,191,191,191,191,191,191,191,191,191,191,191,192,192,192,192,
	193,193,193,193,194,194,194,194,194,195,195,195,195,194,194,194,194,194,195,195,195,195,196,196,196,196,191,191,
	191,191,191,191,191,191,191,191,191,191,191,191,191,191,191,191,191,191,197,197,1;

	special_ts1[]=332,332,333,333,333,333,334,334,334,334,335,335,336,336,336,336,337,337,338,338,338,338,339,339,
	339,339,340,340,340,340,341,341,341,341,342,342,342,342,343,343,343,343,344,344,344,344,345,345,345,345,346,346,
	346,346,347,347,347,347,348,348,348,348,346,346,346,346,347,347,347,347,348,348,348,348,346,346,346,346,347,347,
	347,347,348,348,348,348,346,346,346,346,347,347,347,347,348,348,348,348,346,346,346,346,347,347,347,347,348,348,
	348,348,346,346,346,346,347,347,347,347,348,348,348,348,345,345,345,345,344,344,344,344,343,343,343,343,342,342,
	342,342,341,341,341,341,340,340,340,340,339,339,339,339,338,338,338,338,337,337,337,337,336,336,336,336,335,335,
	335,335,334,334,334,334,334,334,334,334,334,334,334,334,333,333,333,333,332,332,332,332;
	special_ts2[]=309,309,309,309,309,309,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,325,325,325,325,326,326,326,326,326,326,327,327,327,327,327,327,327,327,
	328,328,328,328,328,328,328,328,328,328,328,328,329,329,329,329,329,329,330,330,330,330,330,330,1;
	special_ts3[]=309,309,309,309,309,309,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,0,0,325,325,326,326,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,325,325,326,326,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	0,0,0,0,0,325,325,325,325,326,326,326,326,326,326,327,327,327,327,327,327,327,327,328,328,328,328,328,328,328,328,
	328,328,328,328,329,329,329,329,329,329,330,330,330,330,330,330,1;

	tetsuo_w1[]=226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,
	226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,226,227,227,227,227,227,227,228,
	228,228,228,228,228,229,229,229,229,229,229,229,229,229,229,229,229,229,229,229,229,229,229,229,229,229,229,230,
	230,230,230,230,230,231,231,231,231,232,232,232,232,232,232,232,232,233,233,232,232,232,232,233,233,233,233,233,
	233,233,233,232,232,232,232,232,232,233,233,233,233,233,233,233,233,232,232,232,232,233,233,233,233,232,232,232,
	232,232,232,232,232,232,232,233,233,233,233,232,232,232,232,232,232,232,232,233,233,233,233,232,232,232,232,233,
	233,233,233,232,232,232,232,232,232,233,233,232,232,232,232,232,232,232,232,232,232,232,232,232,232,232,232,232,
	232,232,232,232,234,234,234,234,234,234,234,234,234,234,234,234,235,235,235,235,235,235,234,234,234,234,234,234;
	tetsuo_w2[]=236,236,236,236,236,236,236,236,236,236,237,237,237,237,237,237,238,238,238,238,239,239,239,239,239,
	239,240,240,240,240,240,240,241,241,241,241,241,241,242,242,242,242,242,242,243,243,243,243,243,243,244,244,244,
	244,245,245,245,245,246,246,246,246,247,247,247,247,248,248,248,248,249,249,249,249;
	tetsuo_ls[]=250,250,250,250,250,250,250,250,250,250,251,251,251,251,251,251,251,251,252,252,252,252,252,252,252,
	252,252,252,252,252,252,252,253,253,253,253,253,253,254,254,254,254,254,254,254,254,254,254,254,254,254,254,254,
	254,254,254,254,254,254,254,255,255,255,255,255,255;
	
	//////////////////OK
	recibir_colleja[]=450,450,451,451,450,450,451,451,450,450,452,452,453,453,453,453,454,454,455,455,455,455,455,
	455,455,455,455,455,455,455,456,456,456,456,457,457,457,457,458,458,458,458,459,459,459,459;

	pajaritos[]=394,394,394,394,394,394,394,394,394,394,395,395,395,395,395,395,395,395,395,395,396,396,396,396,396,
	396,396,396,396,396,397,397,397,397,397,397,397,397,397,397,394,394,394,394,394,394,394,394,394,394,395,395,395,
	395,395,395,395,395,395,395,396,396,396,396,396,396,396,396,396,396,397,397,397,397,397,397,397,397,397,397,394,
	394,394,394,394,394,394,394,394,394,395,395,395,395,395,395,395,395,395,395,396,396,396,396,396,396,396,396,396,
	396,397,397,397,397,397,397,397,397,397,397,394,394,394,394,394,394,394,394,394,394,395,395,395,395,395,395,395,
	395,395,395,396,396,396,396,396,396,396,396,396,396,397,397,397,397,397,397,397,397,397;
  
	reci_flojos[]=      402,406,402,406,402,402,406,402,406,402,405,405,405,405,405,405,405,405,405,405,1;
	reci_flojos_agac[]= 412,413,412,413,412,413,412,413,412,413,414,415,416,416,416,416,416,416,416,416,416;
	reci_flojos_bozo[]= 410,440,410,440,410,440,410,440,410,440,411,411,411,411,411,411,411,411,411,411,1;
	mea_culpa[]=        404,439,404,439,404,439,404,439,404,439,405,405,405,405,405,405,405,405,405,405,1;

	reci_fuertes[]=     402,406,402,406,402,406,402,406,402,406,402,406,403,403,403,403,404,404,404,404,405,405,405,405,405,405;
	reci_fuertes_agac[]=412,413,412,413,412,413,412,413,412,413,412,413,414,414,414,414,415,415,415,415,416,416,416,416,416,416;
	reci_fuertes_bozo[]=407,408,407,408,407,408,407,408,407,408,407,408,409,409,409,409,410,410,410,410,411,411,411,411,411,411;
	reci_genjuro[]= 407,408,407,408,407,408,407,408,407,408,407,408,407,408,407,408,409,409,410,410,410,410,411,411,411,411,411,411;

	pintura[255+ARRAY_INDEX];
	battle;
	s_select_music;
	intro_slice_size;
	intro_slice_x;
	logo_frame;

	// sistema particulas
	particles [NUM_PARTICLES+ARRAY_INDEX][8+ARRAY_INDEX];	
	INTRO_TXT_Y[3+ARRAY_INDEX] = 30,110,120,130;
	
	
	s_musica;//identificador de la musica que sale en los escenarios
	s_music1;
	s_musica_index;
	
	s_exath;//especial ath (para cortar el sonido que es ciclico)
	s_exk49;//especial tetsuo (para cortar el sonido que es ciclico)
	s_charge1;//id para el efecto de carga para el p1
	s_charge2;//id para el efecto de carga para el p2
	s_voice1;//id para voces del p1
	s_voice2;//id para voces del p2

	//////////////////////////VOCES Y DEMAS////////////////////////////////
	s_benet;s_title;s_round;s_one;s_two;s_three;s_four;s_five;s_final;s_ready;s_go;s_ko;
	s_winner;s_perfect;s_time;s_over;s_draw;s_select;s_selectdo;s_cut;s_hit1;
	s_hit2;s_hit3;s_hit4;s_hit5;s_megahit;s_fhit;s_airp;s_airk;s_airt;s_fall;
	s_jump;s_sjump;s_xjump;s_dash;s_boom;s_burn1;s_burn2;s_catch;s_floor;
	s_guard;s_speed;s_flame1;s_flame2;s_flame3;s_flame4;s_flame5;s_shock1;
	s_special;s_run1;s_run2;s_charging;s_charged;

	s_kyo1;s_kyo2;s_kyo3;s_kyo4;s_kyo5;s_kyo6;s_kyo7;s_kyo8;s_kyo9;s_kyo10;s_kyo11;s_kyo12;s_kyo13;s_kyo14;s_kyo15;s_kyo16;s_kyo17;s_kyo18;s_kyo19;s_kyo20;s_kyo21;s_kyo22;s_kyo23;s_kyo24;s_kyo25;s_kyo26;s_kyo27;s_kyo28;s_kyo29;s_kyo30;s_kyo31;s_kyo32;
	s_ath1;s_ath2;s_ath3;s_ath4;s_ath5;s_ath6;s_ath7;s_ath8;s_ath9;s_ath10;s_ath11;s_ath12;s_ath13;s_ath14;s_ath15;s_ath16;s_ath17;s_ath18;s_ath19;s_ath20;s_ath21;s_ath22;s_ath23;s_ath24;s_ath25;s_ath26;s_ath27;s_ath28;s_ath29;s_ath30;
	s_iori1;s_iori2;s_iori3;s_iori4;s_iori5;s_iori6;s_iori7;s_iori8;s_iori9;s_iori10;s_iori11;s_iori12;s_iori13;s_iori14;s_iori15;s_iori16;s_iori17;s_iori18;s_iori19;s_iori20;s_iori21;s_iori22;s_iori23;s_iori24;s_iori25;s_iori26;s_iori27;s_iori28;s_iori29;s_iori30;s_iori31;s_iori32;
	s_terry1;s_terry2;s_terry3;s_terry4;s_terry5;s_terry6;s_terry7;s_terry8;s_terry9;s_terry10;s_terry11;s_terry12;s_terry13;s_terry14;s_terry15;s_terry16;s_terry17;s_terry18;s_terry19;s_terry20;s_terry21;s_terry22;s_terry23;s_terry24;s_terry25;
	s_kasumi1;s_kasumi2;s_kasumi3;s_kasumi4;s_kasumi5;s_kasumi6;s_kasumi7;s_kasumi8;s_kasumi9;s_kasumi10;s_kasumi11;s_kasumi12;s_kasumi13;s_kasumi14;s_kasumi15;s_kasumi16;s_kasumi17;s_kasumi18;s_kasumi19;s_kasumi20;s_kasumi21;s_kasumi22;s_kasumi23;
	s_takuma1;s_takuma2;s_takuma3;s_takuma4;s_takuma5;s_takuma6;s_takuma7;s_takuma8;s_takuma9;s_takuma10;s_takuma11;s_takuma12;s_takuma13;s_takuma14;s_takuma15;s_takuma16;s_takuma17;s_takuma18;s_takuma19;s_takuma20;s_takuma21;s_takuma22;s_takuma23;s_takuma24;
	s_k1;s_k2;s_k3;s_k4;s_k5;s_k6;s_k7;s_k8;s_k9;s_k10;s_k11;s_k12;s_k13;s_k14;s_k15;s_k16;s_k17;s_k18;s_k19;s_k20;s_k21;s_k22;s_k23;
	s_kura1;s_kura2;s_kura3;s_kura4;s_kura5;s_kura6;s_kura7;s_kura8;s_kura9;s_kura10;s_kura11;s_kura12;s_kura13;s_kura14;s_kura15;s_kura16;s_kura17;s_kura18;s_kura19;s_kura20;
	s_kura21;s_kura22;s_kura23;s_kura24;s_kura25;s_kura26;s_kura27;s_kura28;s_kura29;s_kura30;s_kura31;s_kura32;s_kura33;s_kura34;s_kura35;s_kura36;s_kura37;s_kura38;s_kura39;s_kura40;
	s_tetsuo1;s_tetsuo2;s_tetsuo3;s_tetsuo4;s_tetsuo5;s_tetsuo6;s_tetsuo7;s_tetsuo8;s_tetsuo9;s_tetsuo10;s_tetsuo11;s_tetsuo12;s_tetsuo13;s_tetsuo14;s_tetsuo15;s_tetsuo16;s_tetsuo17;s_tetsuo18;s_tetsuo19;s_tetsuo20;s_tetsuo21;s_tetsuo22;s_tetsuo23;
	s_stage1;s_stage2;s_beni1;s_beni2;s_hotaru1;s_hotaru2;s_hotaru3;s_eiji1;s_eiji2;s_joe1;s_joe2;s_joe3;s_indi1;s_indi2;s_indi3;s_indi4;s_indi5;s_kaede1;s_kaede2;s_kaede3;s_kaede4;s_jin1;s_jin2;
	s_ryu1;s_ryu2;s_ryu3;s_gen1;s_gen2;s_blanka1;s_galford1;s_galford2;s_galford3;s_xianfei1;s_xianfei2;s_nakoruru1;s_nakoruru2;s_nakoruru3;s_ryoko1;s_ryoko2;s_tung1;s_tung2;s_jubei1;
	s_jubei2;s_jubei3;s_ryo1;s_ryo2;s_setsuna1;s_setsuna2;s_setsuna3;s_hanzo1;s_hanzo2;s_hanzo3;s_hanzo4;s_max1;s_max2;s_akari1;s_akari2;s_yuki1;s_yuki2;s_yuki3;s_krisad1;s_krisad2;
	s_kazuki1;s_kazuki2;s_kazuki3;s_kazuki4;
	
	music_path [] = 
		"kof\snd\kyo.ogg",
        "kof\snd\kyo94.ogg",
        "kof\snd\athena.ogg",
        "kof\snd\iori.ogg",
        "kof\snd\crimson.ogg",
        "kof\snd\terry.ogg",
        "kof\snd\art.ogg",
        "kof\snd\art.ogg",
        "kof\snd\k.ogg",
        "kof\snd\kula.ogg",
        "kof\snd\k9999.ogg",
        "kof\snd\select.ogg";
		
	S_SETUP = 0;
	S_SOUND = 1;
	S_CONTROL = 2;
	
	// save setup
	fps_target=60;
	skip=0;
	
	SLOW_MACHINE = false;
	
	FILTER_NORMAL2X = 0;
	FILTER_SCALE2X = 1;
	FILTER_SCANL2X = 2;
	FILTER_HIGHQ2X = 3;
	SCREEN_WINDOW = 0;
	SCREEN_FULLSCREEN = 1;
	
	FILTER = 0; // FILTER_NORMAL2X;
	SCREEN_MODE = 0; // SCREEN_WINDOW
	
	bloker_d;
	
	
	cronometro=60;
	asaltos=2;
	cntype=1;
	fuerza=2;
	powinf=0;
	
	set_up[]= 
    60, 0, 0, 
    0, 
    0, // not in use 
    60, 2, 0, 0, 2, 0;
  
	// save sound config	
	cd_ok;
	track[]=1,3,4,5,6,2,7,8,9,10,11,0;
	
	// select players
	eliminados[11+ARRAY_INDEX]=0,0,0,0,0,0,0,0,0,0,0,0;
	datos_arcade[2+ARRAY_INDEX]=0,0,0;	
	iSelect_jefe[]=5,8,4,4;
	iSelect_x[]=220,236,250,262,272,280,286,290,292;
	iSelect_gfx[]=116,100,102,104,106,108,110,112,114,116;

	iStriker_gfx[11+ARRAY_INDEX][2+ARRAY_INDEX]=
		1,5,3,
		7,11,50,
		13,17,15,
		40,44,42,
		48,46,52,
		1,5,3,
		54,58,56,
		60,64,62,
		40,44,42,
		66,70,68,
		72,76,74,
		78,84,80
	;
	
	
local
	fetiche;
	tipo;         strike;        inc_x;inc_y;
	hit_x,hit_y;  estado;        nuevo_estado;
	paso;         nuevo_paso;    atravesar=0;
	intensidad;   altura;        striks;
	damage;       luchador;      enemigo;
	tipo_control; power=0;       baja_pows=0;
	vida;         seconds;       magia;
	poder=1;      bloker=0;      he_dado=1;
	ive_hit=0;    recibir=0;     blend_fx=0;
	just_guard;   super_guard;   electrocutado=0;
	descarga=0;   vulnerable=0;  darmagia;
	pipiolos;     super=0;       x0,y0,x1,y1;
	grandfather;  voltear;       hit_combo;
	setwin;       super_sp;      estatico=0;
	infinitypow;  hado=0;        shoryu=0;
	shokoh=0;     carga1=0;      poison;
	guardia;      voz;           blend_frame;
	accion; 	  m8_step;		 player_color;
	tipo_ataque;  vibracion;
	
begin

	id_constructor = id;

	// predefine los botones start y cancel para pads
	/* BENNU /*
	set_title ("KOF - Flames Of Courage");
	pad_1 = joy_buttons(0);
	pad_2 = joy_buttons(1);
	if (pad_1<10)
		pmap1[6] = pad_1-1; pmap1[7] = pad_1-2;
	else	
		pmap1[6] = pad_1-4; pmap1[7] = pad_1-3;
	end	
	if (pad_2<10)
		pmap2[6] = pad_2-1; pmap2[7] = pad_2-2;
	else	
		pmap2[6] = pad_2-4; pmap2[7] = pad_2-3;
	end	
	/* GEMIX /*
	set_title ("KOF - Flames Of Courage");
	pad_1 = joy_info(0, joy_buttons);
	pad_2 = joy_info(1, joy_buttons);
	if (pad_1<10)
		pmap1[6] = pad_1-1; pmap1[7] = pad_1-2;
	else	
		pmap1[6] = pad_1-4; pmap1[7] = pad_1-3;
	end	
	if (pad_2<10)
		pmap2[6] = pad_2-1; pmap2[7] = pad_2-2;
	else	
		pmap2[6] = pad_2-4; pmap2[7] = pad_2-3;
	end	
	/**/
		
		
	/* BENNU /*
	// carga datos de configuracion
	load_data (S_SETUP);
	load_data (S_SOUND);
	load_data (S_CONTROL);
	
	rand_seed(time());

	if (SCREEN_MODE == SCREEN_WINDOW) full_screen=false; end
	if (SCREEN_MODE == SCREEN_FULLSCREEN) full_screen=true; end
	/*
	if (FILTER == FILTER_SCALE2X)  SCALE_MODE = SCALE_SCALE2X; end
	if (FILTER == FILTER_HIGHQ2X)  SCALE_MODE = SCALE_HQ2X; end
	if (FILTER == FILTER_NORMAL2X) SCALE_MODE = SCALE_NORMAL2X; end
	if (FILTER == FILTER_SCANL2X)  SCALE_MODE = SCALE_SCANLINE2X; end
	*/
	set_mode (SIZEX, SIZEY, 16, 0);	
	
	
	blend_red = blendop_new();
	blend_pur = blendop_new();
	blend_ice = blendop_new();

	blend_pow[0] = blendop_new();
	blend_pow[1] = blendop_new();
	blend_pow[2] = blendop_new();
	blend_pow[3] = blendop_new();
	
	blendIntensity = BLEND_INTENSITY;
    blendop_tint (blend_red, BLEND_INTENSITY, 255,140,40);
    blendop_tint (blend_pur, BLEND_INTENSITY, 200,100,250);
    blendop_tint (blend_ice, BLEND_INTENSITY, 160,160,250);
    blendop_tint (blend_pow[0], 0.1, 255,255,255);
    blendop_tint (blend_pow[1], 0.2, 255,255,255);
    blendop_tint (blend_pow[2], 0.3, 255,255,255);
    blendop_tint (blend_pow[3], 0.4, 255,255,255);
	
	/* BENNU_WII /*
	// carga datos de configuracion	
	load_data (S_SETUP);
	rand_seed(time());

	if (FILTER == FILTER_SCALE2X)  SCALE_MODE = SCALE_SCALE2X; end
	if (FILTER == FILTER_HIGHQ2X)  SCALE_MODE = SCALE_HQ2X; end
	if (FILTER == FILTER_NORMAL2X) SCALE_MODE = SCALE_NORMAL2X; end
	if (FILTER == FILTER_SCANL2X)  SCALE_MODE = SCALE_SCANLINE2X; end
	
	set_mode (SIZEX, SIZEY, 16, 0);	
	
	blend_red = blendop_new();
	blend_pur = blendop_new();
	blend_ice = blendop_new();

	blend_pow[0] = blendop_new();
	blend_pow[1] = blendop_new();
	blend_pow[2] = blendop_new();
	blend_pow[3] = blendop_new();
	
	blendIntensity = BLEND_INTENSITY;
    blendop_tint (blend_red, BLEND_INTENSITY, 255,140,40);
    blendop_tint (blend_pur, BLEND_INTENSITY, 200,100,250);
    blendop_tint (blend_ice, BLEND_INTENSITY, 160,160,250);
    blendop_tint (blend_pow[0], 0.1, 255,255,255);
    blendop_tint (blend_pow[1], 0.2, 255,255,255);
    blendop_tint (blend_pow[2], 0.3, 255,255,255);
    blendop_tint (blend_pow[3], 0.4, 255,255,255);

	/* BENNU_WIZ /*
	
	// carga datos de configuracion
	load_data (S_SETUP);
	
	rand_seed(time());
	set_mode (SIZEX, SIZEY, 16, 0);
	
	blend_red = blendop_new();
	blend_pur = blendop_new();
	blend_ice = blendop_new();
	
	blend_pow[0] = blendop_new();
	blend_pow[1] = blendop_new();
	blend_pow[2] = blendop_new();
	blend_pow[3] = blendop_new();
	
	blendIntensity = BLEND_INTENSITY;
    blendop_tint (blend_red, BLEND_INTENSITY, 255,140,40);
    blendop_tint (blend_pur, BLEND_INTENSITY, 200,100,250);
    blendop_tint (blend_ice, BLEND_INTENSITY, 160,160,250);
    blendop_tint (blend_pow[0], 0.1, 255,255,255);
    blendop_tint (blend_pow[1], 0.2, 255,255,255);
    blendop_tint (blend_pow[2], 0.3, 255,255,255);
    blendop_tint (blend_pow[3], 0.4, 255,255,255);

	/* BENNU_GCW0 /**/
	
	// carga datos de configuracion
	load_data (S_SETUP);
	
	rand_seed(time());
	set_mode (SIZEX, SIZEY, 16, 0);
	
	blend_red = blendop_new();
	blend_pur = blendop_new();
	blend_ice = blendop_new();
	
	blend_pow[0] = blendop_new();
	blend_pow[1] = blendop_new();
	blend_pow[2] = blendop_new();
	blend_pow[3] = blendop_new();
	
	blendIntensity = BLEND_INTENSITY;
    blendop_tint (blend_red, BLEND_INTENSITY, 255,140,40);
    blendop_tint (blend_pur, BLEND_INTENSITY, 200,100,250);
    blendop_tint (blend_ice, BLEND_INTENSITY, 160,160,250);
    blendop_tint (blend_pow[0], 0.1, 255,255,255);
    blendop_tint (blend_pow[1], 0.2, 255,255,255);
    blendop_tint (blend_pow[2], 0.3, 255,255,255);
    blendop_tint (blend_pow[3], 0.4, 255,255,255);
	
	/**/
	
	/* GEMIX /*
	// carga datos de configuracion
	load_data (S_SETUP);
	load_data (S_SOUND);
	load_data (S_CONTROL);

	//ignore_error(140);
	ignore_error(105); // not fpg found
	ignore_error(121);
	ignore_error(133); // get_real_point
	ignore_error(110); // collision
//	ignore_error(128);
//	ignore_error(175);
	
	if (SCREEN_MODE == SCREEN_WINDOW) 
		set_mode (SIZEX, SIZEY, color_deep, mode_window); 
	end
	if (SCREEN_MODE == SCREEN_FULLSCREEN) 
		set_mode (SIZEX, SIZEY, color_deep, mode_fullscreen); 
	end
	if (FILTER == FILTER_NORMAL2X) 
		set_filter_mode (filter_scale_normal2x, filter_scanline_noscanline); 
	end
	if (FILTER == FILTER_SCANL2X) 
		set_filter_mode (filter_scale_normal2x, filter_scanline_100percent); 
	end
	if (FILTER == FILTER_SCALE2X or FILTER == FILTER_HIGHQ2X) 
		set_filter_mode (filter_scale_scale2x, filter_scanline_noscanline); 
	end	
	/**/
	
	
	set_fps (fps_target,skip);
	
	// fuentes y ficheros generales
	fich_game = load_fpg ("kof\game.fpg");
	fich_select = load_fpg ("kof\select.fpg");
	
	font_p1 = load_fnt ("kof\p1.fnt");
	font_p2 = load_fnt ("kof\p2.fnt");
	font_p3 = load_fnt ("kof\p3.fnt");
	font_numbers = load_fnt ("kof\number.fnt");
	fontstriker1 = load_fnt ("kof\striker1.fnt");
	fontstriker2 = load_fnt ("kof\striker2.fnt");
	fontstriker3 = load_fnt ("kof\striker3.fnt");
	font_menu = load_fnt ("kof\configbi.fnt");
	
	
	////////////////////////////carga los sonidos/////////////////////////
	if (sound_active)
		s_benet = load_snd("kof\snd\benet.wav",0);
		s_title = load_snd("kof\snd\daking.wav",0);
		s_round = load_snd("kof\snd\round.wav",0);
		s_one = load_snd("kof\snd\one.wav",0);
		s_two = load_snd("kof\snd\two.wav",0);
		s_three = load_snd("kof\snd\three.wav",0);
		s_four = load_snd("kof\snd\four.wav",0);
		s_five = load_snd("kof\snd\five.wav",0);
		s_final = load_snd("kof\snd\final.wav",0);
		s_ready = load_snd("kof\snd\ready.wav",0);
		s_go=load_snd("kof\snd\go.wav",0);
		s_ko=load_snd("kof\snd\ko.wav",0);
		s_winner=load_snd("kof\snd\winner.wav",0);
		s_perfect=load_snd("kof\snd\perfect.wav",0);
		s_time=load_snd("kof\snd\time.wav",0);
		s_over=load_snd("kof\snd\over.wav",0);
		s_draw=load_snd("kof\snd\draw.wav",0);
		s_selectdo=load_snd("kof\snd\select1.wav",0);
		s_select=load_snd("kof\snd\select2.wav",0);
		s_cut=load_snd("kof\snd\cut.wav",0);
		s_hit1=load_snd("kof\snd\lowpunch.wav",0);
		s_hit2=load_snd("kof\snd\strpunch.wav",0);
		s_hit3=load_snd("kof\snd\lowkick.wav",0);
		s_hit4=load_snd("kof\snd\strkick.wav",0);
		s_hit5=load_snd("kof\snd\strike.wav",0);
		s_megahit=load_snd("kof\snd\megahit.wav",0);
		s_fhit=load_snd("kof\snd\fhit.wav",0);
		s_airp=load_snd("kof\snd\airp.wav",0);
		s_airk=load_snd("kof\snd\airk.wav",0);
		s_airt=load_snd("kof\snd\airt.wav",0);
		s_jump=load_snd("kof\snd\jump.wav",0);
		s_sjump=load_snd("kof\snd\sjump.wav",0);
		s_xjump=load_snd("kof\snd\xjump.wav",0);
		s_fall=load_snd("kof\snd\fall.wav",0);
		s_dash=load_snd("kof\snd\dash.wav",0);
		s_boom=load_snd("kof\snd\boom.wav",0);
		s_floor=load_snd("kof\snd\floor.wav",0);
		s_burn1=load_snd("kof\snd\burn1.wav",0);
		s_burn2=load_snd("kof\snd\burn2.wav",0);
		s_catch=load_snd("kof\snd\catch.wav",0);
		s_guard=load_snd("kof\snd\guard.wav",0);
		s_speed=load_snd("kof\snd\speed.wav",0);
		s_flame1=load_snd("kof\snd\flame1.wav",0);
		s_flame2=load_snd("kof\snd\flame2.wav",0);
		s_flame3=load_snd("kof\snd\flame3.wav",0);
		s_flame4=load_snd("kof\snd\flame4.wav",0);
		s_flame5=load_snd("kof\snd\flame5.wav",0);
		s_shock1=load_snd("kof\snd\shock1.wav",0);
		s_special=load_snd("kof\snd\special.wav",0);
		s_run1=load_snd("kof\snd\run1.wav",0);
		s_run2=load_snd("kof\snd\run2.wav",0);
		s_charging=load_snd("kof\snd\charging.wav",0);
		s_charged=load_snd("kof\snd\charged.wav",0);
		s_indi3=load_snd("kof\snd\indi3.wav",0);
		
		stop_cd();
		
	end
	
	mosca = load_pcx("kof\moscojo.pcx");
		
	/* BENNU /*
	pad_1 = joy_buttons(0);
	pad_2 = joy_buttons(1);
	
	/* GEMIX /*
	pad_1 = joy_info(0, joy_buttons);
	pad_2 = joy_info(1, joy_buttons);	
	/**/
	
	x = 360; y = 120;
	game_frame = 0;
	file = fich_select;

	/* BENNU /*
	game_state = ST_BENNU;//ST_MAIN;//ST_INIT;
	/* BENNU_WII /*
	game_state = ST_BENNU;//ST_MAIN;//ST_INIT;
	/* BENNU_WIZ /*
	game_state = ST_BENNU;//ST_MAIN;//ST_INIT;
	/* BENNU_GCW0 /**/
	game_state = ST_BENNU;//ST_MAIN;//ST_INIT;
	/* GEMIX /*
	game_state = ST_INIT;//ST_MAIN;//ST_INIT;
	/**/
	
	if (developing) game_state = ST_MAIN; end
	
	loop
		
		game_frame++;
		
		// pad controls
		get_controls ();
		
		tipo_control = control_menu;
		
		switch (game_state)
			
			// ST BENNU SPLASHSCREEN
			case ST_BENNU:
				if (game_frame == 1)
					delete_text(all_text);
					clear_screen();
					bennuLogo = load_png("kof/bennugd.png");
					graph = 0;
					screen_put(0,bennuLogo);
					fade_on();
				end
				
				if (game_frame==600)
					fade (0,0,0,1);
				end
				if (game_frame>=100)
					if (control_enter and bloker==0)
						fade (0,0,0,1);
						game_frame=600; bloker=1;
					end
				end
				if (game_frame>700)
					screen_clear();
					unload_map(0,bennuLogo);
					intensidad = 0;
					game_frame = 0; 
					game_state = ST_LOGO; 
				end
			end
			
			// ST_INIT
			case ST_INIT:
				
				pegata (SIZEX2+80,SIZEY2,989,c_screen,0,100,z,-1,fich_select);
				
				if (game_frame == 1)
					let_me_alone ();
					delete_text (all_text);
					clear_screen ();
					
					alpha = 250; // hacker chungo para linux (no tocar!)
					graph = rand(990,993);
					x = 80;
					play_snd (s_benet,512,256);
					draw_z = -999;
					draw (3,1,14,0,0,0,320,240);
					draw (3,1,14,0,0,0,320,240);
					
					write (font_p3,310,INTRO_TXT_Y[0],5,"GENERO-STYLE-STOFF");
					write (fontstriker3,310,INTRO_TXT_Y[1],5,"JUEGO DE PELEAS");
					write (fontstriker3,310,INTRO_TXT_Y[2],5,"VS FIGHTING GAME");
					write (fontstriker3,310,INTRO_TXT_Y[3],5,"VS STREIT SPIEL");
					
					fade_on();
					
				end
				
				if (game_frame>=10 and game_frame<1000)
					alpha=255; // hacker chungo para linux (no tocar!)
					delete_draw (all_drawing);
					for (i=0; i<INTRO_SLICES; i++)
						intro_slice_x = INTRO_X0+(INTRO_SLICESIZE*i);
						intro_slice_size = INTRO_SLICESIZE - ((game_frame-10)/2) + (i*5);
						if (intro_slice_size > INTRO_SLICESIZE) intro_slice_size = INTRO_SLICESIZE; end
						if (intro_slice_size > 0)
							draw (3,1,15,0,intro_slice_x,0,intro_slice_x+intro_slice_size,240);
							draw (3,1,15,0,intro_slice_x,0,intro_slice_x+intro_slice_size,240);
						else
							if (i==INTRO_SLICES-1) game_frame=999; end
						end
					end
					draw (3,1,14,0,SIZEX2,0,SIZEX,240);
					draw (3,1,14,0,SIZEX2,0,SIZEX,240);
				end
				
				
				if (game_frame>1000)
					delete_draw (all_drawing);
					if (game_frame-1000 < SIZEX2)
						draw (3,1,8,0,SIZEX2+(game_frame-1000)+5,10,SIZEX,140);
						draw (3,1,8,0,SIZEX2+(game_frame-1000)+10,10,SIZEX,140);
						draw (3,1,8,0,SIZEX2+(game_frame-1000)+15,10,SIZEX,140);
						draw (3,1,8,0,SIZEX2+(game_frame-1000)+20,10,SIZEX,140);
					end
					
					// insert particle
					if ((game_frame>1030 and game_frame<1140) and rand(0,6)==0)
						insert_particle (SIZEX2+(game_frame-1000)+15, INTRO_TXT_Y[0],
							rand (-2<<PRECISION_BITS,-1<<(PRECISION_BITS-1))/2, 
							rand (-2<<PRECISION_BITS,-1<<(PRECISION_BITS-1))/2, 
							0, (1<<PRECISION_BITS)/16, 0);
					end
					if ((game_frame>1050 and game_frame<1140) and rand(0,3)==0)
						insert_particle (SIZEX2+(game_frame-1000)+15, 
							INTRO_TXT_Y[rand(1,3)], 
							rand (-2<<PRECISION_BITS,-1<<(PRECISION_BITS-1))/2,
							rand (-2<<PRECISION_BITS,-1<<(PRECISION_BITS-1))/2, 
							0, (1<<PRECISION_BITS)/16, 0);
					end
				end	
					
				if (game_frame>1000)
					// run/draw particles
					draw_particles ();
				end
				
				if (game_frame==1590)					
					fade_off ();
					game_frame=0; 
					game_state = ST_LOGO;
				end
				
				if (control_enter and bloker==0 and game_frame>=40and game_frame<1140)
					game_frame=1140; bloker=1;
				end
			end
			
			// ST_LOGO
			case ST_LOGO:
				if (game_frame == 1)
					//let_me_alone();
					delete_text(all_text);
					clear_screen();
					graph = 0;
					
					fade_on();
				end
				if (game_frame>=10 and game_frame<=160)
					
					write (font_p3,160,110,4,"The King Of Fighters'Flames Of Courage V5f");
					write (font_p3,160,120,4,"Produced By EGS");
					write (font_p3,160,130,4,"2001, 2010");
					
					if (game_frame>=50 and game_frame<180 and 
						control_enter and bloker==0)
						delete_text(all_text); 
						game_frame=180; 
						bloker=1;
					end
					
					// truco moscas
					/* BENNU /*
					if (key(_f) and intensidad==0)
						write (font_p3,140,210,4,"F"); intensidad=1;
					end
					if (key(_l) and intensidad==1)
						write (font_p3,160,210,4,"L"); intensidad=2;
					end
					if (key(_y) and intensidad==2)
						write (font_p3,180,210,4,"Y"); intensidad=3; 
						moscon = true;
					end
					
					/* BENNU_WII /*
					if (control(saltar) and intensidad==0)
						write (font_p3,140,210,4,"F"); intensidad=1;
					end
					if (control(agachar) and intensidad==1)
						write (font_p3,160,210,4,"L"); intensidad=2;
					end
					if (control(retroceder) and intensidad==2)
						write (font_p3,180,210,4,"Y"); intensidad=3;
						moscon = true;
					end
					
					/* BENNU_WIZ /*
					if (control(saltar) and intensidad==0)
						write (font_p3,140,210,4,"F"); intensidad=1;
					end
					if (control(agachar) and intensidad==1)
						write (font_p3,160,210,4,"L"); intensidad=2;
					end
					if (control(retroceder) and intensidad==2)
						write (font_p3,180,210,4,"Y"); intensidad=3;
						moscon = true;
					end

					/* BENNU_GCW0 /**/
					if (control(saltar) and intensidad==0)
						write (font_p3,140,210,4,"F"); intensidad=1;
					end
					if (control(agachar) and intensidad==1)
						write (font_p3,160,210,4,"L"); intensidad=2;
					end
					if (control(retroceder) and intensidad==2)
						write (font_p3,180,210,4,"Y"); intensidad=3;
						moscon = true;
					end
					
					/* GEMIX /*
					if (key(_f) and intensidad==0)
						write (font_p3,140,210,4,"F"); intensidad=1;
					end
					if (key(_l) and intensidad==1)
						write (font_p3,160,210,4,"L"); intensidad=2;
					end
					if (key(_y) and intensidad==2)
						write (font_p3,180,210,4,"Y"); intensidad=3; 
						moscon = true;
					end
					/**/
				end
				
				if (game_frame==180)
					delete_text(all_text);
					vida = 400; logo_frame = 180;
				end
				
				// LOGO megaguay
				if (logo_frame>=180) logo_frame++; end
				if (logo_frame>=180 and logo_frame<600)
					if (vida>0) 
						vida -= (vida/120)+1; 
						for (i=0; i<6; i++)
							x = SIZEX2 + (((vida/2)*cos((logo_frame+(i*6))*10000))/DIV_SINCOS);
							y = SIZEY2 + (((vida/2)*sin((logo_frame+(i*6))*10000))/DIV_SINCOS);
							pegata (x,y,900+i,c_screen,16,100,z,-1,fich_select);
						end
					else	
						pegata (x,y,907,c_screen,16,100,z,-1,fich_select);
					end
				end
				if (game_frame<600)
					if (logo_frame==350)
						fade(200,200,200,1);
					end
					if (logo_frame==440)
						fade(100,100,100,1);
					end
				end
				if (logo_frame==600)
					vida = 0;
				end
				if (logo_frame>=600)
					vida++;
					for (i=0; i<6; i++)
						x = SIZEX2 + ((i-3)*vida);
						y = SIZEY2;
						pegata (x,y,900+i,c_screen,16,100,z,-1,fich_select);
					end
				end
				
				if (game_frame==600)
					fade (0,0,0,1);
				end
				if (game_frame>=200)
					if (control_enter and bloker==0)
						fade (0,0,0,1);
						game_frame=600; bloker=1;
					end
				end
				if (game_frame>700)
					intensidad = 0;
					game_frame = 0; 
					game_state = ST_TITLE; 
				end
			end
			
			// ST_TITLE
			case ST_TITLE:
				if (game_frame == 1)
					let_me_alone();
					delete_text(all_text);
					clear_screen();
					
					file = fich_game; 
					graph = 999; 
					x = 160; y = 120;
					
					pegata (160,165,graph,c_screen,0,size,-10,2,fich_select);
					
					if (mapa)
						unload_graph (mapa);
						mapa = 0;
					end
					fade (100,100,100,6);
					play_snd (s_title,512,220);
				end
				
				if (control_enter and bloker==0)
					fade_off (); 
					game_state = ST_MAIN; 
					game_frame = 0;
					
					play_snd (s_selectdo,512,256);
					unload_snd (s_benet);
					unload_snd (s_title);
					bloker = 1;
				end
			end
			
			// ST_MAIN
			case ST_MAIN:
				if (game_frame == 1)
					let_me_alone ();
					delete_text (all_text);
					
					if (mapa)
						unload_graph (mapa);
						mapa = 0;
					end
					
					clear_screen ();
					mapa = load_map("kof\option.map");
					put_screen (0, mapa);
					
					for (nuevo_estado=0; nuevo_estado<sizeof(eliminados)/4; nuevo_estado++)
						eliminados[nuevo_estado]=0;
					end
					
					for (nuevo_estado=0; nuevo_estado<255; nuevo_estado++)
						pintura[nuevo_estado]=1;
					end					
					convert_palette (fich_game,999,&pintura);
					
					file = fich_game; 
					graph = 38; bloker=1;
					x = 72; y = MAIN_MENU_Y0;
					
					luchador1=0; luchador2=1;
					striker1=0; striker2=0;
					wins1 = wins2 = 0;
					
					fade_on();
				end
				
				if (control(agachar) and bloker_d==0)
					y+=30; play_snd (s_select,512,256);
					if (y>MAIN_MENU_Y1) y=MAIN_MENU_Y0; end
					bloker_d = 1;
				end
				if (control(saltar) and bloker_d==0)
					y-=30; play_snd (s_select,512,256);
					if (y<MAIN_MENU_Y0) y=MAIN_MENU_Y1; end
					bloker_d = 1;
				end
				
				if (y==80 or y==90)  	intensidad=1; end
				if (y==110) 			intensidad=2; end
				if (y==140 or y==120) 	intensidad=3; end
				if (y==170 or y==150) 	intensidad=4; end
				
				if (control_enter and bloker==0)
					
					fade_off ();  
					
					if (mapa) 
						unload_graph (mapa);
						mapa = 0;
					end	
					
					delete_text(all_text);
					play_snd (s_selectdo,512,256); 
					
					graph = 0;
					game_frame = 0;
					
					switch (intensidad)
						case 1:
							game_state = ST_SELECT;
							game_mode = MODE_ARCADE;
							wins1 = 1;
						end
						case 2:
							game_state = ST_SELECT;
							game_mode = MODE_VS2P; 
						end
						case 3:
							game_state = ST_SELECT;
							game_mode = MODE_TRAINING; 
						end
						case 4:
							game_state = ST_OPTIONS;
						end
					end	
				end
			end
			
			// ST_OPTIONS
			case ST_OPTIONS:
				if (game_frame == 1)
					let_me_alone();
					delete_text (all_text);
					
					clear_screen ();
					mapa = load_map("kof\optionco.map");
					put_screen (0, mapa);
					
					id_option = options();
					fade_on ();
				end
			end
			
			// ST_SELECT
			case ST_SELECT:
				if (game_frame == 1)
					clear_screen (); 
					let_me_alone (); 
					delete_text (all_text);
					
					id_select = select();
					fade_on ();
				end
			end
			
			// ST_PLAYING
			case ST_PLAYING:
				if (game_frame == 1)
					stop_scroll (1);
					clear_screen (); 
					let_me_alone (); 
					delete_text (all_text);
					unload_fpg (fich_select);
					
					time = 60;
					
					battle = combate();
					fade_on ();
				end
			end
			// ST_GAME_OVER
			case ST_GAME_OVER:
				if (game_frame == 1)
					clear_screen (); 
					let_me_alone (); 
					delete_text (all_text);
					
					game_over (game_over_type);
					fade_on ();
				end
			end
		end
		
		// parche cojonudo para la musica que peta en Wii
		/* BENNU_WII /*
		if (game_state == ST_SELECT) 
			if (timer[0] > 2400) stop_song(); end
			
		elseif (game_state == ST_PLAYING)
			if (s_musica_index==FIGHTER_KYO and timer[0]>29000) 		stop_song(); end
			if (s_musica_index==FIGHTER_KYO94 and timer[0]>22000) 		stop_song(); end
			if (s_musica_index==FIGHTER_ATHENA and timer[0]>25000) 		stop_song(); end
			if (s_musica_index==FIGHTER_IORI and timer[0]>28400) 		stop_song(); end
			if (s_musica_index==FIGHTER_TERRY and timer[0]>25000) 		stop_song(); end
			if (s_musica_index==FIGHTER_TERRY94 and timer[0]>25000) 	stop_song(); end
			if (s_musica_index==FIGHTER_CRIMSON and timer[0]>33000) 	stop_song(); end
			if (s_musica_index==FIGHTER_KASUMI and timer[0]>17600) 		stop_song(); end
			if (s_musica_index==FIGHTER_TAKUMA and timer[0]>17600) 		stop_song(); end
			if (s_musica_index==FIGHTER_K and timer[0]>24500) 			stop_song(); end
			if (s_musica_index==FIGHTER_KULA and timer[0]>29400) 		stop_song(); end
			if (s_musica_index==FIGHTER_K9999 and timer[0]>19200) 		stop_song(); end
			
		elseif (game_state == ST_OPTIONS)
			if (is_playing_music (s_music1))
				if (s_musica_index==MUSIC_KYO96 and timer[0]>29000) 	stop_song(); end
				if (s_musica_index==MUSIC_KYO94 and timer[0]>22000) 	stop_song(); end
				if (s_musica_index==MUSIC_ATHEN and timer[0]>25000) 	stop_song(); end
				if (s_musica_index==MUSIC_IORIY and timer[0]>28400) 	stop_song(); end
				if (s_musica_index==MUSIC_TERRY and timer[0]>25000) 	stop_song(); end
				if (s_musica_index==MUSIC_CRIMS and timer[0]>33000) 	stop_song(); end
				if (s_musica_index==MUSIC_KASUM and timer[0]>17600) 	stop_song(); end
				if (s_musica_index==MUSIC_TAKUM and timer[0]>17600) 	stop_song(); end
				if (s_musica_index==MUSIC_K     and timer[0]>24500) 	stop_song(); end
				if (s_musica_index==MUSIC_KULAD and timer[0]>29400) 	stop_song(); end
				if (s_musica_index==MUSIC_K9999 and timer[0]>19200) 	stop_song(); end
			end
		end	
		
		// vibracion
		/* BENNU_WII /*
		if (game_state == ST_PLAYING)
			if (id_luchador1.vibracion>0 and game_frame%3==0)
				id_luchador1.vibracion--;
			end
			if (wpad_is_ready(0))
				wpad_rumble (0, (id_luchador1.vibracion>0));
			end
			
			if (id_luchador2.vibracion>0 and game_frame%3==0)
				id_luchador2.vibracion--;
			end
			if (wpad_is_ready(1) and (game_mode == MODE_VS2P or 
				(game_mode == MODE_TRAINING and cputype==3))) 
				wpad_rumble (0, (id_luchador2.vibracion>0)); 
			end
		end
		/**/
		
		// volume control
		/* BENNU_WIZ /*
		
		
		if (control_volup)
			if (game_frame%2==0) 
				master_volume++; 
				if (is_playing_music (s_music1)) set_musica_volume (s_music1, 128); end
				if (master_volume>MAX_VOLUME) master_volume=MAX_VOLUME; end
				show_volume_frames = 0;
			end
		end
		
		if (control_voldown)
			if (game_frame%2==0) 
				master_volume--;
				if (is_playing_music (s_music1)) set_musica_volume (s_music1, 128); end
				if (master_volume<0) master_volume=0; end
				show_volume_frames = 0;
			end
		end
		
		final_volume = (128*master_volume)/100;
		set_channel_volume (ALL_SOUND, final_volume);
		
		if (show_volume_frames<120)
			show_volume_frames++;
			write_int (0,SIZEX-15,5,2,&master_volume);
			write (0,SIZEX-40,5,2,"VOL");
			write (0,SIZEX-5,5,2,"%");
		end
		
		// exit clasico
		/* BENNU /*
		if ((key(_alt) and key(_x)) or (exit_status==1))
			//if (!fading) exit_screen (); end
			exit(0, "");
		end		
		/* GEMIX /*
		if (key(_alt) and key(_x))
			exit(0, "");
		end
		
		// exit con menu
		/* BENNU_WII /*
		if (control_home)
			if (!fading) exit_screen (); end
		end
		/* BENNU_WIZ /*
		if (control_cancel and game_state<ST_OPTIONS and bloker==0)
			if (!fading) exit_screen (); end
		end
		/* BENNU_GCW0 /**/
		if (control_cancel and game_state<ST_OPTIONS and bloker==0)
			if (!fading) exit_screen (); end
		end
		/**/
		
		frame;
		
		if (not control_enter and not control_cancel) bloker=0;end
		if (not control(agachar) and 
			not control(saltar))
			bloker_d = 0;
		end		
	end
end

process pegata (x,y,graph,ctype,flags,size,z,tipo,file);

private
	//bastardy[]=994,994,995,995,996,996,995,995;
	disco[]=11,11,12,12,13,13,14,14,13,13,12,12,10,10,12,12,13,13,14,14,14,14,14,14,14,
    14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,
    14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,12,12,10,10,12,12,14,14,12,
    12,10,10,12,12,14,14,12,12,10,10,12,12,14,14,12,12,10,10;
	pow_subir[]=60,61,62,63,64,65;
	llama1[]=500,500,501,501,502,502;
	llamvd[]=540,540,541,541,542,542,543,543,544,544,545,545,545,545;
	llama3[]=506,507,507,508,508,508,508;
	sera[]=500,500,500,500,500,500,501,501,501,501,501,501,501,501,501,501,502,502,
	503,503,504,504,505,505,506,506,507,507,508,508,505,505,506,506,507,507,508,508,
	509,509,509,509;
	danger[]=2,34,2,34;
	explosion1[]=0,0,68,69,70,71,72,73,74,75,76,77,78,79,80,81;
	explosion2[]=0,0,89,90,91,92,93,94,95,96,97,97;
	explosion3[]=98,99,100,101,102,103,104,105,106,107,108,109,
	110,111,112,113,114,115,116,116;
	burn[]=0,0,0,0,0,0,500,500,501,501,502,502,503,503,500,500,501,501,502,502,503,503,
    500,500,501,501,502,502,503,503,500,500,501,501,502,502,503,503,500,500,501,501,502,
    502,503,503,500,500,501,501,502,502;
	sicosodo[]=516,516,516,516,516,516,514,514,534,534,535,535,536,536,537,537,
	538,538,539,539,540,540,539,539,540,540,539,539,540,540,539,539,540,540;
	psyk_telep[]=151,152,153,151,152,153,151,152,
	153,151,152,0,151,0,153,0,152,152;
	fenix[]=574,574,575,575,576,576,577,577,574,574,575,575,576,576,577,577,
	0,0,0,0,578,578,579,579,580,580,581,581,582,582,583,583,583,583;
	kruee[]=555,555,556,556,557,557,558,558,559,559,560,560,561,561,562,562,563,563;
	flama[]=210,210,211,211,212,212,213,213,214,214,215,215,216,216,217,217,218,218;
	polvo[]=132,132,133,133,134,134,135,135,136,136,137,137,138,138,139,139,140,140,141,141,141,141;
	hielo[]=108,108,109,109,110,110,111,111,112,112,113,113,114,114,
	115,115,115,115,115,115,0,115,115,115,0,115,115,0,115,0,115,0,115,0,
	115,0,0,115,0,0,115,0,0,0,115,0,0,0,0,115;
	llamarada[]=
    0,0,0,0,0,0,0,0,0,0,0,0,564,564,565,565,566,566,567,567,564,564,565,565,566,566,
    567,567,564,564,565,565,566,566,567,567,568,568,569,569,570,570,571,571,571,571;
	healing[]=560,561,562,563,564,565,562,563,564,565,562,563,564,565,
	562,563,564,565,562,563,564,565,562,563,564,565,562,563,564,565,562,
	563,564,565,562,563,564,565,562,563,564,565,562,563,564,565,562,563,
	564,565,566,567,568,569,570,571,572,573;
	kyo[]=1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,6,
	7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,43,43,43,43,
	44,44,44,44,44,44,44,44,45,45,46,46,46,46,46,46,46,46,46,46,46,46,47,47,47,
	47,47,47,47,47,47,47,47,47,87,87,88,88,88,88,88,88,89,89,89,89,89,89,89,89,
	90,90,90,90,90,90,90,90,108,108,108,108,108,108,108,108,109,109,109,109,109,
	109,110,110,110,110,111,111,112,112,112,112,113,113,113,113,113,113,
	178,178,142,142,179,179,199,199,180,180,181,181,182,182,183,183,184,184,185,
	185,186,186,186,186,187,187,187,187,158,158,159,158,158,159,159,159,159,159;
	cuerpo_taku[]=207,207,207,207,207,207,207,207,207,207,207,207,207,207,207,
	207,207,207,207,207,208,208,208,209,209,209,210,210,210,211,211,211,212,
	212,212,213,213,213,214,214,214,214,214,214,214,214,214,214,214,215,215,
	215,215,215,215,215,215,215,215,215,216,216,216,217,217,217,218,218,218,
	219,219,219,220,220,220,221,221,221,222,222,222,223,223,223,224,224,224,
	225,225,225,226,226,226,217,217,217,218,218,218,219,219,219,220,220,220,
	221,221,221,222,222,222,223,223,223,224,224,224,225,225,225,226,226,226,226;
	manita[]=900,900,900,900,901,901,901,901,902,902,902,903,903,903,903,903,
	903,903,903,903,903,903,903,903,903,903,903,903,903,903,903,903,903,903,
	903,903,903,903,903,903,903,903,903,903,903,903,903,903,903,903,904,904,
	904,904,904,904,904,904,904,904,904,904,904,904,904,904,904,904,904,904,
	905,905,905,901,901,901,901,900,900,900,900;
	orla_k[]=542,542,543,543,544,544,545,545,546,546,547,547,548,548,549,549,548,548,548,548,550,550,550,550;
	yama_k[]=551,552,552,554,555,556,557,558,559,560,561,562,562,563,563,563;
	kamelo[]=0,0,0,0,127,127,127,127,127,127,127,127,127,127,127,127,127,
	127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,289,289,
	290,290,290,290,292,292,292,292,292,292,0,0,0,0,0,0,0,0,281,281,281,
	281,282,282,282,282,283,283,283,283,325,325,326,326;
	rayo[]=30,30,30,30,0,0,31,31,31,31,0,0,32,32,32,32,0,0,
	33,33,33,33,0,0,34,34,34,34,0,0,35,35,35,35;
	rayk[]=0,0,0,0,40,40,41,41,42,42,43,43,44,44,45,45,46,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	47,47,48,48,49,49,50,50,51,51,52,52,53,53,54,54,55,55,56,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	57,57,58,58,59,59,60,60,61,61,62,62,63,63,64,64,65,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0;
	nest[]=543,543,543,543,543,543,544,544,544,544,544,544,545,545,545,545,
	545,545,546,546,546,546,546,546,546,546,547,547,547,547,547,547,548,548,
	548,548,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,549,
	549,549,549,549,549,549,549,549,549,549,549,549,550,550,550,550,551,551,
	551,551,552,552,552,552,553,553,553,553;
	cortarrr[]=579,579,579,579,580,580,580,580,581,581,581,581,581,581,
	582,582,582,582,582,582,582,582,582,582,582,582,582,582,582,582,583,
	583,583,583,583,583,583,583,583,583,583,583,584,584,584,584,584,584,
	584,584,551,551,551,551,552,552,552,552,553,553,553,553;
	nestwin[]=543,543,543,543,544,544,544,544,545,545,545,545,565,565,
	565,565,566,566,566,566,567,567,567,567,568,568,568,568,568,568,568,
	568,568,568,569,569,569,569,569,569,569,569,569,569,570,570,570,570,
	570,570,570,570,571,571,571,571,571,571,571,571,572,572,572,572,572,
	572,572,572,573,573,573,573,573,573,573,573,574,574,574,574,574,574,
	574,574,575,575,575,575,575,575,576,576,576,576,576,576,576,576,576,
	576,576,576,577,577,577,577,577,577,577,577,577,577,578,578,578,578,
	578,578,578,578,578,578,577,577,577,577,577,577,577,577,577,577,578,
	578,578,578,578,578,578,578,578,578;
	nestlose[]=543,543,543,543,543,543,544,544,544,544,544,544,545,545,
	545,545,545,545,589,589,589,589,589,589,589,589,589,589,589,589,589,
	589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,
	589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,589,
	589,589,589,589,589,589,589,590,590,590,590,590,590,591,591,591,591,
	591,591,591,591,591,591,591,591,592,592,592,592,593,593,593,593,594,
	594,594,594,594,594,595,595,595,595,595,595,596,596,596,596,596,596;
	tetsu[]=310,310,310,310,310,310,311,311,311,311,312,312,312,312,313,
	313,313,313,314,314,314,314,315,315,315,315,316,316,316,316,317,317,
	318,318,318,318,319,319,319,319,320,320,320,320,321,321,321,321,322,
	322,322,322,322,322,323,323,323,323,324,324,324,324;
	tetsp[]=310,310,310,310,310,310,311,311,311,311,312,312,312,312,313,
	313,313,313,314,314,314,314,315,315,316,316,317,317,318,318,319,319,
	320,320,321,321,322,322,322,322,323,323,324,324,315,315,316,316,317,
	317,318,318,319,319,320,320,321,321,322,322,323,323,324,324,315,315,
	316,316,317,317,318,318,319,319,320,320,320,320,321,321,321,321,322,
	322,322,322,323,323,323,323,324,324,324,324;
	brazo[]=526,526,526,526,527,527,527,527,528,528,529,529,530,530,531,
	531,532,532,533,533,528,528,529,529,530,530,531,531,532,532,533,533,
	528,528,529,529,530,530,531,531,532,532,533,533,528,528,529,529,530,
	530,531,531,532,532,533,533,528,528,529,529,530,530,531,531,532,532,
	527,527,527,527,526,526,526,526;
	power_g[]=533,533,534,534,535,535,536,536,536,537,537,537,538,538,538,539,539,539,539;
	
	index; 
	subindex;
	
	txt1;
	txt2;
	txt3;
	txt4;
	txt5;
	
	
begin

	/* GEMIX /*
	mouse.cursor = true;
	/**/
	
	if (tipo==38 or tipo==39 or tipo==40)
		if (!SLOW_MACHINE) flags+=16; end
	end
	if (tipo==39 or tipo==40)
		if (father.intensidad==1) angle=90000; end
	end
	
	loop
		if (tipo==0 and blanquear) return; end
		if (tipo==251 and blanquear) return; end
		
		if (tipo==-1)//graficos esporadicos
			frame; return;
		end
		
		if (tipo==2)//letras press start
			paso++; 
			graph = 0;
			if (paso<(fps_target/2)) graph=998; end
			if (paso==fps_target) paso = 0; end
		end
		if (tipo==3)//pone nombres player 1
			file=fich_select;
			tipo_control = control_teclado1;
			if (luchador1==0 or luchador1==5) graph=24; end
			if (luchador1==1) graph=25; end
			if (luchador1==2 and !control(saltar)) graph=26; end
			if (luchador1==3 or luchador1==8) graph=27; end
			if (luchador1==4) graph=33; end
			if (luchador1==6) graph=36; end
		end
		if (tipo==4)//pone nombres player 2
			file=fich_select;
			tipo_control = control_teclado2;
			if (luchador2==0 or luchador2==5) graph=24; end
			if (luchador2==1) graph=25; end
			if (luchador2==2 and !control(saltar)) graph=26; end
			if (luchador2==3 or luchador2==8) graph=27; end
			if (luchador2==4) graph=33; end
			if (luchador2==6) graph=36; end
		end
		if (tipo==5)//pone caras player 1
			file=fich_select;
			tipo_control = control_teclado1;
			if (luchador1==0 or luchador1==5) graph=28; end
			if (luchador1==1) graph=29; end
			if (luchador1==2 and !control(saltar)) graph=30; end
			if (luchador1==3 or luchador1==8) graph=31; end
			if (luchador1==4) graph=32; end
			if (luchador1==6) graph=34; end
		end
		if (tipo==6)//pone caras player 2
			file=fich_select;
			tipo_control = control_teclado2;
			if (luchador2==0 or luchador2==5) graph=28; end
			if (luchador2==1) graph=29; end
			if (luchador2==2 and !control(saltar)) graph=30; end
			if (luchador2==3 or luchador2==8) graph=31; end
			if (luchador2==4) graph=32; end
			if (luchador2==6) graph=34; end
		end
		if (tipo==8)//pow player 1
			if (blanquear==1) return; end
			region=1; y=229;
			x=id_luchador1.power-10;
			if (estado==0)
				if (id_luchador1.estado<>_charge)
					graph=5; paso=0;
				end
				if (id_luchador1.estado==_charge)
					graph=pow_subir[paso++];
					if (paso==sizeof(pow_subir)/DIV)
						paso=0;
					end
				end
				if (id_luchador1.power==74)
					estado=1;
				end
			end
			if (estado==1)
				if (estado_juego<>0)
					id_luchador1.baja_pows++;
				end
				paso++; region=0;
				if (paso==1) graph=6; end
				if (paso==2) graph=7; end
				if (paso==3) graph=8; end
				if (paso>=4) graph=7; paso=0; end
				if (id_luchador1.power<74)
					paso=0; estado=0;
				end
				if (id_luchador1.baja_pows>=800 or
					id_luchador1.estado==_special1 or
					id_luchador1.estado==_special2)
					id_luchador1.baja_pows=0;
					if (id_luchador1.infinitypow==0) estado=2; end
				end
			end
			if (estado==2)
				if (graph<>5)
					pegata (x-1,y,10,ctype,0,100,z-25,145,file); graph=5;
				end
				region=1;
				if (id_luchador1.power>0)
					id_luchador1.power-=4;
				end
				if (id_luchador1.power<=0)
					paso=0; estado=0;
					id_luchador1.power=0;
				end
			end
			if (id_luchador1.power<=0)
				id_luchador1.power=0;
			end
		end
		if (tipo==9)//pow player 2
			if (blanquear==1) return; end
			region=2; y=229; flags=1;
			x=-id_luchador2.power+330;
			if (estado==0)
				if (id_luchador2.estado<>_charge)
					graph=5; paso=0;
				end
				if (id_luchador2.estado==_charge)
					graph=pow_subir[paso++];
					if (paso==sizeof(pow_subir)/DIV)
						paso=0;
					end
				end
				if (id_luchador2.power==74) estado=1; end
			end
			if (estado==1) flags=0;
				if (estado_juego<>0)
					id_luchador2.baja_pows++;
				end
				paso++; region=0;
				if (paso==1) graph=6; end
				if (paso==2) graph=7; end
				if (paso==3) graph=8; end
				if (paso==4) graph=7; paso=0; end
				if (id_luchador2.power<74)
					paso=0; estado=0;
				end
				if (id_luchador2.baja_pows==800 or
					id_luchador2.estado==_special1 or
					id_luchador2.estado==_special2)
					id_luchador2.baja_pows=0;
					if (id_luchador2.infinitypow==0) estado=2; end
				end
			end
			if (estado==2)
				if (graph<>5)
					pegata (x-1,y,10,ctype,0,100,z-25,145,file); graph=5;
				end
				region=2;
				if (id_luchador2.power>0)
					id_luchador2.power-=4;
				end
				if (id_luchador2.power<=0)
					id_luchador2.power=0;
					paso=0; estado=0;
				end
			end
			if (id_luchador2.power<=0)
				id_luchador2.power=0;
			end
		end
		//vida player 1
		if (tipo==10)
			if (blanquear==1) return; end
			define_region(5,30,14,118,13);
			region=5; flags=4; y=20;
			if ((x<-(id_luchador1.vida>>PRECISION_BITS)+207
				and id_luchador1.estado<>_recibir_flojos_suelo
				and id_luchador1.estado<>_recibir_flojos_agachado
				and id_luchador1.estado<>_recibir_flojos_bozo
				and !(id_luchador1.estado==_recibir_fuertes_aire and id_luchador1.paso<15)
				and id_luchador1.estado<>_recibir_fuertes_suelo
				and id_luchador1.estado<>_recibir_fuertes_agachado
				and id_luchador1.estado<>_recibir_fuertes_bozo
				and id_luchador1.estado<>_recibir_barridos_fuertes
				and id_luchador1.estado<>_recibir_genjuro
				and id_luchador1.estado<>100
				and id_luchador1.estado<>_recibir_toss
				and id_luchador1.estado<>_recibir_colleja
				) or id_luchador1.vida==0) //ir aadiendo nuevos recibirs
				x+=4;
			end
			if (x>-(id_luchador1.vida>>PRECISION_BITS)+207) 
				x=-(id_luchador1.vida>>PRECISION_BITS)+207; 
			end
		end
		//vida player 2
		if (tipo==11)
			priority=-1;
			if (blanquear==1) return; end
			define_region(6,172,14,118,13);
			region=6; flags=4; y=20;
			if ((x>(id_luchador2.vida>>PRECISION_BITS)+113
				and id_luchador2.estado<>_recibir_flojos_suelo
				and id_luchador2.estado<>_recibir_flojos_agachado
				and id_luchador2.estado<>_recibir_flojos_bozo
				//and id_luchador2.estado<>_recibir_fuertes_aire
				and !(id_luchador2.estado==_recibir_fuertes_aire and id_luchador2.paso<15)
				and id_luchador2.estado<>_recibir_fuertes_suelo
				and id_luchador2.estado<>_recibir_fuertes_agachado
				and id_luchador2.estado<>_recibir_fuertes_bozo
				and id_luchador2.estado<>_recibir_barridos_fuertes
				and id_luchador2.estado<>_recibir_genjuro
				and id_luchador2.estado<>100
				and id_luchador2.estado<>_recibir_toss
				and id_luchador2.estado<>_recibir_colleja
				) or id_luchador2.vida==0)//ir aadiendo nuevos recibirs
				x-=4;
			end
			if (x<(id_luchador2.vida>>PRECISION_BITS)+112) 
				x=(id_luchador2.vida>>PRECISION_BITS)+113; 
			end
		end
		
		//round
		if (tipo==12)
			z=-99; file=fichtxt;
			if (estado==0)//si es estado 0
				if (game_mode==MODE_TRAINING) estado=3; end
				if ((asaltos==1 and round==1) or
					(asaltos==2 and round<4) or
					(asaltos==3 and round<6))
					if (game_mode<>MODE_TRAINING) graph=7; end
				else
					graph=41;
				end
				y=100;
				if ((asaltos==1 and round==1 and x<=126) or
					(asaltos==2 and round<4 and x<=126) or
					(asaltos==3 and round<6 and x<=126) or
					(asaltos==1 and round>1 and x=<160) or
					(asaltos==2 and round=>4 and x=<160) or
					(asaltos==3 and round=>6 and x=<160))
					x+=10;//de 25 en 25
				else
					paso++;//si esta en el centro paso++
				end
				if (x==0)
					if ((asaltos==1 and round==1) or
						(asaltos==2 and round<4) or
						(asaltos==3 and round<6))
						play_snd (s_round,512,256);
					else
						play_snd (s_final,512,256);
					end
				end
				if (paso=>(FPS_BASE/5))
					paso = 0;
					pegata (246,100,0,c_screen,0,175,-100,13,fichtxt);
					estado=1; father.estado=0;
				end
			end
			if (estado==2)
				if ((asaltos==1 and round==1) or
					(asaltos==2 and round<4) or
					(asaltos==3 and round<6)) graph=9;
				else
					graph=42;
				end
				if (x>=320) estado=3; end
			end
			if (estado==3)
				if (paso==0)
					pegata (350,100,22,c_screen,0,100,-99,14,fichtxt);
					pegata (390,100,21,c_screen,0,100,-99,14,fichtxt);
					pegata (430,100,20,c_screen,0,100,-99,14,fichtxt);
					pegata (470,100,19,c_screen,0,100,-99,14,fichtxt);
					pegata (510,100,18,c_screen,0,100,-99,14,fichtxt);
					play_snd (s_ready,512,259);
					paso=1;
				end
			end
			if (estado==4)
				if (paso==0)
					pegata (-20,100,23,c_screen,0,100,-99,15,fichtxt);
					pegata (340,100,24,c_screen,0,100,-99,15,fichtxt);
					play_snd (s_go,512,259); FRAME; paso=1;
				end
			end
			if (estado==5)
				father.paso=0; father.estado++; estado_juego=1;
				return;
			end
		end
		if (tipo==13)//nuero round
			file=fichtxt;
			if (estado==0)
				if (paso==0)
					if ((asaltos==1 and round==1) or
						(asaltos==2 and round<4) or
						(asaltos==3 and round<6))
						pegata (x,y,10,ctype,flags,100,z+1,18,file);
					end
				end
				graph=0; paso++;
				if (paso>(fps_target/3)) // 20 sonido de 1.
					
					if (paso==(fps_target/3)+1)
						if (round==1) play_snd (s_one,512,256); end
						if (round==2 and asaltos>1) play_snd (s_two,512,256); end
						if (round==3 and asaltos>1) play_snd (s_three,512,256); end
						if (round==4 and asaltos>2) play_snd (s_four,512,256); end
						if (round==5 and asaltos>2) play_snd (s_five,512,256); end
					end
					
					if (round==1) graph=15; end
					if (round==2 and asaltos>1) graph=16; end
					if (round==3 and asaltos>1) graph=17; end
					if (round==4 and asaltos>2) graph=44; end
					if (round==5 and asaltos>2) graph=45; end
					
					if (size>100) size-=25; end
					if (paso>72)  estado=1; end
				end
			end
			if (estado==1)
				
				x-=(15*FPS_BASE)/fps_target; 
				father.x+=(15*FPS_BASE)/fps_target;
				
				if ((asaltos==1 and round==1) or
					(asaltos==2 and round<4) or
					(asaltos==3 and round<6))
					father.graph=9; graph=8;
				else
					father.graph=42; graph=43;
				end
				if (x<=-100)
					father.paso=0; father.estado=2; return;
				end
			end
		end
		if (tipo==14)//y de ready
			z=-30; file=fichtxt;
			if (estado==0)
				if (graph==22 and not x<=245) x-=15; end
				if (graph==21 and not x<=209) x-=15; end
				if (graph==20 and not x<=177) x-=15; end
				if (graph==19 and not x<=148) x-=15; end
				if (graph==18 and not x<=116) x-=15; end
				if (graph==22 and x<=240) x=240; end
				if (graph==21 and x<=200) x=200; end
				if (graph==20 and x<=160) x=160; end
				if (graph==19 and x<=120) x=120; end
				if (graph==18 and x<=80)  x=80;  end
				paso++;
				if (paso>=(64*fps_target)/FPS_BASE) 
					paso=0; estado=1; 
				end
			end
			if (x<=-500) return; end
			if (estado==1)
				size-=(20*FPS_BASE)/fps_target; 
				y+=3; 
				x+=-(((x-160)/3)*FPS_BASE)/fps_target;
				if (size>-80 and father.estado==3)
					father.paso=0; father.estado=4;
				end
				if (size<0) return; end
			end
		end
		if (tipo==15)//go!
			z=-40; file=fichtxt;
			if (graph==23 and paso<=((19*fps_target)/FPS_BASE))
				x+=(16*FPS_BASE)/fps_target;
				if (x>=120) x=120; paso++; end
			end
			if (graph==24 and paso<=((19*fps_target)/FPS_BASE))
				x-=(16*FPS_BASE)/fps_target;
				if (x<=200) x=200; paso++; end
			end
			if (paso>=((19*fps_target)/FPS_BASE))
				if (graph==23) x-=(8*FPS_BASE)/fps_target;
				else x+=(8*FPS_BASE)/fps_target; end
				alpha-=(12*FPS_BASE)/fps_target;
				size_y-=(12*FPS_BASE)/fps_target;
				size_x+=(12*FPS_BASE)/fps_target;
				
				if (size_y<0) size_y=0; end
				if (alpha<=0)
					father.estado=5; father.paso=0; return;
				end
			end
		end
		if (tipo==16)//fuego presentacion de kyo
			x=father.hit_x; y=father.hit_y;
			if (estado==0)
				graph=llama1[paso++];
				if (father.estado==_gesto_princ and 
					father.luchador==FIGHTER_CRIMSON)
					estado=4;
				end
				if (paso==sizeof(llama1)/DIV) paso=0; end
				if (father.estado==_special2) estado=1; end
			end
			if (estado==1 or estado==7)
				graph=llama1[paso++]+3;
				if (paso==sizeof(llama1)/DIV) paso=0; end
				if (father.estado==_special2 and father.intensidad==1)
					if (father.flags) x=father.x-40;
					else x=father.x+40; end
				end
				if ((father.estado==_special2 and father.paso>88) or
					(father.estado<>_special2 and father.estado<>_gesto_princ) or
					(father.estado==_special2 and father.intensidad==1 and father.paso>6))
					return;
				end
			end
			if (estado==2)
				graph=llama3[paso++];
				if (paso==sizeof(llama3)/DIV) return; end
			end
			if (estado==3)
				graph=llama1[paso++]+46;
				if (paso==sizeof(llama1)/DIV) paso=0; end
			end
			if (estado==4)
				graph=llama1[paso++]+49;
				if (paso==sizeof(llama1)/DIV) paso=0; end
				if (father.estado!=_gesto_princ) return; end
			end
			if (estado==5)
				graph=llama1[paso++]+53;
				if (paso==sizeof(llama1)/DIV) paso=0; end
			end
			if (estado==6)
				graph=llamvd[paso++];
				if (paso==(sizeof(llamvd)/DIV)-1)
					flags+=4;
				end
				if (paso==sizeof(llamvd)/DIV) return; end
			end
		end
		if (tipo==17)//traje de seilormun
			
			graph=sera[paso++];
			if (paso==sizeof(sera)/div) return; end
			if (paso==1) inc_y=-2; end
			if (paso%9==0) inc_y++; end
			if (inc_y>3) inc_y=3; end
			if (flags) x+=1; else x-=1; end
			y+=inc_y;
			
		end
		if (tipo==18) //disco fighter del numero de round
			graph=disco[paso++];
			if (paso==sizeof(disco)/DIV)
				return;
			end
		end
		if (tipo==19)
			if (blanquear==1) return; end
			graph=35;
		end
		if (tipo==20)//pone caras player striker pl1
			if (blanquear==1) return; end
			if (luchador1==5) graph=28;
			else graph=28+luchador1; end
		end
		if (tipo==21)//pone caras player striker pl2
			if (blanquear==1) return; end
			if (luchador2==5) graph=28;
			else graph=28+luchador2; end
		end
		
		if (tipo==24)//llama kazuki 1
			paso++; 
			if (paso%2==0) graph++; end
			if (paso>14) return; end
			
			x=father.hit_x;
			y=father.hit_y;
			
		end
		if (tipo==25)//llamas esmoniga
			paso++;
			if (paso%2==0) graph++; end
			if (paso>22) return; end
			if (paso<12 and father.estado>0 and father.estado<43) paso=12; end
		end
		if (tipo==26)//sico sword
			graph=sicosodo[paso++];
			if (paso>32 or (father.estado<>_shoryuken and father.estado>-1))
				return;
			end
			if (father.paso<12)
				x=father.hit_x; y=father.hit_y;
			end
			if (paso==6 and father.graph<141) paso--; end
			if (paso==20 and father.inc_y<-4) paso=7; end
		end
		if (tipo==27)//sico reflector 1
			graph++; paso++;
			if (paso>6) graph=0; end
			if (paso>24) return; end
		end
		if (tipo==28) //explosion de adorno 1
			
			x0=x-24-scroll.x0; 
			x1=x+24-scroll.x0; 
			y0=y-24; y1=y+24;
			
			if (paso==0)
				draw_z=-100;
				draw (5,26,14,0,x0,y0,x1,y1);
			end
			if (paso==1)
				draw (5,15,14,0,x0,y0,x1,y1);
			end
			
			file=fichad;
			graph=explosion1[paso++];
			if (paso==sizeof(explosion1)/DIV)
				return;
			end
		end
		if (tipo==29) //explosiones de la u atras de kyo y usted
			if (game_frame%2==0) graph++; end
			if (graph==549 or graph==531 or graph==510) return; end
		end
		if (tipo==31) //orla doshita/explosion kazuki/ascuas kazuki 
			if (game_frame%2==0) paso++; graph++; end
			if (paso>9) return; end
		end
		
		//orla burn_knuckles
		if (tipo==32)
			graph=burn[paso++];
			if ((paso==sizeof(burn)/DIV) or father.paso==29 or
				(father.estado<>_uatras_punch and father.estado>-1))
				return;
			end
			if (flags) x=father.x-80;
			else x=father.x+80; end
			y=father.y-70;
		end
		
		//sico reflector apagandose
		if (tipo==33)
			if (paso==0 and SLOW_MACHINE) flags=flags%2; end
			paso++; if (game_frame%2==0) graph++; end
			if (graph>567) return; end
		end
		
		//athena de camelo en le teleportacion
		if (tipo==34)
			if (paso==3 or paso==5 or paso==7) flags+=4; end
			if (paso==4 or paso==6) flags-=4; end
			graph=psyk_telep[paso++];
			if (paso==sizeof(psyk_telep)/DIV) return; end
		end
		
		//phoenix arrow
		if (tipo==35)
			if (paso==0 and SLOW_MACHINE) flags=flags%2; end
			graph=fenix[paso++];
			if (paso==sizeof(fenix)/DIV or
				(father.estado<>_extra_move and father.estado<>-3 and paso<17))
				return;
			end
			
			if (father.y<190)
				x=father.x; y=father.y;
				if (paso==13) paso=5; end
			else
				if (paso<13) paso=13; end
				x=x; y=190;
			end
			
			if (flags==1 or flags==17)
				x0=x-24-scroll.x0-10; x1=x+24-scroll.x0-10; 
			else	
				x0=x-24-scroll.x0+10; x1=x+24-scroll.x0+10; 
			end	
			y0=y-24+10; y1=y+24+10;
			
			if (paso==15 or paso==16)
				draw_z = 255; graph=0;
				draw(5,18,6,0,x0,y0,x1,y1);
			end
			if (paso==17 or paso==18)
				draw(5,52,8,0,x0,y0,x1,y1);
			end
			if (paso==19 or paso==20)
				draw (5,15,10,0,x0,y0,x1,y1);
			end
			
			if (father.enemigo.estado==_recibir_toss and
				father.paso<23 and father.enemigo.paso==8 and
				father.he_dado==0)
				father.enemigo.paso=16;
				father.enemigo.inc_y+=2;
				father.enemigo.inc_x=0;
			end
		end
		
		if (tipo==36) //explosion de adorno 2
			x0=x-11-scroll.x0; x1=x+11-scroll.x0; y0=y-11; y1=y+11;
			if (paso==0)
				draw_z=-100;
				draw (5,1,14,0,x0,y0,x1,y1);
			end
			if (paso==1)
				draw (5,15,14,0,x0,y0,x1,y1);
			end
			
			file=fichad;
			graph=explosion2[paso++];
			if (paso==sizeof(explosion2)/DIV)
				return;
			end
		end
		if (tipo==37) //explosion de adorno 3
			file=fichad;
			graph=explosion3[paso++];
			if (paso==sizeof(explosion3)/DIV)
				return;
			end
		end
		if (tipo==38 or tipo==39 or tipo==40) //power dunk
			if (tipo==40 and paso==2) paso=5; end
			graph=power_g[paso++];
			if (paso==sizeof(power_g)/DIV)
				return;
			end
			if (tipo==38) angle=-45000; end
			if (tipo!=38 and father.estado<0 and game_frame%2==0) paso--; end
			//if ((graph==538 or graph==539) and !SLOW_MACHINE) alpha-=25; end
			
		end
		if (tipo==41)
			graph=kruee[paso++];
			if (flags==2) paso++; angle=+90000; end
			if (flags==3) paso++; angle=+90000; end
			if (paso=>sizeof(kruee)/DIV)
				return;
			end
		end
		if (tipo==42)//llamas kyo
			x=father.hit_x; y=father.hit_y;
			if (estado==0)//al nacer
				graph=llama1[paso++];
				if (paso==1) play_snd (s_flame1,256,256); end
				if (paso==sizeof(llama1)/DIV) estado=1; paso=0; end
			end
			if (estado==1)//en combustion
				graph=llama1[paso++]+3;
				if (paso==sizeof(llama1)/DIV) paso=0; end
				if (father.luchador==FIGHTER_KYO or father.luchador==FIGHTER_KYO94)
					if (father.estado==_ganar and father.intensidad==2)
						if (father.paso>40) estado=2; paso=0; end
					end
					if (father.estado==_special1 and father.intensidad==3)
						if (father.paso>20) estado=2; paso=0; end
					end
				end
			end
			if (estado==2)//al palmar
				graph=llama3[paso++];
				if (paso>1) y=y-5; end
				if (paso==sizeof(llama3)/DIV) return; end
			end
		end
		if (tipo==43)
			if (paso==0)
				enemigo=father.enemigo;
				from counter=402 to 456; 
					blend_gfx (enemigo.file,COUNTER,enemigo.luchador,3);
				end
				paso++;
				end
				if (father.estado<>_special2 and ((enemigo.estado==_recibir_toss and
				enemigo.paso>17) or enemigo.estado<>_recibir_toss) and
				father.estado>-1)
				from counter=402 to 456; 
					blend_return (enemigo.file,counter,enemigo.luchador,enemigo.player_color);
				end
				return;
			end
		end
		if (tipo==44)//polvo
			if (paso==0 and !SLOW_MACHINE) alpha=200; end
			graph=polvo[paso++];
			if (paso==sizeof(polvo)/DIV) return; end
		end
		if (tipo==45)//letra k'
			if (blanquear==1) return; end
			set_fps (FPS_TARGET, SKIP);
			if (estado==0)
				graph=25; paso++; x=118; y=101;
				if (paso==1) signal(type combos,s_kill); end
				if (paso==1 or paso==2) size=50;  end
				if (paso==3 or paso==4) size=150; end
				if (paso==4)
					draw_z=-1200;
					draw (3,26,15,0,0,0,320,240); 
					play_snd (s_ko,512,256);
				end
				if (paso>=5) size=100; end
				if (paso==20)
					pegata (x,y,0,c_screen,0,size,-500,46,file);
				end
			end
		end
		if (tipo==46)//letra o
			if (estado==0)
				graph=26; paso++; x=204; y=101;
				if (paso==1 or paso==2) size=50;  end
				if (paso==3 or paso==4) size=150; end
				if (paso==4)
					draw_z=-1200;
					draw (3,26,15,0,0,0,320,240); 
				end
				if (paso>=5) size=100; end
				if (paso==80)
					paso=0; estado=1;
					father.paso=0; father.estado=1;
				end
			end
			if (estado==1)
				if (paso==0)
					draw_z=-1200;
					draw (3,15,15,0,0,0,320,240);
				end
				graph=28; father.graph=27; paso++;
				if (paso>=20)
					x-=40; father.x+=40;
				end
				if (x<=-25)
					if ((id_luchador2.estado==_recibir_toss or
						id_luchador2.estado==_recibir_colleja)
						and id_luchador2.y==220
						and id_luchador1.estado==_normal)
						signal(father,s_kill);
						id_luchador1.intensidad=rand(0,2);
						id_luchador1.paso=0;
						id_luchador1.estado=_ganar;
						return;
					end
					if ((id_luchador1.estado==_recibir_toss or
					id_luchador1.estado==_recibir_colleja)
					and id_luchador1.y==220
					and id_luchador2.estado==_normal)
						signal(father,s_kill);
						id_luchador2.intensidad=rand(0,2);
						id_luchador2.paso=0;
						id_luchador2.estado=_ganar;
						return;
					end
					if ((id_luchador1.estado==_recibir_toss or
						id_luchador1.estado==_recibir_colleja) and
						id_luchador1.y==220 and
						(id_luchador2.estado==_recibir_toss or
						id_luchador2.estado==_recibir_colleja) and
						id_luchador2.y==220)
						if (x<=-100)
							signal(father,s_kill);
							graph=34; x=160; estado=2; paso=0;
						end
					end
				end
			end
			if (estado==2)
				paso++;
				if (paso==40)
					fade_off (); graph=0; signal(father,s_kill);
					pegata (x,y,graph,ctype,flags,size,z,53,file);
					return;
				end
			end
		end
		if (tipo==47)//letras de winner
			if (estado==0)
				graph=1; paso++;
				if (paso==1)
					x=160; y=-200;
					play_snd (s_winner,512,256);
					signal(type crono,s_kill);
				end
				if (paso>=2) y+=40; end
				if (y>=120) y=72; paso=0; estado=1; end
			end
			if (estado==1)
				paso++;
				if (paso==36)//invoca is
					pegata (x,y,0,c_screen,0,100,-500,48,fichtxt);
				end
			end
		end
		if (tipo==48)//letras  is
			graph=2; x=160; y=115; paso++;
			if (paso==36)//invoca el nombre
				pegata (x,y,0,c_screen,0,100,-500,49,fichtxt);
			end
		end
		if (tipo==49)
			if (paso==0) x=160; y=153; end paso++;
			if (id_luchador1.estado==_ganar)
				if (id_luchador1.vida==MAX_LIFE and paso==70)
					signal(father.father,s_kill);
					signal(father,s_kill);
					pantallazo(0);
					play_snd (s_perfect,512,256);
					graph=40; y=120;
				else
					if (paso<70)
						if (id_luchador1.luchador==FIGHTER_CRIMSON)  graph=5;  end
						if (id_luchador1.luchador==FIGHTER_KYO94)  graph=3;  end
						if (id_luchador1.luchador==FIGHTER_KASUMI)  graph=46; end
						if (id_luchador1.luchador==FIGHTER_TAKUMA)  graph=47; end
						if (id_luchador1.luchador==FIGHTER_TERRY94)  graph=6;  end
						if (id_luchador1.luchador==FIGHTER_K)  graph=48; end
						if (id_luchador1.luchador==FIGHTER_KULA) graph=49; end
						if (id_luchador1.luchador==FIGHTER_K9999) graph=50; end
						if (id_luchador1.luchador<4)
							graph=id_luchador1.luchador+3;
						end
					end
				end
			end
			if (id_luchador2.estado==_ganar)
				if (id_luchador2.vida==MAX_LIFE and paso==70)
					signal(father.father,s_kill);
					signal(father,s_kill);
					pantallazo(0);
					play_snd (s_perfect,512,256);
					graph=40; y=120;
				else
					if (paso<70)
						if (id_luchador2.luchador==FIGHTER_CRIMSON)  graph=5;  end
						if (id_luchador2.luchador==FIGHTER_KYO94)  graph=3;  end
						if (id_luchador2.luchador==FIGHTER_KASUMI)  graph=46; end
						if (id_luchador2.luchador==FIGHTER_TAKUMA)  graph=47; end
						if (id_luchador2.luchador==FIGHTER_TERRY94)  graph=6;  end
						if (id_luchador2.luchador==FIGHTER_K)  graph=48; end
						if (id_luchador2.luchador==FIGHTER_KULA) graph=49; end
						if (id_luchador2.luchador==FIGHTER_K9999) graph=50; end
						if (id_luchador2.luchador<4)
							graph=id_luchador2.luchador+3;
						end
					end
				end
			end
			if (p1_button_a or p1_button_b or 
				p1_button_x or p1_button_y or
				p2_button_a or p2_button_b or
				p2_button_x or p2_button_y)
				if (paso < 120) paso=120; end
			end
			if (paso==200)
				fade_off ();
				if (graph != 40)
					signal (father.father,s_kill);
					signal (father,s_kill);
				end
				
				graph=0;
				if (id_luchador1.setwin==asaltos or 
					id_luchador2.setwin==asaltos)
					if (game_mode!=MODE_TRAINING)
						if (cd_ok==0)
							unload_musica (s_musica);
						end
						fade_off (); partido(1);
					end
				else
					pegata (x,y,graph,ctype,flags,size,z,53,file);
				end
				return;
			end
		end
		if (tipo==50)//vidap1
			if (blanquear==1) return; end
			if (id_luchador1.vida < DANGER_LIFE)
				graph=danger[paso++];//parpadeando rojo
				if (paso==sizeof(danger)/div) paso=0; end
			else	
				graph=2;//normal
			end
			region=3;
		end
		if (tipo==51)//vidap2
			if (blanquear==1) return; end
			if (id_luchador2.vida < DANGER_LIFE)
				graph=danger[paso++];//parpadeando rojo
				if (paso==sizeof(danger)/DIV) paso=0; end
			else	
				graph=2;//normal
			end
			region=4;
		end
		if (tipo==52 or tipo==-52)//crimson u_alante;
			if (paso==0)
				if (father.intensidad==5 or father.intensidad==6 or tipo==-52)
					angle=70000;
				end
			end
			file=father.file;
			graph=flama[paso++]+300;
			if (paso==sizeof(flama)/div)
				paso=0; return;
			end
		END
		if (tipo==53)//transicion de rounds
			paso++;
			signal(father,s_kill);
			if (paso==1)
				round++;
				if (cronometro>0) 
					time=cronometro; 
					digit_0 = time/10;
					digit_1 = time%10;
				end
				
				set_fps (FPS_TARGET, SKIP);
				///p 1
				id_luchador1.paso=0;
				id_luchador1.estado=_normal;
				id_luchador1.vida = MAX_LIFE;
				id_luchador1.striks++;
				id_luchador1.pipiolos=100;
				id_luchador1.x=329;
				id_luchador1.y=220;
				id_luchador1.power=0;
				id_luchador1.flags=0;
				id_luchador1.poder=0;
				id_luchador1.baja_pows=0;
				id_luchador1.hit_combo=0;
				id_luchador1.seconds=0;
				////p 2
				id_luchador2.paso=0;
				id_luchador2.estado=_normal;
				id_luchador2.vida = MAX_LIFE;
				id_luchador2.striks++;
				id_luchador2.pipiolos=100;
				id_luchador2.x=459;
				id_luchador2.y=220;
				id_luchador2.power=0;
				id_luchador2.flags=1;
				id_luchador2.poder=0;
				id_luchador2.baja_pows=0;
				id_luchador2.hit_combo=0;
				id_luchador2.seconds=0;
				id_alive1.x=89; id_alive2.x=231;
				battle.paso=0; battle.estado=0;
				scroll[0].x0=234; scroll[0].y0=5;
				set_fps (fps_target, skip);
				frame(200);
				
				if (luchador1==FIGHTER_KASUMI) fade(110,110,110,8);
				else fade(100,100,100,8); end
				return;
			end
		end
		if (tipo==54) //orla sogetsu,kohken,psycoboll,etc...
			frame;
			return;
		end
		if (tipo==55 or tipo==56)//gorra de terry
			if (paso==0)
				if (tipo==55) inc_y=-5; end
				if (tipo==56) inc_y=-7; end
				if (father.flags)
					if (tipo==55) inc_x=-2; end
					if (tipo==56) inc_x=-4; end
				else
					if (tipo==55) inc_x=2;  end
					if (tipo==56) inc_x=4;  end
				end
			end
			paso++;
			if (graph>530) graph=525; end
			if (y<220)
				y+=inc_y; x+=inc_x; 
				if (game_frame%3==0) 
					inc_y++; 
					graph+=1; 
				end
			end
			if (y=>220)
				inc_y=0; y=220; graph=531;
			end
			if (father.estado<>_ganar) return; end
		end
		if (tipo==57) 
			graph=hielo[paso++];
			/* BENNU /*
			if (paso>16) alpha-=5; paso--; end
			if (alpha=<0) return; end
			/* BENNU_WII /*
			if (paso>16) alpha-=5; paso--; end
			if (alpha=<0) return; end
			/* BENNU_WIZ /*
			if (paso>16) alpha-=5; paso--; end
			if (alpha=<0) return; end
			/* BENNU_GCW0 /**/
			if (paso>16) alpha-=5; paso--; end
			if (alpha=<0) return; end
			/* GEMIX /*
			if (paso==sizeof(hielo)/DIV) return; end
			/**/
		end
		if (tipo==-57)//orla super de kyo
			if (father.estado==_special2)
				x=father.x;
			else
				if (flags) x-=2; else x+=2; end
				if (paso>7 and paso<18) paso=18; end
			end
			graph=llamarada[paso++];
			if (paso==sizeof(llamarada)/DIV)
				return;
			end
			if (paso==8) // or (paso>18 and paso<24))
				from counter=178 to 181; 
					blend_gfx (father.file,counter,FIGHTER_KYO,2);
				end
				from counter=184 to 187; 
					blend_gfx (father.file,counter,FIGHTER_KYO,2);
				end
			end
			if (paso==24)
				from counter=178 to 181; 					
					blend_return (father.file, counter, FIGHTER_KYO, father.player_color);
				end
				from counter=184 to 187; 
					blend_return (father.file, counter, FIGHTER_KYO, father.player_color);
				end
			end
			
		end
		if (tipo==58 or tipo==-58)//orla de fuego del especial de kyo
			if (paso==0 and tipo==-58)
				blend_gfx (father.file,108,FIGHTER_KYO,2);
				blend_gfx (father.file,205,FIGHTER_KYO,2);
				FROM COUNTER=459 TO 460; blend_gfx (father.file,counter,FIGHTER_KYO,2); end
				blend_gfx (father.file,109,FIGHTER_KYO,2);
				
			end
			if (father.estado==_special2)
				x=father.x;
			else
				if (flags) x-=2;
				else x+=2; end
				if (paso>12 and paso<30) paso=30; end
			end
			graph=llamarada[paso++];
			if (paso==sizeof(llamarada)/DIV)
				return;
			end
					
			if (paso==10 and tipo==58)
				FROM COUNTER=459 TO 460; blend_gfx (father.file,counter,FIGHTER_KYO,2); end
				blend_gfx (father.file, 109, FIGHTER_KYO, 2);
			end
			
			if (paso==32)
				blend_return (father.file,109,FIGHTER_KYO,father.player_color);
				from counter=459 to 460; 
					blend_return (father.file,counter,FIGHTER_KYO,father.player_color); 
				end
				if (tipo==-58)
					blend_return (father.file,108,FIGHTER_KYO,father.player_color);
					blend_return (father.file,205,FIGHTER_KYO,father.player_color);
				end
			end
		end
		if (tipo==59 or tipo==-59)//proceso de apoyo para los esmonigas del especial
			paso++;
			if ((father.estado<>_special1 and father.estado>-1) or
				(father.estado==_special1 and father.paso>68 and tipo==59) or
				(father.estado==_special1 and father.paso>116 and tipo==-59))
				
				from counter=178 to 186; 
					blend_return (father.file,counter,FIGHTER_KYO,father.player_color); 
				end
				if (tipo==-59)
					from counter=187 to 194; 
						blend_return (father.file,counter,FIGHTER_KYO,father.player_color); 
					end
					blend_return (father.file,130,FIGHTER_KYO,father.player_color); 
				end
				return;
			end
		end
		if (tipo==60) graph++;
			if (graph==179) flags-=4; end
			if (graph>178 and graph<184)
				if (flags) x-=24; if (x<father.x) x=father.x; end
				else x+=24; if (x>father.x) x=father.x; end end
			end
			if (graph>182) return; end
			if (father.estado<>_special1) return; end
		end
		if (tipo==61)//enemigo cojido ryoko de camelo
			if (father.tipo<>23)
				if (father.paso==21 or father.paso==29) angle=270000; end
				if (father.paso==25 or father.paso=>39) angle=90000;  end
				if (father.paso==19 or father.paso==27 or father.paso>74)
					angle=180000;
				end
			end
			frame; return;
		end
		if (tipo==63)//adorno especial healing ath
			paso++; draw_z=father.z+2;
			if (paso==1 or paso==2)
				draw (3,55,6,0,father.x-15-scroll.x0,-15,father.x+15-scroll.x0,220);
				draw (3,55,6,0,father.x-17-scroll.x0,-15,father.x+17-scroll.x0,220);
				hit_stars(10,father.x,220);
			end
			if (paso==3 or paso==4 or paso==15 or paso==16)
				draw (3,52,5,0,father.x-20-scroll.x0,-15,father.x+20-scroll.x0,220);
				draw (3,52,5,0,father.x-23-scroll.x0,-15,father.x+23-scroll.x0,220);
			end
			if (paso==5 or paso==6 or paso==13 or paso==14)
				draw(3,50,4,0,father.x-25-scroll.x0,-15,father.x+25-scroll.x0,220);
				draw(3,50,4,0,father.x-29-scroll.x0,-15,father.x+29-scroll.x0,220);
			end
			if (paso==7 or paso==8 or paso==11 or paso==12)
				draw(3,152,3,0,father.x-30-scroll.x0,-15,father.x+30-scroll.x0,220);
				draw(3,152,3,0,father.x-35-scroll.x0,-15,father.x+35-scroll.x0,220);
			end
			if (paso==9 or paso==10)
				draw(3,15,2,0,father.x-35-scroll.x0,-15,father.x+35-scroll.x0,220);
				draw(3,15,2,0,father.x-41-scroll.x0,-15,father.x+41-scroll.x0,220);
			end
			if (paso==9 and father.paso<159 and father.estado==_special1)
				paso=0;
			end
			if (paso==15) 
				return;
			end
		end
		if (tipo==64)//letras time
			paso++;
			if (paso==1) play_snd (s_time,512,256); end
			if (paso==3 or paso==4 or paso==5) size-=12; end
			if (paso==6) size=100; end
			if (paso==48) pegata (230,y,33,c_screen,0,150,z,65,file); end
			if (paso==96) return; end
		end
		if (tipo==65)//letras over
			paso++;
			if (paso==1) play_snd (s_over,512,256); end
			if (paso==3 or paso==4 or paso==5) size-=12; end
			if (paso==6) size=100; end
			if (paso==48) return; end
		end
		if (tipo==66)//fuego especial crimson
			if (estado==0)
				if (paso>0)
					if (flags)
						x=father.x-35; y=father.y-125;
					else
						x=father.x+35; y=father.y-125;
					end
				end
				
				graph=llama1[paso++]+49;
				if (paso==sizeof(llama1)/DIV) paso=0; end
				if (father.estado<>_special1) return; end
				if (father.paso>9) estado=1; paso=0; y+=35; end
			end
			if (estado==1)
				graph=llamvd[paso++];
				if (paso==(sizeof(llamvd)/DIV)-2)
					flags=flags+4;
				end
				if (paso==sizeof(llamvd)/DIV)
					return;
				end
			end
		end
		if (tipo==67)//shoryuken special crimson
			graph++; paso++;
			if (graph>509) return; end
			if (father.estado==_shoryuken and paso>3)
				if (intensidad==1) y-=1; end
				if (intensidad==2) y-=2; end
			end
			if (father.estado==_special2 and paso>3) y-=2; end
		end
		if (tipo==68)//adorno especial1 crimson
            y=215;
			if (game_frame%2==0) graph++; end
			if (graph=>584) return; end
		end
		if (tipo==69)//carta genjuro
			paso++;
			
			if (paso==1)  angle=90000; end
			if (paso==3)  graph=103; angle=180000; end
			if (paso==5)  angle=270000; end
			if (paso==7)  graph=104; angle=0; end
			if (paso==9)  angle=90000; end
			if (paso==11) graph=105; angle=180000; end
			if (paso==13) angle=270000; end
			if (paso==15) graph=106; angle=0; end
			
			if (paso==17) graph=107; end
			if (paso==19) graph=106; end
			if (paso==21) graph=107; end
			if (paso==23) graph=108; y+=3;
				pegata (x,y-6,109,c_scroll,flags,100,z,70,file);
			end
			if (paso>24)
				alpha-=10;
				if (flags==1 or flags==5) x+=3;
				else x-=3; end
			end
			if (alpha<=0) return; end
		end
		if (tipo==70)
			paso++; flags=father.flags;
			alpha-=10;
			if (flags==1 or flags==5) x-=3;
			else x+=3; end
			if (alpha<=0) return; end
		end
		if (tipo==71)//mano de iori en el ganar tsuki
			paso++; x=father.hit_x; y=father.hit_y; z=father.z-10;
			if (paso==1)  graph=994; end
			if (paso==7)  graph=995; end
			if (paso==13) graph=996; end
			if (paso==19) graph=997; end
			if (paso==25) graph=993; end
			if (father.estado<>_ganar) return; end
		end
		if (tipo==72)//options...
			if (x<150)
				x+=((150-x)/(FPS_TARGET/10))+1;
			end
			if (father.y!=y)
				pegata (x,y,graph-2,ctype,flags+4,size,z-500,-1,file);
			end	
			
			write (font_menu,MENU_X0+x,y,3,MENUTXT_MAIN[(y-60)/30]);
			
		end
		if (tipo==73)//options...
			if (paso==0)
				if (y==60)
					if (cronometro==0)  vida=2;  end
					if (cronometro==30) vida=-1; end
					if (cronometro==60) vida=0;  end
					if (cronometro==90) vida=1;  end
				end
				if (y==90)  vida=asaltos-2;	end
				if (y==120) vida=cntype;	end					
				if (y==150) vida=fuerza-1;	end
				if (y==180) vida=powinf;	end
				paso++;
			end
			
			if (x<150)
				x+=((150-x)/(FPS_TARGET/10))+1;
			else
				if (y==60)
					if (vida>2) vida=-1; end
					if (vida<-1) vida=2; end
					
					if (vida==-1) cronometro=30; end
					if (vida==0)  cronometro=60; end
					if (vida==1)  cronometro=90; end
					if (vida==2)  cronometro=0; end
				end
				if (y==90)
					if (vida>1) vida=-1; end
					if (vida<-1) vida=1; end
					asaltos = vida+2;
				end
				if (y==120)
					if (vida>1) vida=0; end
					if (vida<0) vida=1; end
					cntype = vida;
					
				end
				if (y==150)
					if (vida>2) vida=0; end
					if (vida<0) vida=2; end
					fuerza = vida+1;
					
				end
				if (y==180)
					if (vida>1) vida=0; end
					if (vida<0) vida=1; end
					powinf=vida;
					
				end
				if (y==father.y)
					if (father.vida>0) vida++; father.vida=0; end
					if (father.vida<0) vida--; father.vida=0; end
				end
			end
			if (father.y!=y)
				pegata (x,y,graph-2,ctype,flags+4,size,z-500,-1,file);
			end	
			
			if (y==60)
				write (font_menu,MENU_X0+x,y,3,"Play Time");
				if (vida==-1) write (font_menu,MENU_X1+x,y,5,"30"); end
				if (vida==0) write (font_menu,MENU_X1+x,y,5,"60"); end					
				if (vida==1) write (font_menu,MENU_X1+x,y,5,"90"); end
				if (vida==2)
					write (font_menu,MENU_X1+x,y,5,"O"); 
					write (font_menu,MENU_X1+x-8,y,5,"O"); 
				end
			end
			if (y==90)
				write (font_menu,MENU_X0+x,y,3,"Rounds");
				if (vida==0)  write (font_menu,MENU_X1+x,y,5,"2-3"); end
				if (vida==1)  write (font_menu,MENU_X1+x,y,5,"3-5"); end
				if (vida==-1)  write (font_menu,MENU_X1+x,y,5,"1"); end
			end
			if (y==120)
				write (font_menu,MENU_X0+x,y,3,"Control Type");
				if (vida==0) write (font_menu,MENU_X1+x,y,5,"Turbo"); end
				if (vida==1) write (font_menu,MENU_X1+x,y,5,"Normal"); end
			end
			if (y==150)
				write (font_menu,MENU_X0+x,y,3,"Damage");
				if (vida==0) write (font_menu,MENU_X1+x,y,5,"Low"); end
				if (vida==1) write (font_menu,MENU_X1+x,y,5,"Normal"); end
				if (vida==2) write (font_menu,MENU_X1+x,y,5,"High"); end
			end
			
			if (y==180)
				write (font_menu,MENU_X0+x,y,3,"Full Power");
				if (vida==0) write (font_menu,MENU_X1+x,y,5,"Disable"); end
				if (vida==1) write (font_menu,MENU_X1+x,y,5,"Enable"); end
			end
		end
		
		if (tipo==74)//options...
			if (paso==0 and y==120)
				if (cd_ok==1) vida=1; end
				if (cd_ok==2) vida=1; cd_ok=1; end
				if (cd_ok==0) vida=0; end
				paso++;
			end
			
			if (x<150)
				x+=((150-x)/(FPS_TARGET/10))+1;
			else
				if (cd_ok==2) graph=0; else graph=999; end
				if (y==father.y)
					if (father.vida>0) vida++; father.vida=0; end
					if (father.vida<0) vida--; father.vida=0; end
				end
				
				if (y==60)
					if (vida>11) vida=0; end
					if (vida<0) vida=11; end
					
					if (father.y<>60 or control_cancel)
						if (poder>0) 
							unload_musica(s_musica);
							
							s_music1=0; 
							s_musica=0;
							poder=0;
						end
					end
					if (control_enter and father.y==60 and bloker==0)
						
						if (is_playing_music(s_music1)) 
							unload_musica(s_musica);
							s_music1=0; 
							s_musica=0;
							poder=0;
						end
						poder=vida+10;
						
						s_musica_index = vida;
						s_musica = load_musica (music_path[vida]);
						s_music1 = play_musica (s_musica, -1);
						
						bloker=1;
					end
				end
				
				if (y==90)
					if (vida>219) vida=0; end
					if (vida<0) vida=219; end
					if (vida>0 and vida<30)    he_dado=father.he_dado; end
					if (vida>31 and vida<51)   he_dado=father.he_dado; end
					if (vida>52 and vida<81)   he_dado=father.he_dado; end
					if (vida>82 and vida<102)  he_dado=father.he_dado; end
					if (vida>103 and vida<123) he_dado=father.he_dado; end
					if (vida>124 and vida<144) he_dado=father.he_dado; end
					if (vida>145 and vida<160) he_dado=father.he_dado; end
					if (vida>161 and vida<185) he_dado=father.he_dado; end
					if (vida>186 and vida<204) he_dado=father.he_dado; end
					if (vida>205 and vida<219) he_dado=father.he_dado; end
					if (vida==0)   he_dado=1;  father.he_dado=1;  end
					if (vida==30)  he_dado=31; father.he_dado=31; end
					if (vida==31)  he_dado=1;  father.he_dado=1;  end
					if (vida==51)  he_dado=21; father.he_dado=21; end
					if (vida==52)  he_dado=1;  father.he_dado=1;  end
					if (vida==81)  he_dado=30; father.he_dado=30; end
					if (vida==82)  he_dado=1;  father.he_dado=1;  end
					if (vida==102) he_dado=21; father.he_dado=21; end
					if (vida==103) he_dado=1;  father.he_dado=1;  end
					if (vida==123) he_dado=21; father.he_dado=21; end
					if (vida==124) he_dado=1;  father.he_dado=1;  end
					if (vida==144) he_dado=21; father.he_dado=21; end
					if (vida==145) he_dado=1;  father.he_dado=1;  end
					if (vida==160) he_dado=18; father.he_dado=18; end
					if (vida==161) he_dado=1;  father.he_dado=1;  end
					if (vida==185) he_dado=25; father.he_dado=25; end
					if (vida==186) he_dado=1;  father.he_dado=1;  end
					if (vida==204) he_dado=16; father.he_dado=16; end
					if (vida==205) he_dado=1;  father.he_dado=1;  end
					if (vida==219) he_dado=15; father.he_dado=15; end
					
					if (control_enter and father.y==90 and bloker==0)
						if (is_playing_snd (s_voice1)) 
							stop_snd (s_voice1);
							s_voice1 = 0;
							poder = 0;
						end
						if ((vida<31 and luchador<>FIGHTER_KYO) or
							(vida>30 and vida<52 and luchador<>FIGHTER_ATHENA) or
							(vida>51 and vida<82 and luchador<>FIGHTER_IORI) or
							(vida>81 and vida<103 and luchador<>FIGHTER_TERRY) or
							(vida>102 and vida<124 and luchador<>FIGHTER_KASUMI) or
							(vida>123 and vida<145 and luchador<>FIGHTER_TAKUMA) or
							(vida>144 and vida<161 and luchador<>FIGHTER_K) or
							(vida>160 and vida<186 and luchador<>FIGHTER_KULA) or
							(vida>185 and vida<205 and luchador<>FIGHTER_K9999))
							if (luchador==FIGHTER_KYO)
								unload_snd(s_kyo2);unload_snd(s_kyo3);
								unload_snd(s_kyo4);unload_snd(s_kyo5);unload_snd(s_kyo6);
								unload_snd(s_kyo7);unload_snd(s_kyo8);unload_snd(s_kyo9);
								unload_snd(s_kyo10);unload_snd(s_kyo11);unload_snd(s_kyo12);
								unload_snd(s_kyo13);unload_snd(s_kyo14);unload_snd(s_kyo15);
								unload_snd(s_kyo16);unload_snd(s_kyo17);unload_snd(s_kyo18);
								unload_snd(s_kyo19);unload_snd(s_kyo20);unload_snd(s_kyo21);
								unload_snd(s_kyo22);unload_snd(s_kyo23);unload_snd(s_kyo24);
								unload_snd(s_kyo25);unload_snd(s_kyo26);unload_snd(s_kyo27);
								unload_snd(s_kyo28);unload_snd(s_kyo29);unload_snd(s_kyo30);
								unload_snd(s_kyo31);unload_snd(s_kyo32);
							end
							if (luchador==FIGHTER_ATHENA)
								unload_snd(s_ath10);unload_snd(s_ath11);unload_snd(s_ath12);
								unload_snd(s_ath13);unload_snd(s_ath14);unload_snd(s_ath15);
								unload_snd(s_ath16);unload_snd(s_ath17);unload_snd(s_ath18);
								unload_snd(s_ath19);unload_snd(s_ath20);unload_snd(s_ath21);
								unload_snd(s_ath22);unload_snd(s_ath23);unload_snd(s_ath24);
								unload_snd(s_ath25);unload_snd(s_ath26);unload_snd(s_ath27);
								unload_snd(s_ath28);unload_snd(s_ath29);unload_snd(s_ath30);
							end
							if (luchador==FIGHTER_IORI)
								unload_snd(s_iori1);unload_snd(s_iori2);unload_snd(s_iori3);
								unload_snd(s_iori4);unload_snd(s_iori5);unload_snd(s_iori6);
								unload_snd(s_iori7);unload_snd(s_iori8);unload_snd(s_iori9);
								unload_snd(s_iori10);unload_snd(s_iori11);unload_snd(s_iori12);
								unload_snd(s_iori13);unload_snd(s_iori14);unload_snd(s_iori15);
								unload_snd(s_iori16);unload_snd(s_iori17);unload_snd(s_iori18);
								unload_snd(s_iori19);unload_snd(s_iori20);unload_snd(s_iori21);
								unload_snd(s_iori22);unload_snd(s_iori23);unload_snd(s_iori24);
								unload_snd(s_iori25);unload_snd(s_iori26);unload_snd(s_iori27);
								unload_snd(s_iori28);unload_snd(s_iori29);unload_snd(s_iori30);
							end
							if (luchador==FIGHTER_TERRY)
								unload_snd(s_terry4);unload_snd(s_terry5);unload_snd(s_terry6);
								unload_snd(s_terry7);unload_snd(s_terry8);unload_snd(s_terry9);
								unload_snd(s_terry10);unload_snd(s_terry11);unload_snd(s_terry12);
								unload_snd(s_terry13);unload_snd(s_terry14);unload_snd(s_terry15);
								unload_snd(s_terry16);unload_snd(s_terry17);unload_snd(s_terry18);
								unload_snd(s_terry19);unload_snd(s_terry20);unload_snd(s_terry21);
								unload_snd(s_terry22);unload_snd(s_terry23);unload_snd(s_terry24);
							end
							if (luchador==FIGHTER_KASUMI)
								unload_snd(s_kasumi1);unload_snd(s_kasumi2);unload_snd(s_kasumi3);
								unload_snd(s_kasumi4);unload_snd(s_kasumi5);unload_snd(s_kasumi6);
								unload_snd(s_kasumi7);unload_snd(s_kasumi8);unload_snd(s_kasumi9);
								unload_snd(s_kasumi10);unload_snd(s_kasumi11);unload_snd(s_kasumi12);
								unload_snd(s_kasumi13);unload_snd(s_kasumi14);unload_snd(s_kasumi15);
								unload_snd(s_kasumi16);unload_snd(s_kasumi17);unload_snd(s_kasumi18);
								unload_snd(s_kasumi19);unload_snd(s_kasumi20);unload_snd(s_kasumi21);
							end
							if (luchador==FIGHTER_TAKUMA)
								unload_snd(s_takuma3);unload_snd(s_takuma22);unload_snd(s_takuma23);
								unload_snd(s_takuma4);unload_snd(s_takuma5);unload_snd(s_takuma6);
								unload_snd(s_takuma7);unload_snd(s_takuma8);unload_snd(s_takuma9);
								unload_snd(s_takuma10);unload_snd(s_takuma11);unload_snd(s_takuma12);
								unload_snd(s_takuma13);unload_snd(s_takuma14);unload_snd(s_takuma15);
								unload_snd(s_takuma16);unload_snd(s_takuma17);unload_snd(s_takuma18);
								unload_snd(s_takuma19);unload_snd(s_takuma20);unload_snd(s_takuma21);
							end
							if (luchador==FIGHTER_K)
								unload_snd(s_k3);unload_snd(s_k4);unload_snd(s_k5);
								unload_snd(s_k6);unload_snd(s_k7);unload_snd(s_k8);
								unload_snd(s_k9);unload_snd(s_k11);unload_snd(s_k12);
								unload_snd(s_k13);unload_snd(s_k14);unload_snd(s_k15);
								unload_snd(s_k16);unload_snd(s_k17);unload_snd(s_k18);
								unload_snd(s_k19);
							end
							if (luchador==FIGHTER_KULA)
								unload_snd(s_kura6);unload_snd(s_kura7);unload_snd(s_kura8);
								unload_snd(s_kura9);unload_snd(s_kura11);unload_snd(s_kura12);
								unload_snd(s_kura13);unload_snd(s_kura14);unload_snd(s_kura15);
								unload_snd(s_kura16);unload_snd(s_kura17);unload_snd(s_kura18);
								unload_snd(s_kura19);unload_snd(s_kura20);unload_snd(s_kura21);
								unload_snd(s_kura22);unload_snd(s_kura23);unload_snd(s_kura24);
								unload_snd(s_kura25);unload_snd(s_kura26);unload_snd(s_kura27);
								unload_snd(s_kura28);unload_snd(s_kura29);unload_snd(s_kura30);
								unload_snd(s_kura31);unload_snd(s_kura32);
							end
							if (luchador==FIGHTER_K9999)
								unload_snd(s_tetsuo5);unload_snd(s_tetsuo6);unload_snd(s_tetsuo7);
								unload_snd(s_tetsuo8);unload_snd(s_tetsuo9);unload_snd(s_tetsuo10);
								unload_snd(s_tetsuo11);unload_snd(s_tetsuo12);unload_snd(s_tetsuo13);
								unload_snd(s_tetsuo14);unload_snd(s_tetsuo15);unload_snd(s_tetsuo16);
								unload_snd(s_tetsuo17);unload_snd(s_tetsuo18);unload_snd(s_tetsuo19);
								unload_snd(s_tetsuo20);unload_snd(s_tetsuo21);unload_snd(s_tetsuo22);
								unload_snd(s_tetsuo23);
							end
							if (vida<31 and luchador<>FIGHTER_KYO)
								s_kyo2=load_snd("kof\snd\kyo2.wav",0);
								s_kyo3=load_snd("kof\snd\kyo3.wav",0);
								s_kyo4=load_snd("kof\snd\kyo4.wav",0);
								s_kyo5=load_snd("kof\snd\kyo5.wav",0);
								s_kyo6=load_snd("kof\snd\kyo6.wav",0);
								s_kyo7=load_snd("kof\snd\kyo7.wav",0);
								s_kyo8=load_snd("kof\snd\kyo8.wav",0);
								s_kyo9=load_snd("kof\snd\kyo9.wav",0);
								s_kyo10=load_snd("kof\snd\kyo10.wav",0);
								s_kyo11=load_snd("kof\snd\kyo11.wav",0);
								s_kyo12=load_snd("kof\snd\kyo12.wav",0);
								s_kyo13=load_snd("kof\snd\kyo13.wav",0);
								s_kyo14=load_snd("kof\snd\kyo14.wav",0);
								s_kyo15=load_snd("kof\snd\kyo15.wav",0);
								s_kyo16=load_snd("kof\snd\kyo16.wav",0);
								s_kyo17=load_snd("kof\snd\kyo17.wav",0);
								s_kyo18=load_snd("kof\snd\kyo18.wav",0);
								s_kyo19=load_snd("kof\snd\kyo19.wav",0);
								s_kyo20=load_snd("kof\snd\kyo20.wav",0);
								s_kyo21=load_snd("kof\snd\kyo21.wav",0);
								s_kyo22=load_snd("kof\snd\kyo22.wav",0);
								s_kyo23=load_snd("kof\snd\kyo23.wav",0);
								s_kyo24=load_snd("kof\snd\kyo24.wav",0);
								s_kyo25=load_snd("kof\snd\kyo25.wav",0);
								s_kyo26=load_snd("kof\snd\kyo26.wav",0);
								s_kyo27=load_snd("kof\snd\kyo27.wav",0);
								s_kyo28=load_snd("kof\snd\kyo28.wav",0);
								s_kyo29=load_snd("kof\snd\kyo29.wav",0);
								s_kyo30=load_snd("kof\snd\kyo30.wav",0);
								s_kyo31=load_snd("kof\snd\kyo31.wav",0);
								s_kyo32=load_snd("kof\snd\kyo32.wav",0);
								luchador=0; father.luchador=0;
							end
							if (vida>30 and vida<52 and luchador<>FIGHTER_ATHENA)
								s_ath10=load_snd("kof\snd\ath10.wav",0);
								s_ath11=load_snd("kof\snd\ath11.wav",0);
								s_ath12=load_snd("kof\snd\ath12.wav",0);
								s_ath13=load_snd("kof\snd\ath13.wav",0);
								s_ath14=load_snd("kof\snd\ath14.wav",0);
								s_ath15=load_snd("kof\snd\ath15.wav",0);
								s_ath16=load_snd("kof\snd\ath16.wav",0);
								s_ath17=load_snd("kof\snd\ath17.wav",0);
								s_ath18=load_snd("kof\snd\ath18.wav",0);
								s_ath19=load_snd("kof\snd\ath19.wav",0);
								s_ath20=load_snd("kof\snd\ath20.wav",0);
								s_ath21=load_snd("kof\snd\ath21.wav",0);
								s_ath22=load_snd("kof\snd\ath22.wav",0);
								s_ath23=load_snd("kof\snd\ath23.wav",0);
								s_ath24=load_snd("kof\snd\ath24.wav",0);
								s_ath25=load_snd("kof\snd\ath25.wav",0);
								s_ath26=load_snd("kof\snd\ath26.wav",0);
								s_ath27=load_snd("kof\snd\ath27.wav",0);
								s_ath28=load_snd("kof\snd\ath28.wav",0);
								s_ath29=load_snd("kof\snd\ath29.wav",0);
								s_ath30=load_snd("kof\snd\ath30.wav",0);
								luchador=1; father.luchador=1;
							end
							if (vida>51 and vida<82 and luchador<>FIGHTER_IORI)
								s_iori1=load_snd("kof\snd\iori1.wav",0);
								s_iori2=load_snd("kof\snd\iori2.wav",0);
								s_iori3=load_snd("kof\snd\iori3.wav",0);
								s_iori4=load_snd("kof\snd\iori4.wav",0);
								s_iori5=load_snd("kof\snd\iori5.wav",0);
								s_iori6=load_snd("kof\snd\iori6.wav",0);
								s_iori7=load_snd("kof\snd\iori7.wav",0);
								s_iori8=load_snd("kof\snd\iori8.wav",0);
								s_iori9=load_snd("kof\snd\iori9.wav",0);
								s_iori10=load_snd("kof\snd\iori10.wav",0);
								s_iori11=load_snd("kof\snd\iori11.wav",0);
								s_iori12=load_snd("kof\snd\iori12.wav",0);
								s_iori13=load_snd("kof\snd\iori13.wav",0);
								s_iori14=load_snd("kof\snd\iori14.wav",0);
								s_iori15=load_snd("kof\snd\iori15.wav",0);
								s_iori16=load_snd("kof\snd\iori16.wav",0);
								s_iori17=load_snd("kof\snd\iori17.wav",0);
								s_iori18=load_snd("kof\snd\iori18.wav",0);
								s_iori19=load_snd("kof\snd\iori19.wav",0);
								s_iori20=load_snd("kof\snd\iori20.wav",0);
								s_iori21=load_snd("kof\snd\iori21.wav",0);
								s_iori22=load_snd("kof\snd\iori22.wav",0);
								s_iori23=load_snd("kof\snd\iori23.wav",0);
								s_iori24=load_snd("kof\snd\iori24.wav",0);
								s_iori25=load_snd("kof\snd\iori25.wav",0);
								s_iori26=load_snd("kof\snd\iori26.wav",0);
								s_iori27=load_snd("kof\snd\iori27.wav",0);
								s_iori28=load_snd("kof\snd\iori28.wav",0);
								s_iori29=load_snd("kof\snd\iori29.wav",0);
								s_iori30=load_snd("kof\snd\iori30.wav",0);
								luchador=2; father.luchador=2;
							end
							if (vida>81 and vida<103 and luchador<>FIGHTER_TERRY)
								s_terry4=load_snd("kof\snd\terry4.wav",0);
								s_terry5=load_snd("kof\snd\terry5.wav",0);
								s_terry6=load_snd("kof\snd\terry6.wav",0);
								s_terry7=load_snd("kof\snd\terry7.wav",0);
								s_terry8=load_snd("kof\snd\terry8.wav",0);
								s_terry9=load_snd("kof\snd\terry9.wav",0);
								s_terry10=load_snd("kof\snd\terry10.wav",0);
								s_terry11=load_snd("kof\snd\terry11.wav",0);
								s_terry12=load_snd("kof\snd\terry12.wav",0);
								s_terry13=load_snd("kof\snd\terry13.wav",0);
								s_terry14=load_snd("kof\snd\terry14.wav",0);
								s_terry15=load_snd("kof\snd\terry15.wav",0);
								s_terry16=load_snd("kof\snd\terry16.wav",0);
								s_terry17=load_snd("kof\snd\terry17.wav",0);
								s_terry18=load_snd("kof\snd\terry18.wav",0);
								s_terry19=load_snd("kof\snd\terry19.wav",0);
								s_terry20=load_snd("kof\snd\terry20.wav",0);
								s_terry21=load_snd("kof\snd\terry21.wav",0);
								s_terry22=load_snd("kof\snd\terry22.wav",0);
								s_terry23=load_snd("kof\snd\terry23.wav",0);
								s_terry24=load_snd("kof\snd\terry24.wav",0);
								luchador=3; father.luchador=3;
							end
							if (vida>102 and vida<124 and luchador<>FIGHTER_KASUMI)
								s_kasumi1=load_snd("kof\snd\kasumi1.wav",0);
								s_kasumi2=load_snd("kof\snd\kasumi2.wav",0);
								s_kasumi3=load_snd("kof\snd\kasumi3.wav",0);
								s_kasumi4=load_snd("kof\snd\kasumi4.wav",0);
								s_kasumi5=load_snd("kof\snd\kasumi5.wav",0);
								s_kasumi6=load_snd("kof\snd\kasumi6.wav",0);
								s_kasumi7=load_snd("kof\snd\kasumi7.wav",0);
								s_kasumi8=load_snd("kof\snd\kasumi8.wav",0);
								s_kasumi9=load_snd("kof\snd\kasumi9.wav",0);
								s_kasumi10=load_snd("kof\snd\kasumi10.wav",0);
								s_kasumi11=load_snd("kof\snd\kasumi11.wav",0);
								s_kasumi12=load_snd("kof\snd\kasumi12.wav",0);
								s_kasumi13=load_snd("kof\snd\kasumi13.wav",0);
								s_kasumi14=load_snd("kof\snd\kasumi14.wav",0);
								s_kasumi15=load_snd("kof\snd\kasumi15.wav",0);
								s_kasumi16=load_snd("kof\snd\kasumi16.wav",0);
								s_kasumi17=load_snd("kof\snd\kasumi17.wav",0);
								s_kasumi18=load_snd("kof\snd\kasumi18.wav",0);
								s_kasumi19=load_snd("kof\snd\kasumi19.wav",0);
								s_kasumi20=load_snd("kof\snd\kasumi20.wav",0);
								s_kasumi21=load_snd("kof\snd\kasumi21.wav",0);
								luchador=6; father.luchador=6;
							end
							if (vida>123 and vida<145 and luchador<>FIGHTER_TAKUMA)
								s_takuma3=load_snd("kof\snd\takuma3.wav",0);
								s_takuma4=load_snd("kof\snd\takuma4.wav",0);
								s_takuma5=load_snd("kof\snd\takuma5.wav",0);
								s_takuma6=load_snd("kof\snd\takuma6.wav",0);
								s_takuma7=load_snd("kof\snd\takuma7.wav",0);
								s_takuma8=load_snd("kof\snd\takuma8.wav",0);
								s_takuma9=load_snd("kof\snd\takuma9.wav",0);
								s_takuma1=load_snd("kof\snd\takuma10.wav",0);
								s_takuma11=load_snd("kof\snd\takuma11.wav",0);
								s_takuma12=load_snd("kof\snd\takuma12.wav",0);
								s_takuma13=load_snd("kof\snd\takuma13.wav",0);
								s_takuma14=load_snd("kof\snd\takuma14.wav",0);
								s_takuma15=load_snd("kof\snd\takuma15.wav",0);
								s_takuma16=load_snd("kof\snd\takuma16.wav",0);
								s_takuma17=load_snd("kof\snd\takuma17.wav",0);
								s_takuma18=load_snd("kof\snd\takuma18.wav",0);
								s_takuma19=load_snd("kof\snd\takuma19.wav",0);
								s_takuma20=load_snd("kof\snd\takuma20.wav",0);
								s_takuma21=load_snd("kof\snd\takuma21.wav",0);
								s_takuma22=load_snd("kof\snd\takuma22.wav",0);
								s_takuma23=load_snd("kof\snd\takuma23.wav",0);
								luchador=7; father.luchador=7;
							end
							if (vida>144 and vida<161 and luchador<>FIGHTER_K)
								s_k3=load_snd("kof\snd\k3.wav",0);s_k4=load_snd("kof\snd\k4.wav",0);
								s_k5=load_snd("kof\snd\k5.wav",0);s_k6=load_snd("kof\snd\k6.wav",0);
								s_k7=load_snd("kof\snd\k7.wav",0);s_k8=load_snd("kof\snd\k8.wav",0);
								s_k9=load_snd("kof\snd\k9.wav",0);s_k11=load_snd("kof\snd\k11.wav",0);
								s_k12=load_snd("kof\snd\k12.wav",0);s_k13=load_snd("kof\snd\k13.wav",0);
								s_k14=load_snd("kof\snd\k14.wav",0);s_k15=load_snd("kof\snd\k15.wav",0);
								s_k16=load_snd("kof\snd\k16.wav",0);s_k17=load_snd("kof\snd\k17.wav",0);
								s_k18=load_snd("kof\snd\k18.wav",0);s_k19=load_snd("kof\snd\k19.wav",0);
								luchador=9; father.luchador=9;
							end
							if (vida>160 and vida<186 and luchador<>FIGHTER_KULA)
								s_kura8=load_snd("kof\snd\kura8.wav",0);
								s_kura9=load_snd("kof\snd\kura9.wav",0);
								s_kura10=load_snd("kof\snd\kura10.wav",0);
								s_kura11=load_snd("kof\snd\kura11.wav",0);
								s_kura12=load_snd("kof\snd\kura12.wav",0);
								s_kura13=load_snd("kof\snd\kura13.wav",0);
								s_kura14=load_snd("kof\snd\kura14.wav",0);
								s_kura15=load_snd("kof\snd\kura15.wav",0);
								s_kura16=load_snd("kof\snd\kura16.wav",0);
								s_kura17=load_snd("kof\snd\kura17.wav",0);
								s_kura18=load_snd("kof\snd\kura18.wav",0);
								s_kura19=load_snd("kof\snd\kura19.wav",0);
								s_kura20=load_snd("kof\snd\kura20.wav",0);
								s_kura21=load_snd("kof\snd\kura21.wav",0);
								s_kura22=load_snd("kof\snd\kura22.wav",0);
								s_kura23=load_snd("kof\snd\kura23.wav",0);
								s_kura24=load_snd("kof\snd\kura24.wav",0);
								s_kura25=load_snd("kof\snd\kura25.wav",0);
								s_kura26=load_snd("kof\snd\kura26.wav",0);
								s_kura27=load_snd("kof\snd\kura27.wav",0);
								s_kura28=load_snd("kof\snd\kura28.wav",0);
								s_kura29=load_snd("kof\snd\kura29.wav",0);
								s_kura30=load_snd("kof\snd\kura30.wav",0);
								s_kura31=load_snd("kof\snd\kura31.wav",0);
								s_kura32=load_snd("kof\snd\kura32.wav",0);
								luchador=10; father.luchador=10;
							end
							if (vida>185 and vida<205 and luchador<>FIGHTER_K9999)
								s_tetsuo5=load_snd("kof\snd\k9999-5.wav",0);
								s_tetsuo6=load_snd("kof\snd\k9999-6.wav",0);
								s_tetsuo7=load_snd("kof\snd\k9999-7.wav",0);
								s_tetsuo8=load_snd("kof\snd\k9999-8.wav",0);
								s_tetsuo9=load_snd("kof\snd\k9999-9.wav",0);
								s_tetsuo10=load_snd("kof\snd\k9999-10.wav",0);
								s_tetsuo11=load_snd("kof\snd\k9999-11.wav",0);
								s_tetsuo12=load_snd("kof\snd\k9999-12.wav",0);
								s_tetsuo13=load_snd("kof\snd\k9999-13.wav",0);
								s_tetsuo14=load_snd("kof\snd\k9999-14.wav",0);
								s_tetsuo15=load_snd("kof\snd\k9999-15.wav",0);
								s_tetsuo16=load_snd("kof\snd\k9999-16.wav",0);
								s_tetsuo17=load_snd("kof\snd\k9999-17.wav",0);
								s_tetsuo18=load_snd("kof\snd\k9999-18.wav",0);
								s_tetsuo19=load_snd("kof\snd\k9999-19.wav",0);
								s_tetsuo20=load_snd("kof\snd\k9999-20.wav",0);
								s_tetsuo21=load_snd("kof\snd\k9999-21.wav",0);
								s_tetsuo22=load_snd("kof\snd\k9999-22.wav",0);
								s_tetsuo23=load_snd("kof\snd\k9999-23.wav",0);
								luchador=11; father.luchador=11;
							end
						end
						if (vida==0) s_voice1=play_snd (s_kyo2,512,256); end
						if (vida==1) s_voice1=play_snd (s_kyo3,512,256); end
						if (vida==2) s_voice1=play_snd (s_kyo4,512,256); end
						if (vida==3) s_voice1=play_snd (s_kyo5,512,256); end
						if (vida==4) s_voice1=play_snd (s_kyo6,512,256); end
						if (vida==5) s_voice1=play_snd (s_kyo7,512,256); end
						if (vida==6) s_voice1=play_snd (s_kyo8,512,256); end
						if (vida==7) s_voice1=play_snd (s_kyo9,512,256); end
						if (vida==8) s_voice1=play_snd (s_kyo10,512,256); end
						if (vida==9) s_voice1=play_snd (s_kyo11,512,256); end
						if (vida==10) s_voice1=play_snd (s_kyo12,512,256); end
						if (vida==11) s_voice1=play_snd (s_kyo13,512,256); end
						if (vida==12) s_voice1=play_snd (s_kyo14,512,256); end
						if (vida==13) s_voice1=play_snd (s_kyo15,512,256); end
						if (vida==14) s_voice1=play_snd (s_kyo16,512,256); end
						if (vida==15) s_voice1=play_snd (s_kyo17,512,256); end
						if (vida==16) s_voice1=play_snd (s_kyo18,512,256); end
						if (vida==17) s_voice1=play_snd (s_kyo19,512,256); end
						if (vida==18) s_voice1=play_snd (s_kyo20,512,256); end
						if (vida==19) s_voice1=play_snd (s_kyo21,512,256); end
						if (vida==20) s_voice1=play_snd (s_kyo22,512,256); end
						if (vida==21) s_voice1=play_snd (s_kyo23,512,256); end
						if (vida==22) s_voice1=play_snd (s_kyo24,512,256); end
						if (vida==23) s_voice1=play_snd (s_kyo25,512,256); end
						if (vida==24) s_voice1=play_snd (s_kyo26,512,256); end
						if (vida==25) s_voice1=play_snd (s_kyo27,512,256); end
						if (vida==26) s_voice1=play_snd (s_kyo28,512,256); end
						if (vida==27) s_voice1=play_snd (s_kyo29,512,256); end
						if (vida==28) s_voice1=play_snd (s_kyo30,512,256); end
						if (vida==29) s_voice1=play_snd (s_kyo31,512,256); end
						if (vida==30) s_voice1=play_snd (s_kyo32,512,256); end
						if (vida==31) s_voice1=play_snd (s_ath10,512,256); end
						if (vida==32) s_voice1=play_snd (s_ath11,512,256); end
						if (vida==33) s_voice1=play_snd (s_ath12,512,256); end
						if (vida==34) s_voice1=play_snd (s_ath13,512,256); end
						if (vida==35) s_voice1=play_snd (s_ath14,512,256); end
						if (vida==36) s_voice1=play_snd (s_ath15,512,256); end
						if (vida==37) s_voice1=play_snd (s_ath16,512,256); end
						if (vida==38) s_voice1=play_snd (s_ath17,512,256); end
						if (vida==39) s_voice1=play_snd (s_ath18,512,256); end
						if (vida==40) s_voice1=play_snd (s_ath19,512,256); end
						if (vida==41) s_voice1=play_snd (s_ath20,512,256); end
						if (vida==42) s_voice1=play_snd (s_ath21,512,256); end
						if (vida==43) s_voice1=play_snd (s_ath22,512,256); end
						if (vida==44) s_voice1=play_snd (s_ath23,512,256); end
						if (vida==45) s_voice1=play_snd (s_ath24,512,256); end
						if (vida==46) s_voice1=play_snd (s_ath25,512,256); end
						if (vida==47) s_voice1=play_snd (s_ath26,512,256); end
						if (vida==48) s_voice1=play_snd (s_ath27,512,256); end
						if (vida==49) s_voice1=play_snd (s_ath28,512,256); end
						if (vida==50) s_voice1=play_snd (s_ath29,512,256); end
						if (vida==51) s_voice1=play_snd (s_ath30,512,256); end
						if (vida==52) s_voice1=play_snd (s_iori1,512,256); end
						if (vida==53) s_voice1=play_snd (s_iori2,512,256); end
						if (vida==54) s_voice1=play_snd (s_iori3,512,256); end
						if (vida==55) s_voice1=play_snd (s_iori4,512,256); end
						if (vida==56) s_voice1=play_snd (s_iori5,512,256); end
						if (vida==57) s_voice1=play_snd (s_iori6,512,256); end
						if (vida==58) s_voice1=play_snd (s_iori7,512,256); end
						if (vida==59) s_voice1=play_snd (s_iori8,512,256); end
						if (vida==60) s_voice1=play_snd (s_iori9,512,256); end
						if (vida==61) s_voice1=play_snd (s_iori10,512,256); end
						if (vida==62) s_voice1=play_snd (s_iori11,512,256); end
						if (vida==63) s_voice1=play_snd (s_iori12,512,256); end
						if (vida==64) s_voice1=play_snd (s_iori13,512,256); end
						if (vida==65) s_voice1=play_snd (s_iori14,512,256); end
						if (vida==66) s_voice1=play_snd (s_iori15,512,256); end
						if (vida==67) s_voice1=play_snd (s_iori16,512,256); end
						if (vida==68) s_voice1=play_snd (s_iori17,512,256); end
						if (vida==69) s_voice1=play_snd (s_iori18,512,256); end
						if (vida==70) s_voice1=play_snd (s_iori19,512,256); end
						if (vida==71) s_voice1=play_snd (s_iori20,512,256); end
						if (vida==72) s_voice1=play_snd (s_iori21,512,256); end
						if (vida==73) s_voice1=play_snd (s_iori22,512,256); end
						if (vida==74) s_voice1=play_snd (s_iori23,512,256); end
						if (vida==75) s_voice1=play_snd (s_iori24,512,256); end
						if (vida==76) s_voice1=play_snd (s_iori25,512,256); end
						if (vida==77) s_voice1=play_snd (s_iori26,512,256); end
						if (vida==78) s_voice1=play_snd (s_iori27,512,256); end
						if (vida==79) s_voice1=play_snd (s_iori28,512,256); end
						if (vida==80) s_voice1=play_snd (s_iori29,512,256); end
						if (vida==81) s_voice1=play_snd (s_iori30,512,256); end
						if (vida==82) s_voice1=play_snd (s_terry4,512,256); end
						if (vida==83) s_voice1=play_snd (s_terry5,512,256); end
						if (vida==84) s_voice1=play_snd (s_terry6,512,256); end
						if (vida==85) s_voice1=play_snd (s_terry7,512,256); end
						if (vida==86) s_voice1=play_snd (s_terry8,512,256); end
						if (vida==87) s_voice1=play_snd (s_terry9,512,256); end
						if (vida==88) s_voice1=play_snd (s_terry10,512,256); end
						if (vida==89) s_voice1=play_snd (s_terry11,512,256); end
						if (vida==90) s_voice1=play_snd (s_terry12,512,256); end
						if (vida==91) s_voice1=play_snd (s_terry13,512,256); end
						if (vida==92) s_voice1=play_snd (s_terry14,512,256); end
						if (vida==93) s_voice1=play_snd (s_terry15,512,256); end
						if (vida==94) s_voice1=play_snd (s_terry16,512,256); end
						if (vida==95) s_voice1=play_snd (s_terry17,512,256); end
						if (vida==96) s_voice1=play_snd (s_terry18,512,256); end
						if (vida==97) s_voice1=play_snd (s_terry19,512,256); end
						if (vida==98) s_voice1=play_snd (s_terry20,512,256); end
						if (vida==99) s_voice1=play_snd (s_terry21,512,256); end
						if (vida==100) s_voice1=play_snd (s_terry22,512,256); end
						if (vida==101) s_voice1=play_snd (s_terry23,512,256); end
						if (vida==102) s_voice1=play_snd (s_terry24,512,256); end
						if (vida==103) s_voice1=play_snd (s_kasumi1,512,256); end
						if (vida==104) s_voice1=play_snd (s_kasumi2,512,256); end
						if (vida==105) s_voice1=play_snd (s_kasumi3,512,256); end
						if (vida==106) s_voice1=play_snd (s_kasumi4,512,256); end
						if (vida==107) s_voice1=play_snd (s_kasumi5,512,256); end
						if (vida==108) s_voice1=play_snd (s_kasumi6,512,256); end
						if (vida==109) s_voice1=play_snd (s_kasumi7,512,256); end
						if (vida==110) s_voice1=play_snd (s_kasumi8,512,256); end
						if (vida==111) s_voice1=play_snd (s_kasumi9,512,256); end
						if (vida==112) s_voice1=play_snd (s_kasumi10,512,256); end
						if (vida==113) s_voice1=play_snd (s_kasumi11,512,256); end
						if (vida==114) s_voice1=play_snd (s_kasumi12,512,256); end
						if (vida==115) s_voice1=play_snd (s_kasumi13,512,256); end
						if (vida==116) s_voice1=play_snd (s_kasumi14,512,256); end
						if (vida==117) s_voice1=play_snd (s_kasumi15,512,256); end
						if (vida==118) s_voice1=play_snd (s_kasumi16,512,256); end
						if (vida==119) s_voice1=play_snd (s_kasumi17,512,256); end
						if (vida==120) s_voice1=play_snd (s_kasumi18,512,256); end
						if (vida==121) s_voice1=play_snd (s_kasumi19,512,256); end
						if (vida==122) s_voice1=play_snd (s_kasumi20,512,256); end
						if (vida==123) s_voice1=play_snd (s_kasumi21,512,256); end
						if (vida==124) s_voice1=play_snd (s_takuma3,512,256); end
						if (vida==125) s_voice1=play_snd (s_takuma4,512,256); end
						if (vida==126) s_voice1=play_snd (s_takuma5,512,256); end
						if (vida==127) s_voice1=play_snd (s_takuma6,512,256); end
						if (vida==128) s_voice1=play_snd (s_takuma7,512,256); end
						if (vida==129) s_voice1=play_snd (s_takuma8,512,256); end
						if (vida==130) s_voice1=play_snd (s_takuma9,512,256); end
						if (vida==131) s_voice1=play_snd (s_takuma10,512,256); end
						if (vida==132) s_voice1=play_snd (s_takuma11,512,256); end
						if (vida==133) s_voice1=play_snd (s_takuma12,512,256); end
						if (vida==134) s_voice1=play_snd (s_takuma13,512,256); end
						if (vida==135) s_voice1=play_snd (s_takuma14,512,256); end
						if (vida==136) s_voice1=play_snd (s_takuma15,512,256); end
						if (vida==137) s_voice1=play_snd (s_takuma16,512,256); end
						if (vida==138) s_voice1=play_snd (s_takuma17,512,256); end
						if (vida==139) s_voice1=play_snd (s_takuma18,512,256); end
						if (vida==140) s_voice1=play_snd (s_takuma19,512,256); end
						if (vida==141) s_voice1=play_snd (s_takuma20,512,256); end
						if (vida==142) s_voice1=play_snd (s_takuma21,512,256); end
						if (vida==143) s_voice1=play_snd (s_takuma22,512,256); end
						if (vida==144) s_voice1=play_snd (s_takuma23,512,256); end
						if (vida==145) s_voice1=play_snd (s_k3,512,256); end
						if (vida==146) s_voice1=play_snd (s_k4,512,256); end
						if (vida==147) s_voice1=play_snd (s_k5,512,256); end
						if (vida==148) s_voice1=play_snd (s_k6,512,256); end
						if (vida==149) s_voice1=play_snd (s_k7,512,256); end
						if (vida==150) s_voice1=play_snd (s_k8,512,256); end
						if (vida==151) s_voice1=play_snd (s_k9,512,256); end
						if (vida==152) s_voice1=play_snd (s_k11,512,256); end
						if (vida==153) s_voice1=play_snd (s_k12,512,256); end
						if (vida==154) s_voice1=play_snd (s_k13,512,256); end
						if (vida==155) s_voice1=play_snd (s_k14,512,256); end
						if (vida==156) s_voice1=play_snd (s_k15,512,256); end
						if (vida==157) s_voice1=play_snd (s_k16,512,256); end
						if (vida==158) s_voice1=play_snd (s_k17,512,256); end
						if (vida==159) s_voice1=play_snd (s_k18,512,256); end
						if (vida==160) s_voice1=play_snd (s_k19,512,256); end
						if (vida==161) s_voice1=play_snd (s_kura8,512,256); end
						if (vida==162) s_voice1=play_snd (s_kura9,512,256); end
						if (vida==163) s_voice1=play_snd (s_kura10,512,256); end
						if (vida==164) s_voice1=play_snd (s_kura11,512,256); end
						if (vida==165) s_voice1=play_snd (s_kura12,512,256); end
						if (vida==166) s_voice1=play_snd (s_kura13,512,256); end
						if (vida==167) s_voice1=play_snd (s_kura14,512,256); end
						if (vida==168) s_voice1=play_snd (s_kura15,512,256); end
						if (vida==169) s_voice1=play_snd (s_kura16,512,256); end
						if (vida==170) s_voice1=play_snd (s_kura17,512,256); end
						if (vida==171) s_voice1=play_snd (s_kura18,512,256); end
						if (vida==172) s_voice1=play_snd (s_kura19,512,256); end
						if (vida==173) s_voice1=play_snd (s_kura20,512,256); end
						if (vida==174) s_voice1=play_snd (s_kura21,512,256); end
						if (vida==175) s_voice1=play_snd (s_kura22,512,256); end
						if (vida==176) s_voice1=play_snd (s_kura23,512,256); end
						if (vida==177) s_voice1=play_snd (s_kura24,512,256); end
						if (vida==178) s_voice1=play_snd (s_kura25,512,256); end
						if (vida==179) s_voice1=play_snd (s_kura26,512,256); end
						if (vida==180) s_voice1=play_snd (s_kura27,512,256); end
						if (vida==181) s_voice1=play_snd (s_kura28,512,256); end
						if (vida==182) s_voice1=play_snd (s_kura29,512,256); end
						if (vida==183) s_voice1=play_snd (s_kura30,512,256); end
						if (vida==184) s_voice1=play_snd (s_kura31,512,256); end
						if (vida==185) s_voice1=play_snd (s_kura32,512,256); end
						if (vida==186) s_voice1=play_snd (s_tetsuo5,512,256); end
						if (vida==187) s_voice1=play_snd (s_tetsuo6,512,256); end
						if (vida==188) s_voice1=play_snd (s_tetsuo7,512,256); end
						if (vida==189) s_voice1=play_snd (s_tetsuo8,512,256); end
						if (vida==190) s_voice1=play_snd (s_tetsuo9,512,256); end
						if (vida==191) s_voice1=play_snd (s_tetsuo10,512,256); end
						if (vida==192) s_voice1=play_snd (s_tetsuo11,512,256); end
						if (vida==193) s_voice1=play_snd (s_tetsuo12,512,256); end
						if (vida==194) s_voice1=play_snd (s_tetsuo13,512,256); end
						if (vida==195) s_voice1=play_snd (s_tetsuo14,512,256); end
						if (vida==196) s_voice1=play_snd (s_tetsuo15,512,256); end
						if (vida==197) s_voice1=play_snd (s_tetsuo16,512,256); end
						if (vida==198) s_voice1=play_snd (s_tetsuo17,512,256); end
						if (vida==199) s_voice1=play_snd (s_tetsuo18,512,256); end
						if (vida==200) s_voice1=play_snd (s_tetsuo19,512,256); end
						if (vida==201) s_voice1=play_snd (s_tetsuo20,512,256); end
						if (vida==202) s_voice1=play_snd (s_tetsuo21,512,256); end
						if (vida==203) s_voice1=play_snd (s_tetsuo22,512,256); end
						if (vida==204) s_voice1=play_snd (s_tetsuo23,512,256); end
						if (vida==205) s_voice1=play_snd (s_round,512,256); end
						if (vida==206) s_voice1=play_snd (s_one,512,256); end
						if (vida==207) s_voice1=play_snd (s_two,512,256); end
						if (vida==208) s_voice1=play_snd (s_three,512,256); end
						if (vida==209) s_voice1=play_snd (s_four,512,256); end
						if (vida==210) s_voice1=play_snd (s_five,512,256); end
						if (vida==211) s_voice1=play_snd (s_final,512,256); end
						if (vida==212) s_voice1=play_snd (s_ready,512,256); end
						if (vida==213) s_voice1=play_snd (s_go,512,256); end
						if (vida==214) s_voice1=play_snd (s_ko,512,256); end
						if (vida==215) s_voice1=play_snd (s_winner,512,256); end
						if (vida==216) s_voice1=play_snd (s_perfect,512,256); end
						if (vida==217) s_voice1=play_snd (s_time,512,256); end
						if (vida==218) s_voice1=play_snd (s_over,512,256); end
						if (vida==219) s_voice1=play_snd (s_draw,512,256); end
						bloker=1;
					end
				end
				if (y==120) 
					
					if (vida>1) vida=0; end
					if (vida<0) vida=1; end
					
					cd_ok=vida;
					if (vida==1) 
						if (track[0]<0)    track[0]=1;   end
						if (track[1]<0)    track[1]=3;   end
						if (track[2]<0)    track[2]=4;   end
						if (track[3]<0)    track[3]=5;   end
						if (track[4]<0)    track[4]=6;   end
						if (track[5]<0)    track[5]=2;   end
						if (track[6]<0)    track[6]=7;   end
						if (track[7]<0)    track[7]=8;   end
						if (track[8]<0)    track[8]=9;   end
						if (track[9]<0)    track[9]=10;  end
						if (track[10]<0)   track[10]=11; end
						if (track[0]>100)  track[0]=1;   end
						if (track[1]>100)  track[1]=3;   end
						if (track[2]>100)  track[2]=4;   end
						if (track[3]>100)  track[3]=5;   end
						if (track[4]>100)  track[4]=6;   end
						if (track[5]>100)  track[5]=2;   end
						if (track[6]>100)  track[6]=7;   end
						if (track[7]>100)  track[7]=8;   end
						if (track[8]>100)  track[8]=9;   end
						if (track[9]>100)  track[9]=10;  end
						if (track[10]>100) track[10]=11; end
						if (control_enter and father.y==120 and cd_ok==1)
							pegata (40,52,38,c_screen,0,100,z,75,fich_game);
							cd_ok=2;
						end
					end
				end
			end
			if (!control_enter) bloker=0; end
			if (y==60 or y==90)
				if (father.y!=y)
					pegata (x,y,graph-2,ctype,flags+4,size,z-500,-1,file);
				end	
			else
				if (father.y<y)
					pegata (x,y,graph-2,ctype,flags+4,size,z-500,-1,file);
				end	
			end
			
			if (y==60)
				if (cd_ok<>2) 
					
					write (font_menu,MENU_X0+x,y,3,"Music Test");
					
					if (vida==0)  write (font_menu,MENU_X1+x,y,5,"Kyo Stage 1"); end
					if (vida==1)  write (font_menu,MENU_X1+x,y,5,"Kyo Stage 2"); end
					if (vida==2)  write (font_menu,MENU_X1+x,y,5,"Athena Stage"); end
					if (vida==3)  write (font_menu,MENU_X1+x,y,5,"Iori Stage 1"); end
					if (vida==4)  write (font_menu,MENU_X1+x,y,5,"Iori Stage 2"); end
					if (vida==5)  write (font_menu,MENU_X1+x,y,5,"Terry Stage"); end
					if (vida==6)  write (font_menu,MENU_X1+x,y,5,"Kasumi Stage"); end
					if (vida==7)  write (font_menu,MENU_X1+x,y,5,"Takuma Stage"); end
					if (vida==8)  write (font_menu,MENU_X1+x,y,5,"K' Stage"); end
					if (vida==9)  write (font_menu,MENU_X1+x,y,5,"Kula Stage"); end
					if (vida==10) write (font_menu,MENU_X1+x,y,5,"K'9999 Stage"); end
					if (vida==11) write (font_menu,MENU_X1+x,y,5,"Select Player"); end
				end
			end
			if (y==90)
				
				if (cd_ok<>2)
					write (font_menu,MENU_X0+x,y,3,"Voice Test");
					write_int (font_menu,MENU_X1+x,y,5,&he_dado);
					
					if (vida>=0 and vida<=30)    write (font_menu,MENU_X1+x-30,y,5,"Kyo");     end
					if (vida>=31 and vida<=51)   write (font_menu,MENU_X1+x-30,y,5,"Athena");  end
					if (vida>=52 and vida<=81)   write (font_menu,MENU_X1+x-30,y,5,"Iori");    end
					if (vida>=82 and vida<=102)  write (font_menu,MENU_X1+x-30,y,5,"Terry");   end
					if (vida>=103 and vida<=123) write (font_menu,MENU_X1+x-30,y,5,"Kasumi");  end
					if (vida>=124 and vida<=144) write (font_menu,MENU_X1+x-30,y,5,"Takuma");  end
					if (vida>=145 and vida<=160) write (font_menu,MENU_X1+x-30,y,5,"K'");  end
					if (vida>=161 and vida<=185) write (font_menu,MENU_X1+x-30,y,5,"Kula");  end
					if (vida>=186 and vida<=204) write (font_menu,MENU_X1+x-30,y,5,"K'9999"); end
					if (vida>=205 and vida<=219) write (font_menu,MENU_X1+x-30,y,5,"Comment"); end
				end
			end
			if (y==120) 
				
				if (cd_ok<>2) write (font_menu,MENU_X0+x,y,3,"Cd Game Music"); end
				
				if (vida==0) 
					write (font_menu,MENU_X1+x,y,5,"Off"); 
				end
				if (vida==1) 
					write (font_menu,MENU_X1+x,y,5,"On"); cd_ok=1;
					if (((father.paso%FPS_TARGET)<(FPS_TARGET>>1)) and (father.y==120)) 
						write (font_p2,SIZEX2,140,4,"Press Enter To CD Configuration");
					end
				end
			end
		end
		
		if (tipo==75)//proceso apoyo para opciones de sonido
			cd_ok=2;
			
			if (paso==0)
				signal(father,s_sleep); y=70; bloker=1;
			end
			
			paso++;
			
			write (font_p1,50,46+8,3,"MUSIC");
			write (fontstriker1,50,62+8,3,"Kyo Stage 1");
			write (fontstriker1,50,73+8,3,"Kyo Stage 2");
			write (fontstriker1,50,84+8,3,"Athena Stage");
			write (fontstriker1,50,95+8,3,"Iori Stage 1");
			write (fontstriker1,50,106+8,3,"Iori Stage 2");
			write (fontstriker1,50,117+8,3,"Terry Stage");
			write (fontstriker1,50,128+8,3,"Kasumi Stage");
			write (fontstriker1,50,139+8,3,"Takuma Stage");
			write (fontstriker1,50,150+8,3,"K' Stage");
			write (fontstriker1,50,161+8,3,"Kura Stage");
			write (fontstriker1,50,172+8,3,"K'9999 Stage");
			write (font_p2,250,46+8,4,"TRACK");
			write_int (fontstriker2,250,62+8,4,&track[0]);
			write_int (fontstriker2,250,73+8,4,&track[5]);
			write_int (fontstriker2,250,84+8,4,&track[1]);
			write_int (fontstriker2,250,95+8,4,&track[2]);
			write_int (fontstriker2,250,106+8,4,&track[3]);
			write_int (fontstriker2,250,117+8,4,&track[4]);
			write_int (fontstriker2,250,128+8,4,&track[6]);
			write_int (fontstriker2,250,139+8,4,&track[7]);
			write_int (fontstriker2,250,150+8,4,&track[8]);
			write_int (fontstriker2,250,161+8,4,&track[9]);
			write_int (fontstriker2,250,172+8,4,&track[10]);
			
			if (is_playing_cd())
				write (font_p2,160,200,4,"Press Scape Button To Stop CD");
			else
				write (font_p2,160,210,4,"Press Enter Button To Play CD Track");
				write (font_p2,160,224,4,"Press Scape Button To Return");
			end
			
			if (bloker==0)
				tipo_control = control_menu;
				if (control(agachar) and paso>1)
					y+=11; play_snd (s_select,512,256);
					if (is_playing_cd()) stop_cd(); end
					if (y>172+8) y=62+8; end
				end
				if (control(saltar))
					y-=11; play_snd (s_select,512,256);
					if (is_playing_cd()) stop_cd(); end
					if (y<62+8) y=172+8; end
				end
				if (control(retroceder))
					if (y==62+8 and track[0]>1) track[0]--; end
					if (y==73+8 and track[5]>1) track[5]--; end
					if (y==84+8 and track[1]>1) track[1]--; end
					if (y==95+8 and track[2]>1) track[2]--; end
					if (y==106+8 and track[3]>1) track[3]--; end
					if (y==117+8 and track[4]>1) track[4]--; end
					if (y==128+8 and track[6]>1) track[6]--; end
					if (y==139+8 and track[7]>1) track[7]--; end
					if (y==150+8 and track[8]>1) track[8]--; end
					if (y==161+8 and track[9]>1) track[9]--; end
					if (y==172+8 and track[10]>1) track[10]--; end
				end
				if (control(avanzar))
					if (y==62+8 and track[0]<99)   track[0]++;  end
					if (y==73+8 and track[5]<99)   track[5]++;  end
					if (y==84+8 and track[1]<99)   track[1]++;  end
					if (y==95+8 and track[2]<99)   track[2]++;  end
					if (y==106+8 and track[3]<99)   track[3]++;  end
					if (y==117+8 and track[4]<99)  track[4]++;  end
					if (y==128+8 and track[6]<99)  track[6]++;  end
					if (y==139+8 and track[7]<99)  track[7]++;  end
					if (y==150+8 and track[8]<99)  track[8]++;  end
					if (y==161+8 and track[9]<99)  track[9]++;  end
					if (y==172+8 and track[10]<99) track[10]++; end
				end
				if (control_enter)
					if (is_playing_cd())
						stop_cd();
						frame;
					end
					if (y==62+8)  play_cd(track[0],0);  end
					if (y==73+8)  play_cd(track[5],0);  end
					if (y==84+8)  play_cd(track[1],0);  end
					if (y==95+8)  play_cd(track[2],0);  end
					if (y==106+8) play_cd(track[3],0);  end
					if (y==117+8) play_cd(track[4],0);  end
					if (y==128+8) play_cd(track[6],0);  end
					if (y==139+8) play_cd(track[7],0);  end
					if (y==150+8) play_cd(track[8],0);  end
					if (y==161+8) play_cd(track[9],0);  end
					if (y==172+8) play_cd(track[10],0); end
					
					if (is_playing_cd())
						pegata (275,y+2,11,c_screen,0,100,z-1,89,id_option.file);
					else
						stop_cd();
					end		
				end	
			end
			if (control_cancel)
				if (is_playing_cd()) 
					stop_cd();
				else
					signal(father,s_wakeup);
					cd_ok=1; 
					return;
				end
			end
			
			if (!control(agachar) and 
				!control(saltar) and
				!control(retroceder) and
				!control(avanzar) and
				!control_cancel and !control_enter)
				bloker=0;
			else
				bloker=1;
			end
		end
		
		//tipos opciones setup
		//boton bajar FPS/boton subir FPS
		if (tipo==76 or tipo==77)
			if (tipo==76) graph=2;
			else graph=3; end
			
			if (mouse.graph<>0)
				if ((collision(type mouse)) and (mouse.left))
					graph=0;
					if (bloker==0)
						play_snd (s_select,512,256);
						if (tipo==76) 
							if (FPS_TARGET>40) FPS_TARGET--; end
						else 
							if (FPS_TARGET<80) FPS_TARGET++; end
						end
						bloker = 1;
					end	
				else
					bloker = 0;
				end
			end
		end
		
		//boton bajar SKIP//boton subir SKIP
		if (tipo==78 or tipo==79)
			if (tipo==78) graph=2;
			else graph=3; end
			
			if (mouse.graph<>0)
				if ((collision(type mouse)) and (mouse.left))
					graph=0;
					if (bloker==0)
						play_snd (s_select,512,256);
						if (tipo==78) 
							if (SKIP>0) SKIP--; end
						else 
							if (SKIP<4) SKIP++; end
						end
						bloker = 1;
					end
				else
					bloker = 0;
				end
			end
		end
		
		//boton slow machine/boton normal game
		if (tipo==80 or tipo==81)
			if (tipo==80) 
				graph=4; 
				if (SLOW_MACHINE) graph=0; end
			else 
				graph=5; 
				if (!SLOW_MACHINE) graph=0; end
			end
			
			if (mouse.graph<>0)
				if ((collision(type mouse)) and (mouse.left))
					graph=0;
					if (bloker == 0)
						play_snd (s_select,512,256);
						if (tipo==80) SLOW_MACHINE = true;
						else SLOW_MACHINE = false; end
						bloker = 1;
					end
				else
					bloker = 0;
				end
			end
		end
		
		//boton default
		if (tipo==82)
			graph=6;
			
			if (mouse.graph<>0)
				if ((collision(type mouse)) and (mouse.left))
					graph = 0;
					if (bloker == 0)
						play_snd (s_selectdo,512,256);
						SLOW_MACHINE = false; 
						FPS_TARGET = 60; 
						SKIP = 0;
						FILTER = FILTER_NORMAL2X;
						SCREEN_MODE = SCREEN_WINDOW;
						
						/* BENNU /*
						full_screen=false;
						SCALE_MODE = SCALE_NORMAL2X;
						set_mode (SIZEX, SIZEY, 16, 0);
						
						/* BENNU_WII /*
						full_screen=false;
						SCALE_MODE = SCALE_NORMAL2X;
						set_mode (SIZEX, SIZEY, 16, 0);
						
						/* GEMIX /*
						set_mode (SIZEX, SIZEY, color_deep, mode_window); 
						set_filter_mode (filter_scale_normal2x, filter_scanline_noscanline); 
						/**/
						
						bloker = 1;
					end
				else
					bloker = 0;	
				end
			end
		end
		if (tipo==83)//boton save
			graph=7;
			if (mouse.graph<>0)
				if ((collision(type mouse)) and (mouse.left))
					graph=0;
					if (bloker == 0)
						play_snd (s_selectdo,512,256);
						graph=0;
						save_data (S_SETUP);
						mouse.graph=9;
						frame(1200);
						mouse.graph=1;
						bloker = 0;
					end	
				else
					bloker = 0;	
				end
			end
		end
		if (tipo==84)//kyo prueba
			file=fich1;
			if (estado==0)
				graph=kyo[paso++];
				if (paso==sizeof(kyo)/DIV)
					paso=0;
				end
				if (paso==150)
					pegata (x+35,y-50,10,c_screen,0,100,z-1,88,id_option.file);
				end
				if (collision(type mouse) and mouse.left)
					estado=1; paso=0;
				end
			end
			if (estado==1)
				graph=burla_kyo[paso++];
				if (paso==12)
					pegata (x+30,y-60,898,c_screen,0,100,z-1,88,id_option.file);
				end
				if (paso==sizeof(burla_kyo)/DIV)
					estado=0; paso=0;
				end
			end
		end
		if (tipo==85)
			define_region(26,10,68,FPS_TARGET-40,12); region=26;
		end
		if (tipo==86)
			define_region(27,114,68,SKIP*8,12); region=27;
		end
		if (tipo==87)//boton exit
			graph=8;
			if ((collision(type mouse)) and (mouse.left))
				play_snd (s_selectdo,512,256);
				graph=0; father.estado=1;
			end
		end
		if (tipo==88)
			if (father.paso==0) return; end
			if (father.estado==1 and graph==10) return; end
		end
		if (tipo==89) //shenmue
			if (is_playing_cd()) paso++; end
			if (paso>0 and paso<12)  x+=1; end
			if (paso>12 and paso<24) x-=1; end
			if (paso==1 or paso==2 or paso==3 or
				paso==4 or paso==5 or
				paso==13 or paso==14 or paso==15 or
				paso==16 or paso==17)
				y-=1;
			end
			if (paso==8 or paso==9 or
				paso==10 or paso==11 or paso==12 or
				paso==20 or paso==21 or
				paso==22 or paso==23 or paso==24)
				y+=1;
			end
			if (paso>23) paso=0; end
			if (is_playing_cd()==0 and paso>0)
				return;
			end
		end
		
		if (tipo==90)//ath super special
			if (game_frame%2==0) graph++; end
			if (graph>188) graph=184; end
			if (flags) x=father.x-19;
			else x=father.x+19; end
			if (father.estado<>_special1 and father.estado<>_special2 and
				father.estado>-1) return;
			end
			if (father.estado==_special1 and father.paso>118) return; end
			if (father.estado==_special2)
				if (father.paso>158 or father.intensidad>0) return; end
			end
			if (father.estado==_special2)
				magia=collision(type hadoken);
				if (magia) magia.vida=0; end
			end
		end
		
		if (tipo==91)//aura jin chon rei
			if (flags) x=father.x-3;
			else x=father.x+3; end
			y=father.y-69;
			if (father.intensidad==0)
				graph++; if (graph>108) graph=100; end
			end
			if (father.intensidad==1)
				graph++;
				if (graph<109) graph=109; end
				if (graph>113) return; end
			end
			if (father.estado<>_toss1) return; end
		end
		
		if (tipo==92)//options controles
			if (y==60) write (font_menu,MENU_X0+x,y,3,"Keyboard Player 1"); end
			if (y==90) write (font_menu,MENU_X0+x,y,3,"Keyboard Player 2"); end
			if (y==120) write (font_menu,MENU_X0+x,y,3,"Control Pad Player 1"); end
			if (y==150) write (font_menu,MENU_X0+x,y,3,"Control Pad Player 2"); end				
			if ((y==120 and pad_1>0) or (y==150 and pad_2>0))
				write (font_menu,MENU_X1+x,y,5,"Device OK!!!");
			end
			if ((y==120 and pad_1==-1) or (y==150 and pad_2==-1))
				write (font_menu,MENU_X1+x,y,5,"Not found...");
			end
			
			if (x<150)
				x+=((150-x)/(FPS_TARGET/10))+1;
				
			else
				
				if (y==father.y)
					if ((y==120 and pad_1>0) or 
						(y==150 and pad_2>0) or y<120)
						
						if ((father.paso%FPS_TARGET)<(FPS_TARGET>>1)) 
							write (font_p2,160,180,4,"Press Enter To Configure");
						end	
						if (control_enter and bloker==0)
							father.estado = 1;
							father.accion = 0;
							bloker = 1;
							signal (type pegata, s_kill);
							return;
						end
					end
				end
			end
			
			if (!control_enter) bloker=0; end
			if (father.y!=y)
				pegata (x,y,graph-2,ctype,flags+4,size,z-500,-1,file);
			end	
			
		end
		
		if (tipo==93)//graphic test
			if (estado==0)
				write (font_menu,MENU_X0+x,y,3,"Character File");
				if (vida==0) write (font_menu,MENU_X1+x,y,5,"Kyo"); end
				if (vida==1) write (font_menu,MENU_X1+x,y,5,"Athena"); end
				if (vida==2) write (font_menu,MENU_X1+x,y,5,"Iori"); end
				if (vida==3) write (font_menu,MENU_X1+x,y,5,"Terry"); end
				if (vida==4) write (font_menu,MENU_X1+x,y,5,"Kasumi"); end
				if (vida==5) write (font_menu,MENU_X1+x,y,5,"Takuma"); end
				if (vida==6) write (font_menu,MENU_X1+x,y,5,"K'"); end
				if (vida==7) write (font_menu,MENU_X1+x,y,5,"Kula"); end
				if (vida==8) write (font_menu,MENU_X1+x,y,5,"K'9999"); end
			end
			if (x<150 and estado==0)
				x+=((150-x)/(FPS_TARGET/10))+1;
			else
				if (paso==0) vida=0; paso++; end
				if (estado==0)
					if (vida>8) vida=0; end
					if (vida<0) vida=8; end
					
					if ((father.paso%FPS_TARGET)<(FPS_TARGET>>1)) 
						write (font_p2,SIZEX2,80,4,"Press Start To Select File");
					end
					write (font_p2,SIZEX2,224,4,PUSH_SCAPE_TO_OPTION);
					
					tipo_control = control_menu;
					if (control(retroceder) and blend_frame==0)
						play_snd (s_select,512,256);
						vida--; blend_frame=1;
					end
					if (control(avanzar) and blend_frame==0)
						play_snd (s_select,512,256);
						vida++; blend_frame=1;
					end
					if (!control(retroceder) and !control(avanzar)) 
						blend_frame=0;
					end
					if (control_enter and bloker==0)
						confirmed_w_pad = !key(_enter);
						if (vida==0) fich1=load_fpg("kof\kyo.fpg"); end
						if (vida==1) fich1=load_fpg("kof\athena.fpg"); end
						if (vida==2)
							fich1=load_fpg("kof\iori.fpg");
							from counter=1 TO 594;
								convert_palette (fich1,counter,&normal_iori);
							end
						end
						if (vida==3) fich1=load_fpg("kof\terry.fpg"); end
						if (vida==4)
							fich1=load_fpg("kof\kasumi.fpg");
							from counter=1 to 500;
								convert_palette (fich1,counter,&normal_kas);
							end
						end
						if (vida==5) fich1=load_fpg("kof\takuma.fpg"); end
						if (vida==6) fich1=load_fpg("kof\k'.fpg"); end
						if (vida==7) fich1=load_fpg("kof\kula.fpg"); end
						if (vida==8) fich1=load_fpg("kof\tesuo.fpg"); end
						
						/* GEMIX /*
						new_map (320,200,0,0,220); 
						/**/
						
						power=1;
						estado=1; father.estado=2; x0=0; x1=0;
						bloker=1;
					end
					if (control_cancel and bloker==0)
						father.estado=1; bloker=1;
					end
				end
				
				if (estado==1)
					delete_text(all_text);
					if (paso==1)
						file=fich1; graph=1;
						x=160; y=200; paso=2;
					end
					if (paso==2)
						write (fontstriker3,160,30,4,"Graphic Test");
						
						if (!confirmed_w_pad)
							write (fontstriker3,310,155,5,"        z = fullsc  ");
							write (fontstriker3,310,170,5,"    space = graph+");
							write (fontstriker3,310,185,5,"backspace = graph-");
							write (fontstriker3,310,200,5,"     +key = size+  ");
							write (fontstriker3,310,215,5,"     -key = size-  ");
							write (fontstriker3,310,230,5,"   escape = return ");
							
						else	
							write (fontstriker3,310,155,5, GFXTEST_XBUTTON);
							write (fontstriker3,310,170,5, GFXTEST_ABUTTON);
							write (fontstriker3,310,185,5, GFXTEST_BBUTTON);
							write (fontstriker3,310,200,5, GFXTEST_ZBUTTON);
							write (fontstriker3,310,215,5, GFXTEST_CBUTTON);
							write (fontstriker3,310,230,5, GFXTEST_ESCAPE);
						end	
						
						write (fontstriker3,10,215,3,"graph");
						write (fontstriker3,10,230,3,"size");
						write_int (fontstriker1,50,215,3,&power);
						write_int (fontstriker1,50,230,3,&size);
					end	
					
					if (control(retroceder))
						if (out_region(id,0)==false or
							(out_region(id,0)==true and x>160))
							x-=5;
						end
					end
					if (control(avanzar))
						if (out_region(id,0)==false or
							(out_region(id,0)==true and x<160))
							x+=5;
						end
					end
					if (control(saltar))
						if (out_region(id,0)==false or
							(out_region(id,0)==true and y>100))
							y-=5;
						end
					end
					if (control(agachar))
						if (out_region(id,0)==false or
							(out_region(id,0)==true and y<100))
							y+=5;
						end
					end
					
					if (key(_c_plus) or control(toss))
						if (size<400) size+=10; end
					end
					if (key(_c_minus) or control(rodar))
						if (size>10) size-=10; end
					end
					
					if (key(_z) or control(s_punch))
						if (bloker==0)
							if (paso==2) paso=3; else paso=2; end
							bloker = 1;
						end
					end
					
					if ((key(_space) or control(l_punch)) and (bloker==0 or (x0>30 and x0%2==0)))
						graph++; power++;
						if (vida==0)
							if (graph==142 or graph==151 or graph==452 or
								graph==554 or graph==421 or graph==424) graph++;
							end
							if (graph==237) graph=300; end
							if (graph==337) graph=340; end
							if (graph==367) graph=388; end
							if (graph==390) graph=394; end
							if (graph==429) graph=446; end
							if (graph==457) graph=459; end
							if (graph==462) graph=500; end
							if (graph==600) graph=1; power=1; end
						end
						if (vida==1)
							if (graph==411 or graph==417 or graph==424) graph++; end
							if (graph==112) graph=120; end
							if (graph==197) graph=200; end
							if (graph==293) graph=300; end
							if (graph==313) graph=388; end
							if (graph==390) graph=394; end
							if (graph==428) graph=446; end
							if (graph==458) graph=500; end
							if (graph==568) graph=574; end
							if (graph==593) graph=1; power=1; end
						end
						if (vida==2)
							if (graph==387 or graph==411 or graph==424) graph++; end
							if (graph==276) graph=288; end
							if (graph==363) graph=365; end
							if (graph==383) graph=385; end
							if (graph==390) graph=394; end
							if (graph==426) graph=446; end
							if (graph==450) graph=452; end
							if (graph==457) graph=500; end
							if (graph==532) graph=540; end
							if (graph==553) graph=562; end
							if (graph==641) graph=1; power=1; end
						end
						if (vida==3)
							if (graph==421 or graph==532) graph++; end
							if (graph==238) graph=300; end
							if (graph==303) graph=388; end
							if (graph==390) graph=394; end
							if (graph==429) graph=446; end
							if (graph==460) graph=500; end
							if (graph==504) graph=525; end
							if (graph==552) graph=558; end
							if (graph==574) graph=1; power=1; end
						end
						if (vida==4)
							if (graph==183) graph=200; end
							if (graph==256) graph=300; end
							if (graph==310) graph=388; end
							if (graph==390) graph=395; end
							if (graph==421) graph=423; end
							if (graph==428) graph=446; end
							if (graph==457) graph=499; end
							if (graph==501) graph=510; end
							if (graph==411 or graph==417 or graph==424) graph++; end
							if (graph==536) graph=1; power=1; end
						end
						if (vida==5)
							if (graph==163 or graph==199 or graph==204 or
								graph==421 or graph==424 or
								graph==452) graph++;
							end
							if (graph==207) graph=227; end
							if (graph==250) graph=300; end
							if (graph==360) graph=388; end
							if (graph==390) graph=395; end
							if (graph==428) graph=446; end
							if (graph==458) graph=505; end
							if (graph==519) graph=1; power=1; end
						end
						if (vida==6)
							if (graph==288 or graph==421 or graph==424) graph++;  end
							if (graph==390) graph+=4; end
							if (graph==356 or graph==417) graph+=2; end
							if (graph==429) graph=444; end
							if (graph==458) graph=506; end
							if (graph==564) graph=1; power=1; end
						end
						if (vida==7)
							if (graph==270) graph=279; end
							if (graph==350) graph=396; end
							if (graph==426) graph=444; end
							if (graph==458) graph=500; end
							if (graph==525) graph=529; end
							if (graph==654) graph=1; power=1; end
						end
						if (vida==8)
							if (graph==331 or graph==424 or graph==452) graph++; end
							if (graph==198) graph=200; end
							if (graph==256) graph=300; end
							if (graph==349) graph=388; end
							if (graph==390) graph=394; end
							if (graph==412) graph=417; end
							if (graph==430) graph=444; end
							if (graph==461) graph=505; end
							if (graph==534) graph=1; power=1; end
						end
						bloker=1;
					end
					if ((key(_space) or control(l_punch)) and bloker==1) x0++; end
					
					if ((key(_backspace) or control(l_kick)) and (bloker==0 or (x1>30 and x1%2==0)))
						graph--; power--;
						if (vida==0)
							if (graph==142 or graph==151 or graph==452 or
								graph==554 or graph==421 or graph==424) graph--;
							end
							if (graph==299) graph=236; end
							if (graph==339) graph=336; end
							if (graph==387) graph=366; end
							if (graph==393) graph=389; end
							if (graph==445) graph=428; end
							if (graph==458) graph=456; end
							if (graph==499) graph=461; end
							if (graph==0) graph=599; power=445; end
						end
						if (vida==1)
							if (graph==411 or graph==417 or graph==424) graph--; end
							if (graph==119) graph=111; end
							if (graph==199) graph=196; end
							if (graph==299) graph=292; end
							if (graph==387) graph=312; end
							if (graph==393) graph=389; end
							if (graph==445) graph=427; end
							if (graph==499) graph=457; end
							if (graph==573) graph=567; end
							if (graph==0) graph=592; power=426; end
						end
						if (vida==2)
							if (graph==387 or graph==411 or graph==424) graph--; end
							if (graph==287) graph=275; end
							if (graph==364) graph=362; end
							if (graph==384) graph=382; end
							if (graph==393) graph=389; end
							if (graph==451) graph=449; end
							if (graph==445) graph=425; end
							if (graph==499) graph=456; end
							if (graph==539) graph=531; end
							if (graph==561) graph=552; end
							if (graph==0) graph=640; power=535; end
						end
						if (vida==3)
							if (graph==421 or graph==532) graph--; end
							if (graph==299) graph=237; end
							if (graph==387) graph=302; end
							if (graph==393) graph=389; end
							if (graph==445) graph=428; end
							if (graph==499) graph=459; end
							if (graph==524) graph=503; end
							if (graph==557) graph=551; end
							if (graph==0) graph=573; power=336; end
						end
						if (vida==4)
							if (graph==199) graph=182; end
							if (graph==299) graph=255; end
							if (graph==387) graph=309; end
							if (graph==394) graph=389; end
							if (graph==422) graph=420; end
							if (graph==445) graph=427; end
							if (graph==498) graph=456; end
							if (graph==509) graph=500; end
							if (graph==411 or graph==417 or graph==424) graph--; end
							if (graph==0) graph=535; power=317; end
						end
						if (vida==5)
							if (graph==163 or graph==199 or
								graph==204 or graph==421 or graph==424 or
								graph==452) graph--;
							end
							if (graph==226) graph=206; end
							if (graph==299) graph=249; end
							if (graph==387) graph=359; end
							if (graph==394) graph=389; end
							if (graph==445) graph=427; end
							if (graph==504) graph=457; end
							if (graph==0) graph=518; power=345; end
						end
						if (vida==6)
							if (graph==288 or graph==421 or graph==424) graph--;  end
							if (graph==393) graph-=4; end
							if (graph==357 or graph==417) graph-=2; end
							if (graph==443) graph=428; end
							if (graph==505) graph=457; end
							if (graph==0) graph=563; power=489; end
						end
						if (vida==7)
							if (graph==278) graph=269; end
							if (graph==395) graph=349; end
							if (graph==443) graph=425; end
							if (graph==499) graph=457; end
							if (graph==528) graph=524; end
							if (graph==0) graph=653; power=534; end
						end
						if (vida==8)
							if (graph==331 or graph==424 or graph==452) graph--; end
							if (graph==199) graph=197; end
							if (graph==299) graph=255; end
							if (graph==387) graph=348; end
							if (graph==393) graph=389; end
							if (graph==416) graph=411; end
							if (graph==443) graph=429; end
							if (graph==504) graph=460; end
							if (graph==0) graph=533; power=378; end
						end
						bloker=1;
					end
					if ((key(_backspace) or control(l_kick)) and bloker==1) x1++; end
					if (control_cancel and bloker==0)
						fade_off (); paso=1;
						delete_text(all_text);
						unload_fpg(fich1); frame;
						file=father.file; father.estado=2;
						x=160; y=60; graph=999; size=100;
						estado=0; fich1=0; father.vida=0;
						write (font_menu,SIZEX2,30,4,"Graphic Test");
						fade_on(); bloker=1;
					end
				end
				if (!key(_space) and !key(_backspace) and
					!control(l_punch) and !control(l_kick) and 
					!control(s_punch) and !control_cancel and !key (_z))
					bloker=0; x0=0; x1=0;
				end
			end
		end
		
		if (tipo==94)//orla tornado panza
			if (game_frame%2==0) graph++; end
			if (graph>104) return; end
		end
		
		if (tipo==96)//cuerpo del gesto inicial de takuma
            priority=father.priority+1;
			if (game_frame%2==0) paso++; end
			graph=cuerpo_taku[paso]; 
            father.paso=2;
			if (paso==39 or paso==50) 
            	play_snd (s_takuma24,500,256); 
            end
			if (paso==(sizeof(cuerpo_taku)/DIV)-1)
				father.paso=4; 
                return;
			end
			if (father.estado!=_gesto_princ)
                return;
			end
		end
		
		if (tipo==97) //mosca
			graph = mosca;
			
			if (paso==0)
				if (x<hit_x) inc_x = rand(100,2<<PRECISION_BITS);
				else inc_x = rand(-2<<PRECISION_BITS,100); end
				if (y<hit_y) inc_y = rand(100,2<<PRECISION_BITS);
				else inc_y = rand(-2<<PRECISION_BITS,100); end
			end
			
			x0 += inc_x;
			y0 += inc_y;
			
			x = x0>>PRECISION_BITS;
			y = y0>>PRECISION_BITS;
			
			if (id_luchador1.vida==id_luchador2.vida)
				hit_x = (id_luchador1.x+id_luchador2.x)/2;
				hit_y = (id_luchador1.y+id_luchador2.y)/2-60;
			end
			
			if (id_luchador1.vida>id_luchador2.vida)
				hit_x = id_luchador2.x;
				hit_y = id_luchador2.y-80;
			end
			
			if (id_luchador2.vida>id_luchador1.vida)
				hit_x = id_luchador1.x;
				hit_y = id_luchador1.y-80;
			end
			
			paso++;
			if (paso%2==0) size=100;
			else size=150; end
			
			if (paso>fps_target/3)
				if (rand(0,8)==0) paso = 0; end
			end
		end
		
		if (tipo==98)//paraguas kasumi
			paso++;
			if (paso==7) x=father.x; end
			if (paso==15)
				if (father.flags) x+=8;
				else x-=8; end
			end
			if (paso==23)
				if (father.flags) x+=12;
				else x-=12; end
				y+=7; graph=499;
			end
			if (paso<23 and father.estado==_normal) return; end
			if (round==2) return; end
		end
		
		//controla el especial de kasumi
		if (tipo==99)
			if (paso==0) play_snd (s_kasumi23,512,256); end
			if (paso==0 and father.super_sp==1)
				from estado=521 TO 535;
					convert_palette (father.file,estado,&rojoxazul2);
				end
				super_sp=1;
			end
			paso++;
			if (super_sp==0)
				if (flags) x-=12;
				else x+=12; end
				if (paso==13) return; end
			else
				if (flags) x-=15;
				else x+=15; end
				if (paso==51)
					from estado=521 TO 535;
						convert_palette (father.file,estado,&rojoxazul2);
					end
					return;
				end
			end
			if ((paso>2 and paso<21) and (paso%2==0)) 
                orlas (x,y,z-5,flags,31,1,father);
            end
			if (father.estado==_special1)
			  if (paso==9 or paso==11 or paso==13 or paso==19) father.paso--; end
			end
		end
		
		if (tipo==100)//el sr.takuma tiene el honor de llamar al proceso no 100
			enemigo=father.enemigo; paso++;
			if (paso>1 and paso<5) enemigo.graph=419;
				if (enemigo.flags) enemigo.x-=5;
				else enemigo.x+=5; end
				enemigo.y+=enemigo.inc_y; enemigo.inc_y++;
				if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_KYO94)
					enemigo.graph=423;
				end
			end
			if (paso==4)
				enemigo.estado=_recibir_toss; 
				enemigo.paso=16;
				enemigo.intensidad=0;
			end
		end
		
		if (tipo==101) //orla jubei
			paso++;
			if (paso==4) flags=(flags%2)+4; end
			if (paso==5) return; end
		end
		
		if (tipo==102)//mano usted en presentacion contra kyo
			graph=manita[paso++];
			if (paso==(sizeof(manita)/DIV) or 
				father.estado==_normal) 
				signal (id, s_kill_tree);
			end
			if (paso==20) 
				y+=1;
				get_real_point (1,&hit_x,&hit_y);
				son = pegata (hit_x,hit_y,564,c_scroll,flags,100,z-1,103,file);
			end
			if (paso==101) y-=1; end
			if (paso==103) y+=2; end
			if (paso==105) y-=2; end
		end
		
		if (tipo==103)//llama usted en presentacion vs kyo
			if (estado==0) //nace 
				if (game_frame%2==0) graph++; end 
				if (graph>458) estado=1; end
			end
			if (estado==1) //en combustion
				if (game_frame%2==0) graph++; end 
				if (graph>552) graph=549; end
				if (father.paso==50)
					graph=525; size=75; z=father.z+1; y+=10; estado=2;
					play_snd (s_kyo1,500,256);
				end
			end
			if (estado==2) size=50; //muere
				if (game_frame%2==0) graph++; end
				if (graph>531) graph=0; return; end
			end
		end
		
		if (tipo==104)//llama del k
			if (game_frame%2==0) graph++; end
			if (graph==529 and estado==0) graph=525; end
			if (graph==532 and estado==1) graph=0; return; end
			
			if (father.graph==265 and estado==0)
				estado=1; graph=529; play_snd (s_burn1,512,360);
			end
			if (father.estado==_special1 and
				father.paso>128 and estado==0)
				estado=1; graph=529; flags+=4;
			end
			if (father.estado==_normal) graph=0; return; end
			if (father.estado<>_special1 and father.estado<>_gesto_princ)
				graph=0; return;
			end
			if (estado==0) x=father.hit_x; y=father.hit_y; end
		end
		
		if (tipo==105)//orla patada k
			paso++;
			if (paso==2) paso=0; graph++; end
			if (graph>171) graph=0; return; end
			if (father.luchador==FIGHTER_K and father.y<220)
				y=father.y-100;
				if (father.flags) x=father.x-24;
				else x=father.x+24; end
			end
			if (father.luchador==FIGHTER_K and 
				father.y==220 and father.power==74)
				prota_shadow(x,y,0);
			end
		end
		
		if (tipo==106)//orla 1 shoryuken k
			graph=orla_k[paso++];
			if (paso==sizeof(orla_k)/DIV)
				return;
			end
			if (father.estado!=_shoryuken and father.estado>0)
				return;
			end
			
			if (graph==546) y=95;
				if (father.flags) x=father.x-32-inc_x;
				else x=father.x+32+inc_x; end
			end
			if (graph>546 and (father.estado==_shoryuken or
				father.estado<0))
				if (father.flags) x=father.x-32-inc_x;
				else x=father.x+32+inc_x; end
				y=father.y-115-inc_y;
				inc_x+=3; inc_y+=2;
			end
		end
		
		if (tipo==107)//otra llama del shoryu de k
			graph=yama_k[paso++];
			if (paso==sizeof(yama_k)/DIV)
				return;
			end
			if (father.estado<>_shoryuken and
				father.estado>-1 and paso>5 and paso<12)
				paso=12; graph=557;
			end
			if (graph<554)
				if (father.flags) x=father.x-54;
				else x=father.x+54; end
				y=father.y-70;
			end
			if (graph==554 or graph==555)
				if (father.flags) x=father.x-60;
				else x=father.x+60; end
				y=father.y-58;
			end
			if (graph>555 and (father.estado==_shoryuken or
				father.estado<0))
				if (father.flags) x=father.x+18;
				else x=father.x-18; end
				if (father.inc_y<1)
					y=father.y-145;
				end
			end
		end
		
		if (tipo==108)//fantasmita k
			paso=father.paso; x=father.x;
			graph=fantasma[paso++];
			if (paso==sizeof(fantasma)/DIV or father.estado<>_u_kick)
				return;
			end
			if (paso>4 and paso<31 and power<74)
				prota_shadow (x,y,0);
			end
		end
		
		if (tipo==109)//sombra 1
			paso++;
			if (paso==8) graph++; paso=4; end
			if (graph>279) graph=0; return; end
		end
		
		if (tipo==110)
			if (estado==0)
				if (father.flags) inc_x=-5; else inc_x=5; end
				he_dado=1; estado=1; enemigo=father.enemigo;
				play_snd (s_k1,420,256);
			end
			if (estado==1 or estado==2)
				paso++; y+=inc_y; x+=inc_x;
				if (paso==5 or paso==9 or paso==13 or paso==17)
					angle+=90000;
				end
			end
			if (estado==1)
				if (paso==5 or paso==11 or paso==17) inc_y++; end
				if (paso==17) paso=1; end
				golpe(x,y,1,15,542,1,1,1,0,father);
				if (he_dado<>1)
					paso=1; inc_x=0; father.he_dado=he_dado; estado=2;
					if (enemigo.seconds==1) enemigo.seconds=0; end
					if (he_dado==0) enemigo.estado=_recibir_fuertes_suelo;
						enemigo.paso=1;
					end
					inc_y=-8;
				end
			end
			if (estado==2)
				if (paso<43) inc_y++; end
				if (paso==7 or paso==11 or paso==15 or
					paso==21 or paso==23 or paso==27)
					flags+=4;
				else
					if (paso<27) flags-=4; end
				end
				if (paso==29) graph=0; end
				if ((father.paso>102 and father.paso<221) or
					(father.paso>80 and father.paso<109 and
					father.he_dado==0 and enemigo.y==220) or
					(father.intensidad==3 and father.paso<23))
					if (father.paso<221)
						if (father.flags) enemigo.x=father.x-52;
						else enemigo.x=father.x+52; end
					end
					if (father.paso<203 and father.intensidad<3)
						if (father.flags) father.x-=1;
						else father.x+=1; end
					end
				end
			end
			if ((father.estado<>_special2 and father.estado>-1))
				return;
			end
		end
		
		if (tipo==111)//k de kamelo en el super de las gafas
			graph=kamelo[paso++];
			if (paso==sizeof(kamelo)/DIV)
				return;
			end
			if (paso==5 and father.he_dado==0)
				hit_x=father.hit_x; hit_y=father.hit_y;
				pegata (hit_x+rand(-32,0),hit_y+rand(-5,5),
				172,c_scroll,flags,rand(90,125),-5,112,fichad);
				pegata (hit_x+rand(0,32),hit_y+rand(0,25),
				172,c_scroll,flags,rand(90,125),-5,112,fichad);
				pegata (hit_x+rand(12,45),hit_y+rand(-25,0),
				172,c_scroll,flags,rand(90,125),-5,112,fichad);
			end
			if (paso>32)
				if (paso<51) x+=inc_x;
				else x-=inc_x; end
				if (flags) inc_x+=1; else inc_x-=1; end
				if (paso==51 or paso>64) inc_x=0; end
			end
		end
		
		if (tipo==112)//explosion macarrilla
			paso++; 
			if (paso%2==0) graph++; end
			if (graph>191) graph=0; return; end frame(200);
		end
		
		if (tipo==113)//electricidad(por fin)
			file=fichad; graph++;
			if (graph==198) graph=0; return; end frame(200);
		end
		
		if (tipo==114)//electricidad(por fin)
			graph++;
			if (graph==203)
				if (flags) x+=15; else x-=15; end
			end
			if (graph==205) graph=0; return; end frame(200);
		end
		
		if (tipo==115)//electricidad setsuna
			graph=rayo[paso++];
			if (paso==sizeof(rayo)/DIV)
				return;
			end
		end
		
		if (tipo==116 or tipo==-116)
			graph=rayk[paso++];
			if (paso==sizeof(rayk)/DIV)
				paso=1; intensidad++;
				if (flags) flags=0; else flags=1; end
				if (intensidad==10) father.seconds=0; return; end
			end
			if ((father.vida=<0 and game_mode!=MODE_TRAINING) or
				(paso>4 and father.seconds==0))
				father.seconds=0; return;
			end
			if (paso==5) y=father.y-60; inc_y=0;
				if (flags) inc_x=7; x=father.x-75;
				else inc_x=-7; x=father.x+75; end
				play_snd (s_setsuna3,450,256);
			end
			if (paso==59) y=father.y-120; inc_y=5;
				if (flags) inc_x=5; x=father.x-75;
				else inc_x=-5; x=father.x+75; end
				play_snd (s_setsuna3,450,256);
			end
			if (paso==119)
				y=father.y+10; inc_y=-7; inc_x=0; x=father.x;
				play_snd (s_setsuna3,450,256);
			end
			x+=inc_x; y+=inc_y;
		end
		
		if (tipo==117)
			graph++;
			if (graph==25) y-=125; end
			if (graph>28) graph=0; return; end
			frame(200);
		end
		
		if (tipo==118)//hielo
			paso++;
			if (paso==2) graph++; paso=0; end
			if (graph==520) graph=0; return; end
			if (father.estado<>_lpunch2 and father.estado>-1) return; end
			if (flags) x=father.x-50; else x=father.x+50; end
		end
		
		if (tipo==119)//hielo
			paso++;
			if (paso==1 or paso==3 or paso==5 or
				paso==11 or paso==15 or paso==19) graph++;
			end
			if (paso==21) return; end
			if (father.estado<>_spunch1 and father.estado>-1) return; end
			if (flags) x=father.x-50; else x=father.x+50; end
		end
		
        if (tipo==120)//hielo rompiendose
			paso++;
			if (paso==8) graph++; paso=0; end
			if (graph>542) graph=0; return; end
		end
		
		if (tipo==121)//piva del nest en presentacion kula
			graph=nest[paso++];
			if (paso==sizeof(nest)/DIV) return; end
			if (paso==8) 
				y=220; son=sombra(); 
			end
			if (father.estado==_normal and paso<267) paso=267; graph=551; end
			if (paso==39)
				if (father.enemigo.luchador==FIGHTER_K) play_snd (s_kura34,412,256);
				else
					if (father.enemigo.luchador==FIGHTER_K9999) play_snd (s_kura40,412,256);
					else play_snd (s_kura33,412,256); end
				end
			end
			if (paso==99 and father.enemigo.luchador==FIGHTER_K9999 and blend_frame<40)
				paso--; father.paso--; blend_frame++;
			end
			if (paso==199 and father.enemigo.luchador==FIGHTER_K9999 and estado<25)
				paso--; father.paso--; estado++;
			end
			if (paso==190 and father.enemigo.luchador<>FIGHTER_K and
				father.enemigo.luchador<>FIGHTER_K9999)
				play_snd (s_kura23,512,256);
			end
			if (paso==267) 
				y=160; 
				if (exists(son)) signal(son,s_kill); end 
			end
			if (paso==1 or paso==267)
				play_snd (s_kura37,512,256);
				play_snd (s_kura37,212,256);
			end
		end
		
		if (tipo==122)//pico hielo
			paso++; 
			x=father.hit_x+father.inc_x; 
			y=father.hit_y+father.inc_y;
			
			if (paso==6) graph++; paso=0; end
			if (graph>556) graph=554; end
			if (father.estado==_lpunchair or father.estado<0 or
				(father.estado==_spunchair and father.paso<17))
			else
				return;
			end
		end
		
		if (tipo==123)//lanza hielo
			paso++; x=father.hit_x;
			if (paso==4) graph++; paso=0; father.he_dado=1; end
			if (graph>539) graph=0; return; end
			if (father.estado<>_spunchaga and father.estado>-1) return; end
			
			hit_x = x;
			if ((father.x<x and father.enemigo.x>x) or
				(father.x>x and father.enemigo.x<x))
				hit_x = father.enemigo.x;
			end
			if (paso==1)
				if (graph==531 or graph==533 or graph==535 or graph==537)
					golpe(x,y,4,7,graph,4,0,15,0,father);
				end
			end
		end
		
		if (tipo==124)//espejo
			if (estado==0)
				if (father.estado>38 and father.estado<43)
					if (father.estado==39 or father.estado==41)
						he_dado=585; y=143;
						if (flags) x=father.x-12; else x=father.x+12; end
					else
						he_dado=587; y=187;
						if (flags) x=father.x+1; else x=father.x-1; end
					end
				else
					estado=1; flags+=4;
				end
			end
			if (estado==1)
				paso++;
				if (paso==1) graph=he_dado; end
				if (paso==2) graph++; end
				if (paso==4) return;  end
			end
		end
		
		if (tipo==125)//volteo punyo kula
			paso++;
			if (paso==3) graph=559; end
			if (father.estado<>_voltear or father.paso>107) return; end
			if (flags) x=father.x-50; else x=father.x+50; end
		end
		
		if (tipo==126)//volteo punyo kula
			paso++; enemigo=father.enemigo;
			if (estado==0)
				if (paso==1)  graph=557; end
				if (paso==9)  graph=558; end
				if (paso==59) graph=560; end
				if (father.estado<>_voltear or father.paso>107) estado=1; paso=0; end
				inc_x=(x-enemigo.x)/3;
				if (flags) x=father.x-50+inc_x; else x=father.x+50+inc_x; end
				inc_x=0;
			end
			if (estado==1)
				if (paso==1) graph=561; end
				if (paso==5) graph=562; end
				if (paso==9) flags+=4;  end
				if (paso==13) return;   end
			end
		end
		
		if (tipo==127)//piva del nest cortandote los huevos
			graph=cortarrr[paso++];
			if (paso==1) son=sombra(); end
			if (paso==51) 
				signal(son,s_kill); y=160;
				play_snd (s_kura37,512,256);
				play_snd (s_kura37,212,256);
			end
			if (paso==sizeof(cortarrr)/DIV) return; end
		end
		
		if (tipo==128)
			graph=nestwin[paso++];
			if (paso==sizeof(nestwin)/DIV) paso-=10; end
			if (paso==5) y=220; son=sombra(); end
			if (paso==31) play_snd (s_kura36,412,256); end
			if (father.estado<>_ganar)
				signal(son,s_kill); return;
			end
			if (paso==1)
				play_snd (s_kura37,512,256);play_snd (s_kura37,212,256);
			end
		end
		
		if (tipo==129)
			if (size<100) size+=10; end
			paso++;
			if (paso==5)  graph=564; end
			if (paso==10) graph=563; paso=0; end
			if (father.estado<>_ganar) return; end
		end
		
		if (tipo==130)
			graph=nestlose[paso++];
			if (paso==5) y=220; son=sombra(); end
			if (paso==sizeof(nestlose)/DIV) paso--; end
			if (father.estado<>_perder)
				signal(son,s_kill); return;
			end
			if (paso==1)
				play_snd (s_kura37,512,256);
				play_snd (s_kura37,212,256);
			end
		end
		
		if (tipo==131)//especial nest
			if (paso==0) he_dado=1; enemigo=father.enemigo; end
			paso++;
			if (paso==1) flags-=4; son=sombra();
				play_snd (s_kura37,512,256);play_snd (s_kura37,212,256);
			end
			if (flags==1 or flags==5) x-=12; end
			if (flags==0 or flags==4) x+=12; end
			if (paso==5 or paso==9) graph++; end
			if (he_dado==1)
				get_real_point(1,&hit_x,&hit_y);
				golpe(hit_x,hit_y,10,7,525,4,0,15,0,father);
			else
				if (enemigo.paso==7 and he_dado==0)
					enemigo.inc_y=-12; enemigo.inc_x=0;
				end
			end
			if (paso==15 or paso==19) graph--; end
			if (paso==23) flags-=4; end
			if (paso==31) signal(son,s_kill); return; end
		end
		
		if (tipo==132)//orla shoryu kula
			y-=5;
			if (game_frame%2==0) graph++; end
			if (father.flags) x-=4; else x+=4; end
			if (graph==629) play_snd (s_kura3,512,256); end
			if (graph==629 or graph==631 or graph==633)
				if (game_frame%2==0)
					get_real_point(1,&hit_x,&hit_y);
					pegata (hit_x,hit_y,640,c_scroll,flags,100,z-1,133,file);
				end	
			end
			if (graph>644) graph=0; return; end
		end
		
		if (tipo==133)//chispa shoryu
			if (game_frame%2==0) graph++; end
			if (graph>644) graph=0; return; end
		end
		
		//iranai
		if (tipo==134) 
			paso++;
			if (paso%2==0) graph++; end
			if (graph>653 or father.intensidad>2 or
				father.estado<>_uatras_punch)
				graph=0; return;
			end
		end
		
		if (tipo==135)//konnano
			graph++;
			if (graph>647) graph=0; return; end
		end
		
		if (tipo==136)//hielo que rodea a kula en la posicion
			graph=pos_kula[paso++]+499; flags=father.flags+4;
			paso=father.paso; x=father.x;
			if (father.estado<>_normal)
				graph=0; father.magia=0; return;
			end
		end
		
		if (tipo==137)//putea al enemigo
			if (paso==0)
				enemigo=father.enemigo;
				enemigo.m8_step=rand(1,3);
				play_snd (s_ath2,512,256);
				priority=enemigo.priority-10;
			end
			if (game_state != ST_PLAYING)
			    return;
			end
			
			if (paso<720)
				if (enemigo.file==fich1) hit_x=65; else hit_x=255; end
				x=hit_x; graph=enemigo.m8_step+50;
				if (enemigo.electrocutado==0 or
					(enemigo.electrocutado==1 and intensidad<>0))
					intensidad++;
				end
				if (paso%2==0)
					estado=enemigo.graph;
					if (enemigo.m8_step==1 and enemigo.electrocutado<>1)
						blend_gfx (enemigo.file, estado, enemigo.luchador, 2);
					end
					if (enemigo.m8_step==2 and enemigo.electrocutado<>1)
						blend_gfx (enemigo.file, estado, enemigo.luchador, 4);
					end
					if (enemigo.m8_step==3 and enemigo.electrocutado<>1)
						blend_gfx (enemigo.file, estado, enemigo.luchador, 3);
					end
					enemigo.graph=estado;
				end	
				
				if (paso%2==1)
					blend_return (enemigo.file, estado, enemigo.luchador, enemigo.player_color);
				end
			else
				graph=0; enemigo.m8_step=0;
				if (paso==722) return; end
			end
			paso++;
		end
		
		if (tipo==138)//simbolo yingyang de akari
			paso++;
			if (size>0) size-=paso/2;
			else return; end
		end
		
		if (tipo==139)//projectil tetsuo
			paso++; enemigo=father.enemigo;
			if (paso==3)  graph=522; end
			if (paso==5)  graph=523; end
			if (paso==7)  graph=524; end
			if (paso==13) graph=525; end
			if (paso==19) graph=0;   end
			if (paso==39) return;    end
			if (paso==1)
				play_snd (s_boom,512,256);
				if (enemigo.magia and enemigo.luchador<>FIGHTER_KULA)
					enemigo.magia.vida--; blend_frame=1;
				end
				if (blend_frame==0 and ((enemigo.x<x and flags) or 
					(enemigo.x>x and !flags)))
					if (father.intensidad<2)
						if (enemigo.y<220 or (enemigo.estado>22 and
							enemigo.estado<30))
							golpe(enemigo.x,y,10,25,521,5,1,1,0,father);
						else
							golpe(enemigo.x,y,1,25,521,5,1,1,0,father);
						end
					else
						golpe(enemigo.x,y,-7,50,521,10,1,1,0,father);
					end
				end
				if (blend_frame==1) flags+=16; end
			end
		end
		
		if (tipo==140)//special bola del tetsuo
			graph=tetsu[paso++]; x=father.x; estado=-5;
			enemigo=father.enemigo; z=enemigo.z+1;
			if (paso==1) he_dado=paso; end
			if (paso==15) play_snd (s_tetsuo4,452,256);
				if (enemigo.y>200) tembleque(2,1); else tembleque(2,-1); end
			end
			if (paso==sizeof(tetsu)/DIV) return; end
			
			magia=collision(type hadoken);
			if (magia) magia.vida=0; end
			if (father.estado<>_special2) return; end
			father.paso=paso+3; 
			
		end
		
		if (tipo==141)//super bola del tetsuo
			graph=tetsp[paso++]; x=father.x; estado=-5;
			enemigo=father.enemigo; z=enemigo.z+1;
			if (paso==1) he_dado=paso; end
			if (paso==15 or paso==45 or paso==65) 
				play_snd (s_tetsuo4,452,256);
				if (enemigo.y>200) tembleque(2,1); else tembleque(2,-1); end
				if (paso>15)
					he_dado=1; ive_hit=0; intensidad=0;
					if (enemigo.estado==_recibir_toss)
						enemigo.vulnerable=1;
					end
				end
			end
			if (paso==sizeof(tetsp)/DIV) return; end
			magia=collision(type hadoken);
			if (magia) magia.vida=0; end
			if (father.estado<>_special2) return; end
			father.paso=paso+6; 
			
			if (enemigo.estado==_recibir_toss and
				enemigo.paso==6 and intensidad<2)
				enemigo.paso-=3; intensidad++;
			end
		end
		
		//brazo tetsuo
		if (tipo==142)
			graph=brazo[paso++];
			if (paso==sizeof(brazo)/DIV or
				(father.estado<>_special1 and father.estado>-1))
				return;
			end
			if (father.super_sp==1) size=150; end
			x=father.hit_x; y=father.hit_y;
			paso=father.paso-49;
			
			magia=collision(type hadoken);
			if (magia) magia.vida=0; end
			if (father.enemigo.estado==_recibir_toss and father.he_dado==0)
				father.enemigo.vulnerable=1;
			end
		end
		
		if (tipo==143)//fondo en especial del bracito de tetsuo
			graph++; x=scroll.x0+160; y=scroll.y0+120; 
			paso++;
			if (graph>539) graph=534; end 
			if (father.estado<>_special1 or paso>70) return; end
		end
		
		if (tipo==144)//sombra del marilin
			paso++;
			if (paso<11)  size+=10; end
			if (paso>22)  size-=10; end
			if (paso==34) return;  end
		end
		
		if (tipo==145)//ultimo. adorno del pow
			paso++;
			if (paso==5 or paso==9 or paso==12 or paso==15) graph++; end
			if (paso==18) return; end
		end
		
		//boton cambiar filtro
		if (tipo==146 or tipo==147 or tipo==148)
			if (tipo==146) graph=12; end
			if (tipo==147) graph=13; end
			if (tipo==148) graph=14; end
			
			if (tipo==146 and FILTER == FILTER_NORMAL2X)	graph = 0;	end
			if (tipo==147 and FILTER == FILTER_SCALE2X)		graph = 0;	end
			if (tipo==148 and FILTER == FILTER_SCANL2X)		graph = 0;	end
			
			if (mouse.graph<>0)
				if ((collision(type mouse)) and (mouse.left))
					graph=0;
					if (bloker==0)
						play_snd (s_select,512,256);
						if (tipo==146)	FILTER = FILTER_NORMAL2X;	end
						if (tipo==147)	FILTER = FILTER_SCALE2X;	end
						if (tipo==148)	FILTER = FILTER_SCANL2X;	end
						
						/* BENNU /*
						if (FILTER == FILTER_NORMAL2X) SCALE_MODE = SCALE_NORMAL2X; end
						if (FILTER == FILTER_SCALE2X)  SCALE_MODE = SCALE_SCALE2X; end
						if (FILTER == FILTER_HIGHQ2X)  SCALE_MODE = SCALE_HQ2X; end
						if (FILTER == FILTER_SCANL2X)  SCALE_MODE = SCALE_SCANLINE2X; end
						set_mode (SIZEX, SIZEY, 16, 0);
						
						/* BENNU_WII /*
						if (FILTER == FILTER_NORMAL2X) SCALE_MODE = SCALE_NORMAL2X; end
						if (FILTER == FILTER_SCALE2X)  SCALE_MODE = SCALE_SCALE2X; end
						if (FILTER == FILTER_HIGHQ2X)  SCALE_MODE = SCALE_HQ2X; end
						if (FILTER == FILTER_SCANL2X)  SCALE_MODE = SCALE_SCANLINE2X; end
						set_mode (SIZEX, SIZEY, 16, 0);
						
						/* GEMIX /*
						if (FILTER == FILTER_NORMAL2X) 
							set_filter_mode (filter_scale_normal2x, filter_scanline_noscanline); 
						end
						if (FILTER == FILTER_SCALE2X or FILTER == FILTER_HIGHQ2X) 
							set_filter_mode (filter_scale_scale2x, filter_scanline_noscanline); 
						end
						if (FILTER == FILTER_SCANL2X) 
							set_filter_mode (filter_scale_normal2x, filter_scanline_100percent); 
						end
						/**/
						bloker = 1;
					end
				else
					bloker = 0;
				end
			end
		end
		if (tipo==149 or tipo==150)
			if (tipo==149) graph=15; end
			if (tipo==150) graph=16; end
			
			if (tipo==149 and SCREEN_MODE == SCREEN_WINDOW)	graph = 0;	end
			if (tipo==150 and SCREEN_MODE == SCREEN_FULLSCREEN)	graph = 0;	end
			
			if (mouse.graph<>0)
				if ((collision(type mouse)) and (mouse.left))
					graph=0;
					if (bloker==0)
						play_snd (s_select,512,256);
						if (tipo==149)	SCREEN_MODE = SCREEN_WINDOW;	end
						if (tipo==150)	SCREEN_MODE = SCREEN_FULLSCREEN;	end
						
						/* BENNU /*
						if (SCREEN_MODE == SCREEN_WINDOW) full_screen=false; end
						if (SCREEN_MODE == SCREEN_FULLSCREEN) full_screen=true; end
						set_mode (SIZEX, SIZEY, 16, 0);
						
						/* BENNU_WII /*
						if (SCREEN_MODE == SCREEN_WINDOW) full_screen=false; end
						if (SCREEN_MODE == SCREEN_FULLSCREEN) full_screen=true; end
						set_mode (SIZEX, SIZEY, 16, 0);
						
						/* GEMIX /*
						if (SCREEN_MODE == SCREEN_WINDOW) 
							set_mode (SIZEX, SIZEY, color_deep, mode_window); 
						end
						if (SCREEN_MODE == SCREEN_FULLSCREEN) 
							set_mode (SIZEX, SIZEY, color_deep, mode_fullscreen); 
						end
						put_screen (father.file,900);
						/**/
						mouse.left = false;
						bloker = 1;
					end
				else
					bloker = 0;
				end
			end		
		end
		
		if (tipo==200) frame; return; end
		
        if (tipo==250)
			if (blanquear==1) return; end
			if (x==39)
				if (id_luchador1.estado==_ganar and
					estado==0 and id_luchador1.paso==2)
					id_luchador1.setwin=1;
				end
				if (estado==1)
					paso++;
					if (paso==1)  graph=37; end
					if (paso==10) graph=35; end
					if (paso==13) paso=0;   end
				end
				if (id_luchador1.estado==_ganar and
					estado==1 and id_luchador1.paso==1)
					id_luchador1.setwin=2;
				end
				if (estado==2)
					paso++;
					if (paso==1)  graph=39; end
					if (paso==10) graph=35; end
					if (paso==13) paso=0;   end
				end
				estado=id_luchador1.setwin;
			end
			if (x==281)
				if (id_luchador2.estado==_ganar and
					estado==0 and id_luchador2.paso==2)
					id_luchador2.setwin=1;
				end
				if (estado==1)
					paso++;
					if (paso==1)  graph=37; end
					if (paso==10) graph=35; end
					if (paso==13) paso=0;   end
				end
				if (id_luchador2.estado==_ganar and
					estado==1 and id_luchador2.paso==1)
					id_luchador2.setwin=2;
				end
				if (estado==2)
					paso++;
					if (paso==1)  graph=39; end
					if (paso==10) graph=35; end
					if (paso==13) paso=0;   end
				end
				estado=id_luchador2.setwin;
			end
		end
		frame;
	end
end

process combate();

private
	memoria;
	player_stg;
	obj_x;
	obj_y;
	
begin

	if (cronometro>0) 
		time=cronometro; 
		digit_0 = time/10;
		digit_1 = time%10;
	end
	
	estado=-1;
	camara_x=0;
	camara_y=0;
	camara_y2=0;
	priority=100;
	
	fichad = load_fpg("kof\cosas.fpg");
	fichtxt = load_fpg("kof\text.fpg");

	if ((luchador1==luchador2) or
   		(luchador1==3 and luchador2==8) or
   		(luchador1==8 and luchador2==3) or
   		(luchador1==0 and luchador2==5) or
   		(luchador1==5 and luchador2==0))
   		if (colorp1==2 and colorp2==2)
      		colorp2=0;
   		else
      		if (colorp1==colorp2) colorp2=2; end
   		end
	end
	
	// load sound
	if (luchador1 == FIGHTER_KYO or
		luchador2 == FIGHTER_KYO or
		luchador1 == FIGHTER_KYO94 or
		luchador2 == FIGHTER_KYO94)
		s_kyo1=load_snd("kof\snd\kyo1.wav",0);s_kyo2=load_snd("kof\snd\kyo2.wav",0);
		s_kyo3=load_snd("kof\snd\kyo3.wav",0);s_kyo4=load_snd("kof\snd\kyo4.wav",0);
		s_kyo5=load_snd("kof\snd\kyo5.wav",0);s_kyo6=load_snd("kof\snd\kyo6.wav",0);
		s_kyo7=load_snd("kof\snd\kyo7.wav",0);s_kyo8=load_snd("kof\snd\kyo8.wav",0);
		s_kyo9=load_snd("kof\snd\kyo9.wav",0);s_kyo10=load_snd("kof\snd\kyo10.wav",0);
		s_kyo11=load_snd("kof\snd\kyo11.wav",0);s_kyo12=load_snd("kof\snd\kyo12.wav",0);
		s_kyo13=load_snd("kof\snd\kyo13.wav",0);s_kyo14=load_snd("kof\snd\kyo14.wav",0);
		s_kyo15=load_snd("kof\snd\kyo15.wav",0);s_kyo16=load_snd("kof\snd\kyo16.wav",0);
		s_kyo17=load_snd("kof\snd\kyo17.wav",0);s_kyo18=load_snd("kof\snd\kyo18.wav",0);
		s_kyo19=load_snd("kof\snd\kyo19.wav",0);s_kyo20=load_snd("kof\snd\kyo20.wav",0);
		s_kyo21=load_snd("kof\snd\kyo21.wav",0);s_kyo22=load_snd("kof\snd\kyo22.wav",0);
		s_kyo23=load_snd("kof\snd\kyo23.wav",0);s_kyo24=load_snd("kof\snd\kyo24.wav",0);
		s_kyo25=load_snd("kof\snd\kyo25.wav",0);s_kyo26=load_snd("kof\snd\kyo26.wav",0);
		s_kyo27=load_snd("kof\snd\kyo27.wav",0);s_kyo28=load_snd("kof\snd\kyo28.wav",0);
		s_kyo29=load_snd("kof\snd\kyo29.wav",0);s_kyo30=load_snd("kof\snd\kyo30.wav",0);
		s_kyo31=load_snd("kof\snd\kyo31.wav",0);s_kyo32=load_snd("kof\snd\kyo32.wav",0);	
	end
	if (luchador1 == FIGHTER_ATHENA or
		luchador2 == FIGHTER_ATHENA)
		s_ath1=load_snd("kof\snd\ath1.wav",0);s_ath2=load_snd("kof\snd\ath2.wav",0);
		s_ath3=load_snd("kof\snd\ath3.wav",0);s_ath4=load_snd("kof\snd\ath4.wav",0);
		s_ath5=load_snd("kof\snd\ath5.wav",0);s_ath6=load_snd("kof\snd\ath6.wav",0);
		s_ath7=load_snd("kof\snd\ath7.wav",0);s_ath8=load_snd("kof\snd\ath8.wav",0);
		s_ath9=load_snd("kof\snd\ath9.wav",0);s_ath10=load_snd("kof\snd\ath10.wav",0);
		s_ath11=load_snd("kof\snd\ath11.wav",0);s_ath12=load_snd("kof\snd\ath12.wav",0);
		s_ath13=load_snd("kof\snd\ath13.wav",0);s_ath14=load_snd("kof\snd\ath14.wav",0);
		s_ath15=load_snd("kof\snd\ath15.wav",0);s_ath16=load_snd("kof\snd\ath16.wav",0);
		s_ath17=load_snd("kof\snd\ath17.wav",0);s_ath18=load_snd("kof\snd\ath18.wav",0);
		s_ath19=load_snd("kof\snd\ath19.wav",0);s_ath20=load_snd("kof\snd\ath20.wav",0);
		s_ath21=load_snd("kof\snd\ath21.wav",0);s_ath22=load_snd("kof\snd\ath22.wav",0);
		s_ath23=load_snd("kof\snd\ath23.wav",0);s_ath24=load_snd("kof\snd\ath24.wav",0);
		s_ath25=load_snd("kof\snd\ath25.wav",0);s_ath26=load_snd("kof\snd\ath26.wav",0);
		s_ath27=load_snd("kof\snd\ath27.wav",0);s_ath28=load_snd("kof\snd\ath28.wav",0);
		s_ath29=load_snd("kof\snd\ath29.wav",0);s_ath30=load_snd("kof\snd\ath30.wav",0);
		
	end
	if (luchador1 == FIGHTER_IORI or
		luchador2 == FIGHTER_IORI or
		luchador1 == FIGHTER_CRIMSON or
		luchador2 == FIGHTER_CRIMSON)
		s_iori1=load_snd("kof\snd\iori1.wav",0);s_iori2=load_snd("kof\snd\iori2.wav",0);
		s_iori3=load_snd("kof\snd\iori3.wav",0);s_iori4=load_snd("kof\snd\iori4.wav",0);
		s_iori5=load_snd("kof\snd\iori5.wav",0);s_iori6=load_snd("kof\snd\iori6.wav",0);
		s_iori7=load_snd("kof\snd\iori7.wav",0);s_iori8=load_snd("kof\snd\iori8.wav",0);
		s_iori9=load_snd("kof\snd\iori9.wav",0);s_iori10=load_snd("kof\snd\iori10.wav",0);
		s_iori11=load_snd("kof\snd\iori11.wav",0);s_iori12=load_snd("kof\snd\iori12.wav",0);
		s_iori13=load_snd("kof\snd\iori13.wav",0);s_iori14=load_snd("kof\snd\iori14.wav",0);
		s_iori15=load_snd("kof\snd\iori15.wav",0);s_iori16=load_snd("kof\snd\iori16.wav",0);
		s_iori17=load_snd("kof\snd\iori17.wav",0);s_iori18=load_snd("kof\snd\iori18.wav",0);
		s_iori19=load_snd("kof\snd\iori19.wav",0);s_iori20=load_snd("kof\snd\iori20.wav",0);
		s_iori21=load_snd("kof\snd\iori21.wav",0);s_iori22=load_snd("kof\snd\iori22.wav",0);
		s_iori23=load_snd("kof\snd\iori23.wav",0);s_iori24=load_snd("kof\snd\iori24.wav",0);
		s_iori25=load_snd("kof\snd\iori25.wav",0);s_iori26=load_snd("kof\snd\iori26.wav",0);
		s_iori27=load_snd("kof\snd\iori27.wav",0);s_iori28=load_snd("kof\snd\iori28.wav",0);
		s_iori29=load_snd("kof\snd\iori29.wav",0);s_iori30=load_snd("kof\snd\iori30.wav",0);
		s_iori31=load_snd("kof\snd\iori31.wav",0);s_iori32=load_snd("kof\snd\iori32.wav",0);
	end
	if (luchador1 == FIGHTER_TERRY or
		luchador2 == FIGHTER_TERRY or
		luchador1 == FIGHTER_TERRY94 or
		luchador2 == FIGHTER_TERRY94)
		s_terry1=load_snd("kof\snd\terry1.wav",0);s_terry2=load_snd("kof\snd\terry2.wav",0);
		s_terry3=load_snd("kof\snd\terry3.wav",0);s_terry4=load_snd("kof\snd\terry4.wav",0);
		s_terry5=load_snd("kof\snd\terry5.wav",0);s_terry6=load_snd("kof\snd\terry6.wav",0);
		s_terry7=load_snd("kof\snd\terry7.wav",0);s_terry8=load_snd("kof\snd\terry8.wav",0);
		s_terry9=load_snd("kof\snd\terry9.wav",0);s_terry10=load_snd("kof\snd\terry10.wav",0);
		s_terry11=load_snd("kof\snd\terry11.wav",0);s_terry12=load_snd("kof\snd\terry12.wav",0);
		s_terry13=load_snd("kof\snd\terry13.wav",0);s_terry14=load_snd("kof\snd\terry14.wav",0);
		s_terry15=load_snd("kof\snd\terry15.wav",0);s_terry16=load_snd("kof\snd\terry16.wav",0);
		s_terry17=load_snd("kof\snd\terry17.wav",0);s_terry18=load_snd("kof\snd\terry18.wav",0);
		s_terry19=load_snd("kof\snd\terry19.wav",0);s_terry20=load_snd("kof\snd\terry20.wav",0);
		s_terry21=load_snd("kof\snd\terry21.wav",0);s_terry22=load_snd("kof\snd\terry22.wav",0);
		s_terry23=load_snd("kof\snd\terry23.wav",0);s_terry24=load_snd("kof\snd\terry24.wav",0);
		s_terry25=load_snd("kof\snd\ath7.wav",0);
	end
	if (luchador1 == FIGHTER_KASUMI or
		luchador2 == FIGHTER_KASUMI)
		s_kasumi1=load_snd("kof\snd\kasumi1.wav",0);s_kasumi2=load_snd("kof\snd\kasumi2.wav",0);
		s_kasumi3=load_snd("kof\snd\kasumi3.wav",0);s_kasumi4=load_snd("kof\snd\kasumi4.wav",0);
		s_kasumi5=load_snd("kof\snd\kasumi5.wav",0);s_kasumi6=load_snd("kof\snd\kasumi6.wav",0);
		s_kasumi7=load_snd("kof\snd\kasumi7.wav",0);s_kasumi8=load_snd("kof\snd\kasumi8.wav",0);
		s_kasumi9=load_snd("kof\snd\kasumi9.wav",0);s_kasumi10=load_snd("kof\snd\kasumi10.wav",0);
		s_kasumi11=load_snd("kof\snd\kasumi11.wav",0);s_kasumi12=load_snd("kof\snd\kasumi12.wav",0);
		s_kasumi13=load_snd("kof\snd\kasumi13.wav",0);s_kasumi14=load_snd("kof\snd\kasumi14.wav",0);
		s_kasumi15=load_snd("kof\snd\kasumi15.wav",0);s_kasumi16=load_snd("kof\snd\kasumi16.wav",0);
		s_kasumi17=load_snd("kof\snd\kasumi17.wav",0);s_kasumi18=load_snd("kof\snd\kasumi18.wav",0);
		s_kasumi19=load_snd("kof\snd\kasumi19.wav",0);s_kasumi20=load_snd("kof\snd\kasumi20.wav",0);
		s_kasumi21=load_snd("kof\snd\kasumi21.wav",0);s_kasumi22=load_snd("kof\snd\kasumi22.wav",0);
		s_kasumi23=load_snd("kof\snd\kasumi23.wav",0);		
	end
	if (luchador1 == FIGHTER_TAKUMA or
		luchador2 == FIGHTER_TAKUMA)
		s_takuma1=load_snd("kof\snd\takuma1.wav",0);s_takuma2=load_snd("kof\snd\takuma2.wav",0);
		s_takuma3=load_snd("kof\snd\takuma3.wav",0);s_takuma4=load_snd("kof\snd\takuma4.wav",0);
		s_takuma5=load_snd("kof\snd\takuma5.wav",0);s_takuma6=load_snd("kof\snd\takuma6.wav",0);
		s_takuma7=load_snd("kof\snd\takuma7.wav",0);s_takuma8=load_snd("kof\snd\takuma8.wav",0);
		s_takuma9=load_snd("kof\snd\takuma9.wav",0);s_takuma10=load_snd("kof\snd\takuma10.wav",0);
		s_takuma11=load_snd("kof\snd\takuma11.wav",0);s_takuma12=load_snd("kof\snd\takuma12.wav",0);
		s_takuma13=load_snd("kof\snd\takuma13.wav",0);s_takuma14=load_snd("kof\snd\takuma14.wav",0);
		s_takuma15=load_snd("kof\snd\takuma15.wav",0);s_takuma16=load_snd("kof\snd\takuma16.wav",0);
		s_takuma17=load_snd("kof\snd\takuma17.wav",0);s_takuma18=load_snd("kof\snd\takuma18.wav",0);
		s_takuma19=load_snd("kof\snd\takuma19.wav",0);s_takuma20=load_snd("kof\snd\takuma20.wav",0);
		s_takuma21=load_snd("kof\snd\takuma21.wav",0);s_takuma22=load_snd("kof\snd\takuma22.wav",0);
		s_takuma23=load_snd("kof\snd\takuma23.wav",0);s_takuma24=load_snd("kof\snd\takuma24.wav",0);
	end
	if (luchador1 == FIGHTER_K or
		luchador2 == FIGHTER_K)
		s_k1=load_snd("kof\snd\k1.wav",0);s_k2=load_snd("kof\snd\k2.wav",0);
		s_k3=load_snd("kof\snd\k3.wav",0);s_k4=load_snd("kof\snd\k4.wav",0);
		s_k5=load_snd("kof\snd\k5.wav",0);s_k6=load_snd("kof\snd\k6.wav",0);
		s_k7=load_snd("kof\snd\k7.wav",0);s_k8=load_snd("kof\snd\k8.wav",0);
		s_k9=load_snd("kof\snd\k9.wav",0);s_k10=load_snd("kof\snd\k10.wav",0);
		s_k11=load_snd("kof\snd\k11.wav",0);s_k12=load_snd("kof\snd\k12.wav",0);
		s_k13=load_snd("kof\snd\k13.wav",0);s_k14=load_snd("kof\snd\k14.wav",0);
		s_k15=load_snd("kof\snd\k15.wav",0);s_k16=load_snd("kof\snd\k16.wav",0);
		s_k17=load_snd("kof\snd\k17.wav",0);s_k18=load_snd("kof\snd\k18.wav",0);
		s_k19=load_snd("kof\snd\k19.wav",0);s_k20=load_snd("kof\snd\k20.wav",0);
		s_k21=load_snd("kof\snd\k21.wav",0);s_k22=load_snd("kof\snd\k22.wav",0);
		s_k23=load_snd("kof\snd\k23.wav",0);
	end
	if (luchador1 == FIGHTER_KULA or
		luchador2 == FIGHTER_KULA)
		s_kura1=load_snd("kof\snd\kura1.wav",0);s_kura2=load_snd("kof\snd\kura2.wav",0);
		s_kura3=load_snd("kof\snd\kura3.wav",0);s_kura4=load_snd("kof\snd\kura4.wav",0);
		s_kura5=load_snd("kof\snd\kura5.wav",0);s_kura6=load_snd("kof\snd\kura6.wav",0);
		s_kura7=load_snd("kof\snd\kura7.wav",0);s_kura8=load_snd("kof\snd\kura8.wav",0);
		s_kura9=load_snd("kof\snd\kura9.wav",0);s_kura10=load_snd("kof\snd\kura10.wav",0);
		s_kura11=load_snd("kof\snd\kura11.wav",0);s_kura12=load_snd("kof\snd\kura12.wav",0);
		s_kura13=load_snd("kof\snd\kura13.wav",0);s_kura14=load_snd("kof\snd\kura14.wav",0);
		s_kura15=load_snd("kof\snd\kura15.wav",0);s_kura16=load_snd("kof\snd\kura16.wav",0);
		s_kura17=load_snd("kof\snd\kura17.wav",0);s_kura18=load_snd("kof\snd\kura18.wav",0);
		s_kura19=load_snd("kof\snd\kura19.wav",0);s_kura20=load_snd("kof\snd\kura20.wav",0);
		s_kura21=load_snd("kof\snd\kura21.wav",0);s_kura22=load_snd("kof\snd\kura22.wav",0);
		s_kura23=load_snd("kof\snd\kura23.wav",0);s_kura24=load_snd("kof\snd\kura24.wav",0);
		s_kura25=load_snd("kof\snd\kura25.wav",0);s_kura26=load_snd("kof\snd\kura26.wav",0);
		s_kura27=load_snd("kof\snd\kura27.wav",0);s_kura28=load_snd("kof\snd\kura28.wav",0);
		s_kura29=load_snd("kof\snd\kura29.wav",0);s_kura30=load_snd("kof\snd\kura30.wav",0);
		s_kura31=load_snd("kof\snd\kura31.wav",0);s_kura32=load_snd("kof\snd\kura32.wav",0);
		s_kura33=load_snd("kof\snd\kura33.wav",0);s_kura34=load_snd("kof\snd\kura34.wav",0);
		s_kura35=load_snd("kof\snd\kura35.wav",0);s_kura36=load_snd("kof\snd\kura36.wav",0);
		s_kura37=load_snd("kof\snd\kura37.wav",0);s_kura38=load_snd("kof\snd\kura38.wav",0);
		s_kura39=load_snd("kof\snd\kura39.wav",0);s_kura40=load_snd("kof\snd\kura40.wav",0);
	end
	if (luchador1 == FIGHTER_K9999 or
		luchador2 == FIGHTER_K9999)
		s_tetsuo1=load_snd("kof\snd\k9999-1.wav",0);
		s_tetsuo2=load_snd("kof\snd\k9999-2.wav",0);
		s_tetsuo3=load_snd("kof\snd\k9999-3.wav",0);
		s_tetsuo4=load_snd("kof\snd\k9999-4.wav",0);
		s_tetsuo5=load_snd("kof\snd\k9999-5.wav",0);
		s_tetsuo6=load_snd("kof\snd\k9999-6.wav",0);
		s_tetsuo7=load_snd("kof\snd\k9999-7.wav",0);
		s_tetsuo8=load_snd("kof\snd\k9999-8.wav",0);
		s_tetsuo9=load_snd("kof\snd\k9999-9.wav",0);
		s_tetsuo10=load_snd("kof\snd\k9999-10.wav",0);
		s_tetsuo11=load_snd("kof\snd\k9999-11.wav",0);
		s_tetsuo12=load_snd("kof\snd\k9999-12.wav",0);
		s_tetsuo13=load_snd("kof\snd\k9999-13.wav",0);
		s_tetsuo14=load_snd("kof\snd\k9999-14.wav",0);
		s_tetsuo15=load_snd("kof\snd\k9999-15.wav",0);
		s_tetsuo16=load_snd("kof\snd\k9999-16.wav",0);
		s_tetsuo17=load_snd("kof\snd\k9999-17.wav",0);
		s_tetsuo18=load_snd("kof\snd\k9999-18.wav",0);
		s_tetsuo19=load_snd("kof\snd\k9999-19.wav",0);
		s_tetsuo20=load_snd("kof\snd\k9999-20.wav",0);
		s_tetsuo21=load_snd("kof\snd\k9999-21.wav",0);
		s_tetsuo22=load_snd("kof\snd\k9999-22.wav",0);
		s_tetsuo23=load_snd("kof\snd\k9999-23.wav",0);
	end
	
	// load file
	switch(luchador1)
		case FIGHTER_KYO, FIGHTER_KYO94:
			fich1=load_fpg("kof\kyo.fpg");
			if (colorp1==1)
				from counter=1 to 461; convert_palette (fich1,counter,&red_kyo); end
				convert_palette (fich1,999,&red_kyo);
			end
			if (colorp1==2)
				from counter=1 to 461; convert_palette (fich1,counter,&green_kyo); end
				convert_palette (fich1,999,&green_kyo);
			end
			if (colorp1==3)
				from counter=1 to 461; convert_palette (fich1,counter,&blue_kyo); end
				convert_palette (fich1,999,&blue_kyo);
			end
		end
		case FIGHTER_ATHENA:
			fich1=load_fpg("kof\athena.fpg");
			if (colorp1==1)
				from counter=1 to 183; convert_palette (fich1,counter,&green_athena); end
				from counter=189 to 501; convert_palette (fich1,counter,&green_athena); end
				convert_palette (fich1,999,&green_athena);
			end
			if (colorp1==2)
				from counter=1 to 501; convert_palette (fich1,counter,&new_athena); end
				convert_palette (fich1,999,&new_athena);
			end
			if (colorp1==3)
				from counter=1 to 501; convert_palette (fich1,counter,&blue_athena); end
				convert_palette (fich1,999,&blue_athena);
			end
		end
		case FIGHTER_IORI:
			fich1=load_fpg("kof\iori.fpg");
			if (colorp1==0)
				from counter=1 to 998; convert_palette (fich1,counter,&normal_iori); end
			end
			if (colorp1==1)
				from counter=1 to 998; convert_palette (fich1,counter,&gold_iori); end
			end
			if (colorp1==2)
				from counter=1 to 998; convert_palette (fich1,counter,&blue_iori); end
			end
			if (colorp1==3)
				from counter=1 to 998; convert_palette (fich1,counter,&purple_iori); end
			end
		end
		case FIGHTER_TERRY, FIGHTER_TERRY94:
			fich1=load_fpg("kof\terry.fpg");
			if (colorp1==0)
				from counter=1 to 460;   convert_palette (fich1,counter,&normal_terry); end
				from counter=525 to 531; convert_palette (fich1,counter,&normal_terry); end
				convert_palette (fich1,999,&normal_terry);
			end
			if (colorp1==1)
				from counter=1 to 460;   convert_palette (fich1,counter,&rare_terry); end
				from counter=525 to 531; convert_palette (fich1,counter,&rare_terry); end
				convert_palette (fich1,999,&rare_terry);
			end
			if (colorp1==2)
				from counter=1 to 460;   convert_palette (fich1,counter,&final_terry); end
				from counter=525 to 531; convert_palette (fich1,counter,&final_terry); end
				convert_palette (fich1,999,&final_terry);
			end
			if (colorp1==3)
				from counter=1 to 460;   convert_palette (fich1,counter,&blue_terry); end
				from counter=525 to 531; convert_palette (fich1,counter,&blue_terry); end
				convert_palette (fich1,999,&blue_terry);
			end
		end
		case FIGHTER_CRIMSON:
			draw_alpha (255);		
			fich1=load_fpg("kof\iori.fpg");
			map_put_pixel(fich1,1,46,12,153);map_put_pixel(fich1,1,46,13,156);map_put_pixel(fich1,2,46,12,153);map_put_pixel(fich1,2,46,13,156);
			map_put_pixel(fich1,3,47,12,153);map_put_pixel(fich1,3,47,13,156);map_put_pixel(fich1,4,48,12,153);map_put_pixel(fich1,4,48,13,156);
			map_put_pixel(fich1,5,50,12,153);map_put_pixel(fich1,5,50,13,156);map_put_pixel(fich1,6,51,12,153);map_put_pixel(fich1,6,51,13,156);
			map_put_pixel(fich1,7,51,12,153);map_put_pixel(fich1,7,51,13,156);map_put_pixel(fich1,8,49,12,153);map_put_pixel(fich1,8,49,13,156);
			map_put_pixel(fich1,9,47,12,153);map_put_pixel(fich1,9,47,13,156);map_put_pixel(fich1,10,46,12,153);map_put_pixel(fich1,10,46,13,156);
			map_put_pixel(fich1,11,46,12,153);map_put_pixel(fich1,11,46,13,156);map_put_pixel(fich1,12,39,12,153);map_put_pixel(fich1,12,39,13,156);
			map_put_pixel(fich1,13,35,12,153);map_put_pixel(fich1,13,35,13,156);map_put_pixel(fich1,14,32,12,153);map_put_pixel(fich1,14,32,13,156);
			map_put_pixel(fich1,15,29,12,153);map_put_pixel(fich1,15,29,13,156);map_put_pixel(fich1,16,37,12,153);map_put_pixel(fich1,16,37,13,156);
			map_put_pixel(fich1,17,37,12,153);map_put_pixel(fich1,17,37,13,156);map_put_pixel(fich1,18,27,12,153);map_put_pixel(fich1,18,27,13,156);
			map_put_pixel(fich1,19,27,12,153);map_put_pixel(fich1,19,27,13,156);map_put_pixel(fich1,20,35,12,153);map_put_pixel(fich1,20,35,13,156);
			map_put_pixel(fich1,21,38,12,153);map_put_pixel(fich1,21,38,13,156);map_put_pixel(fich1,22,37,12,153);map_put_pixel(fich1,22,37,13,156);
			map_put_pixel(fich1,23,29,12,153);map_put_pixel(fich1,23,29,13,156);map_put_pixel(fich1,24,23,12,153);map_put_pixel(fich1,24,23,13,156);
			map_put_pixel(fich1,25,23,12,153);map_put_pixel(fich1,25,23,13,156);map_put_pixel(fich1,26,22,12,153);map_put_pixel(fich1,26,22,13,156);
			map_put_pixel(fich1,28,22,12,153);map_put_pixel(fich1,29,23,12,153);map_put_pixel(fich1,29,23,13,156);
			map_put_pixel(fich1,30,26,12,153);map_put_pixel(fich1,30,26,13,156);map_put_pixel(fich1,33,38,12,153);map_put_pixel(fich1,33,38,13,156);
			map_put_pixel(fich1,34,38,12,153);map_put_pixel(fich1,34,38,13,156);map_put_pixel(fich1,35,37,12,153);map_put_pixel(fich1,35,37,13,156);
			map_put_pixel(fich1,36,36,12,153);map_put_pixel(fich1,36,36,13,156);map_put_pixel(fich1,37,37,12,153);map_put_pixel(fich1,37,37,13,156);
			map_put_pixel(fich1,38,38,12,153);map_put_pixel(fich1,38,38,13,156);map_put_pixel(fich1,39,38,12,153);map_put_pixel(fich1,39,38,13,156);
			map_put_pixel(fich1,40,39,12,153);map_put_pixel(fich1,40,39,13,156);map_put_pixel(fich1,41,20,34,153);map_put_pixel(fich1,41,20,35,156);
			map_put_pixel(fich1,42,23,25,153);map_put_pixel(fich1,42,23,26,156);map_put_pixel(fich1,62,37,12,153);map_put_pixel(fich1,62,37,13,156);
			map_put_pixel(fich1,165,109,27,0);map_put_pixel(fich1,165,108,27,0);map_put_pixel(fich1,165,108,26,0);map_put_pixel(fich1,165,107,26,0);
			map_put_pixel(fich1,168,67,13,153);map_put_pixel(fich1,168,67,14,156);map_put_pixel(fich1,169,25,11,153);map_put_pixel(fich1,169,25,12,156);
			map_put_pixel(fich1,170,34,11,153);map_put_pixel(fich1,170,34,12,156);map_put_pixel(fich1,175,20,8,153);map_put_pixel(fich1,183,39,27,153);
			map_put_pixel(fich1,188,27,12,153);map_put_pixel(fich1,188,27,13,156);map_put_pixel(fich1,189,36,15,153);map_put_pixel(fich1,189,36,16,156);
			map_put_pixel(fich1,190,36,15,153);map_put_pixel(fich1,190,36,16,156);map_put_pixel(fich1,198,34,12,153);map_put_pixel(fich1,198,34,13,156);
			map_put_pixel(fich1,207,35,12,153);map_put_pixel(fich1,207,35,13,156);map_put_pixel(fich1,208,25,11,153);map_put_pixel(fich1,208,25,12,242);
			map_put_pixel(fich1,221,16,16,156);map_put_pixel(fich1,222,16,16,156);map_put_pixel(fich1,223,16,16,156);map_put_pixel(fich1,224,16,16,156);
			map_put_pixel(fich1,225,16,24,156);map_put_pixel(fich1,226,16,25,156);map_put_pixel(fich1,353,26,11,153);map_put_pixel(fich1,354,22,11,153);
			map_put_pixel(fich1,355,28,12,153);map_put_pixel(fich1,355,28,13,156);map_put_pixel(fich1,366,29,12,153);map_put_pixel(fich1,366,16,13,156);
			map_put_pixel(fich1,367,31,12,153);map_put_pixel(fich1,367,16,13,156);map_put_pixel(fich1,398,32,12,153);map_put_pixel(fich1,398,32,13,156);
			map_put_pixel(fich1,399,37,12,153);map_put_pixel(fich1,399,37,13,156);map_put_pixel(fich1,353,29,12,153);map_put_pixel(fich1,353,30,12,153);
			map_put_pixel(fich1,354,25,12,153);map_put_pixel(fich1,354,26,12,153);
			from counter=500 to 548; convert_palette (fich1,counter,&naranxlila); end
			from counter=563 to 584; convert_palette (fich1,counter,&naranxlila2); end
			
			if (colorp1==0)
				from counter=1 to 500; convert_palette (fich1,counter,&crimson_normal); end
				from counter=993 to 999; convert_palette (fich1,counter,&crimson_normal); end
			end
			if (colorp1==1)
				from counter=1 to 500; convert_palette (fich1,counter,&silver_crimsom); end
				from counter=993 to 999; convert_palette (fich1,counter,&silver_crimsom); end
			end
			if (colorp1==2)
				from counter=1 to 500; convert_palette (fich1,counter,&green_crimsom); end
				from counter=993 to 999; convert_palette (fich1,counter,&green_crimsom); end
			end
			if (colorp1==3)
				from counter=1 to 500; convert_palette (fich1,counter,&outlaw_crimsom); end
				from counter=993 to 999; convert_palette (fich1,counter,&outlaw_crimsom); end
			end
		end
		case FIGHTER_KASUMI:
			fich1=load_fpg("kof\kasumi.fpg");
			if (colorp1==0)
				from counter=1 to 500; convert_palette (fich1,counter,&normal_kas); end
				convert_palette (fich1,999,&normal_kas);
			end
			if (colorp1==1)
				from counter=1 to 500; convert_palette (fich1,counter,&masayo_kas); end
				convert_palette (fich1,999,&masayo_kas);
			end
			if (colorp1==2)
				from counter=1 to 500; convert_palette (fich1,counter,&magent_kas); end
				convert_palette (fich1,999,&magent_kas);
			end
			if (colorp1==3)
				from counter=1 to 500; convert_palette (fich1,counter,&sombra_kas); end
				convert_palette (fich1,999,&sombra_kas);
			end
		end
		case FIGHTER_TAKUMA:
			fich1=load_fpg("kof\takuma.fpg");
			if (colorp1==1)
				from counter=1 to 999; convert_palette (fich1,counter,&takuma_juanh); end
			end
			if (colorp1==2)
				from counter=1 to 999; convert_palette (fich1,counter,&takuma_azulon); end
			end
			if (colorp1==3)
				from counter=1 to 999; convert_palette (fich1,counter,&takuma_naranja); end
			end
		end
		case FIGHTER_K:
			fich1=load_fpg("kof\k'.fpg");
			if (colorp1==1)
				from counter=1 to 500; convert_palette (fich1,counter,&k_verd); end
				convert_palette (fich1,999,&k_verd);
			end
			if (colorp1==2)
				from counter=1 to 500; convert_palette (fich1,counter,&k_mage); end
				convert_palette (fich1,999,&k_mage);
			end
			if (colorp1==3)
				from counter=1 to 500; convert_palette (fich1,counter,&k_azul); end
				convert_palette (fich1,999,&k_azul);
			end
		end
		case FIGHTER_KULA:
			fich1=load_fpg("kof\kula.fpg");
			if (colorp1==1)
				from counter=1 to 499; convert_palette (fich1,counter,&kula_topa); end
				convert_palette (fich1,999,&kula_topa);
			end
			if (colorp1==2)
				from counter=1 to 499; convert_palette (fich1,counter,&kula_rubi); end
				convert_palette (fich1,999,&kula_rubi);
			end
			if (colorp1==3)
				from counter=1 to 499; convert_palette (fich1,counter,&kula_kuro); end
				convert_palette (fich1,999,&kula_kuro);
			end
		end
		case FIGHTER_K9999:
			fich1=load_fpg("kof\tesuo.fpg");
			if (colorp1==1)
				from counter=1 to 460; convert_palette (fich1,counter,&tetsuo_hort); end
				convert_palette (fich1,999,&tetsuo_hort);
			end
			if (colorp1==2)
				from counter=1 to 460; convert_palette (fich1,counter,&tetsuo_bars); end
				convert_palette (fich1,999,&tetsuo_bars);
			end
			if (colorp1==3)
				from counter=1 to 460; convert_palette (fich1,counter,&tetsuo_rojo); end
				convert_palette (fich1,999,&tetsuo_rojo);
			end
		end
	end
	
	switch(luchador2)
		case FIGHTER_KYO, FIGHTER_KYO94:
			fich2=load_fpg("kof\kyo.fpg");
			if (colorp2==1)
				from counter=1 to 461; convert_palette (fich2,counter,&red_kyo); end
				convert_palette (fich2,999,&red_kyo);
			end
			if (colorp2==2)
				from counter=1 to 461; convert_palette (fich2,counter,&green_kyo); end
				convert_palette (fich2,999,&green_kyo);
			end
			if (colorp2==3)
				from counter=1 to 461; convert_palette (fich2,counter,&blue_kyo); end
				convert_palette (fich2,999,&blue_kyo);
			end
		end
		case FIGHTER_ATHENA:
			fich2=load_fpg("kof\athena.fpg");
			if (colorp2==1)
				from counter=1 to 183; convert_palette (fich2,counter,&green_athena); end
				from counter=189 to 501; convert_palette (fich2,counter,&green_athena); end
				convert_palette (fich2,999,&green_athena);
			end
			if (colorp2==2)
				from counter=1 to 501; convert_palette (fich2,counter,&new_athena); end
				convert_palette (fich2,999,&new_athena);
			end
			if (colorp2==3)
				from counter=1 to 501; convert_palette (fich2,counter,&blue_athena); end
				convert_palette (fich2,999,&blue_athena);
			end
		end
		case FIGHTER_IORI:
			fich2=load_fpg("kof\iori.fpg");
			if (colorp2==0)
				from counter=1 to 998; convert_palette (fich2,counter,&normal_iori); end
			end
			if (colorp2==1)
				from counter=1 to 998; convert_palette (fich2,counter,&gold_iori); end
			end
			if (colorp2==2)
				from counter=1 to 998; convert_palette (fich2,counter,&blue_iori); end
			end
			if (colorp2==3)
				from counter=1 to 998; convert_palette (fich2,counter,&purple_iori); end
			end
		end
		case FIGHTER_TERRY, FIGHTER_TERRY94:
			fich2=load_fpg("kof\terry.fpg");
			if (colorp2==0)
				from counter=1 to 459;   convert_palette (fich2,counter,&normal_terry); end
				from counter=525 to 531; convert_palette (fich2,counter,&normal_terry); end
				convert_palette (fich2,999,&normal_terry);
			end
			if (colorp2==1)
				from counter=1 to 459;   convert_palette (fich2,counter,&rare_terry); end
				from counter=525 to 531; convert_palette (fich2,counter,&rare_terry); end
				convert_palette (fich2,999,&rare_terry);
			end
			if (colorp2==2)
				from counter=1 to 459;   convert_palette (fich2,counter,&final_terry); end
				from counter=525 to 531; convert_palette (fich2,counter,&final_terry); end
				convert_palette (fich2,999,&final_terry);
			end
			if (colorp2==3)
				from counter=1 to 459;   convert_palette (fich2,counter,&blue_terry); end
				from counter=525 to 531; convert_palette (fich2,counter,&blue_terry); end
				convert_palette (fich2,999,&blue_terry);
			end
		end
		case FIGHTER_CRIMSON:
			fich2=load_fpg("kof\iori.fpg");
			draw_alpha (255);
			map_put_pixel(fich2,1,46,12,153);map_put_pixel(fich2,1,46,13,156);map_put_pixel(fich2,2,46,12,153);map_put_pixel(fich2,2,46,13,156);
			map_put_pixel(fich2,3,47,12,153);map_put_pixel(fich2,3,47,13,156);map_put_pixel(fich2,4,48,12,153);map_put_pixel(fich2,4,48,13,156);
			map_put_pixel(fich2,5,50,12,153);map_put_pixel(fich2,5,50,13,156);map_put_pixel(fich2,6,51,12,153);map_put_pixel(fich2,6,51,13,156);
			map_put_pixel(fich2,7,51,12,153);map_put_pixel(fich2,7,51,13,156);map_put_pixel(fich2,8,49,12,153);map_put_pixel(fich2,8,49,13,156);
			map_put_pixel(fich2,9,47,12,153);map_put_pixel(fich2,9,47,13,156);map_put_pixel(fich2,10,46,12,153);map_put_pixel(fich2,10,46,13,156);
			map_put_pixel(fich2,11,46,12,153);map_put_pixel(fich2,11,46,13,156);map_put_pixel(fich2,12,39,12,153);map_put_pixel(fich2,12,39,13,156);
			map_put_pixel(fich2,13,35,12,153);map_put_pixel(fich2,13,35,13,156);map_put_pixel(fich2,14,32,12,153);map_put_pixel(fich2,14,32,13,156);
			map_put_pixel(fich2,15,29,12,153);map_put_pixel(fich2,15,29,13,156);map_put_pixel(fich2,16,37,12,153);map_put_pixel(fich2,16,37,13,156);
			map_put_pixel(fich2,17,37,12,153);map_put_pixel(fich2,17,37,13,156);map_put_pixel(fich2,18,27,12,153);map_put_pixel(fich2,18,27,13,156);
			map_put_pixel(fich2,19,27,12,153);map_put_pixel(fich2,19,27,13,156);map_put_pixel(fich2,20,35,12,153);map_put_pixel(fich2,20,35,13,156);
			map_put_pixel(fich2,21,38,12,153);map_put_pixel(fich2,21,38,13,156);map_put_pixel(fich2,22,37,12,153);map_put_pixel(fich2,22,37,13,156);
			map_put_pixel(fich2,23,29,12,153);map_put_pixel(fich2,23,29,13,156);map_put_pixel(fich2,24,23,12,153);map_put_pixel(fich2,24,23,13,156);
			map_put_pixel(fich2,25,23,12,153);map_put_pixel(fich2,25,23,13,156);map_put_pixel(fich2,26,22,12,153);map_put_pixel(fich2,26,22,13,156);
			map_put_pixel(fich2,28,22,12,153);map_put_pixel(fich2,29,23,12,153);map_put_pixel(fich2,29,23,13,156);
			map_put_pixel(fich2,30,26,12,153);map_put_pixel(fich2,30,26,13,156);map_put_pixel(fich2,33,38,12,153);map_put_pixel(fich2,33,38,13,156);
			map_put_pixel(fich2,34,38,12,153);map_put_pixel(fich2,34,38,13,156);map_put_pixel(fich2,35,37,12,153);map_put_pixel(fich2,35,37,13,156);
			map_put_pixel(fich2,36,36,12,153);map_put_pixel(fich2,36,36,13,156);map_put_pixel(fich2,37,37,12,153);map_put_pixel(fich2,37,37,13,156);
			map_put_pixel(fich2,38,38,12,153);map_put_pixel(fich2,38,38,13,156);map_put_pixel(fich2,39,38,12,153);map_put_pixel(fich2,39,38,13,156);
			map_put_pixel(fich2,40,39,12,153);map_put_pixel(fich2,40,39,13,156);map_put_pixel(fich2,41,20,34,153);map_put_pixel(fich2,41,20,35,156);
			map_put_pixel(fich2,42,23,25,153);map_put_pixel(fich2,42,23,26,156);map_put_pixel(fich2,62,37,12,153);map_put_pixel(fich2,62,37,13,156);
			map_put_pixel(fich2,165,109,27,0);map_put_pixel(fich2,165,108,27,0);map_put_pixel(fich2,165,108,26,0);map_put_pixel(fich2,165,107,26,0);
			map_put_pixel(fich2,168,67,13,153);map_put_pixel(fich2,168,67,14,156);map_put_pixel(fich2,169,25,11,153);map_put_pixel(fich2,169,25,12,156);
			map_put_pixel(fich2,170,34,11,153);map_put_pixel(fich2,170,34,12,156);map_put_pixel(fich2,175,20,8,153);map_put_pixel(fich2,183,39,27,153);
			map_put_pixel(fich2,188,27,12,153);map_put_pixel(fich2,188,27,13,156);map_put_pixel(fich2,189,36,15,153);map_put_pixel(fich2,189,36,16,156);
			map_put_pixel(fich2,190,36,15,153);map_put_pixel(fich2,190,36,16,156);map_put_pixel(fich2,198,34,12,153);map_put_pixel(fich2,198,34,13,156);
			map_put_pixel(fich2,207,35,12,153);map_put_pixel(fich2,207,35,13,156);map_put_pixel(fich2,208,25,11,153);map_put_pixel(fich2,208,25,12,242);
			map_put_pixel(fich2,221,16,16,156);map_put_pixel(fich2,222,16,16,156);map_put_pixel(fich2,223,16,16,156);map_put_pixel(fich2,224,16,16,156);
			map_put_pixel(fich2,225,16,24,156);map_put_pixel(fich2,226,16,25,156);map_put_pixel(fich2,353,26,11,153);map_put_pixel(fich2,354,22,11,153);
			map_put_pixel(fich2,355,28,12,153);map_put_pixel(fich2,355,28,13,156);map_put_pixel(fich2,366,29,12,153);map_put_pixel(fich2,366,16,13,156);
			map_put_pixel(fich2,367,31,12,156);map_put_pixel(fich2,367,16,13,156);map_put_pixel(fich2,398,32,12,153);map_put_pixel(fich2,398,32,13,156);
			map_put_pixel(fich2,399,37,12,153);map_put_pixel(fich2,399,37,13,156);map_put_pixel(fich2,353,29,12,153);map_put_pixel(fich2,353,30,12,153);
			map_put_pixel(fich2,354,25,12,153);map_put_pixel(fich2,354,26,12,153);
			from counter=500 to 548; convert_palette (fich2,counter,&naranxlila); end
			from counter=563 to 584; convert_palette (fich2,counter,&naranxlila2); end
			if (colorp2==0)
				from counter=1 to 500; convert_palette (fich2,counter,&crimson_normal); end
				from counter=993 to 999; convert_palette (fich2,counter,&crimson_normal); end
			end
			if (colorp2==1)
				from counter=1 to 500; convert_palette (fich2,counter,&silver_crimsom); end
				from counter=993 to 999; convert_palette (fich2,counter,&silver_crimsom); end
			end
			if (colorp2==2)
				from counter=1 to 500; convert_palette (fich2,counter,&green_crimsom); end
				from counter=993 to 999; convert_palette (fich2,counter,&green_crimsom); end
			end
			if (colorp2==3)
				from counter=1 to 500; convert_palette (fich2,counter,&outlaw_crimsom); end
				from counter=993 to 999; convert_palette (fich2,counter,&outlaw_crimsom); end
			end
		end
		case FIGHTER_KASUMI:
			fich2=load_fpg("kof\kasumi.fpg");
			if (colorp2==0)
				from counter=1 to 500; convert_palette (fich2,counter,&normal_kas); end
				convert_palette (fich2,999,&normal_kas);
			end
			if (colorp2==1)
				from counter=1 to 500; convert_palette (fich2,counter,&masayo_kas); end
				convert_palette (fich2,999,&masayo_kas);
			end
			if (colorp2==2)
				from counter=1 to 500; convert_palette (fich2,counter,&magent_kas); end
				convert_palette (fich2,999,&magent_kas);
			end
			if (colorp2==3)
				from counter=1 to 500; convert_palette (fich2,counter,&sombra_kas); end
				convert_palette (fich2,999,&sombra_kas);
			end
		end
		case FIGHTER_TAKUMA:
			fich2=load_fpg("kof\takuma.fpg");
			if (colorp2==1)
				from counter=1 to 999; convert_palette (fich2,counter,&takuma_juanh); end
			end
			if (colorp2==2)
				from counter=1 to 999; convert_palette (fich2,counter,&takuma_azulon); end
			end
			if (colorp2==3)
				from counter=1 to 999; convert_palette (fich2,counter,&takuma_naranja); end
			end
		end
		case FIGHTER_K:
			fich2=load_fpg("kof\k'.fpg");
			if (colorp2==1)
				from counter=1 to 500; convert_palette (fich2,counter,&k_verd); end
				convert_palette (fich2,999,&k_verd);
			end
			if (colorp2==2)
				from counter=1 to 500; convert_palette (fich2,counter,&k_mage); end
				convert_palette (fich2,999,&k_mage);
			end
			if (colorp2==3)
				from counter=1 to 500; convert_palette (fich2,counter,&k_azul); end
				convert_palette (fich2,999,&k_azul);
			end
		end
		case FIGHTER_KULA:
			fich2=load_fpg("kof\kula.fpg");
			if (colorp2==1)
				from counter=1 to 499; convert_palette (fich2,counter,&kula_topa); end
				convert_palette (fich2,999,&kula_topa);
			end
			if (colorp2==2)
				from counter=1 to 499; convert_palette (fich2,counter,&kula_rubi); end
				convert_palette (fich2,999,&kula_rubi);
			end
			if (colorp2==3)
				from counter=1 to 499; convert_palette (fich2,counter,&kula_kuro); end
				convert_palette (fich2,999,&kula_kuro);
			end
		end
		case FIGHTER_K9999:
			fich2=load_fpg("kof\tesuo.fpg");
			if (colorp2==1)
				from counter=1 to 460; convert_palette (fich2,counter,&tetsuo_hort); end
				convert_palette (fich2,999,&tetsuo_hort);
			end
			if (colorp2==2)
				from counter=1 to 460; convert_palette (fich2,counter,&tetsuo_bars); end
				convert_palette (fich2,999,&tetsuo_bars);
			end
			if (colorp2==3)
				from counter=1 to 460; convert_palette (fich2,counter,&tetsuo_rojo); end
				convert_palette (fich2,999,&tetsuo_rojo);
			end
		end
	end
	
	///carga los strikers
	if (luchador1==FIGHTER_KYO or luchador1==FIGHTER_KYO94)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\kazuki.fpg");
				from counter=1 to 39;
					convert_palette (fichstr1,counter,&kazuki1);
				end
				s_kazuki1=load_snd("kof\snd\kazuki1.wav",0);
				s_kazuki2=load_snd("kof\snd\kazuki2.wav",0);
				s_kazuki3=load_snd("kof\snd\kazuki3.wav",0);
				s_kazuki4=load_snd("kof\snd\kazuki4.wav",0);
			end
			case 1:
				fichstr1=load_fpg("kof\ryu.fpg");
				s_ryu1=load_snd("kof\snd\ryu1.wav",0);
				s_ryu2=load_snd("kof\snd\ryu2.wav",0);
				s_ryu3=load_snd("kof\snd\ryu3.wav",0);
			end
			case 2:
				fichstr1=load_fpg("kof\benimaru.fpg");
				s_beni1=load_snd("kof\snd\beni1.wav",0);
				s_beni2=load_snd("kof\snd\beni2.wav",0);
			end
			case 3:
				fichstr1=load_fpg("kof\moe.fpg");
			end
		end
	end
	
	if (luchador1==FIGHTER_ATHENA)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\akari.fpg");
				s_akari1=load_snd("kof\snd\akari1.wav",0);
				s_akari2=load_snd("kof\snd\akari2.wav",0);
			end
			case 1:
				fichstr1=load_fpg("kof\jin.fpg");
				s_jin1=load_snd("kof\snd\jin1.wav",0);
				s_jin2=load_snd("kof\snd\jin2.wav",0);
			end
			case 2:
				fichstr1=load_fpg("kof\hotaru.fpg");
				s_hotaru1=load_snd("kof\snd\hota1.wav",0);
				s_hotaru2=load_snd("kof\snd\hota2.wav",0);
				s_hotaru3=load_snd("kof\snd\hota3.wav",0);
			end
			case 3:
				fichstr1=load_fpg("kof\moe.fpg");
			end
		end
	end
	
	if (luchador1==FIGHTER_IORI)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\genjuro.fpg");
				s_gen1=load_snd("kof\snd\gen1.wav",0);
				s_gen2=load_snd("kof\snd\gen2.wav",0);
			end
			case 1:
				fichstr1=load_fpg("kof\blanka.fpg");
				s_blanka1=load_snd("kof\snd\blanka1.wav",0);
			end
			case 2:
				fichstr1=load_fpg("kof\eiji.fpg");
				s_eiji1=load_snd("kof\snd\eiji1.wav",0);
				s_eiji2=load_snd("kof\snd\eiji2.wav",0);
			end
			case 3:
				fichstr1=load_fpg("kof\indi.fpg");
				s_indi1=load_snd("kof\snd\indi1.wav",0);
				s_indi2=load_snd("kof\snd\indi2.wav",0);
				s_indi4=load_snd("kof\snd\indi4.wav",0);
				s_indi5=load_snd("kof\snd\indi5.wav",0);
			end
		end
	end
	
	if (luchador1==FIGHTER_TERRY or luchador1==FIGHTER_TERRY94)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\galdford.fpg");
				s_galford1=load_snd("kof\snd\galf1.wav",0);
				s_galford2=load_snd("kof\snd\galf2.wav",0);
				s_galford3=load_snd("kof\snd\galf3.wav",0);
			end
			case 1:
				fichstr1=load_fpg("kof\gulle.fpg");
			end
			case 2:
				fichstr1=load_fpg("kof\joe.fpg");
				s_joe1=load_snd("kof\snd\joe1.wav",0);
				s_joe2=load_snd("kof\snd\joe2.wav",0);
				s_joe3=load_snd("kof\snd\joe3.wav",0);
			end
		end
	end
	if (luchador1==FIGHTER_CRIMSON)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\sogetsu.fpg");
			end
			case 1:
				fichstr1=load_fpg("kof\kaede.fpg");
					from counter=1 to 17;
						convert_palette (fichstr1,counter,&kaede1);
					end
					s_kaede1=load_snd("kof\snd\kaede1.wav",0);
					s_kaede2=load_snd("kof\snd\kaede2.wav",0);
					s_kaede3=load_snd("kof\snd\kaede3.wav",0);
					s_kaede4=load_snd("kof\snd\kaede4.wav",0);
				end
			case 2:
				fichstr1=load_fpg("kof\hien.fpg");
			end
		end
	end
	if (luchador1==FIGHTER_KASUMI)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\nakoruru.fpg");
				s_nakoruru1=load_snd("kof\snd\nakorr1.wav",0);
				s_nakoruru2=load_snd("kof\snd\nakorr2.wav",0);
				s_nakoruru3=load_snd("kof\snd\nakorr3.wav",0);
			end
			case 1:
				fichstr1=load_fpg("kof\ryoko.fpg");
				s_ryoko1=load_snd("kof\snd\ryoko1.wav",0);
				s_ryoko2=load_snd("kof\snd\ryoko2.wav",0);
			end
			case 2:
				fichstr1=load_fpg("kof\xianfei.fpg");
				s_xianfei1=load_snd("kof\snd\xianfei1.wav",0);
				s_xianfei2=load_snd("kof\snd\xianfei2.wav",0);
			end
		end
	end
	if (luchador1==FIGHTER_TAKUMA)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\jubei.fpg");
				s_jubei1=load_snd("kof\snd\jubei1.wav",0);
				s_jubei2=load_snd("kof\snd\jubei2.wav",0);
				s_jubei3=load_snd("kof\snd\jubei3.wav",0);
			end
			case 1:
				fichstr1=load_fpg("kof\tung.fpg");
				s_tung1=load_snd("kof\snd\tung1.wav",0);
				s_tung2=load_snd("kof\snd\tung2.wav",0);
			end
			case 2:
				fichstr1=load_fpg("kof\ryo.fpg");
				s_ryo1=load_snd("kof\snd\ryo1.wav",0);
				s_ryo2=load_snd("kof\snd\ryo2.wav",0);
			end
		end
	end
	if (luchador1==FIGHTER_K)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\setsuna.fpg");
				s_setsuna1=load_snd("kof\snd\setsuna1.wav",0);
				s_setsuna2=load_snd("kof\snd\setsuna2.wav",0);
				s_setsuna3=load_snd("kof\snd\setsuna3.wav",0);
			end
			case 1:
				fichstr1=load_fpg("kof\hanzo.fpg");
				s_hanzo1=load_snd("kof\snd\hanzo1.wav",0);
				s_hanzo2=load_snd("kof\snd\hanzo2.wav",0);
				s_hanzo3=load_snd("kof\snd\hanzo3.wav",0);
				s_hanzo4=load_snd("kof\snd\hanzo4.wav",0);
			end
			case 2:
				fichstr1=load_fpg("kof\maxima.fpg");
				s_max1=load_snd("kof\snd\maxima1.wav",0);
				s_max2=load_snd("kof\snd\maxima2.wav",0);
			end
		end
	end
	if (luchador1==FIGHTER_KULA)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\rimururu.fpg");
			end
			case 1:
				fichstr1=load_fpg("kof\yuki.fpg");
				s_yuki1=load_snd("kof\snd\yuki1.wav",0);
				s_yuki2=load_snd("kof\snd\yuki2.wav",0);
				s_yuki3=load_snd("kof\snd\yuki3.wav",0);
			end
			case 2:
				fichstr1=load_fpg("kof\robot.fpg");
			end
		end
	end
	if (luchador1==FIGHTER_K9999)
		switch(striker1);
			case 0:
				fichstr1=load_fpg("kof\tetsuo.fpg");
			end
			case 1:
				fichstr1=load_fpg("kof\krisalid.fpg");
				s_krisad1=load_snd("kof\snd\kris1.wav",0);
				s_krisad2=load_snd("kof\snd\kris2.wav",0);
			end
			case 2:
				fichstr1=load_fpg("kof\basara.fpg");
			end
			case 3:
				fichstr1=load_fpg("kof\indi.fpg");
				s_indi1=load_snd("kof\snd\indi1.wav",0);
				s_indi2=load_snd("kof\snd\indi2.wav",0);
				s_indi4=load_snd("kof\snd\indi4.wav",0);
				s_indi5=load_snd("kof\snd\indi5.wav",0);
			end
		end
	end
	
	if (luchador2==FIGHTER_KYO or 
		luchador2==FIGHTER_KYO94)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\kazuki.fpg");
				if ((luchador1==0 or luchador1==5) and striker1==striker2)
					from counter=6 to 9;
						convert_palette (fichstr2,counter,&kazuki2);
					end
					from counter=14 to 39;
						convert_palette (fichstr2,counter,&kazuki2);
					end
				else
					s_kazuki1=load_snd("kof\snd\kazuki1.wav",0);
					s_kazuki2=load_snd("kof\snd\kazuki2.wav",0);
					s_kazuki3=load_snd("kof\snd\kazuki3.wav",0);
					s_kazuki4=load_snd("kof\snd\kazuki4.wav",0);
					from counter=1 to 39;
						convert_palette (fichstr2,counter,&kazuki1);
					end
				end
			end
			case 1:
				fichstr2=load_fpg("kof\ryu.fpg");
				if ((luchador1==0 or luchador1==5) and striker1==striker2)
					from counter=1 to 39;
						convert_palette (fichstr2,counter,&ryu);
					end
				else
					s_ryu1=load_snd("kof\snd\ryu1.wav",0);
					s_ryu2=load_snd("kof\snd\ryu2.wav",0);
					s_ryu3=load_snd("kof\snd\ryu3.wav",0);
				end
			end
			case 2:
				fichstr2=load_fpg("kof\benimaru.fpg");
				if ((luchador1==0 or luchador1==5) and striker1==striker2)
					from counter=1 to 8;
						convert_palette (fichstr2,counter,&benimaru);
					end
				else
					s_beni1=load_snd("kof\snd\beni1.wav",0);
					s_beni2=load_snd("kof\snd\beni2.wav",0);
				end
			end
			case 3:
				fichstr2=load_fpg("kof\moe.fpg");
				if ((luchador1==0 or luchador1==1 or luchador1==5) and
					striker1==striker2)
					//from counter=1 to 18;
						//convert_palette (fichstr2,counter,&benimaru);
					//end
				end
			end
		end
	end
	
	if (luchador2==FIGHTER_ATHENA)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\akari.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 45;
						convert_palette (fichstr2,counter,&akari);
					end
				else
					s_akari1=load_snd("kof\snd\akari1.wav",0);
					s_akari2=load_snd("kof\snd\akari2.wav",0);
				end
			end
			case 1:
				fichstr2=load_fpg("kof\jin.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 6;
						convert_palette (fichstr2,counter,&ryu);
					end
				else
					s_jin1=load_snd("kof\snd\jin1.wav",0);
					s_jin2=load_snd("kof\snd\jin2.wav",0);
				end
			end
			case 2:
				fichstr2=load_fpg("kof\hotaru.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 110;
						convert_palette (fichstr2,counter,&hotaru);
					end
				else
					s_hotaru1=load_snd("kof\snd\hota1.wav",0);
					s_hotaru2=load_snd("kof\snd\hota2.wav",0);
					s_hotaru3=load_snd("kof\snd\hota3.wav",0);
				end
			end
			case 3:
				fichstr2=load_fpg("kof\moe.fpg");
				if ((luchador1==0 or luchador1==1 or luchador1==5) and
					striker1==striker2)
					from counter=1 to 18;
						convert_palette (fichstr2,counter,&ryu);
					end
				end
			end
		end
	end
	if (luchador2==FIGHTER_IORI)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\genjuro.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 200;
						convert_palette (fichstr2,counter,&hotaru);
					end
				else
					s_gen1=load_snd("kof\snd\gen1.wav",0);
					s_gen2=load_snd("kof\snd\gen2.wav",0);
				end
			end
			case 1:
				fichstr2=load_fpg("kof\blanka.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 13;
						convert_palette (fichstr2,counter,&hotaru);
					end
				else
					s_blanka1=load_snd("kof\snd\blanka1.wav",0);
				end
			end
			case 2:
				fichstr2=load_fpg("kof\eiji.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 200;
						convert_palette (fichstr2,counter,&eiji);
					end
				else
					s_eiji1=load_snd("kof\snd\eiji1.wav",0);
					s_eiji2=load_snd("kof\snd\eiji2.wav",0);
				end
			end
			case 3:
				fichstr2=load_fpg("kof\indi.fpg");
				if ((luchador1==2 or luchador1==11) and striker1==striker2)
					from counter=1 to 38;
						convert_palette (fichstr2,counter,&joe);
					end
				else
					s_indi1=load_snd("kof\snd\indi1.wav",0);
					s_indi2=load_snd("kof\snd\indi2.wav",0);
					s_indi4=load_snd("kof\snd\indi4.wav",0);
					s_indi5=load_snd("kof\snd\indi5.wav",0);
				end
			end
		end
	end
	if (luchador2==FIGHTER_TERRY or 
		luchador2==FIGHTER_TERRY94)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\galdford.fpg");
				if ((luchador1==3 or luchador1==8) and striker1==striker2)
					from counter=1 to 19;
						convert_palette (fichstr2,counter,&guile);
					end
				else
					s_galford1=load_snd("kof\snd\galf1.wav",0);
					s_galford2=load_snd("kof\snd\galf2.wav",0);
					s_galford3=load_snd("kof\snd\galf3.wav",0);
				end
			end
			case 1:
				fichstr2=load_fpg("kof\gulle.fpg");
				if ((luchador1==3 or luchador1==8) and striker1==striker2)
					from counter=1 to 19;
						convert_palette (fichstr2,counter,&guile);
					end
				end
			end
			case 2:
				fichstr2=load_fpg("kof\joe.fpg");
				if ((luchador1==3 or luchador1==8) and striker1==striker2)
					from counter=1 to 26;
						convert_palette (fichstr2,counter,&joe);
					end
					from counter=100 to 125;
						convert_palette (fichstr2,counter,&joe);
					end
				else
					s_joe1=load_snd("kof\snd\joe1.wav",0);
					s_joe2=load_snd("kof\snd\joe2.wav",0);
					s_joe3=load_snd("kof\snd\joe3.wav",0);
				end
			end
		end
	end
	
	if (luchador2==FIGHTER_CRIMSON)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\sogetsu.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 14;
						convert_palette (fichstr2,counter,&sogetsu_kaz);
					end
					from counter=20 to 22;
						convert_palette (fichstr2,counter,&sogetsu_kaz);
					end
				end
			end
			case 1:
				fichstr2=load_fpg("kof\kaede.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 17;
						convert_palette (fichstr2,counter,&kaede2);
					end
				else
					from counter=1 to 17;
						convert_palette (fichstr2,counter,&kaede1);
					end
					s_kaede1=load_snd("kof\snd\kaede1.wav",0);
					s_kaede2=load_snd("kof\snd\kaede2.wav",0);
					s_kaede3=load_snd("kof\snd\kaede3.wav",0);
					s_kaede4=load_snd("kof\snd\kaede4.wav",0);
				end
			end
			case 2:
				fichstr2=load_fpg("kof\hien.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 9;
						convert_palette (fichstr2,counter,&green_kyo);
					end
				end
			end
		end
	end
	if (luchador2==FIGHTER_KASUMI)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\nakoruru.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 122;
						convert_palette (fichstr2,counter,&nakoruru);
					end
				else
					s_nakoruru1=load_snd("kof\snd\nakorr1.wav",0);
					s_nakoruru2=load_snd("kof\snd\nakorr2.wav",0);
					s_nakoruru3=load_snd("kof\snd\nakorr3.wav",0);
				end
			end
			case 1:
				fichstr2=load_fpg("kof\ryoko.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 27;
						convert_palette (fichstr2,counter,&ryoko);
					end
				else
					s_ryoko1=load_snd("kof\snd\ryoko1.wav",0);
					s_ryoko2=load_snd("kof\snd\ryoko2.wav",0);
				end
			end
			case 2:
				fichstr2=load_fpg("kof\xianfei.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 14;
						convert_palette (fichstr2,counter,&xiang);
					end
				else
					s_xianfei1=load_snd("kof\snd\xianfei1.wav",0);
					s_xianfei2=load_snd("kof\snd\xianfei2.wav",0);
				end
			end
		end
	end
	if (luchador2==FIGHTER_TAKUMA)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\jubei.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 12;
						convert_palette (fichstr2,counter,&jubei);
					end
				else
					s_jubei1=load_snd("kof\snd\jubei1.wav",0);
					s_jubei2=load_snd("kof\snd\jubei2.wav",0);
					s_jubei3=load_snd("kof\snd\jubei3.wav",0);
				end
			end
			case 1:
				fichstr2=load_fpg("kof\tung.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 13;
						convert_palette (fichstr2,counter,&ryoko);
					end
				else
					s_tung1=load_snd("kof\snd\tung1.wav",0);
					s_tung2=load_snd("kof\snd\tung2.wav",0);
				end
			end
			case 2:
				fichstr2=load_fpg("kof\ryo.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 12;
						convert_palette (fichstr2,counter,&ryo);
					end
				else
					s_ryo1=load_snd("kof\snd\ryo1.wav",0);
					s_ryo2=load_snd("kof\snd\ryo2.wav",0);
				end
			end
		end
	end
	if (luchador2==FIGHTER_K)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\setsuna.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 27;
						convert_palette (fichstr2,counter,&jubei);
					end
				else
					s_setsuna1=load_snd("kof\snd\setsuna1.wav",0);
					s_setsuna2=load_snd("kof\snd\setsuna2.wav",0);
					s_setsuna3=load_snd("kof\snd\setsuna3.wav",0);
				end
			end
			case 1:
				fichstr2=load_fpg("kof\hanzo.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 19;
						convert_palette (fichstr2,counter,&ryo);
					end
					from counter=29 to 36;
						convert_palette (fichstr2,counter,&ryo);
					end
				else
					s_hanzo1=load_snd("kof\snd\hanzo1.wav",0);
					s_hanzo2=load_snd("kof\snd\hanzo2.wav",0);
					s_hanzo3=load_snd("kof\snd\hanzo3.wav",0);
					s_hanzo4=load_snd("kof\snd\hanzo4.wav",0);
				end
			end
			case 2:
				fichstr2=load_fpg("kof\maxima.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 19;
						convert_palette (fichstr2,counter,&rimururu);
					end
				else
					s_max1=load_snd("kof\snd\maxima1.wav",0);
					s_max2=load_snd("kof\snd\maxima2.wav",0);
				end
			end
		end
	end
	if (luchador2==FIGHTER_KULA)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\rimururu.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 18;
						convert_palette (fichstr2,counter,&rimururu);
					end
				end
			end
			case 1:
				fichstr2=load_fpg("kof\yuki.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 35;
						convert_palette (fichstr2,counter,&akari);
					end
				else
					s_yuki1=load_snd("kof\snd\yuki1.wav",0);
					s_yuki2=load_snd("kof\snd\yuki2.wav",0);
					s_yuki3=load_snd("kof\snd\yuki3.wav",0);
				end
			end
			case 2:
				fichstr2=load_fpg("kof\robot.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 29;
						convert_palette (fichstr2,counter,&kandi);
					end
				end
			end
		end
	end
	if (luchador2==FIGHTER_K9999)
		switch(striker2);
			case 0:
				fichstr2=load_fpg("kof\tetsuo.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 19;
						convert_palette (fichstr2,counter,&kaede1);
					end
				end
			end
			case 1:
				fichstr2=load_fpg("kof\krisalid.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 23;
						convert_palette (fichstr2,counter,&kandi);
					end
				else
					s_krisad1=load_snd("kof\snd\kris1.wav",0);
					s_krisad2=load_snd("kof\snd\kris2.wav",0);
				end
			end
			case 2:
				fichstr2=load_fpg("kof\basara.fpg");
				if (striker1==striker2 and luchador1==luchador2)
					from counter=1 to 14;
						convert_palette (fichstr2,counter,&xiang);
					end
				end
			end
			case 3:
				fichstr2=load_fpg("kof\indi.fpg");
				if ((luchador1==2 or luchador1==11) and striker1==striker2)
					from counter=1 to 38;
						convert_palette (fichstr2,counter,&joe);
					end
				else
					s_indi1=load_snd("kof\snd\indi1.wav",0);
					s_indi2=load_snd("kof\snd\indi2.wav",0);
					s_indi4=load_snd("kof\snd\indi4.wav",0);
					s_indi5=load_snd("kof\snd\indi5.wav",0);
				end
			end
		end
	end

	// load stage
	if (game_mode == MODE_ARCADE)
		player_stg = luchador2;
	else
		player_stg = luchador1;
	end
	
	escenario = player_stg;
	
	if (SLOW_MACHINE)
		if (player_stg==FIGHTER_KYO) 		escenario=1;
		elseif (player_stg==FIGHTER_IORI) 	escenario=4;
		end
	end
	
	if (player_stg==FIGHTER_KYO94)  		escenario=9;
	elseif (player_stg==FIGHTER_TERRY94)	escenario=3;
	elseif (player_stg==FIGHTER_K9999)		escenario=10; 
	end
	
	
	switch(escenario);
		case STG_KYO:
			plano1=load_map("kof\stg2.map");
			plano2=load_map("kof\stg3back.map");
			fichstg=load_fpg("kof\stg3.fpg");
			extra_scroll(3);
			extra_scroll(4);
		end
		case STG_ATHENA:
			plano1=load_map("kof\stg5.map");
			plano2=load_map("kof\stg3back.map");
			fichstg=load_fpg("kof\stg5.fpg");
			stage_obj(696,111,400,0,47);
			stage_obj(559,193,400,0,48);
			stage_obj(527,187,400,0,49);
			stage_obj(495,192,400,0,50);
			stage_obj(327,192,400,0,51);
			stage_obj(439,150,405,0,51);
			stage_obj(133,121,407,0,52);
			stage_obj(304,125,407,0,53);
			stage_obj(433,94,405,0,54);
			stage_obj(469,92,405,0,55);
			stage_obj(479,126,406,0,56);
			stage_obj(410,128,406,0,56);
			stage_obj(410,128,399,0,57);
			stage_obj(0,0,406,0,62);
			s_stage1=load_snd("kof\snd\athstg1.wav",0);
			s_stage2=load_snd("kof\snd\athstg2.wav",0);
		end
		case STG_IORI:
			plano1=load_map("kof\stg2.map");
			plano2=load_map("kof\stg2back.map");
			fichstg=load_fpg("kof\stg2.fpg");
			extra_scroll(1); 
			extra_scroll(2);
			stage_obj(639,209,400,0,10);
			stage_obj(602,220,-400,0,11);
			stage_obj(149,220,-400,1,11);
		end
		case STG_TERRY:
			plano1=load_map("kof\stg1.map");
			plano2=load_map("kof\stg1back.map");
			fichstg=load_fpg("kof\stg1.fpg");
			stage_obj(255,46,+400,0,1);
			stage_obj(520,126,+400,0,2);
			stage_obj(305,191,+400,0,3);
			stage_obj(340,142,+400,0,4);
			stage_obj(143,163,+400,0,5);
			stage_obj(247,90,+400,0,6);
			stage_obj(723,146,+400,0,7);
			
		end
		case STG_CRIMSON:
			plano1=load_map("kof\stg4.map");
			plano2=load_map("kof\stg4back.map");
			fichstg=load_fpg("kof\stg4.fpg");
			
			stage_obj(499,125,+400,0,37);
			stage_obj(465,174,+400,0,40);
			stage_obj(312,163,+400,0,40);
			stage_obj(337,154,+400,0,40);
			stage_obj(429,157,+400,0,40);
			stage_obj(357,151,+400,0,40);
			stage_obj(406,152,+400,0,40);
			stage_obj(291,102,+400,0,41);
			stage_obj(284,102,+400,0,41);
			stage_obj(348,122,+400,0,42);
			stage_obj(60,141,+400,0,43);
			stage_obj(106,61,+400,0,44);
			
			s_stage1=load_snd("kof\snd\ioristg1.wav",0);
			s_stage2=load_snd("kof\snd\ioristg2.wav",0);
			
		end
		case STG_KASUMI, STG_TAKUMA:
			plano1=load_map("kof\stg6.map");
			plano2=load_map("kof\stg6back.map");
			fichstg=load_fpg("kof\stg6.fpg");
			if (escenario==stg_KASUMI) 
				convert_palette (0,plano2,&stagep1);
				stage_obj(scroll.x0,243,-100,4,58);
			end
			stage_obj(179,169,+400,0,59);
			stage_obj(432,196,+400,0,60);
			stage_obj(497,188,+400,0,61);
			stage_obj(497,188,+400,0,61);
		end
		case STG_K:
			plano1=load_map("kof\esaka.map");
			plano2=load_map("kof\esakb.map");
			fichstg=load_fpg("kof\stg7.fpg");
			stage_obj(583,155,+400,0,63);
			stage_obj(584, 83,+400,0,64);
			stage_obj(721, 83,+400,0,66);
			stage_obj(301,100,+400,0,67);
			stage_obj(170,118,+400,0,68);
			stage_obj(228,113,+390,0,69);
			stage_obj(0,244,-200,0,70);
			stage_obj(180,244,-200,0,71);
			stage_obj(350,244,-200,0,72);
			stage_obj(500,244,-200,0,73);
			stage_obj(650,244,-200,0,74);
			stage_obj(180,244,-199,0,75);
			stage_obj(180,244,-200,0,76);
			stage_obj(180,244,-199,0,77);
		end
		case STG_KULA:
			plano1=load_map("kof\stg7.map");
			plano2=load_map("kof\stg7back.map");
			fichstg=load_fpg("kof\stgx.fpg");
			stage_obj(560,104,+405,0,78);
			stage_obj(659,188,+400,0,79);
			stage_obj(687,0,+400,0,80);
			stage_obj(687,0,+400,0,81);
			stage_obj(145,172,+400,0,82);
		end
	end
	
	// load music
	s_music1=0; 
	s_musica=0;	
	s_voice1 = -1;
	s_voice2 = -1;
	s_charge1 = -1;
	s_charge2 = -1;
	
	
	if (cd_ok==0)
		if (player_stg==FIGHTER_KYO) s_musica = load_musica(music_path[MUSIC_KYO96]); end
		if (player_stg==FIGHTER_KYO94) s_musica = load_musica(music_path[MUSIC_KYO94]); end
		if (player_stg==FIGHTER_ATHENA) s_musica = load_musica (music_path[MUSIC_ATHEN]); end
		if (player_stg==FIGHTER_IORI) s_musica = load_musica (music_path[MUSIC_IORIY]); end
		if (player_stg==FIGHTER_TERRY) s_musica = load_musica (music_path[5]); end
		if (player_stg==FIGHTER_TERRY94) s_musica = load_musica (music_path[5]); end
		if (player_stg==FIGHTER_CRIMSON) s_musica = load_musica (music_path[4]); end
		if (player_stg==FIGHTER_KASUMI) s_musica = load_musica (music_path[MUSIC_KASUM]); end
		if (player_stg==FIGHTER_TAKUMA) s_musica = load_musica (music_path[MUSIC_TAKUM]); end
		if (player_stg==FIGHTER_K) s_musica = load_musica (music_path[MUSIC_K]); end
		if (player_stg==FIGHTER_KULA) s_musica = load_musica (music_path[MUSIC_KULAD]); end
		if (player_stg==FIGHTER_K9999) s_musica = load_musica (music_path[MUSIC_K9999]); end
		s_musica_index = player_stg;
		s_music1 = play_musica (s_musica, -1);
	else
		if (player_stg==FIGHTER_KYO) play_cd(track[0],0); end
		if (player_stg==FIGHTER_KYO94) play_cd(track[5],0); end
		if (player_stg==FIGHTER_ATHENA) play_cd(track[1],0); end
		if (player_stg==FIGHTER_IORI) play_cd(track[2],0); end
		if (player_stg==FIGHTER_TERRY) play_cd(track[4],0); end
		if (player_stg==FIGHTER_TERRY94) play_cd(track[4],0); end
		if (player_stg==FIGHTER_CRIMSON) play_cd(track[3],0); end
		if (player_stg==FIGHTER_KASUMI) play_cd(track[6],0); end
		if (player_stg==FIGHTER_TAKUMA) play_cd(track[7],0); end
		if (player_stg==FIGHTER_K) play_cd(track[8],0); end
		if (player_stg==FIGHTER_KULA) play_cd(track[9],0);  end
		if (player_stg==FIGHTER_K9999) play_cd(track[10],0); end
	end
	
	scroll[0].ratio=0;
	if (escenario==STG_KYO) start_scroll(0,0,plano1,plano2,0,4);
	elseif (escenario==STG_IORI) start_scroll(0,0,plano1,plano2,0,2);
	else start_scroll(0,0,plano1,plano2,0,0); end
	scroll[0].x0=234; scroll[0].y0=5;
	
	id_luchador1 = prota (329,220,fich1,control_teclado1,luchador1);
	id_luchador2 = prota (459,220,fich2,control_teclado2,luchador2);
	id_luchador1.enemigo = id_luchador2;
	id_luchador1.priority = 10;
	id_luchador2.enemigo = id_luchador1; 
	id_luchador2.priority = 11;
	id_luchador1.flags = 0; 
	id_luchador2.flags = 1;
	id_luchador1.vida = MAX_LIFE; 
	id_luchador2.vida = MAX_LIFE;
	id_luchador1.player_color = COLORP1;
	id_luchador2.player_color = COLORP2;

	id_luchador1.tipo_control = control_teclado1;
	id_luchador2.tipo_control = control_teclado2;
	
	if (game_mode == MODE_ARCADE)
		id_luchador2.tipo_control = control_cpu;
	end

	if (escenario==3) stage_obj(491,190,+400,0,8); end

	frame;
	
	if (escenario==0 or escenario==9)
		scroll[0].x1=scroll[0].x0/9;
	end
	if (escenario==3 or escenario==1 or
		escenario==4 or escenario==6 or escenario==7)
		scroll[0].x1=117;
	end

	if (escenario==2)  scroll[0].x1=78;  END
	if (escenario==10) scroll[0].x1=204; scroll.y1=4; END

	id_luchador1.estado=_gesto_princ;
	id_luchador2.estado=_gesto_princ;

	//coloca a los personajes en la presentacion par que encajen con la posicion
	if ((luchador1==FIGHTER_KYO or luchador1==FIGHTER_KYO94) and luchador2<>FIGHTER_IORI) id_luchador1.x+=9;  end
	if ((luchador2==FIGHTER_KYO or luchador2==FIGHTER_KYO94) and luchador2<>FIGHTER_IORI) id_luchador2.x-=9;  end
	if ((luchador1==FIGHTER_KYO or luchador1==FIGHTER_KYO94) and luchador2==FIGHTER_IORI) id_luchador1.x+=11; end
	if ((luchador2==FIGHTER_KYO or luchador2==FIGHTER_KYO94) and luchador2==FIGHTER_IORI) id_luchador2.x-=11; end
	if (luchador1==FIGHTER_ATHENA) id_luchador1.x-=33; end
	if (luchador2==FIGHTER_ATHENA) id_luchador2.x+=33; end
	if (luchador1==FIGHTER_IORI and (luchador2==FIGHTER_KYO or luchador2==FIGHTER_KYO94)) id_luchador1.x+=28; end
	if (luchador2==FIGHTER_IORI and (luchador1==FIGHTER_KYO or luchador1==FIGHTER_KYO94)) id_luchador2.x-=28; end
	if (luchador1==FIGHTER_KASUMI and luchador2<>FIGHTER_TAKUMA) id_luchador1.x-=24; end
	if (luchador2==FIGHTER_KASUMI and luchador1<>FIGHTER_TAKUMA) id_luchador2.x+=24; end
	if (luchador1==FIGHTER_KASUMI and luchador2==FIGHTER_TAKUMA) id_luchador1.x-=6;  end
	if (luchador2==FIGHTER_KASUMI and luchador1==FIGHTER_TAKUMA) id_luchador2.x+=6;  end
	if (luchador1==FIGHTER_TAKUMA) id_luchador1.x-=12; end
	if (luchador2==FIGHTER_TAKUMA) id_luchador2.x+=12; end

	frame (300);
	
	if (luchador1==FIGHTER_KASUMI) fade(110,110,110,8);
	else fade(100,100,100,8); end
	
	if (fading) //para que aparezcan en la presentacion desde el paso 0
		id_luchador1.paso=0; id_luchador2.paso=0;
	end

	//strikers player one
	if (luchador1==FIGHTER_KYO or luchador1==FIGHTER_KYO94)
		if (striker1==0)
			id_luchador1.striks=1; map_xput(fich_game,4,16,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=4; map_xput(fich_game,4,20,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=2; map_xput(fich_game,4,18,107,12,0,100,0);
		end
		if (striker1==3)
			id_luchador1.striks=2; map_xput(fich_game,4,53,107,12,0,100,0);
		end
	end
	if (luchador1==FIGHTER_ATHENA)
		if (striker1==0)
			id_luchador1.striks=3; map_xput(fich_game,4,19,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=3; map_xput(fich_game,4,28,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=2; map_xput(fich_game,4,27,107,12,0,100,0);
		end
		if (striker1==3)
			id_luchador1.striks=2; map_xput(fich_game,4,53,107,12,0,100,0);
		end
	end
	if (luchador1==FIGHTER_IORI)
		if (striker1==0)
			id_luchador1.striks=2; map_xput(fich_game,4,21,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=2; map_xput(fich_game,4,29,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=6; map_xput(fich_game,4,17,107,12,0,100,0);
		end
		if (striker1==3)
			id_luchador1.striks=1; map_xput(fich_game,4,30,107,12,0,100,0);
		end
	end
	if (luchador1==FIGHTER_TERRY or luchador1==FIGHTER_TERRY94)
		if (striker1==0)
			id_luchador1.striks=2; map_xput(fich_game,4,22,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=2; map_xput(fich_game,4,26,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=2; map_xput(fich_game,4,23,107,12,0,100,0);
		end
	end
	if (luchador1==FIGHTER_CRIMSON)
		if (striker1==0)
			id_luchador1.striks=4; map_xput(fich_game,4,25,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=2; map_xput(fich_game,4,31,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=12; map_xput(fich_game,4,24,107,12,0,100,0);
		end
	end
	if (luchador1==FIGHTER_KASUMI)
		if (striker1==0)
			id_luchador1.striks=2; map_xput(fich_game,4,32,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=2; map_xput(fich_game,4,33,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=6; map_xput(fich_game,4,15,107,12,0,100,0);
		end
	end
	if (luchador1==FIGHTER_TAKUMA)
		if (striker1==0)
			id_luchador1.striks=4; map_xput(fich_game,4,41,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=3; map_xput(fich_game,4,42,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=8; map_xput(fich_game,4,43,107,12,0,100,0);
		end
	end
	if (luchador1==FIGHTER_K)
		if (striker1==0)
			id_luchador1.striks=2; map_xput(fich_game,4,44,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=3; map_xput(fich_game,4,45,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=6; map_xput(fich_game,4,46,107,12,0,100,0);
		end
	end
	if (luchador1==FIGHTER_KULA)
		if (striker1==0)
			id_luchador1.striks=4; map_xput(fich_game,4,47,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=3; map_xput(fich_game,4,48,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=5; map_xput(fich_game,4,49,107,12,0,100,0);
		end
	end
	if (luchador1==FIGHTER_K9999)
		if (striker1==0)
			id_luchador1.striks=2; map_xput(fich_game,4,51,107,12,0,100,0);
		end
		if (striker1==1)
			id_luchador1.striks=4; map_xput(fich_game,4,50,107,12,0,100,0);
		end
		if (striker1==2)
			id_luchador1.striks=3; map_xput(fich_game,4,52,107,12,0,100,0);
		end
		if (striker1==3)
			id_luchador1.striks=3; map_xput(fich_game,4,30,107,12,0,100,0);
		end
	end
	
	//strikers player 2
	if (id_luchador2.luchador==FIGHTER_KYO or id_luchador2.luchador==FIGHTER_KYO94)
		if (striker2==0)
			id_luchador2.striks=1; map_xput(fich_game,4,16,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=4; map_xput(fich_game,4,20,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=2; map_xput(fich_game,4,18,206,12,0,100,1);
		end
		if (striker2==3)
			id_luchador2.striks=2; map_xput(fich_game,4,53,206,12,0,100,1);
		end
	end
	if (id_luchador2.luchador==FIGHTER_ATHENA)
		if (striker2==0)
			id_luchador2.striks=3; map_xput(fich_game,4,19,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=3; map_xput(fich_game,4,28,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=2; map_xput(fich_game,4,27,206,12,0,100,1);
		end
		if (striker2==3)
			id_luchador2.striks=2; map_xput(fich_game,4,53,206,12,0,100,1);
		end
	end
	if (id_luchador2.luchador==FIGHTER_IORI)
		if (striker2==0)
			id_luchador2.striks=2; map_xput(fich_game,4,21,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=2; map_xput(fich_game,4,29,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=6; map_xput(fich_game,4,17,206,12,0,100,1);
		end
		if (striker2==3)
			id_luchador2.striks=1; map_xput(fich_game,4,30,206,12,0,100,1);
		end
	end
	if (id_luchador2.luchador==FIGHTER_TERRY or id_luchador2.luchador==FIGHTER_TERRY94)
		if (striker2==0)
			id_luchador2.striks=2; map_xput(fich_game,4,22,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=2; map_xput(fich_game,4,26,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=2; map_xput(fich_game,4,23,206,12,0,100,1);
		end
	end
	if (id_luchador2.luchador==FIGHTER_CRIMSON)
		if (striker2==0)
			id_luchador2.striks=4; map_xput(fich_game,4,25,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=2; map_xput(fich_game,4,31,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=12; map_xput(fich_game,4,24,206,12,0,100,1);
		end
	end
	if (id_luchador2.luchador==FIGHTER_KASUMI)
		if (striker2==0)
			id_luchador2.striks=2; map_xput(fich_game,4,32,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=2; map_xput(fich_game,4,33,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=6; map_xput(fich_game,4,15,206,12,0,100,1);
		end
	end
	if (id_luchador2.luchador==FIGHTER_TAKUMA)
		if (striker2==0)
			id_luchador2.striks=4; map_xput(fich_game,4,41,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=3; map_xput(fich_game,4,42,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=8; map_xput(fich_game,4,43,206,12,0,100,1);
		end
	end
	if (id_luchador2.luchador==FIGHTER_K)
		if (striker2==0)
			id_luchador2.striks=2; map_xput(fich_game,4,44,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=3; map_xput(fich_game,4,45,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=6; map_xput(fich_game,4,46,206,12,0,100,1);
		end
	end
	if (id_luchador2.luchador==FIGHTER_KULA)
		if (striker2==0)
			id_luchador2.striks=4; map_xput(fich_game,4,47,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=3; map_xput(fich_game,4,48,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=5; map_xput(fich_game,4,49,206,12,0,100,1);
		end
	end
	if (id_luchador2.luchador==FIGHTER_K9999)
		if (striker2==0)
			id_luchador2.striks=2; map_xput(fich_game,4,51,206,12,0,100,1);
		end
		if (striker2==1)
			id_luchador2.striks=4; map_xput(fich_game,4,50,206,12,0,100,1);
		end
		if (striker2==2)
			id_luchador2.striks=3; map_xput(fich_game,4,52,206,12,0,100,1);
		end
		if (striker2==3)
			id_luchador2.striks=3; map_xput(fich_game,4,30,206,12,0,100,1);
		end
	end
	
	if (moscon) 
		pegata (0,120,mosca,c_scroll,0,100,-400,97,0);
		pegata (0,120,mosca,c_scroll,0,100,-400,97,0);
		pegata (0,120,mosca,c_scroll,0,100,-400,97,0);
		pegata (0,120,mosca,c_scroll,0,100,-400,97,0);
		pegata (0,120,mosca,c_scroll,0,100,-400,97,0);
	end
	
	frame;

	loop
		
		define_vie1 = (id_luchador1.vida>>PRECISION_BITS);
		if (define_vie1<0) define_vie1=0; end
		define_vie2 = (id_luchador2.vida>>PRECISION_BITS);
		if (define_vie2<0) define_vie2=0; end
		
		define_region(3,148-define_vie1,14,define_vie1,13);
		define_region(4,172,14,define_vie2,13);
		
		if (cd_ok==true)
			if (is_playing_cd()==0)
				if (id_luchador1.luchador==FIGHTER_KYO)  play_cd(track[0],0);  end
				if (id_luchador1.luchador==FIGHTER_ATHENA)  play_cd(track[1],0);  end
				if (id_luchador1.luchador==FIGHTER_IORI)  play_cd(track[2],0);  end
				if (id_luchador1.luchador==FIGHTER_TERRY)  play_cd(track[4],0);  end
				if (id_luchador1.luchador==FIGHTER_CRIMSON)  play_cd(track[3],0);  end
				if (id_luchador1.luchador==FIGHTER_KYO94)  play_cd(track[5],0);  end
				if (id_luchador1.luchador==FIGHTER_KASUMI)  play_cd(track[6],0);  end
				if (id_luchador1.luchador==FIGHTER_TAKUMA)  play_cd(track[7],0);  end
				if (id_luchador1.luchador==FIGHTER_TERRY94)  play_cd(track[4],0);  end
				if (id_luchador1.luchador==FIGHTER_K)  play_cd(track[8],0);  end
				if (id_luchador1.luchador==FIGHTER_KULA) play_cd(track[9],0);  end
				if (id_luchador1.luchador==FIGHTER_K9999) play_cd(track[10],0); end
			end
		end
		if (estado==-1)
			paso++;
			delete_text(all_text);
			if (p1_button_a or p1_button_b or p1_button_x or p1_button_y or
				p2_button_a or p2_button_b or p2_button_x or p2_button_y or
				control_cancel)
				
				fade_off (); 
				paso=5;
				if (id_luchador1.magia<>0)
					signal(id_luchador1.magia,s_kill);
				end
				if (id_luchador2.magia<>0)
					signal(id_luchador2.magia,s_kill);
				end
				id_luchador1.x=329; id_luchador2.x=459;
				id_luchador1.y=220; id_luchador2.y=220;
				id_luchador1.paso=0; id_luchador2.paso=0;
				id_luchador1.estado=_normal; id_luchador2.estado=_normal;
				id_luchador1.son.estado=2; id_luchador2.son.estado=2;
				frame;
				if (luchador1==FIGHTER_KASUMI) fade(110,110,110,8);
				else fade(100,100,100,8); end
			end
			if (paso>=5 and id_luchador1.estado==_normal and
				id_luchador2.estado==_normal)
				paso=0; estado=0;
			end
			if (escenario==2)
				scroll[0].y0=((id_luchador1.y+id_luchador2.y)
				/20-17)+camara_y+camara_y2;
			end
		end
		if (estado==0)
			seconds=0;
			if (escenario==0 or escenario==9)
				scroll[0].x1=26;
			end
			if (escenario==3 or escenario==1 or
				escenario==4 or escenario==6 or escenario==7)
				scroll[0].x1=117;
			end
			if (escenario==2)  scroll[0].x1=78;  end
			if (escenario==10) scroll[0].x1=204; end
			if (paso==0)
				pegata (-40,100,0,c_screen,0,100,-99,12,fichtxt);
				paso=1;
			end
			if (escenario==2 or escenario==4)
				scroll[0].y0=((id_luchador1.y+id_luchador2.y)/20-17)+camara_y+camara_y2;
			end
		end
		if (estado==1)
			
			draw_hud_text (false);
			
			if (id_luchador1.estado<>_ganar  and id_luchador2.estado<>_ganar and
				id_luchador1.estado<>_perder and id_luchador2.estado<>_perder)
				
				scroll_x = ((id_luchador1.x+id_luchador2.x)/2-160)+camara_x;
				scroll_y = ((id_luchador1.y+id_luchador2.y)/20-17)+camara_y;
				if (escenario==2) scroll_y += camara_y2; end
				
				if(scroll[0].x0>scroll_x) scroll[0].x0-=1+((scroll[0].x0-scroll_x)/10); end
				if(scroll[0].x0<scroll_x) scroll[0].x0+=1+((scroll_x-scroll[0].x0)/10); end
				if(scroll[0].y0>scroll_y) scroll[0].y0-=1+((scroll[0].y0-scroll_y)/10); end
				if(scroll[0].y0<scroll_y) scroll[0].y0+=1+((scroll_y-scroll[0].y0)/10); end
				
				if (escenario==0 or escenario==9)
					scroll[0].x1 = scroll[0].x0/9;
				end
				if (escenario==3 or escenario==1 or
					escenario==4 or escenario==6 or escenario==7)
					scroll[0].x1 = scroll[0].x0/2;
				end
				if (escenario==2)
					scroll[0].x1 = scroll[0].x0/3;
				end
				if (escenario==10)
					scroll[0].x1 = scroll[0].x0*7/8; 
					scroll[0].y1 = (scroll[0].y0*5/6);
				end
			end
			if (paso==0 and round==1)
				define_region(1,27,223,74,13);
				define_region(2,219,223,74,13);
				id_vie1=pegata (89,20,graph,c_screen,0,size,-33,50,fich_game);
				id_vie2=pegata (231,20,graph,c_screen,0,size,-34,51,fich_game);
				if (game_mode!=MODE_TRAINING)
					pegata (39,46,35,c_screen,0,100,-50,250,fich_game);
					pegata (281,46,35,c_screen,1,100,-50,250,fich_game);
					pegata (16,46,36,c_screen,0,100,-50,251,fich_game);
					pegata (304,46,36,c_screen,0,100,-50,251,fich_game);
				end
				
				id_alive1=pegata (89,20,9,c_screen,0,size,-30,10,fich_game);
				id_alive2=pegata (231,20,9,c_screen,0,size,-31,11,fich_game);
				pegata (160,20,1,c_screen,0,size,-29,0,fich_game);
				pegata (160,226,4,c_screen,0,100,-30,0,fich_game);
				id_pow1=pegata (x,y,graph,c_screen,0,size,-31,8,fich_game);
				id_pow2=pegata (x,y,graph,c_screen,0,size,-31,9,fich_game);
				if (id_luchador1.luchador==FIGHTER_IORI)
					pegata (15,20,998,c_screen,0,size,-31,0,fich1);
				else
					pegata (15,20,999,c_screen,0,size,-31,0,fich1);
				end
				if (id_luchador2.luchador==FIGHTER_IORI)
					pegata (304,20,998,c_screen,1,size,-31,0,fich2);
				else
					pegata (304,20,999,c_screen,1,size,-31,0,fich2);
				end
				
				if (game_mode==MODE_TRAINING)
					pegata (131,231,40,c_screen,0,80,-500,0,fich_game);		
					pegata (189,231,40,c_screen,0,80,-500,0,fich_game);	
				end	
				if (cronometro==0 or game_mode==MODE_TRAINING)
					pegata (SIZEX2,23,40,c_screen,0,100,-500,0,fich_game);
				end
				paso=1;
			end
			if (escenario==2 or escenario==4)
				scroll[0].y0=((id_luchador1.y+
				id_luchador2.y)/20-17)+camara_y+camara_y2;
			end
			if (cronometro>0)
				seconds++;
			end
			if (seconds>=fps_target)
				seconds=0;
				if (estado_juego==1 and game_mode!=MODE_TRAINING) 
					time--;
				end
			end
			if (control_cancel and bloker==0 and blanquear==0)
				fade_off ();
				if (cd_ok==false)      
					unload_musica (s_musica);
				end
				estado_juego=0;
				signal(type pegata,s_freeze);
				partido(2); blanquear=1;
			end
			if (control_enter and bloker==0 and estado_juego==1)
				estado_juego=0; pausa(); bloker=1;
			end
			if (!control_enter and !control_cancel) bloker=0; end
			if (time<0)
				time=0;
				if (id_luchador1.vida>0 and
					id_luchador2.vida>0 and
					seconds<30 and estado_juego==1)
					seconds=30;
					crono(x,y,0,100,1);
					pegata (90,90,32,c_screen,0,150,z,64,fichtxt);
				end
			end
			if ((id_luchador1.vida==0 or id_luchador2.vida==0) and
				estado_juego<>0 and seconds<30 and 
				game_mode!=MODE_TRAINING)
				estado_juego=0; seconds=30;
			end
			if (id_luchador1.vida==0 and id_luchador2.vida>0 and 
				game_mode!=MODE_TRAINING)
				if ((id_luchador1.estado==_recibir_toss or
					id_luchador1.estado==_recibir_colleja) and
					id_luchador1.y==220 and
					id_luchador2.estado==_normal)
					paso++;
					if (paso==3)
						signal(type pantallazo,s_kill);
						signal(type stage_obj,s_wakeup);
						parpadeo_final=0;
						pegata (x,y,0,c_screen,0,size,id_luchador1.z-200,45,fichtxt);
					end
				end
			end
			if (id_luchador2.vida==0 and id_luchador1.vida>0 and 
				game_mode!=MODE_TRAINING)
				if ((id_luchador2.estado==_recibir_toss or
					id_luchador2.estado==_recibir_colleja) and
					id_luchador2.y==220 and
					id_luchador1.estado==_normal)
					paso++;
					if (paso==3)
						signal(type pantallazo,s_kill);
						signal(type stage_obj,s_wakeup);
						parpadeo_final=0;
						pegata (x,y,0,c_screen,0,size,id_luchador1.z-200,45,fichtxt);
					end
				end
			end
			if (id_luchador1.vida==0 and id_luchador2.vida==0 and 
				game_mode<>1)
				if ((id_luchador1.estado==_recibir_toss or
					id_luchador1.estado==_recibir_colleja) and
					id_luchador1.y==220 and
					(id_luchador2.estado==_recibir_toss or
					id_luchador2.estado==_recibir_colleja) and
					id_luchador2.y==220)
					paso++;
					if (paso==3)
						signal(type pantallazo,s_kill);
						signal(type stage_obj,s_wakeup);
						parpadeo_final=0;
						pegata (x,y,0,c_screen,0,size,id_luchador1.z-200,45,fichtxt);
					end
				end
			end
			move_scroll(0);
		end
		
		if (true)
			delete_draw (all_drawing);		
		end
		
		frame;
	end 
end

process prota(x,y,file,tipo_control,luchador);

private
    
	rod=0;dos=0;
    shadow;c=1;
    mierdones=0;
    move_ok=1;
    iSuperJump;
	bSuperJump;
    cambiar=0;
	
    //blokeadores de control
    lp_bloker;lk_bloker;
    sp_bloker;sk_bloker;
    rd_bloker;ts_bloker;
    
begin

	vida=MAX_LIFE; pipiolos=100; m8_step=0;
	ctype=c_scroll; shadow=sombra();
		
	if (powinf==1) infinitypow=1; end

	loop
		frame;
		if (estado>-1) NUEVO_ESTADO=estado; end
		
		//hadoken alante y atras
		if (dos>0) dos--; end 
		if (dos>32) dos=32; end 
		if (dos<0) dos++; end 
		if (dos<-32) dos=-32; end 
		if (hado>0) hado--; end 
		if (hado<0) hado++; end 
		
		if (control(agachar)) hado=10; dos=0; end 
		if (control(avanzar) and hado>0 and hado<10) hado=20; end 
		if (hado==11 or hado==32) hado=0; end 
		if (control(retroceder) and hado>0 and hado<10) hado=-20; end 
		if (hado==-11 and control(retroceder)) hado=0; end
  
		//shoryuken hacia alante
		if (control(avanzar) and shoryu<10) shoryu=9; end 
		if (control(agachar) and not control(avanzar) and shoryu>0 and shoryu<9) shoryu=16; end 
		if (control(avanzar) and shoryu>9 and shoryu<16) shoryu=30; end 
		if (control(avanzar) and shoryu==19) shoryu=0; end 
		if (shoryu>0) shoryu--; end
		//shoryuken hacia atras
		if (control(retroceder) and shoryu>-10) shoryu=-9; end 
		if (control(agachar) and not control(retroceder) and shoryu<0 and shoryu>-9) shoryu=-16; end 
		if (control(retroceder) and shoryu<-9 and shoryu>-16) shoryu=-30; end  
		if (control(retroceder) and shoryu==-19) shoryu=0; end 
		if (shoryu<0) shoryu++; end
      
		//shokoken del takuma
		if (control(avanzar) and shokoh<7) shokoh=12; END
		if (control(retroceder) and not control(agachar) and
			shokoh>0 and shokoh<12) shokoh=24; END
		if (control(agachar) and not control(avanzar) and
			shokoh>12 and shokoh<24) shokoh=36; END
		if (control(avanzar) and shokoh>24 and shokoh<36) shokoh=48;
			if (luchador==FIGHTER_TAKUMA) hado=0; shoryu=0; else shokoh=0; end
		end
		if (shokoh==13 or shokoh==25 or shokoh==38) shokoh=0; end
		if (shokoh>0) shokoh--; end
		
		//carga el takuma(atras abajo > alante patada)
		if (control(retroceder) and control(agachar))
			if (carga1<0) carga1=0;
			else carga1++; if (carga1>40) carga1=40; end end
		else
			if (carga1>0) 
				if (carga1>34) carga1=-14; else carga1=0; end 
			end
			if (carga1<0) carga1++; end
		end
		if (luchador<>FIGHTER_TAKUMA) carga1=0; end
      
		//puteado sin poder hacer magias
		if (m8_step==2) hado=0; shoryu=0; shokoh=0; end
		
		switch(estado)
			case _normal:
				tipo_ataque=NULO;
				hit_combo=0; ive_hit=2; atravesar=0;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					graph=pos_KYO[paso++]; if (paso==sizeof(POS_KYO)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_ATHENA)
					graph=pos_ATH[paso++]; if (paso==sizeof(POS_ATH)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)
					graph=pos_VD[paso++]; if (paso==sizeof(POS_VD)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
					graph=pos[paso++]; if (paso==sizeof(pos)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=pos_kas[paso++]; if (paso==sizeof(pos_kas)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=pos_taku[paso++]; if (paso==sizeof(pos_taku)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_K)
					graph=pos_k[paso++]; if (paso==sizeof(pos_k)/DIV) paso--; end
				end
				if (luchador==FIGHTER_KULA)
					graph=pos_kula[paso++]; if (paso==sizeof(pos_kula)/DIV) paso=0; end
					if (magia==0)
						magia=pegata (x,180,500,c_scroll,flags+4,100,z-1,136,file);
					end
				end
				if (luchador==FIGHTER_K9999)
					graph=pos_tetsuo[paso++];
					if (paso==sizeof(pos_tetsuo)/DIV) paso=0; end
				end
				inc_x=0;
				if (control(avanzar))
					nuevo_estado=_avanzar;
				end
				if (control(retroceder))
					nuevo_estado=_retroceder;
				end
				if (control(agachar))
					nuevo_estado=_agachar; iSuperJump=8;
				end
				if (control(guasa))
					nuevo_estado=_burla;
				end
				if (control(retroceder))
					if (dos>0) dos=-20; else dos-=20; end
					if (dos<-20) nuevo_estado=_saltar_atras;
					else nuevo_estado=_retroceder; end
				end
				if (control(avanzar))
					if (dos<0) dos=20; else dos+=20; end
					if (dos>20) nuevo_estado=_correr;
					else nuevo_estado=_avanzar; end
				end
				if (not (shoryu>19 and control(avanzar)) and not
					(shoryu<-19 and control(retroceder)) and not
					(shokoh>38 and control(avanzar)) and not
					(carga1<0 and control(avanzar)) and not
					(hado<11 and control(avanzar)) and not
					(hado>-11 and control(retroceder)) and not
					control(agachar)) //sino hace magias
					if (abs(enemigo.x-x)=>55) //si esta lejos
						if (control(l_punch) and lp_bloker==0)
							nuevo_estado=_lpunch1;
						end
						if (control(l_kick) and lk_bloker==0)
							nuevo_estado=_lkick1;
						end
						if (control(s_punch) and sp_bloker==0)
							nuevo_estado=_spunch1; intensidad=0;
						end
						if (control(s_kick) and sk_bloker==0)
							nuevo_estado=_skick1; intensidad=0;
						end
					end
					if (abs(enemigo.x-x)<55) //si esta cerca
						if (control(l_punch) and lp_bloker==0)
							nuevo_estado=_lpunch2;
						end
						if (control(l_kick) and lk_bloker==0)
							nuevo_estado=_lkick2;
						end
						if (control(s_punch) and sp_bloker==0)
							nuevo_estado=_spunch2;
						end
						if (control(s_kick) and sk_bloker==0)
							nuevo_estado=_skick2;
						end
					end
				end
				if (control(toss) and ts_bloker==0 and not
					((hado>11 or hado<-11) and 
					(vida<DANGER_LIFE or power==74)))
					nuevo_estado=_toss1;
				end
				if (control(charge) and power<74 and infinitypow==0)
					if (file==fich1 and id_pow1.estado<>2)
						nuevo_estado=_charge;
					end
					if (file==fich2 and id_pow2.estado<>2)
						nuevo_estado=_charge;
					end
				end
				if (control(rodar) and rd_bloker==0)
					nuevo_estado=_rodar;
					if (control(retroceder))
						if (flags) inc_x=1; else inc_x=-1; end
					else
						if (flags) inc_x=-1; else inc_x=1; end
					end
				end
				if (control(saltar))
					bSuperJump = false;
					nuevo_estado=_saltar;
				end
				if (x>enemigo.x) flags=1; end
				if (x<enemigo.x) flags=0; end
			end
			
			case _avanzar:
				tipo_ataque=NULO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					graph=avanZ_KYO[paso++];
					if (paso==sizeof(avanZ_KYO)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_ATHENA)
					graph=avan_ATH[paso++];
					if (paso==sizeof(avan_ATH)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)
					graph=ava_VD[paso++];
					if (paso==sizeof(ava_VD)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
					graph=avan[paso++];
					if (paso==sizeof(avan)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=avz_kas[paso++];
					if (paso==sizeof(avz_kas)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=ava_taku[paso++];
					if (paso==sizeof(ava_taku)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_K)
					graph=ava_k[paso++];
					if (paso==sizeof(ava_k)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_KULA)
					graph=av_kula[paso++];
					if (paso==sizeof(av_kula)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_K9999)
					graph=av_tetsuo[paso++];
					if (paso==sizeof(av_tetsuo)/DIV) paso=0; end
				end
				x+=inc_x; ive_hit=2;
				if (game_frame%2==0) x+=inc_x; end
				if (luchador==FIGHTER_K9999)
					if (flags) inc_x=-1; else inc_x=1; end
					if (game_frame%2==0) 
						if (flags) inc_x=-1; else inc_x=1; end
					end
				else
					if (flags) inc_x=-2; else inc_x=2; end
				end
				if (not control(avanzar))
					nuevo_estado=_normal;
				end
				if (control(agachar))
					nuevo_estado=_agachar; iSuperJump=8;
				end
				if (control(guasa))
					nuevo_estado=_burla;
				end
				if (control(rodar) and rd_bloker==0)
					nuevo_estado=_rodar;
				end
				if (control(charge) and power<74 and infinitypow==0)
					if (file==fich1 and id_pow1.estado<>2)
						nuevo_estado=_charge;
					end
					if (file==fich2 and id_pow2.estado<>2)
						nuevo_estado=_charge;
					end
				end
				if (control(saltar))
					bSuperJump = false;
					nuevo_estado=_saltar;
				end
				if ((enemigo.estado<23 or //condiciones para voltear
					enemigo.estado==_ayuken or
					enemigo.estado==_shoryuken or
					enemigo.estado==_uatras_punch or
					enemigo.estado==_uatras_kick or
					enemigo.estado==_satras_kick or
					enemigo.estado==_u_kick or
					enemigo.estado==_extra_move or
					enemigo.estado==_pajaritos or
					enemigo.estado==_special1 or
					enemigo.estado==_special2) and
					abs(enemigo.x-x)<46 and
					enemigo.voltear==0 and shoryu<20 and
					enemigo.y==220 and hado<11 and not
					(luchador==FIGHTER_IORI and hado<-4) and not
					(luchador==FIGHTER_CRIMSON and hado<-4))
					if (control(s_kick) or control(s_punch))
						nuevo_estado=_voltear;
						enemigo.estado=enemigo.nuevo_estado=100;
						enemigo.z=1;
						if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
							enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
							enemigo.graph=410;
						else
							enemigo.graph=411;
						end
						if (control(s_kick)) inc_x=1;
						else inc_x=0; end
					end
				else //sino puede voltear simplemente golpea
					if (control(s_punch) and shoryu<20 and shokoh<39 and
						hado<11 and not control(agachar) and not
						(luchador==FIGHTER_IORI and hado<-4) and sp_bloker==0)
						if (abs(enemigo.x-x)>=55) intensidad=0;
							nuevo_estado=_spunch1;//puo fuerte1
						end
						if (abs(enemigo.x-x)<=54)
							nuevo_estado=_spunch2;//puo fuerte2
						end
					end
					if (control(s_kick) and shoryu<20 and carga1>-1 and
						hado<11 and not control(agachar) and sk_bloker==0)
						if (abs(enemigo.x-x)>=55) intensidad=0;
							nuevo_estado=_skick1;//patada fuerte1
						end
						if (abs(enemigo.x-x)<=54)
							nuevo_estado=_skick2;//patada fuerte2
						end
					end
				end
				if (control(l_punch) and shoryu<20 and
					hado<11 and not control(agachar) and not
					(luchador==FIGHTER_IORI and hado<-4) and lp_bloker==0)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_lpunch1;
					end
					if (abs(enemigo.x-x)<=55)
						nuevo_estado=_lpunch2;
					end
				end
				if (control(l_kick) and shoryu<20 and carga1>-1 and
					hado<11 and not control(agachar) and lk_bloker==0)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_lkick1;//patada floja1
					end
					if (abs(enemigo.x-x)<=55)
						nuevo_estado=_lkick2;//patada floja2
					end
				end
				if (control(toss)  and ts_bloker==0 and not
					(hado>11 and (power==74 or vida<DANGER_LIFE)))
					nuevo_estado=_toss1;
				end
				
				//comportamientos especiales
				if (abs(enemigo.x-x)<=40 and y==enemigo.y and 
					enemigo.estado<>_rodar and enemigo.estado<>_retroceder)
					if (flags) enemigo.x-=1; x+=3;
					else enemigo.x+=1; x-=3; end
				end
				if (abs(enemigo.x-x)<=40 and y==enemigo.y and
					enemigo.estado==_retroceder)
					if (flags) x+=3; else x-=3; end
				end
				if (x>enemigo.x) flags=1; end
				if (x<enemigo.x) flags=0; end
			end
			
			case _retroceder:
				tipo_ataque=NULO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					graph=retro_KYO[paso++];
					if (paso==sizeof(retro_KYO)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_ATHENA)
					graph=retro_ATH[paso++];
					if (paso==sizeof(retro_ATH)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)
					graph=reT_VD[paso++];
					if (paso==sizeof(RET_VD)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
					graph=retro[paso++];
					if (paso==sizeof(retro)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=rew_kas[paso++];
					if (paso==sizeof(rew_kas)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=ret_taku[paso++];
					if (paso==sizeof(ret_taku)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_K)
					graph=ret_k[paso++];
					if (paso==sizeof(ret_k)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_KULA)
					graph=re_kula[paso++];
					if (paso==sizeof(re_kula)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_K9999)
					graph=re_tetsuo[paso++];
					if (paso==sizeof(re_tetsuo)/DIV) paso=0; end
					if (flags) inc_x=1; else inc_x=-1; end
					if (game_frame%2==0)
						if (flags) inc_x=1; else inc_x=-1; end
					end
				else
					if (flags) inc_x=2; else inc_x=-2; end
				end
				x+=inc_x; ive_hit=2;
				
				//SE CUBRE si le golpean a cierta distancia
				if (abs(id_luchador1.x-id_luchador2.x)<=170 and
					enemigo.estado==_spunch1 xor
					enemigo.estado==_skick1 xor
					enemigo.estado==_spunch2 xor
					enemigo.estado==_skick2 xor
					enemigo.estado==_spunchair xor
					enemigo.estado==_spunchaga xor
					enemigo.estado==_skickair xor
					enemigo.estado==_toss1 xor
					enemigo.estado==_tossair xor
					(enemigo.estado==_ayuken and enemigo.luchador<>FIGHTER_ATHENA and
					(enemigo.luchador<>FIGHTER_IORI and enemigo.intensidad<>3) and
					(enemigo.luchador<>FIGHTER_CRIMSON and enemigo.intensidad<>3)) xor
					enemigo.estado==_shoryuken xor
					enemigo.estado==_uatras_punch xor
					enemigo.estado==_uatras_kick xor
					enemigo.estado==_satras_kick xor
					enemigo.estado==_extra_move xor
					enemigo.estado==_special1 xor
					enemigo.estado==_special2 xor
					enemigo.estado==_u_kick)
					paso=0; nuevo_estado=_guardiaalta;
				end
				if (abs(id_luchador1.x-id_luchador2.x)<=170 and
					enemigo.estado==_lpunch1 xor
					enemigo.estado==_lkick1 xor
					enemigo.estado==_lpunch2 xor
					enemigo.estado==_lkick2 xor
					enemigo.estado==_lpunchaga xor
					enemigo.estado==_lpunchair xor
					enemigo.estado==_lkickair)
					paso=0; nuevo_estado=_guardiaaltafloja;
				end
				if (control(agachar))
					nuevo_estado=_agachadoguardia; iSuperJump=8;
				end
				if (not control(retroceder))
					nuevo_estado=_normal;
				end
				if (control(agachar) and not
					control(retroceder))
					nuevo_estado=_agachar; iSuperJump=8;
				end
				if (control(guasa))
					nuevo_estado=_burla;
				end
				if (control(l_punch) and shoryu>-20 and
					hado>-11 and not control(agachar) and lp_bloker==0)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_lpunch1;
					end
					if (abs(enemigo.x-x)<=55)
						nuevo_estado=_lpunch2;
					end
				end
				if (control(l_kick) and shoryu>-20 and carga1>-1 and
					hado>-11 and not control(agachar) and lk_bloker==0)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_lkick1;
					end
					if (abs(enemigo.x-x)<=55)
						nuevo_estado=_lKICK2;
					end
				end
				if (control(s_punch) and shoryu>-20 and
					hado>-11 and not control(agachar) and sp_bloker==0)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_spunch1; intensidad=0;
					end
					if (abs(enemigo.x-x)<=54)
						nuevo_estado=_spunch2;
					end
				end
				if (control(s_kick) and shoryu>-20 and carga1>-1 and
					hado>-11 and not control(agachar) and sk_bloker==0)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_skick1; intensidad=0;
					end
					if (abs(enemigo.x-x)<=54)
						nuevo_estado=_skick2;
					end
				end
				if (control(charge) and power<74 and infinitypow==0)
					if (file==fich1 and id_pow1.estado<>2)
						nuevo_estado=_charge;
					end
					if (file==fich2 and id_pow2.estado<>2)
						nuevo_estado=_charge;
					end
				end
				if (control(toss)  and ts_bloker==0 and not
					(hado<-11 and (vida<DANGER_LIFE or power==74)))
					nuevo_estado=_toss1;
				end
				if (control(rodar) and rd_bloker==0)
					nuevo_estado=_rodar;
				end
				if (control(saltar))
					bSuperJump = false;
					nuevo_estado=_saltar;
				end
				if (x>enemigo.x) flags=1; end
				if (x<enemigo.x) flags=0; end
			end
			
			case _agachar:
				tipo_ataque=NULO;
				
				if (x<enemigo.x) flags=0;
				else flags=1; end
				
				altura=0; ive_hit=2; paso++;
				
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) GRAPH=22; END
				if (luchador==FIGHTER_ATHENA) GRAPH=25; END
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)
					if (paso<=1) graph=31; end
					if (paso==2) graph=32; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) GRAPH=15; END
				if (luchador==FIGHTER_KASUMI or luchador==FIGHTER_TAKUMA)
					if (paso<=1) graph=13; end
					if (paso==2) graph=14; end
				end
				if (luchador==FIGHTER_K)
				   if (paso<=1) graph=45; end
				   if (paso==2) graph=46; end
				end
				if (luchador==FIGHTER_KULA)
				   if (paso<=1) graph=32; end
				   if (paso==2) graph=33; end
				end
				if (luchador==FIGHTER_K9999)
				   if (paso<=1) graph=35; end
				   if (paso==2) graph=36; end
				end
				if (paso==2 or (game_mode==MODE_TRAINING and 
					cputype==2 and file==fich2))
					nuevo_estado=_agachado;
				end
				if (not control(agachar))
					if (control(avanzar))
						nuevo_estado=_avanzar;
					end
					if (control(retroceder))
						nuevo_estado=_retroceder;
					end
					if (not control(avanzar) and not control(retroceder))
						nuevo_estado=_normal;
					end
				end
				if (control(retroceder) and control(agachar))
					nuevo_estado=_agachadoguardia;
				end
				if (control(retroceder) and not control(agachar))
					if (abs(id_luchador1.x-id_luchador2.x)<=170 and
						enemigo.estado==_spunch1 xor
						enemigo.estado==_skick1 xor
						enemigo.estado==_spunch2 xor
						enemigo.estado==_skick2 xor
						enemigo.estado==_spunchair xor
						enemigo.estado==_spunchaga xor
						enemigo.estado==_skickair xor
						enemigo.estado==_toss1 xor
						enemigo.estado==_tossair xor
						(enemigo.estado==_ayuken and enemigo.luchador<>FIGHTER_ATHENA and
						(enemigo.luchador<>FIGHTER_IORI and enemigo.intensidad<>3) and
						(enemigo.luchador<>FIGHTER_CRIMSON and enemigo.intensidad<>3)) xor
						enemigo.estado==_shoryuken xor
						enemigo.estado==_uatras_punch xor
						enemigo.estado==_uatras_kick xor
						enemigo.estado==_satras_kick xor
						enemigo.estado==_extra_move xor
						enemigo.estado==_special1 xor
						enemigo.estado==_special2 xor
						enemigo.estado==_u_kick)
						nuevo_estado=_guardiaalta;
					end
				end
				if (control(saltar))
					bSuperJump = false;
					if (iSuperJump>0) bSuperJump = true; end 
					nuevo_estado=_saltar;
				end
			end
			
			case _agachado: ive_hit=2;
				tipo_ataque=NULO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) GRAPH=23; END
				if (luchador==FIGHTER_ATHENA) GRAPH=26; END
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)
					graph=agachado_vd[paso++];
					if (paso==sizeof(agachado_vd)/div) paso=0; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) graph=16; END
				if (luchador==FIGHTER_KASUMI or luchador==FIGHTER_TAKUMA) graph=15; END
				if (not control(agachar) and not 
					(game_mode==MODE_TRAINING and cputype==2 and file==fich2))
					nuevo_estado=_agachar;
					if (luchador==FIGHTER_KASUMI) graph=16; end
				end
				if (luchador==FIGHTER_K)
					graph=aga_k[paso++];
					if (paso==sizeof(aga_k)/DIV) paso--; end
				end
				if (luchador==FIGHTER_KULA)
					graph=ag_kula[paso++];
					if (paso==sizeof(ag_kula)/DIV) paso--; end
				end
				if (luchador==FIGHTER_K9999)
					if (paso==1) graph=38; end
					if (paso==0) graph=37; paso++; end
				end
				if (control(l_punch) and lp_bloker==0 and
					control(agachar) and not
					(shoryu>19 and control(avanzar)))
					nuevo_estado=_lpunchaga;
				end
				if (control(l_kick) and lk_bloker==0 and
					control(agachar) and not
					(shoryu>19 and control(avanzar)))
					nuevo_estado=_lkickaga;
				end
				if (control(s_punch)  and sp_bloker==0 and
					control(agachar) and not
					(shoryu>19 and control(avanzar)))
					nuevo_estado=_spunchaga;
				end
				if (control(s_kick)  and sk_bloker==0 and
					control(agachar) and not
					(shoryu>19 and control(avanzar)))
					nuevo_estado=_skickaga;
				end
				if (control(retroceder) and control(agachar))
					nuevo_estado=_agachadoguardia;
					nuevo_paso=paso;
				end
				if (control(saltar))
					bSuperJump = false;
					if (iSuperJump>0) bSuperJump = true; end 
					nuevo_estado=_saltar;
				end
				if (x>enemigo.x) flags=1; end
				if (x<enemigo.x) flags=0; end
			end
			
			case _burla:
				tipo_ataque=NULO;
				if (paso==1)
					stop_voice (id);
				end
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)//kyo kusanagi
					graph=burla_KYO[paso++];
					if (paso==sizeof(burla_KYO)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==8)
						if (rand(0,1)==0) play_voice(s_kyo24,512,256);
						else play_voice(s_kyo28,512,256); end
					end
					if (paso==1 or paso==12)
						if (flags) x+=4; else x-=4; end
					end
					if (paso==84 or paso==90)
						if (flags) x-=4; else x+=4; end
					end
				end
				if (luchador==FIGHTER_ATHENA)//athena asamiya
					graph=burla_ath[paso++];
					if (paso==sizeof(burla_ath)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==91 or paso==97 or paso==103 or paso==109)
						if (flags) x-=5; else x+=5; end
					end
					if (paso==1 or paso==5 or paso==7 or paso==9)
						if (flags) x+=5; else x-=5; end
					end
					if (paso==9)
						play_voice (s_ath17,512,256);
					end
					if (paso==45)
						play_voice (s_ath18,512,256);
					end
				end
				if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)//iori yagami
					graph=guasilla_vd[paso++];
					if (paso==sizeof(guasilla_vd)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==3)               
						play_voice(s_iori7,512,256);
					end
					if (paso==1)
						if (flags) x+=8; else x-=8; end
					end
					if (paso==7)
						if (flags) x+=4; else x-=4; end
					end
					if (paso==77)
						if (flags) x-=4; else x+=4; end
					end
					if (paso==83)
						if (flags) x-=8; else x+=8; end
					end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)//TERRY BOGADO
					graph=hey_comeon[paso++];
					if (paso==sizeof(hey_comeon)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==49)
						play_voice(s_terry10,512,256);
					end
				end	
				if (luchador==FIGHTER_KASUMI)//kasumi
					graph=chouhatsuka[paso++];
					if (paso==sizeof(chouhatsuka)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==13)
						play_voice(s_kasumi9,512,256);
					end
				end
				if (luchador==FIGHTER_TAKUMA)// TAKUMA !
					graph=antonio[paso++];
					if (paso==sizeof(antonio)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==2)
						play_voice(s_takuma20,512,256);
					end
					if (paso==1 or paso==7)
						if (flags) x+=5; else x-=5; end
					end
					if (paso==61 or paso==67)
						if (flags) x-=5; else x+=5; end
					end
				end
				if (luchador==FIGHTER_K)
					graph=mofa_k[paso++];
					if (paso==sizeof(mofa_k)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==7)
						if (rand(0,1)==0) play_voice(s_k15,512,256);
						else play_voice(s_k18,512,256); end
					end
				end
				if (luchador==FIGHTER_KULA)//a salido guasona la barbi
					graph=burla_kula[paso++];
					if (paso==sizeof(burla_kula)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==7)
						play_voice(s_kura26,412,256);
					end
				end
				if (luchador==FIGHTER_K9999)//numero 49
					graph=bu_tetsuo[paso++];
					if (paso==sizeof(bu_tetsuo)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==2)
						play_voice(s_tetsuo21,512,256);
					end	
				end
				if (paso==1 and enemigo.power<>74)
					enemigo.power-=14;
				end
				
				//para poder interrumpirla
				if (paso>=5 and not control(guasa))
					if (control(avanzar) or control(retroceder) or
						control(agachar))
						stop_voice (id);
					end
					if (control(avanzar)) nuevo_estado=_avanzar; end
					if (control(retroceder)) nuevo_estado=_retroceder; end
					if (control(agachar)) nuevo_estado=_agachar; end
				end
			end
			
			//puo flojo lejos
			case _lpunch1:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94)//KYO
					graph=lpunch1[paso++]+15;
					if (paso==sizeof(lpunch1)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==2)
						if (rand(0,2)==0) voz=1; end
						play_snd (s_airp,300,256);
					end
					if (graph==37 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,1,607,4,0,10,7,id);
					end
					if (graph==37 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					graph=lpunch1_ATH[paso++];
					if (paso==sizeof(lpunch1_ATH)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==8)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==53 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,1,997,4,0,12,7,id);
					end
					if (graph==53 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)//usted
					graph=lpunch1_vd[paso++];
					if (paso==sizeof(lpunch1_vd)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==5)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==48 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,1,701,4,0,10,7,id);
					end
					if (graph==48 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)//TERRY
					graph=lpunch1[paso++];
					if (paso==sizeof(lpunch1)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==3)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==22 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,1,507,4,0,10,7,id);
					end
					if (graph==22 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_KASUMI)
					if (paso==0)
						if (control(avanzar)) intensidad=1;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=lpunch1_kas[paso++];
						if (paso==sizeof(lpunch1_kas)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==3)
							if (rand(0,2)==0) voz=1; end
							play_snd (s_airp,300,256);
						end
						if (graph==27 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,2,1,536,4,0,10,7,id);
						end
						if (graph==27 and ive_hit==0) ive_hit--; end
					end
					if (intensidad==1)
						graph=lpunch3_kas[paso++];
						if (paso==sizeof(lpunch3_kas)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==1)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==5 or paso==7 or paso==13)
							if (flags) x-=12; else x+=12; end
						end
						if (paso==29 or paso==37 or paso==43 or paso==47)
							if (flags) x+=12; else x-=12; end
						end
						if (paso==13) voz=2;
							play_voice(s_kasumi19,512,256);
							play_snd (s_airp,300,256);
						end
						if (graph==133 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,5,2,501,5,0,5,7,id);
						end
						if (graph==133 and ive_hit==0)
							if (he_dado==0) ive_hit++; else ive_hit--; end
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					if (paso==0)
						if (control(avanzar)) intensidad=1;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=lpunch1_taku[paso++];
						if (paso==sizeof(lpunch1_taku)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==3) play_snd (s_airp,300,256);
							if (rand(0,2)==0) voz=1; end
						end
						if (graph==26 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							if (flags)
								golpe(hit_x+8,hit_y,2,1,502,4,0,10,7,id);
							else
								golpe(hit_x-8,hit_y,2,1,502,4,0,10,7,id);
							end
						end
						if (paso==3 and ive_hit==0) ive_hit--; end
					end
					if (intensidad>0)
						graph=lpunch3_taku[paso++];
						if (paso==sizeof(lpunch3_taku)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==3 or paso==5)
							if (flags) x-=4; else x+=4; end
						end
						if (paso==6)
							play_snd (s_airp,300,256); ive_hit=1; voz=1;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x+8,hit_y,1,2,502,6,0,10,7,id);
						end
						if (he_dado==0 and control(avanzar) and control(l_kick))
							nuevo_estado=_lkick1; intensidad=1; nuevo_paso=1;
							if (enemigo.y==220 and enemigo.paso<6)
								enemigo.inc_x=0;
							end
						end
						if (((control(s_kick) and sk_bloker==0) or
							(control(s_punch) and sp_bloker==0)) and hado<11 and
							he_dado==0 and enemigo.y==220 and shoryu<20 and
							abs(enemigo.x-x)<60 and control(avanzar) and shokoh<39)
							nuevo_estado=_voltear; 
							enemigo.estado=enemigo.nuevo_estado=100;
							enemigo.z=z+1;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
								enemigo.graph=410;
							else
								enemigo.graph=411;
							end
							if (control(s_kick)) inc_x=1;
							else inc_x=0; end
						end
					end
				end
				if (luchador==FIGHTER_K)//K
					if (paso==0)
						if (control(avanzar)) intensidad=1;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=lpunch1_k[paso++];
						if (paso==sizeof(lpunch1_k)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==3)
							if (rand(0,2)==0) voz=1; end
							play_snd (s_airp,300,256);
						end
						if (graph==83 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,2,1,505,4,0,10,7,id);
						end
						if (graph==83 and ive_hit==0) ive_hit--; end
					else
						graph=lpunch5_k[paso++];
						if (paso==sizeof(lpunch5_k)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==9)
							play_snd (s_airp,300,256); voz=-2;
							if (enemigo.y=>220) tembleque(1,1);
							else tembleque(1,-1); end
						end
						if (graph==328 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							if (enemigo.hit_combo>0 and enemigo.y==220)
								golpe(hit_x,hit_y,4,4,503,5,0,10,12,id);
								if (ive_hit==0) ive_hit++; end
							else
								golpe(hit_x,hit_y,-7,5,501,10,0,10,12,id);
								if (ive_hit==0) ive_hit--; end
							end
						end
					end
				end
				if (luchador==FIGHTER_KULA or luchador==FIGHTER_K9999)
					nuevo_estado=_lpunch2; paso=nuevo_paso;
				end
				
				///parte general///
				if (((luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94 or
					luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) and paso>6) or
					((luchador==FIGHTER_ATHENA or luchador==FIGHTER_IORI or
					luchador==FIGHTER_CRIMSON) and paso>8) or
					(luchador==FIGHTER_KASUMI and paso>6 and intensidad==0) or
					(luchador==FIGHTER_K and paso>6 and intensidad==0) or
					(luchador==FIGHTER_TAKUMA and paso>8 and intensidad==0))
					if (control(l_punch) and lp_bloker==0 and intensidad==0)
						if (control(agachar))
							nuevo_estado=_lpunchaga;
							if (luchador==FIGHTER_KYO or luchador==FIGHTER_TERRY or
								luchador==FIGHTER_KYO94 or luchador==FIGHTER_TERRY94 or
								luchador==FIGHTER_KASUMI or luchador==FIGHTER_K)
								nuevo_paso=0;
							else
								nuevo_paso=2;
							end
						else
							if (control(avanzar)) intensidad=1;
							else intensidad=0; end
							if (luchador==FIGHTER_KYO or luchador==FIGHTER_TERRY or
								luchador==FIGHTER_KYO94 or luchador==FIGHTER_TERRY94 or luchador==FIGHTER_K)
								paso=0; he_dado=1;
							else
								paso=1; he_dado=1;
							end
						end
					end
				end
			end
			
			//puo flojo de cerca
			case _lpunch2: 
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)////KYO
					graph=lpunch2_KYO[paso++];
					if (paso==sizeof(lpunch2_KYO)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (control(l_punch) and shoryu<20 and hado<11 and paso>6)
						if (control(l_punch) and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=0;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1; nuevo_paso=1;
								end
								if (abs(enemigo.x-x)<=54)
									paso=0; he_dado=1;
								end
							end
						end
					end
					if (control(l_kick) and hado<11 and paso>6 and
						hado>-11 and shoryu>-20 and lk_bloker==0)
						if (control(agachar))
							nuevo_estado=_lkickaga;
							if (control(avanzar)) intensidad=1;
							else intensidad=0; nuevo_paso=2; end
						else
							if (abs(enemigo.x-x)>=55)
								nuevo_estado=_lkick1;
							end
							if (abs(enemigo.x-x)<=54)
								nuevo_estado=_lkick2; nuevo_paso=1;
							end
						end
					end
					if (paso==1)
						play_snd (s_airp,300,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (graph==106 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,1,613,4,0,10,7,id);
					end
					if (graph==106 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					graph=lpunch2_ath[paso++];
					if (paso==sizeof(lpunch2_ath)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso>7)
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=2;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1; nuevo_paso=2;
								end
								if (abs(enemigo.x-x)<=54)
									paso=1; graph=51; he_dado=1;
								end
							end
						end
						if (control(l_kick) and hado>-11 and
							hado<11 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=2;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=54)
									nuevo_estado=_lkick2; nuevo_paso=2;
								end
							end
						end
						if (control(s_punch) and hado>-11 and
							hado<11 and lk_bloker==0)
							nuevo_estado=_spunch2; nuevo_paso=2;
						end
					end
					if (paso==2)
						play_snd (s_airp,300,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (graph==65 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,1,550,4,0,10,7,id);
					end
					if (graph==65 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					graph=lpunch2_vd[paso++];
					if (paso==sizeof(lpunch2_vd)/DIV) dos=0;
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=4;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1; nuevo_paso=2;
								end
								if (abs(enemigo.x-x)<=54)
									paso=4; he_dado=1;
								end
							end
						else
							nuevo_estado=_normal;
						end
					end
					if (paso==2)
						play_snd (s_airp,300,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (graph==73 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,1,705,4,0,10,7,id);
					end
					if (graph==73 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					graph=lpunch2[paso++];
					if (paso==sizeof(lpunch2)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==3)
						play_snd (s_airp,300,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (paso>6)
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=0;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1; nuevo_paso=0;
								end
								if (abs(enemigo.x-x)<=54)
									paso=0; he_dado=1;
								end
							end
						end
						if (control(l_kick) and hado>-11 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=2;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=54)
									nuevo_estado=_lkick2; nuevo_paso=2;
								end
							end
						end
					end
					if (graph==97 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,1,507,4,0,10,7,id);
					end
					if (graph==97 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KASUMI)
					if (paso==0)
						if (control(avanzar))
							nuevo_estado=_lpunch1;
							nuevo_paso=1; intensidad=1;
						end
					end
					graph=lpunch2_kas[paso++];
					if (paso==sizeof(lpunch2_kas)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==3)
						if (rand(0,4)==0) voz=1; end
						play_snd (s_airp,300,256);
					end
					if (graph==48 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,1,503,4,0,10,7,id);
					end
					if (paso>6 and shoryu<20 and hado<11 and hado>-11)
						if (control(l_punch) and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=3;
							else
								if (control(avanzar)) intensidad=1;
								else intensidad=0; end
								if (abs(enemigo.x-x)>=55 or intensidad==1)
									nuevo_estado=_lpunch1; nuevo_paso=1;
								end
								if (abs(enemigo.x-x)<=54 and intensidad==0)
									paso=0; he_dado=1;
								end
							end
						end
						if (control(l_kick) and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=54)
									nuevo_estado=_lkick2; nuevo_paso=1;
								end
							end
						end
					end
					if (graph==48 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_TAKUMA)//antoete
					if (paso==0)
						if (control(avanzar))
							nuevo_estado=_lpunch1;
							nuevo_paso=1; intensidad=1;
						end
					end
					graph=lpunch2_taku[paso++];
					if (paso==sizeof(lpunch2_taku)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==3) play_snd (s_airp,300,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (graph==52 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,1,501,4,0,10,7,id);
					end
					if (paso>8 and shoryu<20 and hado<11 and hado>-11)
						if (control(l_punch) and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=3;
							else
								if (control(avanzar)) intensidad=1;
								else intensidad=0; end
								if (abs(enemigo.x-x)>=55 or intensidad==1)
									nuevo_estado=_lpunch1; nuevo_paso=5;
								end
								if (abs(enemigo.x-x)<=54 and intensidad==0)
									paso=0; he_dado=1;
								end
							end
						end
						if (control(s_punch) and sp_bloker==0)
							if (abs(enemigo.x-x)>=60)
								nuevo_estado=_spunch1; nuevo_paso=7; intensidad=0;
							end
							if (abs(enemigo.x-x)<=59)
								nuevo_estado=_spunch2; nuevo_paso=3;
							end
						end
						if (control(l_kick) and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=54)
									nuevo_estado=_lkick2; nuevo_paso=1;
								end
							end
						end
					end
					if (((control(s_kick) and sk_bloker==0) or
						(control(s_punch) and sp_bloker==0)) and hado<11 and
						he_dado==0 and enemigo.y==220 and shoryu<20 and
						abs(enemigo.x-x)<60 and control(avanzar) and shokoh<39)
						nuevo_estado=_voltear; 
						enemigo.estado=enemigo.nuevo_estado=100;
						enemigo.z=z+1;
						if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
							enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
							enemigo.graph=410;
						else
							enemigo.graph=411;
						end
						if (control(s_kick)) inc_x=1;
						else inc_x=0; end
					end
					if (graph==48 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_K)//K
					if (paso==0)
						if (control(avanzar))
							nuevo_estado=_lpunch1;
							nuevo_paso=1; intensidad=1;
						end
					end
					graph=lpunch2_k[paso++];
					if (paso==sizeof(lpunch2_k)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==5)
						play_snd (s_airp,300,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (paso>8)
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=3;
							else
								if (control(avanzar)) intensidad=1;
								else intensidad=0; end
								if (abs(enemigo.x-x)>=55)
								   nuevo_estado=_lpunch1; nuevo_paso=1;
								end
								if (abs(enemigo.x-x)<=54)
									paso=1; he_dado=1;
								end
							end
						else
							nuevo_estado=_normal;
						end
					end
					if (graph==140 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,1,505,4,0,10,7,id);
					end
					if (graph==140 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_KULA)
					if (paso==0)
						if (control(avanzar)) intensidad=1;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=lpunch1_kula[paso++];
						if (paso==sizeof(lpunch1_kula)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==5)
							play_snd (s_airp,300,256);
							get_real_point(1,&Hit_x,&hit_y);
							pegata (hit_x,hit_y,517,c_scroll,flags,100,z-2,118,file);
							if (rand(0,4)==0) voz=1; end
						end
						if (graph==54 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,2,7,527,4,0,10,7,id);
						end
						if (graph==54 and ive_hit==0) ive_hit++; end
						if (paso>8 and shoryu<20 and hado<11)
							if (control(l_punch) and lp_bloker==0)
								if (control(agachar))
									nuevo_estado=_lpunchaga; nuevo_paso=1;
								else
									if (control(avanzar)) intensidad=1;
									else intensidad=0; end
									paso=0; he_dado=1;
								end
							end
						end
					end
					if (intensidad==1)
						graph=lpunch4_kula[paso++];
						if (paso==sizeof(lpunch4_kula)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==9)
							play_snd (s_airp,300,256); voz=-2;
							if (enemigo.y=>220) tembleque(1,1);
							else tembleque(1,-1); end
						end
						if (graph==156 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							if (enemigo.hit_combo>0 and enemigo.y==220)
								golpe(hit_x,hit_y,4,4,527,4,0,10,12,id);
								if (ive_hit==0) ive_hit++; end
							else
								golpe(hit_x,hit_y,-7,5,527,8,0,10,12,id);
								if (ive_hit==0) ive_hit--; end
							end
						end
					end
					if (paso==9 and control(l_punch) and
						lp_bloker==0 and intensidad==0)
						paso=1; he_dado=1;
						if (control(avanzar)) paso=0; end
						if (control(agachar))
							nuevo_estado=_lpunchaga; nuevo_paso=1;
						end
					end
				end
				if (luchador==FIGHTER_K9999)
				   if (paso==0)
					  if (control(avanzar)) intensidad=1;
					  else intensidad=0; end
				   end
				   if (intensidad==0)
						graph=lpunch1_tetsuo[paso++];
						if (paso==sizeof(lpunch1_tetsuo)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==4)
							play_snd (s_airp,300,256);
							if (rand(0,2)==0) voz=1; end
						end
						if (graph==48 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,21,7,502,4,0,10,7,id);
						end
						if (graph==48 and ive_hit==0) ive_hit++; end
					else
						graph=spunch1_tetsuo[paso++];
						if (paso==sizeof(spunch1_tetsuo)/DIV)
							dos=0; nuevo_estado=_normal;
							if (enemigo.estado==_recibir_toss)
								enemigo.vulnerable=0;
							end
						end
						if (paso==9)
							if (flags) inc_x=-7; else inc_x=7; end
							play_snd (s_tetsuo1,320,256);
						end
						if (paso>12) x+=inc_x;
							if (game_frame%2==0)
								if (inc_x>0) inc_x--; end
								if (inc_x<0) inc_x++; end
							end	
						end
						if (paso>12 and paso<23)
							if (enemigo.estado==_recibir_toss and he_dado==0)
								enemigo.vulnerable=1;
							end
							if (paso%2==0)
								get_real_point(1,&Hit_x,&hit_y);
								golpe(hit_x,hit_y,10,4,501,2,0,3,3,id);
							end	
						end
						if (graph==60 and ive_hit==0) ive_hit--; end
					end
				end
			end
			
			//patada floja
			case _lkick1:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)//KYO
					graph=lkick1_KYO[paso++];
					if (paso==sizeof(lkick1_KYO)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso>=14)
						if (control(l_KICK) and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga;
							else
								paso=0; he_dado=1;
							end
						end
					end
					if (paso==8)
						play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==41 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,3,602,4,0,10,7,id);
					end
					if (graph==41 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA A.
					graph=lkick1_ATH[paso++];
					if (paso==sizeof(lkick1_ATH)/DIV) dos=0;
						if (control(l_KICK) and control(agachar) and
							lk_bloker==0) nuevo_estado=_lkickaga;
						else
							nuevo_estado=_normal;
						end
					end
					if (paso==7)
						play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==57 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,3,996,4,0,12,7,id);
					end
					if (graph==57 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					if (paso==0 and luchador==FIGHTER_CRIMSON and 
						control(avanzar))
						nuevo_estado=_lkick2;
					end
					graph=lkick1_vd[paso++];
					if (paso==sizeof(lkick1_vd)/DIV) dos=0;
						if (control(l_KICK) and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga;
							else
								paso=0;
							end
						else
							nuevo_estado=_normal;
						end
					end
					if (paso==7) play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==53 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,6,3,701,4,0,10,7,id);
					end
					if (graph==53 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					graph=lkick1[paso++];
					if (paso==sizeof(lkick1)/DIV) dos=0;
						if (control(l_KICK) and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga;
							else
								paso=0; he_dado=1;
							end
						else
							nuevo_estado=_normal;
						end
					end
					if (paso==7)
						play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==25 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,3,510,4,0,10,7,id);
					end
					if (graph==25 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=lkick1_kasu[paso++];
					if (paso==sizeof(lkick1_kasu)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==1 or paso==3 or paso==17 or paso==23)
						if (flags) x-=12; else x+=12; end
					end
					if (graph==33 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,3,501,4,0,10,7,id);
					end
					if (graph==33 and ive_hit==0) ive_hit--;
						if (rand(0,2)==0) voz=1; end
						play_snd (s_airt,320,256);
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					if (paso==0)
						if (control(avanzar)) intensidad=1;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=lkick1_taku[paso++];
						if (paso==sizeof(lkick1_taku)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso>2 and paso<9)
							if (flags)x-=3; else x+=3;end
						end
						if (paso>12)
							if (flags)x+=3; else x-=3;end
						end
						if (paso==7) play_snd (s_airk,400,256);
							if (rand(0,2)==0) voz=1; end
						end
						if (graph==31 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,2,3,501,4,0,10,7,id);
						end
						if (graph==31 and ive_hit==0) ive_hit--; end
					end
					if (intensidad>0)
						graph=lkick3_taku[paso++];
						if (paso==sizeof(lkick3_taku)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso==3 or paso==5)
							if (flags) x-=5; else x+=5; end
						end
						if (paso==11) voz=2; end
						if (paso==39 or paso==47)
							if (flags) x+=5; else x-=5;end
						end
						if (paso==15) play_snd (s_airk,400,256); ive_hit--;
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,5,2,501,8,0,10,7,id);
						end
						if (((control(s_kick) and sk_bloker==0) or
							(control(s_punch) and sp_bloker==0)) and hado<11 and
							he_dado==0 and enemigo.y==220 and shoryu<20 and
							abs(enemigo.x-x)<60 and control(avanzar))
							nuevo_estado=_voltear; 
							enemigo.estado=enemigo.nuevo_estado=100;
							enemigo.z=1;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
								enemigo.graph=410;
							else
								enemigo.graph=411;
							end
							if (control(s_kick)) inc_x=1;
							else inc_x=0; end
						end
					end
				end
				if (luchador==FIGHTER_K)
					if (paso==0)
						if (control(avanzar)) intensidad=1;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=lkick1_k[paso++];
						if (paso==sizeof(lkick1_k)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso==4 or paso==7)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==16 or paso==19)
							if (flags) x+=10; else x-=10; end
						end
						if (graph==89 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,6,3,501,4,0,10,7,id);
						end
						if (graph==89 and ive_hit==0) ive_hit--;
							play_snd (s_airk,320,256);
							if (rand(0,2)==0) voz=1; end
						end
					else
						graph=lkick6_k[paso++];
						if (paso==sizeof(lkick6_k)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso>2 and paso<9)
							if (flags) inc_x=-5; else inc_x=5; end
						end
						x+=inc_x;
						if (paso==7) inc_y=-3; end
						if (paso>8 and paso<35) 
							y+=inc_y; 
							if (game_frame%3==0) inc_y++; end
							if (y>220) paso=35; end
							if (inc_x>0) inc_x--; end
							if (inc_x<0) inc_x++; end
						end
						if (paso==35) y=220; end
						if (graph==336 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,4,501,7,0,10,10,id);
						end
						if (graph==336 and ive_hit==0) ive_hit++;
							play_snd (s_airk,320,256); voz=-2;
						end
					end
				end
				if (luchador==FIGHTER_KULA or luchador==FIGHTER_K9999)
				   nuevo_estado=_lkick2;
				end
			end
			
			//patada floja de cerca
			case _lkick2:
				tipo_ataque=NORMAL;
				
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94)
					
					tipo_ataque=BAJO;
					graph=lkick2_KYO[paso++];
					if (paso==sizeof(lkick2_KYO)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==4)
						play_snd (s_airk,400,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (paso>8)
						if (control(l_punch) and shoryu<20 and
							hado<11 and lp_bloker==0)
							if (control(l_punch))
								if (control(agachar))
									nuevo_estado=_lpunchaga;
								else
									if (abs(enemigo.x-x)>=55)
										nuevo_estado=_LPUNCH1;
									end
									if (abs(enemigo.x-x)<=54)
										nuevo_estado=_lpunch2;;
									end
								end
								nuevo_paso=4;
							end
						end
						if (control(l_KICK) and hado<11 and shoryu<20 and
							hado>-11 and shoryu>-20 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga;
								if (control(avanzar)) intensidad=1;
								else intensidad=0; nuevo_paso=2; end
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=54)
									paso=2; he_dado=1;
								end
							end
						end
					end
					if (graph==107 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,6,3,608,4,0,10,7,id);
					end
					if (graph==107 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					graph=lkick2_ATH[paso++];
					if (paso==sizeof(lkick2_ATH)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso>7)
						if (control(l_punch) and lp_bloker==0 and
							shoryu<20 and hado<11 and hado>-11)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=2;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1; nuevo_paso=2;
								end
								if (abs(enemigo.x-x)<=54)
									nuevo_estado=_lpunch2; nuevo_paso=2;
								end
							end
						end
						if (control(l_kick) and hado>-11 and
							hado<11 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=2;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1; nuevo_paso=2;
								end
								if (abs(enemigo.x-x)<=54)
									paso=2; he_dado=1;
								end
							end
						end
						if (control(s_kick) and hado>-11 and
							hado<11 and lk_bloker==0)
							nuevo_estado=_skick2; nuevo_paso=2;
						end
					end
					if (paso==3)
						play_snd (s_airk,400,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (graph==67 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,2,3,996,4,0,12,7,id);
					end
					if (graph==67 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)//iori usted
					if (paso==0)
						tipo_ataque=BAJO;
						if (luchador==FIGHTER_CRIMSON and control(avanzar))
							intensidad=2;
						else
							intensidad=1;
						end
					end
					if (intensidad==1)
						graph=lkick2_vd[paso++];
						if (paso==sizeof(lkick2_vd)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso>8)
							if (control(l_kick) and hado>-11 and 
								lk_bloker==0)
								if (control(agachar))
									nuevo_estado=_lkickaga; nuevo_paso=1;
								else
									if (abs(enemigo.x-x)>=55)
										nuevo_estado=_lkick1;
									end
									if (abs(enemigo.x-x)<=54)
										paso=1; he_dado=1;
									end
								end
							end
						end
						if (paso==3)
							play_snd (s_airk,400,256);
							if (rand(0,4)==0) voz=1; end
						end
						if ((graph==75 or graph==76) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,6,3,709,4,0,10,7,id);
						end
						if (graph==75 and ive_hit==0) ive_hit++; end
					end
					if (intensidad==2)
						if (paso==0 or paso==2)
							if (flags) x-=12; else x+=12; end
						end
						graph=taconcr[paso++];
						if (paso==sizeof(taconcr)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==17)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,5,4,711,4,0,10,7,id);
							ive_hit++;
						end
						if (paso==19)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,5,4,702,4,0,10,7,id);
						end
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					graph=lkick2[paso++];
					if (paso==sizeof(lkick2)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso>8)
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=54)
									nuevo_estado=_lpunch2;
								end
							end
							nuevo_paso=3;
						end
						if (control(l_kick) and hado>-11 and
							hado<11 and shoryu>-20 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=54)
									paso=2; he_dado=1;
								end
							end
						end
					end
					if (paso==3)
						play_snd (s_airk,400,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (graph==99 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,3,508,4,0,10,7,id);
					end
					if (graph==99 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=lkick2_kasu[paso++];
					if (paso==sizeof(lkick2_kasu)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (graph==52 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,3,503,4,0,10,7,id);
					end
					if (graph==52 and ive_hit==0) ive_hit++;
						if (rand(0,4)==0) voz=1; end
						play_snd (s_airt,320,256);
					end
					if (paso>8)
						if (control(l_punch) and shoryu<20 and hado>-11 and
							hado<11 and lp_bloker==0)
							nuevo_paso=3;
							if (control(l_punch))
								if (control(agachar))
									nuevo_estado=_lpunchaga;
								else
									if (control(avanzar)) intensidad=1;
									else intensidad=0; end
									if (abs(enemigo.x-x)>=55 or intensidad==1)
										nuevo_estado=_lpunch1; nuevo_paso=1;
									end
									if (abs(enemigo.x-x)<=54 and intensidad==0)
										nuevo_estado=_lpunch2;
									end
								end
							end
						end
						if (control(l_kick) and hado<11 and shoryu<20 and
							hado>-11 and shoryu>-20 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1; nuevo_paso=1;
								end
								if (abs(enemigo.x-x)<=54)
									paso=1; he_dado=1;
								end
							end
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)//karate
					if (paso==0)
						if (control(avanzar))
							nuevo_estado=_lkick1;
							nuevo_paso=1; intensidad=1;
						end
					end
					graph=lkick2_taku[paso++];
					if (paso==sizeof(lkick2_taku)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso>2 and paso<7)
						if (flags)x-=4; else x+=4; end
					end
					if (paso>10 and paso<15)
						if (flags)x+=4; else x-=4; end
					end
					if (graph==56 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,3,501,4,0,10,7,id);
					end
					if (graph==56 and ive_hit==0) ive_hit++;
						play_snd (s_airk,400,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (paso>10)
						if (control(l_punch) and shoryu<20 and hado>-11 and
							hado<11 and lp_bloker==0) nuevo_paso=2;
							if (control(l_punch))
								if (control(agachar))
									nuevo_estado=_lpunchaga;
								else
									if (control(avanzar)) intensidad=1;
									else intensidad=0; end
									if (abs(enemigo.x-x)>=55 or intensidad==1)
										nuevo_estado=_lpunch1; nuevo_paso=1;
									end
									if (abs(enemigo.x-x)<=54 and intensidad==0)
										nuevo_estado=_lpunch2;;
									end
								end
							end
						end
						if (control(l_kick) and hado<11 and shoryu<20 and
							hado>-11 and shoryu>-20 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=1;
							else
								if (control(avanzar)) intensidad=1;
								else intensidad=0; end
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1; nuevo_paso=3;
								end
								if (abs(enemigo.x-x)<=54)
									paso=1; he_dado=1;
								end
							end
						end
					end
					if (((control(s_kick) and sk_bloker==0) or
						(control(s_punch) and sp_bloker==0)) and hado<11 and
						he_dado==0 and enemigo.y==220 and shoryu<20 and
						abs(enemigo.x-x)<60 and control(avanzar) and shokoh<39)
						nuevo_estado=_voltear; 
						enemigo.estado=enemigo.nuevo_estado=100;
						enemigo.z=z+1;
						if (enemigo.luchador==FIGHTER_ATHENA or 
							enemigo.luchador==FIGHTER_IORI or
							enemigo.luchador==FIGHTER_CRIMSON or 
							enemigo.luchador==FIGHTER_KASUMI)
							enemigo.graph=410;
						else
							enemigo.graph=411;
						end
						if (control(s_kick)) inc_x=1;
						else inc_x=0; end
					end
				end
				if (luchador==FIGHTER_K)
					if (paso==0)
						tipo_ataque=BAJO;
						if (control(avanzar))
							nuevo_estado=_lkick1;
							nuevo_paso=1; intensidad=1;
						end
					end
					
					graph=lkick2_k[paso++];
					if (paso==sizeof(lkick2_k)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (graph==144 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,6,3,501,4,0,10,7,id);
					end
					if (graph==144 and ive_hit==0) ive_hit--;
						play_snd (s_airk,320,256);
						if (rand(0,4)==0) voz=1; end
					end
					if (paso>6)
						if (control(l_KICK) and hado>-11 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=1;
							else
								nuevo_estado=_lkick1;
								paso=1; he_dado=1;
							end
						end
					end
				end
				if (luchador==FIGHTER_KULA)
					graph=lkick1_kula[paso++];
					if (paso==sizeof(lkick1_kula)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso>8 and paso<33)
						if (flags) x-=1; else x+=1; end
					end
					if (paso==13 or paso==27)
						play_snd (s_airk,360,256);
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,4,3,525,4,0,10,7,id);
					end
					if (graph==64 and ive_hit==0) ive_hit--;
						if (rand(0,2)==0) voz=1; end
					end
					if (paso==15)
						if (he_dado==0 and enemigo.y==220)
							enemigo.inc_x=0;
						end
					end
				end
				if (luchador==FIGHTER_K9999)
					graph=lkick1_tetsuo[paso++];
					if (paso==sizeof(lkick1_tetsuo)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==5)
						play_snd (s_airk,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==53 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,6,3,504,4,0,10,7,id);
					end
					if (graph==53 and ive_hit==0) ive_hit++; end
					if (paso>8)
						if (control(l_KICK) and hado>-11 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=1;
							else
								nuevo_estado=_lkick1;
								paso=1; he_dado=1;
							end
						end
					end
				end
			end
			
			//puo fuerte
			case _spunch1:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94)
					if (intensidad==0)
						graph=spunch1_KYO[paso++];
						if (paso==sizeof(spunch1_KYO)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (graph==45 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,2,605,10,0,20,8,id);
						end
						if (graph==45 and ive_hit==0) ive_hit++; end
						if (paso==11)
							play_snd (s_airp,300,256); voz=2;
						end
					end
					if (intensidad==1 or intensidad==2)
						if (paso==0) play_snd (s_dash,180,256); ive_hit++;
							pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
							if (flags) inc_x=-6; else inc_x=6; end
						end
						graph=spunch5_kyo[paso++];
						if (paso==sizeof(spunch5_kyo)/DIV)
							dos=0; nuevo_estado=_normal; intensidad=0;
						end
						x+=inc_x;
						if ((inc_x>0) and (game_frame%2==0)) inc_x--; end
						if ((inc_x<0) and (game_frame%2==0)) inc_x++; end
						if (paso==8) play_snd (s_jump,512,256); end
						if (paso==18) play_snd (s_airp,425,270); voz=2;
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,7,5,600,15,0,12,12,id);
						end
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA A.
					if (intensidad==0)
						graph=spunch1_ath[paso++];
						if (paso==sizeof(spunch1_ath)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==9)
							if (flags) x-=14; else x+=14; end
						end
						if (paso==23)
							if (flags) x+=14; else x-=14; end
						end
						if (graph==40 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,4,2,997,10,0,24,8,id);
						end
						if (graph==40 and ive_hit==0) ive_hit--; end
					end
					if (intensidad==1 or intensidad==2)
						if (paso==0) play_snd (s_dash,256,256);
							pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
							if (flags) inc_x=-8; else inc_x=8; end
						end
						graph=spunch5_ATH[paso++];
						if (paso==sizeof(spunch5_ATH)/DIV)
							dos=0; nuevo_estado=_normal; intensidad=0;
						end
						x+=inc_x;
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
						if (graph==190 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,7,5,991,15,0,12,12,id);
						end
						if (graph==190 and ive_hit==0) ive_hit++; end
					end
					if (paso==10+intensidad)
						play_snd (s_airp,300,256); voz=2;
					end
				end
				if (luchador==FIGHTER_IORI)//usted
					if (intensidad==0)
						graph=spunch1_vd[paso++];
						if (paso==sizeof(spunch1_vd)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==11)
							play_snd (s_airp,300,256); voz=2;
						end
						if (graph==58 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,9,7,702,10,0,20,8,id);
						end
						if (graph==58 and ive_hit==0) ive_hit++; end
					end
					if (intensidad==1 or intensidad==2)
						nuevo_estado=_uatras_punch; intensidad=-21;
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					if (intensidad==0)
						graph=spunch1[paso++];
						if (paso==sizeof(spunch1)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (graph==30 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,2,507,10,0,20,8,id);
						end
						if (graph==30 and ive_hit==0) ive_hit--; end
					end
					if (intensidad==1 or intensidad==2) intensidad=2;
						if (paso==0) play_snd (s_dash,256,256); ive_hit++;
							pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
							if (flags) inc_x=-6; else inc_x=6; end
						end
						graph=spunch5[paso++];
						if (paso==sizeof(spunch5)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						x+=inc_x;
						if (inc_x>0 and (game_frame%2==0)) inc_x--; end
						if (inc_x<0 and (game_frame%2==0)) inc_x++; end
						if (graph==196 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,2,509,10,0,20,8,id);
						end
						if (graph==196 and ive_hit==0) ive_hit++; end
					end
					if (paso==11+intensidad)
						play_snd (s_airp,300,256); voz=2;
					end
				end
				if (luchador==FIGHTER_CRIMSON)
					if (intensidad==0)
						graph=fogata2[paso++];
						if (paso==sizeof(fogata2)/div)
							nuevo_estado=_normal;
						end
						if (paso==1 or paso==5 or paso==9 or paso==13)
							if (flags) x-=5; else x+=5; end
						end
						if (paso==9)
							play_snd (s_airp,300,256); voz=2;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,2,704,10,0,20,8,id);
							ive_hit++;
						end
					end
					if (intensidad==1 or intensidad==2)
						nuevo_estado=_uatras_punch; intensidad=-21;
					end
				end
				if (luchador==FIGHTER_KASUMI)
					if (intensidad==0)
						graph=spunch1_kas[paso++];
						if (paso==sizeof(spunch1_kas)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso==1)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==11 or paso==13 or paso==15)
							if (flags) x-=12; else x+=12; end
						end
						if (paso==37 or paso==41 or paso==43)
							if (flags) x+=12; else x-=12; end
						end
						if (paso==13)
							play_snd (s_airp,300,256); voz=2;
						end
						if ((paso==13 or paso==21) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,2,501,10,0,10,8,id);
						end
						if (graph==38 and ive_hit==0) ive_hit--; he_dado=1; end
					else
						nuevo_estado=_toss1; 
						nuevo_paso=1; intensidad=1;
						//inc_x=inc_x>>2;
					end
				end
				if (luchador==FIGHTER_TAKUMA)//takumita
					if (intensidad>0)
						if (paso==0) play_snd (s_dash,180,256); ive_hit++;
							pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
							if (flags) inc_x=-6; else inc_x=6; end
						end
						x+=inc_x;
						if (inc_x>0 and (game_frame%2==0)) inc_x--; end
						if (inc_x<0 and (game_frame%2==0)) inc_x++; end
					end
					graph=spunch1_taku[paso++];
					if (paso==sizeof(spunch1_taku)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==11)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==36 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (intensidad==0)
							golpe(hit_x,hit_y+4,1,2,502,10,0,10,8,id);
						else
							golpe(hit_x,hit_y+4,1,2,502,15,0,12,12,id);
						end
					end
					if (graph==36 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_K)//orochi
					if (intensidad==0)
						graph=spunch1_k[paso++];
						if (paso==sizeof(spunch1_k)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==9)
							play_snd (s_airp,300,256); voz=2;
						end
						if (graph==61 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,2,505,10,0,20,8,id);
						end
						if (graph==61 and ive_hit==0) ive_hit--; end
					else
						if (paso==0) play_snd (s_dash,180,256);
							pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
							if (flags) inc_x=-6; else inc_x=6; end
						end
						graph=spunch5_k[paso++];
						if (paso==sizeof(spunch5_k)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==9)
							play_snd (s_airp,300,256); voz=2;
						end
						if (graph==343 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,4,2,505,10,0,20,8,id);
						end
						if (graph==343 and ive_hit==0) ive_hit++; end
						x+=inc_x;
						if (inc_x>0 and (game_frame%2==0)) inc_x--; end
						if (inc_x<0 and (game_frame%2==0)) inc_x++; end
					end
				end
				if (luchador==FIGHTER_KULA)
					graph=spunch1_kula[paso++];
					if (paso==sizeof(spunch1_kula)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==9)
						get_real_point(1,&Hit_x,&hit_y);
						pegata (hit_x,hit_y,517,c_scroll,flags,100,z-2,119,file);
						play_snd (s_airp,300,256); voz=2;
					end
					if (paso==1 or paso==5)
						if (flags) x-=12; else x+=12; end
					end
					if (paso==37 or paso==41)
						if (flags) x+=12; else x-=12; end
					end
					if ((graph==83 or graph==84) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,527,8,0,20,8,id);
					end
					if (graph==83 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_K9999)
					if (paso==0)
						if (intensidad==1)
							nuevo_estado=_lpunch2; nuevo_paso=4;
						else
							paso=3;
						end
					end
					graph=spunch1_tetsuo[paso++];
					if (paso==sizeof(spunch1_tetsuo)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==13)
						play_snd (s_airp,300,356); voz=2;
					end
					if (paso>12 and paso<23)
						if (paso%2==0)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,2,501,2,0,3,3,id);
						end	
					end
					if (graph==60 and ive_hit==0) ive_hit--; end
				end
			end
			
			//puo fuerte cerca
			case _spunch2:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)//KYO
					graph=spunch2_KYO[paso++];
					if (paso==sizeof(spunch2_KYO)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==3)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==88 AND he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,509,10,0,22,8,id);
					end
					if (graph==88 and ive_hit==0) ive_hit++; end
					if (graph==89 AND he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,604,10,0,22,8,id);
					end
					if (luchador==FIGHTER_KYO94 and control(avanzar) and
						control(s_kick) and he_dado==0)
						nuevo_estado=_skick1; enemigo.inc_x=0;
						nuevo_paso=6; intensidad=2;
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					graph=spunch2_ATH[paso++];
					if (paso==sizeof(spunch2_ATH)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==7)
						play_snd (s_airp,300,256);
						if (rand(0,1)==0) voz=2; end
					end
					if (graph==59 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (flags) hit_x=hit_x-12;
						else hit_x=hit_x+12; end
						golpe(hit_x,hit_y,4,2,997,10,0,24,8,id);
					end
					if (graph==59 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)//IORI
					graph=spunch2_vd[paso++];
					if (paso==sizeof(spunch2_vd)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==5)
						play_snd (s_airp,300,256);
						if (rand(0,1)==0) voz=2; end
					end
					if ((graph==79 or graph==80) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,500,10,0,22,8,id);
					end
					if (graph==79 and ive_hit==0) ive_hit++; end
					if (graph==81 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,703,10,0,22,8,id);
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)//TERRY
					graph=spunch2[paso++];
					if (paso==sizeof(spunch2)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==13) he_dado=1;
						play_snd (s_airp,300,256);
						if (rand(0,1)==0) voz=2; end
					end
					if (graph==40 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (luchador==FIGHTER_TERRY) inc_y=5; else inc_y=10; end
						golpe(hit_x,hit_y,4,2,555,inc_y,0,12,7,id);
					end
					if (graph==41 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,508,5,0,12,8,id);
					end
					if (graph==40 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=spunch2_kas[paso++];
					if (paso==sizeof(spunch2_kas)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==7)
						if (rand(0,1)==0) voz=2; end
						play_snd (s_airp,300,256);
					end
					if (graph==57 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,502,10,0,20,8,id);
					end
					if (graph==57 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_TAKUMA)//takumita
					graph=spunch2_taku[paso++];
					if (paso==sizeof(spunch2_taku)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==7) play_snd (s_airp,300,256);
						if (rand(0,1)==0) voz=2; end
					end
					if (graph==58 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y+4,4,2,501,10,0,10,8,id);
					end
					if (graph==58 and ive_hit==0) ive_hit++; end
					if (((control(s_kick) and sk_bloker==0) or
						(control(s_punch) and sp_bloker==0)) and hado<11 and
						he_dado==0 and enemigo.y==220 and shoryu<20 and
						abs(enemigo.x-x)<60 and control(avanzar) and shokoh<39)
						nuevo_estado=_voltear; 
						enemigo.estado=enemigo.nuevo_estado=100;
						enemigo.z=z+1;
						if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
							enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
							enemigo.graph=410;
						else
							enemigo.graph=411;
						end
						if (control(s_kick)) inc_x=1;
						else inc_x=0; end
					end
				end
				if (luchador==FIGHTER_K)//orochi
					graph=spunch2_k[paso++];
					if (paso==sizeof(spunch2_k)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==11)
						if (rand(0,1)==0) voz=2; end
						play_snd (s_airp,300,256);
					end
					if (paso==7 or paso==11)
						get_real_point(1,&Hit_x,&hit_y);
						if (paso==7)
							golpe(hit_x,hit_y,4,2,501,6,0,10,10,id);
						else
							golpe(hit_x,hit_y,1,2,502,4,0,10,9,id);
						end
					end
					if (graph==126 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KULA)
					graph=spunch2_kula[paso++];
					if (paso==sizeof(spunch2_kula)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==5)
						play_snd (s_airp,300,256); voz=2;
					end
					if (paso==7)
						if (he_dado<>1 and enemigo.y==220)
							enemigo.inc_x=0;
						end
					end
					if (paso==11) he_dado=1; end
					if ((graph==100 or graph==104 or graph==105) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (graph==100)
							golpe(hit_x,hit_y,1,2,526,4,0,10,8,id);
						else
							golpe(hit_x,hit_y,4,2,525,4,0,10,8,id);
						end
					end
					if (graph==100 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_K9999)
					graph=spunch2_tetsuo[paso++];
					if (paso==sizeof(spunch2_tetsuo)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==5)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph>81 and graph<84)
						if (paso%2==0)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y+4,21,7,503,3,0,3,1,id);
						end	
					end
					if (graph==82 and ive_hit==0) ive_hit++; end
				end
			end
			
			// patada fuerte lejos
			case _skick1:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO)
					if (intensidad==0)
						graph=skick1_kyo[paso++];
						if (paso==sizeof(skick1_kyo)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==10 or paso==11 or paso==12)
							if (flags) x-=2; else x+=2; end
						end
						if (paso==16)
							play_snd (s_airk,400,256); voz=2;
						end
						if (graph==52 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,4,4,602,10,0,20,8,id);
						end
						if (graph==52 and ive_hit==0) ive_hit--; end
					end
					if (intensidad==1) graph=166;
						if (flags) x-=6; else x+=6; end
						nuevo_estado=_ayuken; nuevo_paso=6; intensidad=-11;
					end
				end
				if (luchador==FIGHTER_ATHENA)
					if (intensidad==0)
						graph=skick1_ATH[paso++];
						if (paso==sizeof(skick1_ATH)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (graph>45)
							if (flags) x-=1; else x+=1; end
						end
						if (graph==45 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,4,4,991,10,0,12,8,id);
						end
						if (graph==45 and ive_hit==0) ive_hit--; end
					end
					if (intensidad==1 or intensidad==2)
						graph=skick5_ATH[paso++];
						if (paso==sizeof(skick5_ATH)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==6) inc_y=-3; ive_hit++;
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,20,4,552,6,0,6,8,id);
						end
						if (paso==8) he_dado=1; end
						if (graph==196 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,7,5,551,12,0,12,12,id);
						end
						if (graph==196 and ive_hit==0) ive_hit=-1; end
						if (paso>5 and paso<28)
							if (flags) inc_x=-4; else inc_x=4; end
							y+=inc_y; x+=inc_x; 
							if (game_frame%3==0) inc_y++; end
							if (paso==26 and y<220) paso--; end
							if (y=>220) y=220; paso=28;
								play_snd (s_floor,400,256);
							end
						end
					end
					if (paso==11+(intensidad*2))
						play_snd (s_airk,400,256); voz=2;
					end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					if (paso==0 and intensidad<>0) play_snd (s_dash,256,256);
						pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
						if (flags) inc_x=-6; else inc_x=6; end
					end
					graph=skick1_vd[paso++];
					if (paso==sizeof(skick1_vd)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso<15) z=2; end
					if (paso==11)
						play_snd (s_airk,400,256); voz=2;
					end
					if (paso==15) z=0; end
					if (intensidad==0)
						if ((graph==66 or graph==67 or graph==68) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,4,4,700,10,0,20,8,id);
						end
					else
						if ((graph==66 or graph==67 or graph==68) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,7,4,700,15,0,12,12,id);
						end
						x+=inc_x;
						if (inc_x>0 and (game_frame%2==0)) inc_x--; end
						if (inc_x<0 and (game_frame%2==0)) inc_x++; end
					end
					if (graph==66 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_TERRY or 
					(luchador==FIGHTER_TERRY94 and intensidad>0))
					if (intensidad==0)
						graph=skick1[paso++];
						if (paso==sizeof(skick1)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso>=8 and paso<=11)
							if (flags) x-=2; else x+=2; end
						end
						if ((graph==76 or graph==77) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,4,4,508,10,0,20,8,id);
						end
						if (graph==76 and ive_hit==0) ive_hit--; end
					end
					if (intensidad==1 or intensidad==2) intensidad=1;
						if (paso==0 and intensidad<>0) play_snd (s_dash,256,256);
							pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
							if (flags) inc_x=-6; else inc_x=6; end
						end
						graph=skick5[paso++];
						if (paso==sizeof(skick5)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==35 or paso==41)
							if (flags) x-=8; else x+=8; end
						end
						if (graph==186 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,7,4,523,15,0,12,12,id);
						end
						if (graph==186 and ive_hit==0) ive_hit++; end
						x+=inc_x;
						if (inc_x>0 and (game_frame%2==0)) inc_x--; end
						if (inc_x<0 and (game_frame%2==0)) inc_x++; end
					end
					if (paso==17-intensidad)
						play_snd (s_airk,400,256); voz=2;
					end
				end
				if (luchador==FIGHTER_KYO94)//KYO K.
					if (paso==0 and intensidad<>1)
						if (control(avanzar)) intensidad=2;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=skick1_kyo[paso++];
						if (paso==3) paso++; end
						if (paso==sizeof(skick1_kyo)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso==7)
							play_snd (s_airk,400,256); voz=2;
						end
						if (graph==52 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,4,4,602,10,0,20,8,id);
						end
						if (graph==52 and ive_hit==0) ive_hit--; end
					end
					if (intensidad==1) graph=166;
						if (flags) x-=12; else x+=12; end
						nuevo_estado=_ayuken; nuevo_paso=3; intensidad=-11;
					end
					if (intensidad==2)//KYO K.
						graph=skick1_kyo94[paso++];
						if (paso==sizeof(skick1_kyo94)/DIV)
							dos=0; nuevo_estado=_normal;
						end
						if (paso<10)
							if (flags) x-=2; else x+=2; end
						end
						if (paso==10) voz=2; end
						if (graph==341 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,4,509,3,0,8,10,id);
						end
						if (paso==14) he_dado=1; ive_hit=2; end
						if (graph==342 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y+5,5,4,600,5,0,12,7,id);
						end
					end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=skick1_kasu[paso++];
					if (paso==sizeof(skick1_kasu)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==1) inc_x=0; intensidad=1; end
					if (paso==1 or paso==13 or paso==19 or paso==31)
						if (flags) x-=12; else x+=12; end
					end
					if (paso>8 and paso<31) x+=inc_x;
						if (inc_x>0 and (game_frame%2==0)) inc_x--; intensidad=5; end
						if (inc_x<0 and (game_frame%2==0)) inc_x++; intensidad=5; end
					end
					if (graph==44 and he_dado==1)
						if (get_real_point(1,&Hit_x,&hit_y))
							if (intensidad==1)
								golpe(hit_x,hit_y,4,4,501,10,0,24,8,id);
							else
								golpe(hit_x,hit_y,7,5,501,15,0,24,12,id);
							end
						end
					end
					if (graph==44 and ive_hit==0)
						ive_hit--; voz=2; play_snd (s_airt,320,256);
					end
				end
				if (luchador==FIGHTER_TAKUMA)//taku
					if (intensidad==0)
						graph=skick1_taku[paso++];
						if (paso==sizeof(skick1_taku)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso==1 or paso==5 or paso==9 or paso==13)
							if (flags) x-=16; else x+=16; end
						end
						if (paso==33 or paso==37)
							if (flags) x-=15; else x+=15; end
						end
						if (graph==45 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,4,501,10,0,24,8,id);
						end
					end
					if (intensidad>0)
						if (paso==0) play_snd (s_dash,256,256);
							pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
							if (flags) inc_x=-6; else inc_x=6; end
						end
						graph=skick3_taku[paso++];
						if (paso==sizeof(skick3_taku)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if ((graph==357 or graph==358) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,7,5,501,15,0,12,12,id);
						end
						if (graph==357 and ive_hit==0) ive_hit++;
							play_snd (s_airk,400,256);
						end
						x+=inc_x;
						if (inc_x>0 and (game_frame%2==0)) inc_x--; end
						if (inc_x<0 and (game_frame%2==0)) inc_x++; end
					end
					if (((graph==45 and intensidad==0) or
						(graph==357 and intensidad>0)) and ive_hit==0)
						ive_hit--; play_snd (s_airk,400,256); voz=2;
					end
				end
				if (luchador==FIGHTER_TERRY94 and intensidad==0)//terry b.
					graph=skick94[paso++];
					if (paso==sizeof(skick94)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==3 or paso==7)
						if (flags) x-=20; else x+=20; end
					end
					if (paso==19 or paso==25)
						if (flags) x+=20; else x-=20; end
					end
					if (paso==9)
						play_snd (s_airk,400,256); voz=2;
					end
					if (graph==172 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,4,4,510,10,0,20,8,id);
					end
					if (graph==172 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_K)
					if (intensidad==0)
						graph=skick1_k[paso++];
						if (paso==sizeof(skick1_k)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso==1) z=2; end
						if (paso==7 or paso==10)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==27 or paso==34)
							if (flags) x+=10; else x-=10; end
						end
						if ((graph==73 or graph==74) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,1,4,501,10,0,24,8,id);
						end
						if (graph==73 and ive_hit==0)
							ive_hit++; play_snd (s_airk,400,256); voz=2;
						end
						if (graph==74) z=0; end
					else
						if (paso==0)
							inc_y=-3; play_snd (s_jump,512,256); graph=55;
						end
						graph=skick4_k[paso++];
						if (paso==sizeof(skick4_k)/DIV) paso--; end
						y+=inc_y; 
						if (game_frame%3==0) inc_y++; end
						if (flags) x-=5; else x+=5; end
						if ((graph==156 or graph==157) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							if (graph==156)
								golpe(hit_x+inc_x,hit_y+inc_y,5,4,501,10,0,18,8,id);
							else
								golpe(hit_x+inc_x,hit_y+inc_y,5,4,504,10,0,18,8,id);
							end
						end
						if (graph==156 and ive_hit==0) ive_hit++;
							play_snd (s_airk,320,256); voz=2;
						end
						if (y=>220) nuevo_estado=_agachado;
							play_snd (s_floor,420,256);
						end
					end
				end
				if (luchador==FIGHTER_KULA)
					graph=skick2_kula[paso++];
					if (paso==sizeof(skick2_kula)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if ((graph==94 or graph==95) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (graph==94)
							golpe(hit_x,hit_y,21,7,526,4,0,12,10,id);
						else
							golpe(hit_x,hit_y,21,7,525,4,0,12,10,id);
						end
					end
					if (graph==94 and ive_hit==0)
						ive_hit++; play_snd (s_airk,400,256); voz=2;
					end
					if (paso==17) he_dado=1; end
				end
				if (luchador==FIGHTER_K9999)
					if (paso==0 and intensidad>0) inc_y=-4;
						if (flags) inc_x=-5; else inc_x=5; end
					end
					graph=skick1_tetsuo[paso++];
					if (paso==sizeof(skick1_tetsuo)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (intensidad>0 and paso<9)
						y+=inc_y; x+=inc_x; 
						if (game_frame%2==0) inc_y++; end
						if (y<220 and paso==5) paso--; graph=70; end
						if (y>220) inc_x=0; inc_y=0; graph=72; paso=9; y=220; end
					end
					if (paso==9)
						play_snd (s_airk,300,256); voz=2;
					end
					if (graph==72 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (intensidad==0)
							golpe(hit_x,hit_y,4,4,502,10,0,16,8,id);
						else
							golpe(hit_x,hit_y,7,5,502,15,0,12,12,id);
						end
					end
					if (graph==72 and ive_hit==0) ive_hit--; end
				end
			end
			
			// patada fuerte cerca
			case _skick2:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO)//KYO
					graph=skick2_kyo[paso++];
					if (paso==sizeof(skick2_kyo)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==8)
						play_snd (s_airk,400,256);
						if (rand(0,1)==0) voz=2; end
					end
					if (graph==93 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,4,605,10,0,22,8,id);
					end
					if (graph==93 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					graph=skick2_ATH[paso++];
					if (paso==sizeof(skick2_ATH)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==9)
						play_snd (s_airk,400,256);
						if (rand(0,1)==0) voz=2; end
					end
					if (graph==64 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (flags) hit_x=hit_x-10;
						else hit_x=hit_x+10; end
						golpe(hit_x,hit_y,4,4,997,10,0,24,8,id);
					end
					if (graph==64 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					graph=skick2_vd[paso++];
					if (paso==sizeof(skick2_vd)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==3)
						play_snd (s_airk,400,256);
						if (rand(0,1)==0) voz=2; end
					end
					if ((graph==86 or graph==87 or graph==88) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (flags)
							golpe(hit_x-15,hit_y,1,4,703,14,0,22,8,id);
						else
							golpe(hit_x+15,hit_y,1,4,703,14,0,22,8,id);
						end
					end
					if (graph==86 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					graph=skick2[paso++];
					if (paso==sizeof(skick2)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==5)
						play_snd (s_airk,400,256);
						if (rand(0,1)==0) voz=2; end
					end
					if ((graph==44 or graph==45 or graph==46) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,4,534,14,0,22,8,id);
					end
					if (graph==44 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KYO94)//KYO
					if (paso==0 and control(avanzar))
						nuevo_estado=_skick1; nuevo_paso=1; intensidad=2;
					end
					graph=skick2_kyo94[paso++];
					if (paso==sizeof(skick2_kyo94)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==10 or paso==20)
						play_snd (s_airk,400,256);
						if (rand(0,1)==0 and paso==10) voz=2; end
						get_real_point(1,&Hit_x,&hit_y);
						if (enemigo.estado==_recibir_fuertes_agachado or
							enemigo.estado==_recibir_flojos_agachado or
							enemigo.estado==_guardiabajafloja or
							enemigo.estado==_guardiabaja or
							enemigo.estado==_agachadoguardia)
							hit_y=160;
						end
						golpe(hit_x,hit_y,1,4,509,7,0,22,8,id);
						if (flags) x-=5; else x+=5; end ive_hit--;
					end
					if (paso>4 and paso<30) y=210;
						if (flags) x-=2; else x+=2; end
					else y=220; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=skick2_kasu[paso++];
					if (paso==sizeof(skick2_kasu)/DIV)
						if (flags) x+=12; else x-=12; end
						nuevo_estado=_normal; dos=0;
					end
					if (paso==5)
						if (flags) x-=12; else x+=12; end
					end
					if (graph==78 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,4,4,503,10,0,24,8,id);
					end
					if (graph==78 and ive_hit==0) ive_hit++;
						if (rand(0,1)==0) voz=2; end
						play_snd (s_airt,320,256);
					end
				end
				if (luchador==FIGHTER_TAKUMA)//dinamarca
					graph=skick2_taku[paso++];
					if (paso==sizeof(skick2_taku)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==1 or paso==5)
						if (flags) x-=12; else x+=12; end
					end
					if (paso==21 or paso==25 or paso==31)
						if (flags) x+=8; else x-=8; end
					end
					if (graph==64 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,4,501,10,0,24,8,id);
					end
					if (graph==64 and ive_hit==0) ive_hit++;
						play_snd (s_airk,400,256);
						if (rand(0,1)==0) voz=2; end
					end
					if (((control(s_kick) and sk_bloker==0) or
						(control(s_punch) and sp_bloker==0)) and hado<11 and
						he_dado==0 and enemigo.y==220 and shoryu<20 and
						abs(enemigo.x-x)<60 and control(avanzar) and shokoh<39)
						nuevo_estado=_voltear; 
						enemigo.estado=enemigo.nuevo_estado=100;
						enemigo.z=z+1;
						if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
							enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
							enemigo.graph=410;
						else
							enemigo.graph=411;
						end
						if (control(s_kick)) inc_x=1;
						else inc_x=0; end
					end
				end
				if (luchador==FIGHTER_K)
					graph=skick2_k[paso++];
					if (paso==sizeof(skick2_k)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==1) z=2; end
					if (graph==134 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,4,4,503,10,0,24,8,id);
					end
					if (graph==134 and ive_hit==0)
						ive_hit++; play_snd (s_airk,400,256);
					end
					if (graph==135) z=0; end
				end
				if (luchador==FIGHTER_KULA)
					graph=skick1_kula[paso++];
					if (paso==sizeof(skick1_kula)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==17) he_dado=1; end
					if ((graph==72 or graph==73 or graph==75 or
						graph==76) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (graph==72)
							golpe(hit_x,hit_y,21,7,525,4,0,12,8,id);
						end
						if (graph==73 or graph==75)
							golpe(hit_x,hit_y,9,7,526,4,0,12,8,id);
						end
						if (graph==76)
							golpe(hit_x,hit_y,9,7,528,4,0,12,8,id);
						end
					end
					if (graph==72 and ive_hit==0)
						ive_hit++; play_snd (s_airk,400,256); voz=2;
					end
					if (paso==9)
						if (he_dado!=1 and enemigo.y==220 and
							enemigo.vida>0)
							enemigo.inc_x=0;
						end
					end
				end
				if (luchador==FIGHTER_K9999)
					graph=skick2_tetsuo[paso++];
					if (paso==sizeof(skick2_tetsuo)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==9 or paso==13 or paso==17)
						if (flags) x-=10; else x+=10; end
					end
					if (graph==91 and he_dado==1 and enemigo.y==220)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,11,4,503,10,0,18,8,id);
					end
					if (graph==91 and ive_hit==0) ive_hit--; end
					if (paso==21 and enemigo.graph>422 and
						enemigo.graph<426 and enemigo.y>200 and
						abs(x-enemigo.x)<55 and enemigo.paso>20)
						tembleque(1,1); enemigo.y=220;
						if (flags) hit_stars(1,x,y-10);
						else      hit_stars(1,x,y-10); end
						enemigo.hit_combo++; he_dado=2;
						if (rand(0,2)==0) enemigo.voz=4; end
						
						enemigo.vida-=get_real_damage(10);
						
						if (enemigo.vida<=0) 
							enemigo.vida=0;
							if (parpadeo_final==0 and game_mode!=MODE_TRAINING)
								parpadeo_final=1; ralenti(1);
								play_snd (s_fhit,512,256);
							end
						else
							play_snd (s_hit4,512,256);
						end
						if (enemigo==id_luchador1)
							if (enemigo.hit_combo==2) combos(id_luchador1,1); end
							if (enemigo.hit_combo==10)combos(id_luchador1,2); end
						end
						if (enemigo==id_luchador2)
							if (enemigo.hit_combo==2) combos(id_luchador2,1); end
							if (enemigo.hit_combo==10)combos(id_luchador2,2); end
						end
					else
						if (paso==21) paso=25; end
					end
					if (he_dado==2)
						if (paso>22 and paso<31)
							enemigo.paso=43; y=219;
							enemigo.estado=_recibir_toss; 
							enemigo.y0 = 0;
							if (enemigo.luchador==FIGHTER_IORI or 
								enemigo.luchador==FIGHTER_CRIMSON or
								enemigo.luchador==FIGHTER_KASUMI or 
								enemigo.luchador==FIGHTER_TAKUMA)
								enemigo.graph=423;
							else
								enemigo.graph=422;
							end
						end
						if (paso==23 or paso==27) y=220; end
						if (paso==25 or paso==29) y=219; end
						if (paso==29)
							if (flags) enemigo.inc_x=-4;
							else   enemigo.inc_x=4; end
							enemigo.inc_y=-6;
							if (enemigo.vida=<0)
								enemigo.inc_y=-10;
								enemigo.paso=31;
							end
						end
					end
				end
			end
			
			
			//empujon en el suelo
			case _toss1:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94)
					graph=toss1_kyo[paso++];
					if (paso==sizeof(toss1_kyo)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==20 or paso==21 or paso==22 or paso==23)
						if (flags) x-=6; else x+=6; end
					end
					if (paso==32)
						if (flags) x+=5; else x-=5; end
					end
					if (paso==20)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=2; end
					end
					if (graph==112 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,7,5,612,15,0,30,8,id);
					end
					if (graph==112 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_ATHENA)
					graph=toss1_ATH[paso++];
					if (paso==sizeof(toss1_ATH)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==7)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=2; end
					end
					if (graph==102 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,7,5,997,15,0,32,8,id);
					end
					if (graph==102 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					graph=toss1_vd[paso++];
					if (paso==sizeof(toss1_vd)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (graph==140 and he_dado==1)
						if (enemigo.estado==100)
							enemigo.estado=_recibir_fuertes_bozo;
							enemigo.vulnerable=0; enemigo.paso=7;
						end
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,7,5,713,15,0,30,8,id);
					end
					if (graph==140 and ive_hit==0) ive_hit++; end
					if (paso==11)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=2; end
					end
					if (graph==139)
						if (flags) x-=2; else x+=2; end
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					graph=toss1[paso++];
					if (paso==sizeof(toss1)/DIV)
						nuevo_estado=_normal;
						inc_y=0; y=220; dos=0;
					end
					if (paso==3) inc_y=-3; end
					if (paso>=5)
						y+=inc_y; 
						if (game_frame%3==0) inc_y++; end
						if (y>220) y=220; end
					end
					if (paso<27)
						if (abs(enemigo.x+x)/2<45 and abs(enemigo.y+y)/2<25)
						else x+=inc_x; end
						if (flags) inc_x=-2;
						else inc_x=2; end
					end
					if (paso==11)
						play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=2; end
					end
					if (luchador==FIGHTER_TERRY94 and graph==36) graph=173; end
					if (luchador==FIGHTER_TERRY94 and graph==37) graph=174; end
					if (luchador==FIGHTER_TERRY94 and graph==38) graph=174; end
					if ((graph==36 or graph==173) and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,7,5,510,15,0,30,8,id);
					end
					if ((graph==36 or graph==173) and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KASUMI)
					if (paso==0) intensidad=0; end
					if (paso==1 and intensidad==1)
						play_snd (s_dash,256,256);
						pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
						if (flags) inc_x=-6; else inc_x=6; end
					end
					graph=tossflr_kas[paso++];
					if (paso==sizeof(tossflr_kas)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (intensidad==1) x+=inc_x;
						if (inc_x>0 and (game_frame%2==0)) inc_x--; end
						if (inc_x<0 and (game_frame%2==0)) inc_x++; end
					end
					if (paso==9)
						if (rand(0,2)==0) voz=2; end
						play_snd (s_airp,300,256);
					end
					if (graph==96 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						if (intensidad==0)
							golpe(hit_x,hit_y,7,5,501,15,0,30,8,id);
						else
							golpe(hit_x,hit_y,7,5,501,15,0,12,12,id);
						end
					end
					if (graph==96 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=toss_taku[paso++];
					if (paso==sizeof(toss_taku)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==13) play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=2; end
					end
					if (graph==104 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,7,5,501,15,0,30,8,id);
					end
					if (graph==104 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_K)
					graph=toss_k[paso++];
					if (paso==sizeof(toss_k)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					
					if (paso==4 or paso==7)
						if (flags) x-=10; else x+=10; end
					end
					if (paso==39 or paso==44)
						if (flags) x+=10; else x-=10; end
					end
					if (paso==15)
						play_snd (s_airk,300,256);
						if (rand(0,2)==0) voz=2; end
						if (get_real_point(1,&hit_x,&hit_y))
							golpe(hit_x,hit_y,7,5,502,15,0,30,8,id);
						end
						ive_hit++;
					end
				end
				if (luchador==FIGHTER_KULA)
					graph=toss_kula[paso++];
					if (paso==sizeof(toss_kula)/DIV)
						nuevo_estado=_normal; dos=0;
					end
					if (paso==3 or paso==7)
						if (flags) x-=12; else x+=12; end
					end
					if (paso==43 or paso==47)
						if (flags) x+=12; else x-=12; end
					end
					if (paso==13)
						play_snd (s_airk,300,256);
						if (rand(0,2)==0) voz=-2; end
						if (get_real_point(1,&hit_x,&hit_y))
							golpe(hit_x,hit_y,7,5,526,12,0,30,8,id);
						end
						ive_hit++;
					end
				end
				if (luchador==FIGHTER_K9999)
					graph=toss_tetsuo[paso++];
					if (paso==sizeof(toss_tetsuo)/DIV)
						dos=0; nuevo_estado=_normal;
					end
					if (paso==13) play_snd (s_airp,300,256);
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,7,5,502,15,0,30,8,id);
						ive_hit++;
						if (rand(0,2)==0) voz=-2; end
					end
				end
			end
			
			//puo flojo aire
			case _lpunchair:
				tipo_ataque=ALTO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)//KYO
					graph=lpunch3_kyo[paso++];
					if (paso==sizeof(lpunch3_kyo)/DIV) paso--; end
					if (paso==6)
						play_snd (s_airp,300,256);
						if (rand(0,3)==0) voz=1; end
					end
					if (graph==75 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,1,603,3,0,10,7,id);
					end
					if (graph==75 and ive_hit>0) ive_hit--; end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					if (inc_x==0)//EN EL SITIO
						graph=lpunch3b_ath[paso++];
						if (paso==sizeof(lpunch3b_ath)/DIV) paso--; end
					end
					if (inc_x<>0)//alante
						graph=lpunch3_ath[paso++];
						if (paso==sizeof(lpunch3_ath)/DIV) paso--; end
					end
					if (paso==6)
						play_snd (s_airp,300,256); voz=1;
					end
					if (graph==98 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,1,993,3,0,12,7,id);
					end
					if (graph==98 and ive_hit==0) ive_hit++; end
					if (graph==85 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,1,993,3,0,12,7,id);
					end
					if (graph==85 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)//iori
					graph=lpunchair_vd[paso++];
					if (paso==sizeof(lpunchair_vd)/DIV) paso--; end
					if (paso==5)
						play_snd (s_airp,300,256);
						if (rand(0,3)==0) voz=1; end
					end
					if ((graph==119 or graph==120 or graph==121) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,1,709,3,0,10,7,id);
					end
					if (graph==119 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)//TERRY
					graph=lpunch3[paso++];
					if (paso==sizeof(lpunch3)/DIV) paso--; end
					if (paso==3)
						play_snd (s_airp,300,256);
						if (rand(0,3)==0) voz=1; end
					end
					if (graph==58 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,1,552,3,0,10,7,id);
					end
					if (graph==58 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=alpunch_kas[paso++];
					if (paso==sizeof(alpunch_kas)/DIV) paso--; end
					if (paso==5)
						if (rand(0,3)==0) voz=1; end
						play_snd (s_airp,300,256);
					end
					if (graph==82 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,1,501,5,0,10,7,id);
					end
					if (graph==82 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=lpunchair_taku[paso++];
					if (paso==sizeof(lpunchair_taku)/DIV) paso--; end
					if (paso==5) play_snd (s_airp,300,256);
						if (rand(0,3)==0) voz=1; end
					end
					if (graph==86 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (flags)
							golpe(hit_x+inc_x-10,hit_y+inc_y,8,1,500,5,0,10,7,id);
						else
							golpe(hit_x+inc_x+10,hit_y+inc_y,8,1,500,5,0,10,7,id);
						end
					end
					if (graph==82 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_K)
					graph=lpunch4_k[paso++];
					if (paso==sizeof(lpunch4_k)/DIV) paso--; end
					if (paso==5)
						play_snd (s_airp,300,256);
						if (rand(0,3)==0) voz=1; end
					end
					if (graph==161 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,1,501,5,0,10,7,id);
					end
					if (graph==161 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KULA)
					graph=lpunch3_kula[paso++];
					if (paso==sizeof(lpunch3_kula)/DIV) paso-=12; end
					get_real_point(1,&Hit_x,&hit_y);
					if (graph>132 and he_dado==1)
						golpe(hit_x+inc_x,hit_y+inc_y,8,1,554,5,0,10,7,id);
					end
					if (graph==133 and ive_hit==0) 
						ive_hit++;
						pegata (hit_x,hit_y,554,c_scroll,flags,100,z-3,122,file);
						play_snd (s_airp,300,256);
						if (rand(0,3)==0) voz=1; end
					end
				end
				if (luchador==FIGHTER_K9999)//shima
					graph=lpunch3_tetsuo[paso++];
					if (paso==sizeof(lpunch3_tetsuo)/DIV) paso-=8;
						if (rand(0,3)==0) voz=1; end
					end
					if (paso==15)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,23,7,502,3,0,10,7,id);
					end
					if (paso==15 and ive_hit==0) ive_hit--; end
				end
				//parte general comun a todos
				x+=inc_x; y+=inc_y; 
				if (game_frame%2==0) inc_y++; end
				if (y>=220)
				   y=220; inc_y=0; nuevo_estado=_agachar;
				   play_snd (s_floor,450,256);
				end
				if (y>=162 and abs(enemigo.x-x)<=35 and flags<>enemigo.flags)
				   if (flags) x+=7; else x-=7; end
				end
			end
			
			//puo fuerte aire
			case _spunchair:
				tipo_ataque=ALTO;
				if (luchador==FIGHTER_KYO or (luchador==FIGHTER_KYO94 and intensidad==0))//KYO K.
					graph=spunch3_kyo[paso++];
					if (paso==sizeof(spunch3_kyo)/DIV) paso--; end
					if (paso==7)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==81 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,2,603,10,0,18,8,id);
					end
					if (graph==81 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_KYO94 and intensidad==1)//KYO K.
					graph=spunch3_kyo94[paso++];
					if (paso==sizeof(spunch3_kyo94)/DIV) paso--; end
					if (paso==8)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==357 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,11,2,603,10,0,18,8,id);
					end
					if (graph==357 and ive_hit==0) ive_hit--; end
					if (he_dado==0 and enemigo.estado==_recibir_toss)
						if (enemigo.paso>4 and enemigo.paso<20)
							enemigo.paso=36; enemigo.inc_y=20;
							inc_x=0; inc_y=0; enemigo.y0=0;
							if (flags) enemigo.inc_x=-6;
							else enemigo.inc_x=6; end
						end
						if (enemigo.paso==40) tembleque(1,1);
							enemigo.inc_y=-10;
							if (flags) enemigo.inc_x=-4;
							else enemigo.inc_x=4; end
						end
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					if (inc_x==0)//en el sitio
						graph=spunch3b_ath[paso++];
						if (paso==sizeof(spunch3b_ath)/DIV) paso--; end
					end
					if (inc_x<>0)//alante
						graph=spunch3_ath[paso++];
						if (paso==sizeof(spunch3_ath)/DIV) paso--; end
					end
					if (paso==11)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==91 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,2,993,10,0,20,8,id);
					end
					if (graph==91 and ive_hit==0) ive_hit++; end
					if (graph==81 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,2,993,10,0,20,8,id);
					end
					if (graph==81 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)//IORI USTED
					graph=spunchair_vd[paso++];
					if (paso==sizeof(spunchair_vd)/DIV) paso--; end
					if (paso==9)
						play_snd (s_airp,300,256); voz=1;
					end
					if (graph==129 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,2,710,10,0,18,8,id);
					end
					if (graph==129 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)//TERRY BOGADO
					graph=spunch3[paso++];
					if (paso==sizeof(spunch3)/DIV) paso--; end
					if (paso==7)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==63 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,2,552,10,0,18,8,id);
					end
					if (graph==63 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=aspunch_kas[paso++];
					if (paso==sizeof(aspunch_kas)/DIV) paso--; end
					if (paso==7)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==89 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,2,504,10,0,18,8,id);
					end
					if (graph==89 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_TAKUMA)//farret
					graph=spunchair_taku[paso++];
					if (paso==sizeof(spunchair_taku)/DIV) paso--; end
					if (paso==13)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==97 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,2,500,10,0,18,8,id);
					end
					if (graph==97 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_K)//k
					graph=spunch4_k[paso++];
					if (paso==sizeof(spunch4_k)/DIV) paso--; end
					if (paso==8)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==149 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,2,554,8,0,18,8,id);
					end
					if (graph==149 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_KULA)//kula
					graph=spunch4_kula[paso++];
					if (paso==sizeof(spunch4_kula)/DIV) paso-=6; end
					if (paso==9)
						play_snd (s_airp,300,256); voz=2;
					end
					get_real_point(1,&Hit_x,&hit_y);
					if (graph>132 and paso<17 and he_dado==1)
						golpe(hit_x+inc_x,hit_y+inc_y,5,2,554,10,0,18,8,id);
					end
					if (graph==133 and ive_hit==0) ive_hit--;
						pegata (hit_x,hit_y,554,c_scroll,flags,100,z-3,122,file);
					end
				end
				if (luchador==FIGHTER_K9999)//tetsuo
					graph=spunch4_tetsuo[paso++];
					if (paso==sizeof(spunch4_tetsuo)/DIV) paso-=2; end
					if (paso==11)
						play_snd (s_tetsuo1,425,256); voz=2;
					end
					if (graph>131 and graph<136)
						if (paso%2==0)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+inc_y,22,7,501,2,0,2,7,id);
						end	
					end
					if (graph==121 and ive_hit==0) ive_hit--; end
				end
				//parte general comun a todos
				x+=inc_x; y+=inc_y;
				if (game_frame%2==0) inc_y++; end
				   
				if (y>=220)
					y=220; inc_y=0; nuevo_estado=_agachar;
					play_snd (s_floor,450,256);
				end
				if (y>=162 and abs(enemigo.x-x)<=35 and 
					flags<>enemigo.flags)
					if (flags) x+=7; else x-=7; end
				end
			end
			
			//patada floja aire
			case _lkickair:
				tipo_ataque=ALTO;
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94)
					if (inc_x==0)
						graph=lkick3false_kyo[paso++];
						if (paso==sizeof(lkick3_kyo)/DIV) paso--; end
					else
						graph=lkick3_kyo[paso++];
						if (paso==sizeof(lkick3_kyo)/DIV) paso--; end
					end
					if (paso==6)
						play_snd (s_airk,400,256);
						if (rand(0,3)==0) voz=1; end
					end
					if (graph==78 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,611,3,0,8,7,id);
					end
					if (graph==78 and ive_hit==0) ive_hit--; end
					if (graph==79 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,610,3,0,8,7,id);
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					if (inc_x==0)//en el sitio
						graph=lkick3b_ath[paso++];
						if (paso==sizeof(lkick3b_ath)/DIV) paso--; end
					end
					if (inc_x<>0)//alante
						graph=lkick3_ath[paso++];
						if (paso==sizeof(lkick3_ath)/DIV) paso--; end
					end
					if (paso==7)
						play_snd (s_airk,400,256);
						if (rand(0,3)==0) voz=1; end
					end
					if (graph==97 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,994,3,0,10,7,id);
					end
					if (graph==97 and ive_hit==0) ive_hit++; end
					if (graph==87 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,997,3,0,10,7,id);
					end
					if (graph==87 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)//iori yagami(alias usted)
					if (paso==0)
						if (luchador==FIGHTER_CRIMSON and control(retroceder))
							intensidad=2;
							if (flags) flags=0;
							else flags=1; end
						else
							intensidad=1;
						end
					end
					if (intensidad==1)
						graph=lkick3_vd[paso++];
						if (paso==sizeof(lkick3_vd)/DIV) paso--; end
						if (paso==3)
							play_snd (s_airk,400,256);
							if (rand(0,2)==0) voz=1; end
						end
						if (graph==124 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+inc_y,8,3,708,3,0,8,7,id);
						end
						if (graph==124 and ive_hit==0) ive_hit--; end
					end
					if (intensidad==2)
						graph=patadat[paso++];
						if (paso==sizeof(patadat)/DIV) paso--; end
						if (paso==3)
							play_snd (s_airk,400,256);
							if (rand(0,2)==0) voz=1; end
						end
					  
						if ((paso=>7 and paso<=19) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+inc_y,5,3,708,10,0,8,7,id);
						end
						if (paso==7 and ive_hit==0) ive_hit--; end
					end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)//terry bogado
					if (luchador==FIGHTER_TERRY94 and inc_x==0)
						graph=alkick94[paso++];
						if (paso==sizeof(alkick94)/DIV) paso--; end
					else
						graph=lkick3[paso++];
						if (paso==sizeof(lkick3)/DIV) paso--; end
					end
					if (paso==5)
						play_snd (s_airk,400,256);
						if (rand(0,3)==0) voz=1; end
					end
					if ((graph==60 or graph==61 or graph==176) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,509,3,0,8,7,id);
					end
					if ((graph==60 or graph==176) and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=alkick_kasu[paso++];
					if (paso==sizeof(alkick_kasu)/DIV) paso--; end
					if (graph==86 AND he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,501,3,0,8,7,id);
					end
					if (graph==86 and ive_hit==0) ive_hit++;
						if (rand(0,3)==0) voz=1; end
						play_snd (s_airt,320,256);
					end
				end
				if (luchador==FIGHTER_TAKUMA)//takuya
					if (inc_x==0)
						graph=lkickair_taku[paso++];
						if (paso==sizeof(lkickair_taku)/DIV) paso--; end
					else
						graph=lkickairx_taku[paso++];
						if (paso==sizeof(lkickairx_taku)/DIV) paso--; end
					end
					if (paso==9) play_snd (s_airk,400,256);
						if (rand(0,3)==0) voz=1; end
					end
					if ((graph==88 or graph==92) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,500,3,0,8,7,id);
					end
					if (graph==88 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_K)//k
					if (inc_x==0)
						graph=lkick4_k[paso++];
						if (paso==sizeof(lkick4_k)/DIV) paso--; end
					else
						graph=lkick5_k[paso++];
						if (paso==sizeof(lkick5_k)/DIV) paso=paso-4; end
					end
					if (paso==9)
						if (rand(0,3)==0) voz=1; end
						play_snd (s_airk,400,256);
					end
					if ((graph==165 or graph==166 or graph==168 or
						graph==169) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,501,3,0,8,7,id);
					end
					if ((graph==165 or graph==168) and ive_hit==0) ive_hit--; end
				end 
				
				if (luchador==FIGHTER_KULA)//kula
					graph=lkick3_kula[paso++];
					if (paso==sizeof(lkick3_kula)/DIV) paso--; end
					if (paso==6)
						if (rand(0,3)==0) voz=1;
						end
						play_snd (s_airk,400,256);
					end
					if (graph==138 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,525,3,0,8,7,id);
					end
					if (graph==138 and ive_hit==0) ive_hit--; end
					if (paso>6 and control(s_kick))
						nuevo_estado=_skickair; he_dado=1;
					end
				end
				if (luchador==FIGHTER_K9999)//tetsuo
					graph=lkick3_tetsuo[paso++];
					if (paso==sizeof(lkick3_tetsuo)/DIV) paso--; end
					if (graph==126 AND he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,8,3,502,3,0,8,7,id);
					end
					if (graph==126 and ive_hit==0) ive_hit++;
						if (rand(0,3)==0) voz=1; end
						play_snd (s_airk,400,256);
					end
				end
				
				//parte general comun a todos
				x+=inc_x; y+=inc_y;
				if (game_frame%2==0) inc_y++; end
				
				if (y>=220)
					y=220; inc_y=0; nuevo_estado=_agachar;
					play_snd (s_floor,450,256);
				end
				if (y>=162 and abs(enemigo.x-x)<=35 and flags<>enemigo.flags)
					if (flags) x+=7; else x-=7; end
				end
			end
			case _skickair://patadafuerte_aire
				tipo_ataque=ALTO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					if ((flags==0 and inc_x>0) or (flags==1 and inc_x<0))
						graph=skick3_kyo[paso++];
						if (paso==sizeof(skick3_kyo)/DIV) paso--; end
					end
					if ((flags==0 and inc_x<=0) or (flags==1 and inc_x>=0))
						graph=skickfalse_kyo[paso++];
						if (paso==sizeof(skickfalse_kyo)/DIV) paso--; end
					end//del if flags
					if (graph==86 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,4,605,10,0,18,8,id);
					end
					if (graph==83 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,4,603,10,0,18,8,id);
					end
					if ((graph==86 or graph==83) and ive_hit==0)
						play_snd (s_airk,400,256); ive_hit--; voz=2;
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					if (inc_x==0)//en el sitio
						graph=skick3b_ath[paso++];
						if (paso==sizeof(skick3b_ath)/DIV) paso--; end
					end
					if (inc_x<>0)//alante
						graph=skick3_ath[paso++];
						if (paso==sizeof(skick3_ath)/DIV) paso--; end
					end
					if (paso==7)
						play_snd (s_airk,400,256); voz=2;
					end
					if (graph==94 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,4,994,10,0,20,8,id);
					end
					if (graph==94 and ive_hit==0) ive_hit++; end
					if (graph==83 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,4,996,10,0,20,8,id);
					end
					if (graph==83 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)//IORI YAGAMI
					graph=skick3_vd[paso++];
					if (paso==sizeof(skick3_vd)/DIV) paso--; end
					if (paso==7)
						play_snd (s_airk,400,256); voz=2;
					end
					if (graph==135 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,4,711,10,0,18,8,id);
					end
					if (graph==135 and ive_hit==0) ive_hit--; end
					if (graph==136 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,4,709,10,0,18,8,id);
					end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
					if (luchador==FIGHTER_TERRY)
						graph=skick3[paso++];
						if (paso==sizeof(skick3)/DIV) paso--; end
						if (graph==65 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+inc_y,5,4,510,10,0,18,8,id);
						end
						if (graph==65 and ive_hit==0) ive_hit--; end
					else
						if (inc_x<>0)
							graph=askick94[paso++];
							if (paso==sizeof(askick94)/DIV) paso--; end
							if (graph==131 and he_dado==1)
								get_real_point(1,&Hit_x,&hit_y);
								golpe(hit_x+inc_x,hit_y+inc_y,5,4,510,10,0,18,8,id);
							end
							if (graph==131 and ive_hit==0) ive_hit--; end
						end
						if (inc_x==0)
							graph=askick95[paso++];
							if (paso==sizeof(askick95)/DIV) paso--; end
							if (graph==173 and he_dado==1)
								get_real_point(1,&Hit_x,&hit_y);
								golpe(hit_x+inc_x,hit_y+inc_y,5,4,510,10,0,18,8,id);
							end
							if (graph==173 and ive_hit==0) ive_hit--; end
						end
					end
					if (paso==7)
						play_snd (s_airk,400,256); voz=2;
					end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=askick_kasu[paso++];
					if (paso==sizeof(askick_kasu)/DIV) paso--; end
					if ((graph==93 or graph==94) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,4,501,10,0,18,8,id);
					end
					if (graph==93 and ive_hit==0) ive_hit++;
						play_snd (s_airt,320,256); voz=2;
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=skickair_taku[paso++];
					if (paso==sizeof(skickair_taku)/DIV) paso--; end
					if (graph==101 and ive_hit==0) ive_hit--;
						play_snd (s_airk,400,256); voz=2;
					end
					if (graph==101 and he_dado==1)
						if (flags) golpe (x+inc_x-45, y+inc_y-32, 5,4,500,10,0,18,8,id);
						else golpe (x+inc_x+45, y+inc_y-32, 5,4,500,10,0,18,8,id);end
					end
				end
				if (luchador==FIGHTER_K)
					graph=skick4_k[paso++];
					if (paso==sizeof(skick4_k)/DIV) paso--; end
					if ((graph==156 or graph==157) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (graph==156)
							golpe(hit_x+inc_x,hit_y+inc_y,5,4,501,10,0,18,8,id);
						else
							golpe(hit_x+inc_x,hit_y+inc_y,5,4,504,10,0,18,8,id);
						end
					end
					if (graph==156 and ive_hit==0) ive_hit++;
						play_snd (s_airk,320,256); voz=2;
					end
				end
				if (luchador==FIGHTER_KULA)
					graph=skick4_kula[paso++];
					if (paso==sizeof(skick4_kula)/DIV) paso--; end
					if ((graph==146) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,4,525,10,0,18,8,id);
					end
					if (graph==144 and ive_hit==0) ive_hit++;
						play_snd (s_airk,320,256); voz=2;
					end
				end
				if (luchador==FIGHTER_K9999)
					graph=skick4_tetsuo[paso++];
					if (paso==sizeof(skick4_tetsuo)/DIV) paso--; end
					if (paso==11)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,5,4,501,10,0,18,8,id);
						if (ive_hit==0) ive_hit--; end
						play_snd (s_airk,400,256); voz=2;
					end
				end //parte general comun a todos
				x+=inc_x; y+=inc_y;
				if (game_frame%2==0) inc_y++; end

				if (y>=220)
					y=220; inc_y=0; nuevo_estado=_agachar;
					play_snd (s_floor,450,256);
				end
				if (y>=162 and abs(enemigo.x-x)<=35 and flags<>enemigo.flags)
					if (flags) x+=7; else x-=7; end
				end
			end
			case _tossair:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					graph=toss2_kyo[paso++];
					if (paso==sizeof(toss2_kyo)/DIV)
						paso--;
					end
					if (paso==14)
						if (rand(0,1)==0) voz=2; end
					end
					if (graph==116 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,7,5,610,15,0,30,8,id);
					end
					if (graph==116 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_ATHENA)
					graph=tossair_ath[paso++];
					if (paso==sizeof(tossair_ath)/DIV) paso--; end
					if (paso==9)
						play_snd (s_airk,400,256);
						if (rand(0,1)==0) voz=2; end
					end
					if ((graph==100 or graph==101) and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,7,5,994,15,0,36,8,id);
					end
					if (graph==100 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)//vd
					graph=toss2_vd[paso++];
					if (paso==sizeof(toss2_vd)/DIV) paso--; end
					if (paso==9)
						play_snd (s_airp,300,256);
						if (rand(0,1)==0) voz=2; end
					end
					if (graph==148 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,7,5,713,15,0,30,8,id);
					end
					if (graph==148 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)//TERRY
					graph=toss2[paso++];
					if (paso==sizeof(toss2)/DIV) paso--; end
					if (paso==13)
						play_snd (s_airk,400,256);
						if (rand(0,1)==0) voz=2; end
					end
					if (graph==95 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,7,5,557,15,0,30,8,id);
					end
					if (graph==95 and ive_hit==0) ive_hit--; end
				end
				if (luchador==FIGHTER_KASUMI)
					if (paso==0 or paso==3)
						if (flags) flags=0; else flags=1; end
					end
					graph=tossair_kas[paso++];
					if (paso==sizeof(tossair_kas)/DIV)
						paso--;
					end
					if (graph==104 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,7,5,501,15,0,30,8,id);
					end
					if (graph==104 and ive_hit==0) ive_hit++;
						if (rand(0,1)==0) voz=2; end
						play_snd (s_airt,320,256); graph=105;
					end
				end
				if (luchador==FIGHTER_TAKUMA)//oso fuerte(bernardo)
					graph=tossair_taku[paso++];
					if (paso==sizeof(tossair_taku)/DIV) paso--; end
					if (graph==107 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,7,5,500,15,0,30,8,id);
					end
					if (graph==107 and ive_hit==0) ive_hit--;
						play_snd (s_airk,400,256);
						if (rand(0,1)==0) voz=2; end
					end
				end
				if (luchador==FIGHTER_K)
					graph=atoss_k[paso++];
					if (paso==sizeof(atoss_k)/DIV) paso--; end
					if (graph==181 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,7,5,501,15,0,30,8,id);
					end
					if (graph==181 and ive_hit==0) ive_hit--;
						if (rand(0,1)==0) voz=2; end
						play_snd (s_airk,400,256);
					end
				end
				if (luchador==FIGHTER_KULA)
					graph=lkick1_kula[paso++];
					if (paso==sizeof(lkick1_kula)/DIV) paso--; end
					if (paso>20)
						if (paso<29) graph=67; else graph=45; end
					end
					if (graph==64 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,7,5,525,12,0,30,8,id);
					end
					if (graph==64 and ive_hit==0) ive_hit--;
						if (rand(0,1)==0) voz=-2; end
						play_snd (s_airk,400,256);
					end
				end
				if (luchador==FIGHTER_K9999)
					graph=atss_tetsuo[paso++];
					if (paso==sizeof(atss_tetsuo)/DIV) paso--; end
					if (graph==151 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x+inc_x,hit_y+inc_y,19,7,501,15,0,30,8,id);
					end
					if (graph==151 and ive_hit==0) ive_hit++;
						if (rand(0,1)==0) voz=-2; end
						play_snd (s_airp,400,256);
					end
					if (he_dado==0 and enemigo.vulnerable>0)
						enemigo.vulnerable=0;
					end
				end
				
				//////////parte general comun a todos//////////
				x+=inc_x; y+=inc_y;
				if (game_frame%2==0) inc_y++; end

				if (y>=220)
					nuevo_estado=_agachar; y=220; inc_y=0;
					play_snd (s_floor,450,256);
				end
				if (y>=162 and abs(enemigo.x-x)<=35 and flags<>enemigo.flags)
					if (flags) x+=5; else x-=5; end
				end
			end
			 
			 //lightpunchagachado
			case _lpunchaga:
				tipo_ataque=BAJO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)//KYO K.
					graph=lpunch4_kyo[paso++];
					if (paso==sizeof(lpunch4_kyo)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>8)
						if (control(l_punch) and shoryu<20 and
							hado<11 and lp_bloker==0)
							if (control(agachar))
								he_dado=1; paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_kick) and hado<11 and
							hado>-11 and shoryu>-20 and lk_bloker==0)
							nuevo_paso=2;
							if (control(agachar))
								nuevo_estado=_lkickaga; 
								intensidad=0;
								if (control(avanzar))
									intensidad=1;;
								end
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
							end
						end
					end
					if (paso==2)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==55 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,1,607,4,0,10,7,id);
					end
					if (graph==55 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_ATHENA)//athena
					graph=lpunch4_ath[paso++];
					if (paso==sizeof(lpunch4_ath)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>7)
						if (control(l_punch) and hado<11 and
							hado>-11 and shoryu<20 and lp_bloker==0)
							if (control(agachar))
								he_dado=1; paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_kick) and hado<11 and
							hado>-11 and lk_bloker==0)
							nuevo_paso=2;
							if (control(agachar))
								nuevo_estado=_lkickaga;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
							end
						end
						if (control(s_punch) and control(agachar) and
							hado<11 and hado>-11 and lk_bloker==0)
							nuevo_estado=_spunchaga; nuevo_paso=2;
						end
					end
					if (paso==3)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==76 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (flags) hit_x+=15; else hit_x-=15; end
						golpe(hit_x,hit_y,12,1,510,3,0,12,7,id);
					end
					if (graph==76 and ive_hit==0) ive_hit++; end
				end
				
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					graph=lpunch4_vd[paso++];
					if (paso==sizeof(lpunch4_vd)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>9)
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								he_dado=1; paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_kick) and hado>-11 and lk_bloker==0)
							nuevo_paso=2;
							if (control(agachar))
								nuevo_estado=_lkickaga;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
							end
						end
					end
					if (paso==5)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==92 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,1,708,4,0,10,7,id);
					end
					if (graph==92 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)//TERRY B.
					graph=lpunch4[paso++];
					if (paso==sizeof(lpunch4)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>8)
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								he_dado=1; paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_kick) and hado<11 and
							hado>-11 and shoryu<20 and lk_bloker==0)
							nuevo_paso=2;
							if (control(agachar))
								nuevo_estado=_lkickaga;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
							end
						end
					end
					if (paso==3)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==49 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (flags) hit_x=hit_x+8; else hit_x=hit_x-8; end
						golpe(hit_x,hit_y,12,1,507,4,0,10,7,id);
					end
					if (graph==49 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KASUMI)//kasumi todo
					graph=dlpunch_kas[paso++];
					if (paso==sizeof(dlpunch_kas)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==3)
						if (rand(0,2)==0) voz=1; end
						play_snd (s_airp,300,256);
					end
					if (graph==60 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,1,536,4,0,10,7,id);
					end
					if (graph==60 and ive_hit==0) ive_hit++; end
					if (paso>7)
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								he_dado=1; paso=1;
							else
								if (control(avanzar)) intensidad=1;
								else intensidad=0; end
								if (abs(enemigo.x-x)>=55 or intensidad==1)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55 and intensidad==0)
									nuevo_estado=_lpunch2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_kick) and hado<11 and
							hado>-11 and shoryu<20 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
								nuevo_paso=2;
							end
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)//juan hombre
					graph=lpuncha_taku[paso++];
					if (paso==sizeof(lpuncha_taku)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==3)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==70 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,1,501,4,0,10,7,id);
					end
					if (paso==9 and ive_hit==0) ive_hit++; end
					if (paso>7)
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								he_dado=1; paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_kick) and hado<11 and
							hado>-11 and shoryu<20 and lk_bloker==0)
							if (control(agachar))
								nuevo_estado=_lkickaga; nuevo_paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
								nuevo_paso=1;
							end
						end
					end
				end
				if (luchador==FIGHTER_K)//k
					graph=lpunch3_k[paso++];
					if (paso==sizeof(lpunch3_k)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>8)
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								he_dado=1; paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_kick) and hado>-11 and lk_bloker==0)
							nuevo_paso=2;
							if (control(agachar))
								nuevo_estado=_lkickaga;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
							end
						end
					end
					if (paso==3)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==114 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,1,502,4,0,10,7,id);
					end
					if (graph==114 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KULA)//ambiente pop
					graph=lpunch2_kula[paso++];
					if (paso==sizeof(lpunch2_kula)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==3)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==111 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,12,3,527,4,0,10,7,id);
					end
					if (graph==111 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_K9999)
					graph=lpunch2_tetsuo[paso++];
					if (paso==sizeof(lpunch2_tetsuo)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==5)
						play_snd (s_airp,300,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==100 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,9,7,502,4,0,10,7,id);
					end
					if (graph==100 and ive_hit==0) ive_hit++; end
				end
			end
			
			//barrido flojo
			case _lkickaga: 
				tipo_ataque=BAJO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)//KYO K.
					if (paso==0)
						if (control(avanzar)) intensidad=1;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=lkick4_kyo[paso++];
						if (paso==sizeof(lkick4_kyo)/DIV)
							if (control(agachar))
								nuevo_estado=_agachado;
							else
								nuevo_estado=_agachar;
							end
						end
						if (paso>8)
							if (control(l_kick) and hado<11 and
								hado>-11 and shoryu>-20 and lk_bloker==0)
								if (control(agachar))
									paso=1; he_dado=1;
								else
									if (abs(enemigo.x-x)>=55)
										nuevo_estado=_lkick1;
									end
									if (abs(enemigo.x-x)<=55)
										nuevo_estado=_lkick2;
									end
									nuevo_paso=1;
								end
							end
							if (control(l_punch) and shoryu<20 and
								hado<11 and lp_bloker==0)
								nuevo_paso=2;
								if (control(agachar))
									nuevo_estado=_lpunchaga;
								else
									if (abs(enemigo.x-x)>=55)
										nuevo_estado=_lpunch1;
									end
									if (abs(enemigo.x-x)<=55)
										nuevo_estado=_lpunch2;
									end
								end
							end
						end
						if (paso==4)
							play_snd (s_airk,400,256);
							if (rand(0,2)==0) voz=1; end
						end
						if (graph==57 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,6,3,602,3,0,10,7,id);
						end
						if (graph==57 and ive_hit==0) ive_hit++; end
						
					else //if (intensidad==1)
						graph=barrido94[paso++];
						if (paso==sizeof(barrido94)/DIV)
							nuevo_estado=_agachado;
						end
						if (paso==5 or paso==17)
							play_snd (s_airk,400,256); voz=2;
						end
						if (paso==1 or paso==5)
							if (flags) x-=8; else x+=8; end
						end
						if (paso==5 or paso==17)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,16,4,602,3,0,10,8,id);
						end
						if (paso==5) ive_hit=1;  end
						if (paso==17) ive_hit=-1; end
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					graph=lkick4_ath[paso++];
					if (paso==sizeof(lkick4_ath)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>7)
						if (control(l_kick) and hado<11 and
							hado>-11 and lk_bloker==0)
							if (control(agachar))
								paso=1; he_dado=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
								nuevo_paso=1;
							end
						end
						if (control(s_kick) and control(agachar) and
							hado<11 and hado>-11 and lk_bloker==0)
							nuevo_estado=_skickaga; nuevo_paso=2;
						end
						if (control(l_punch) and hado<11 and
							hado>-11 and shoryu<20 and lp_bloker==0)
							nuevo_paso=2;
							if (control(agachar))
								nuevo_estado=_lpunchaga;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
							end
						end
					end
					if (paso==3)
						play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==78 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,6,3,997,3,0,12,7,id);
					end
					if (graph==78 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					graph=lkick4_vd[paso++];
					if (paso==sizeof(lkick4_vd)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>8)
						if (control(l_kick) and hado>-11 and 
							lk_bloker==0)
							if (control(agachar))
								paso=1; he_dado=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							nuevo_paso=2;
							if (control(agachar))
								nuevo_estado=_lpunchaga;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
							end
						end
					end
					if (paso==5)
						play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==97 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,6,3,708,3,0,10,7,id);
					end
					if (graph==97 and ive_hit==0) ive_hit++; end
				end
				
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					graph=lkick4[paso++];
					if (paso==sizeof(lkick4)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>8)
						if (control(l_kick) and hado<11 and
							hado>-11 and shoryu<20 and lk_bloker==0)
							if (control(agachar))
								paso=1; he_dado=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							nuevo_paso=2;
							if (control(agachar))
								nuevo_estado=_lpunchaga;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
							end
						end
					end
					if (paso==3)
						play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==51 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (flags) hit_x=hit_x+5; else hit_x=hit_x-5; end
						golpe(hit_x,hit_y,6,3,509,3,0,10,7,id);
					end
					if (graph==51 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KASUMI)//kasumi todo
					graph=dlkick_kasu[paso++];
					if (paso==sizeof(dlkick_kasu)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>7)
						if (control(l_kick) and hado<11 and
							hado>-11 and shoryu<20 and lk_bloker==0)
							if (control(agachar))
								paso=0; graph=63; he_dado=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=2;
							else
								if (control(avanzar)) intensidad=1;
								else intensidad=0; end
								if (abs(enemigo.x-x)>=55 or intensidad==1)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55 and intensidad==0)
									nuevo_estado=_lpunch2;
								end
								nuevo_paso=2;
							end
						end
					end
					if (paso==3)
						if (rand(0,2)==0) voz=1; end
						play_snd (s_airt,250,256);
					end
					if (graph==64 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y+4,6,3,536,3,0,10,7,id);
					end
					if (graph==64 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_TAKUMA)//parla
					graph=lkicka_taku[paso++];
					if (paso==sizeof(lkicka_taku)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>8)
						if (control(l_kick) and hado<11 and
							hado>-11 and shoryu<20 and lk_bloker==0)
							if (control(agachar))
								paso=0; graph=71; he_dado=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							if (control(agachar))
								nuevo_estado=_lpunchaga; nuevo_paso=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
								nuevo_paso=2;
							end
						end
					end
					if (paso==3) play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==72 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,6,3,507,2,0,10,7,id);
					end
					if (graph==72 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_K)//k
					graph=lkick3_k[paso++];
					if (paso==sizeof(lkick3_k)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>8)
						if (control(l_kick) and hado>-11 and lk_bloker==0)
							if (control(agachar))
								paso=1; he_dado=1;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
								nuevo_paso=1;
							end
						end
						if (control(l_punch) and shoryu<20 and
							hado<11 and hado>-11 and lp_bloker==0)
							nuevo_paso=2;
							if (control(agachar))
								nuevo_estado=_lpunchaga;
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lpunch1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lpunch2;
								end
							end
						end
					end
					if (paso==5)
						play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==119 and he_dado==1)
						if (flags) hit_x=x-45; else hit_x=x+45; end
						golpe(hit_x,210,6,3,502,3,0,10,7,id);
					end
					if (graph==119 and ive_hit==0) ive_hit++; end
				end
				
				if (luchador==FIGHTER_KULA)
					if (paso==0)
						if (control(avanzar)) intensidad=1;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=lkick2_kula[paso++];
						if (paso==sizeof(lkick2_kula)/DIV)
							if (control(agachar))
								nuevo_estado=_agachado;
							else
								nuevo_estado=_agachar;
							end
						end
						if (paso>8)
							if (control(l_kick) and hado>-11 and lk_bloker==0)
								if (control(agachar))
									paso=1; he_dado=1;
									if (control(avanzar)) paso=0; end
								else
									if (abs(enemigo.x-x)>=55)
										nuevo_estado=_lkick1;
									end
									if (abs(enemigo.x-x)<=55)
										nuevo_estado=_lkick2;
									end
									nuevo_paso=1;
								end
							end
						end
						if (paso==5)
							play_snd (s_airk,400,256);
							if (rand(0,2)==0) voz=1; end
						end
						if (graph==115 and he_dado==1)
							if (flags) hit_x=x-55; else hit_x=x+55; end
							golpe(hit_x,210,6,3,527,3,0,10,7,id);
						end
						if (graph==115 and ive_hit==0) ive_hit++; end
					end
					if (intensidad==1)
						graph=lkick4_kula[paso++];
						if (paso==sizeof(lkick4_kula)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso>10 and paso<23)
							if (flags) x-=7; else x+=7; end
						end
						if ((graph>160 and graph<164) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,3,4,525,8,0,10,7,id);
						end
						if (graph==161 and ive_hit==0) ive_hit--;
							play_snd (s_airk,360,256);
							if (rand(0,2)==0) voz=1; end
						end
					end
				end
				if (luchador==FIGHTER_K9999)//llaaamame!!!
					graph=lkick2_tetsuo[paso++];
					if (paso==sizeof(lkick2_tetsuo)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==5) play_snd (s_airk,400,256);
						if (rand(0,2)==0) voz=1; end
					end
					if (graph==103 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y+4,6,3,502,2,0,10,7,id);
					end
					if (graph==103 and ive_hit==0) ive_hit++; end
					if (paso>8)
						if (control(l_kick) and hado>-11 and lk_bloker==0)
							if (control(agachar))
								paso=1; he_dado=1;
								if (control(avanzar)) paso=0; end
							else
								if (abs(enemigo.x-x)>=55)
									nuevo_estado=_lkick1;
								end
								if (abs(enemigo.x-x)<=55)
									nuevo_estado=_lkick2;
								end
								nuevo_paso=1;
							end
						end
					end
				end
			end
			
			// puo fuerte agachado
			case _spunchaga:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)//KYO K.
					graph=spunch4_kyo[paso++];
					if (paso==sizeof(spunch4_kyo)/DIV)
						nuevo_estado=_agachado;
					end
					if (paso==8)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==60 and he_dado==1 and paso<12)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,509,10,0,20,8,id);
					end
					if (graph==60 and ive_hit==0) ive_hit++; end
					if (graph==61 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,502,10,0,12,8,id);
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					graph=spunch4_ath[paso++];
					if (paso==sizeof(spunch4_ath)/DIV)
						nuevo_estado=_agachado;
					end
					if (paso==7)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==70 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,4,2,997,10,0,24,8,id);
					end
					if (graph==70 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					graph=spunchaga_vd[paso++];
					if (paso==sizeof(spunchaga_vd)/DIV)
						nuevo_estado=_agachado;
					end
					if (paso==13)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==103 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (luchador==FIGHTER_IORI)
							golpe(hit_x,hit_y,9,7,703,10,0,20,8,id);
						else
							golpe(hit_x,hit_y,4,2,703,10,0,20,8,id);
						end
					end
					if (graph==103 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)//TERRY
					graph=spunch4[paso++];
					if (paso==sizeof(spunch4)/DIV)
						nuevo_estado=_agachado;
					end
					if (paso==7)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==53 AND he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,4,2,510,10,0,20,8,id);
					end
					if (graph==53 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=dspunch_kas[paso++];
					if (paso==sizeof(dspunch_kas)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==7)
						play_snd (s_airp,300,256); voz=2;
					end
					if (graph==67 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,4,2,502,10,0,20,8,id);
					end
					if (graph==67 and ive_hit==0) ive_hit++; end
					if (control(avanzar) and control(l_punch))
						nuevo_estado=_lpunch1;
						nuevo_paso=1; intensidad=1;
					end
				end
				if (luchador==FIGHTER_TAKUMA)//takumita
					graph=spuncha_taku[paso++];
					if (paso==sizeof(spuncha_taku)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==11)
						play_snd (s_airp,300,256); voz=2;
					end
					if ((graph==74 or graph==75) and paso<19 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,501,10,0,10,8,id);
					end
					if (graph==74 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_K)//k
					graph=spunch3_k[paso++];
					if (paso==sizeof(spunch3_k)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==8)
						play_snd (s_airp,300,256); voz=2;
					end
					if ((graph==96 or graph==97) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,501,10,0,10,8,id);
					end
					if (graph==96 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KULA)//dra-kula
					if (paso==0)
						if (control(avanzar)) intensidad=1;
						else intensidad=0; end
					end
					if (intensidad==0)
						graph=spunch3_kula[paso++];
						if (paso==sizeof(spunch3_kula)/DIV)
							if (control(agachar))
								nuevo_estado=_agachado;
							else
								nuevo_estado=_agachar;
							end
						end
						if (paso==5)
							play_snd (s_airp,300,256); voz=2;
						end
						if (graph==120 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,9,7,526,10,0,10,8,id);
						end
						if (graph==120 and ive_hit==0) ive_hit++; end
					end
					if (intensidad==1)
						graph=spunch5_kula[paso++];
						if (paso==sizeof(spunch5_kula)/DIV)
							if (control(agachar))
								nuevo_estado=_agachado;
							else
								nuevo_estado=_agachar;
							end
						end
						get_real_point(1,&Hit_x,&hit_y);
						if (paso==7)
							play_snd (s_airp,300,256); //voz=2;
							pegata (hit_x,hit_y,529,c_scroll,flags,100,z-3,123,file);
						end
						if (graph==120 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,9,7,526,10,0,10,8,id);
						end
						if (graph==120 and ive_hit==0) ive_hit++; end
					end
				end
				if (luchador==FIGHTER_K9999)
					tipo_ataque=BAJO;
					graph=spunch3_tetsuo[paso++];
					if (paso==sizeof(spunch3_tetsuo)/DIV)
						if (he_dado==0 and enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==11 or paso==23)
						play_snd (s_airp,300,256);
						get_real_point(1,&Hit_x,&hit_y);
						if (paso==11) golpe(hit_x,hit_y,9,7,501,5,0,10,8,id); voz=2;
						else golpe(hit_x,hit_y,18,7,501,5,0,10,8,id); end
					end
					if (graph==110 and ive_hit==0) ive_hit++; end
				end
			end
			
			//barrido fuerte
			case _skickaga:
				tipo_ataque=BAJO;
				if (luchador==FIGHTER_KYO)//KYO
					graph=skick4_kyo[paso++];
					if (paso==sizeof(skick4_kyo)/DIV)
						nuevo_estado=_agachado;
					end
					if (paso==14)
						play_snd (s_airk,400,256); voz=2;
					end
					if (graph==68 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,3,4,609,10,0,20,8,id);
					end
					if (graph==68 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_ATHENA)//athena
					graph=skick4_ath[paso++];
					if (paso==sizeof(skick4_ath)/DIV)
						nuevo_estado=_agachado;
					end
					if (paso==7)
						play_snd (s_airk,400,256); voz=2;
					end
					if (graph==74 and paso<16 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,3,4,995,10,0,24,8,id);
					end
					if (graph==74 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)//IORI
					graph=barrido_vd[paso++];
					if (paso==sizeof(barrido_vd)/DIV)
						nuevo_estado=_agachado;
					end
					if (paso==7)
						play_snd (s_airk,400,256); voz=2;
					end
					if (graph==110 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,3,4,704,10,0,20,8,id);
					end
					if (graph==110 and ive_hit==0) ive_hit--; end
					if (paso==11)
						if (flags) x-=8; else x+=8; end
					end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)//TERRY
					graph=skick4[paso++];
					if (paso==sizeof(skick4)/DIV)
						nuevo_estado=_agachado;
					end
					if (paso==9)
						play_snd (s_airk,400,256); voz=2;
					end
					if (graph==56 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,3,4,508,10,0,20,8,id);
					end
					if (graph==56 and ive_hit==0) ive_hit++; end
				end
				if (luchador==FIGHTER_KYO94)//KYO
					graph=barrido94[paso++];
					if (paso==sizeof(barrido94)/DIV)
						nuevo_estado=_agachado;
					end
					if (paso==5 or paso==17)
						play_snd (s_airk,400,256); voz=2;
					end
					if (paso==1 or paso==5)
						if (flags) x-=8; else x+=8; end
					end
					if (paso==5)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,16,4,602,3,0,10,8,id);
						ive_hit++;
					end
					if (paso==17)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,3,4,602,7,0,20,8,id);
					end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=dskick_kasu[paso++];
					if (paso==sizeof(dskick_kasu)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (graph==71 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y+4,3,4,501,10,0,20,8,id);
					end
					if (graph==71 and ive_hit==0) ive_hit++;
						play_snd (s_airt,320,256); voz=2;
					end
				end
				if (luchador==FIGHTER_TAKUMA)//takuloco
					graph=skicka_taku[paso++];
					if (paso==sizeof(skicka_taku)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==7 or paso==11)
						if (flags)x-=7;else x+=7;end
					end
					if (paso==35 or paso==39)
						if (flags)x+=7;else x-=7;end
					end
					if (graph==79 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y+4,3,4,501,10,0,20,8,id);
					end
					if (graph==79 and ive_hit==0)
						play_snd (s_airk,400,256); 
						voz=2; ive_hit=1;
					end
				end
				if (luchador==FIGHTER_K)//k
					graph=skick3_k[paso++];
					if (paso==sizeof(skick3_k)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso==1) z=2; end
					if (graph==106 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y+4,3,4,505,10,0,20,8,id);
					end
					if (graph==106 and ive_hit==0) ive_hit++;
						play_snd (s_airk,400,256); voz=2;
					end
					if (graph==107) z=0; end
				end
				if (luchador==FIGHTER_KULA)//kula
					graph=skick3_kula[paso++];
					if (paso==sizeof(skick3_kula)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (graph==126 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,3,4,525,10,0,20,8,id);
					end
					if (graph==126 and ive_hit==0) ive_hit++;
						play_snd (s_airk,400,256); voz=2;
					end
				end
				if (luchador==FIGHTER_K9999)
					graph=skick3_tetsuo[paso++];
					if (paso==sizeof(skick3_tetsuo)/DIV)
						if (control(agachar))
							nuevo_estado=_agachado;
						else
							nuevo_estado=_agachar;
						end
					end
					if (paso>4 and paso<23)
						if (flags) x-=(23-paso)/3; else x+=(23-paso)/3; end
					end
					if (paso==5) play_snd (s_dash,412,256); end
					if (graph==118 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,3,4,501,10,0,20,8,id);
					end
					if (graph==118 and ive_hit==0) ive_hit--;
						play_snd (s_airk,400,256);
					end
				end
			end
			
//////////////CASES DE CUANDO RECIBEN YOYAS//////////////////
			//de cuando te coje usted con la u OK
			case 200:
				tipo_ataque=NULO;
				paso++; x+=inc_x; y=220;
				if (paso==0)  graph=402; end
				if (paso==9)  graph=404; end
				if (paso==28) graph=405; end
				if (paso==36) graph=1;   end
				if (paso==38) nuevo_estado=_normal; end
				if (inc_x>0) inc_x--; end
				if (inc_x<0) inc_x++; end
			end
			
			//depie fuertes
			case _recibir_fuertes_suelo:
				tipo_ataque=NULO;
				if (paso==0 and vida>0)
					if (rand(0,3)==0) voz=4; end
				end y=220;
				graph=reci_fuertes[paso++];
				if (paso==sizeof(reci_fuertes)/DIV)
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						hit_combo=0;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
				if (paso>12)
					if (vida<=0 and game_mode!=MODE_TRAINING)
						inc_y=-10;
						if (inc_x>0) inc_x=4;  end
						if (inc_x<0) inc_x=-4; end
						if (inc_x==0)
							if (flags) inc_x=4; else inc_x=-4; end
						end
						nuevo_paso=14; 
						nuevo_estado=_recibir_toss;
						intensidad=0;
					end
					x+=inc_x;
					if (inc_x>0) inc_x--; end
					if (inc_x<0) inc_x++; end
				end
				if (paso>11)
					if (x<=16 or x>=736)
						if (enemigo.he_dado==0 and enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
				end
			end
			
			//bozo fuertes
			case _recibir_fuertes_bozo:
				tipo_ataque=NULO;
				if (paso==0 and vida>0)
					if (rand(0,3)==0) voz=4; end
				end y=220;
				graph=reci_fuertes_bozo[paso++];
				if (graph==411)
					if (luchador==FIGHTER_ATHENA or luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON) graph=410; end
					if (luchador==FIGHTER_KASUMI) graph=405; end
				end
				if (paso==sizeof(reci_fuertes_bozo)/DIV)
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						hit_combo=0;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
				if (paso>12)
					if (vida<=0 and game_mode!=MODE_TRAINING)
						nuevo_paso=14; inc_y=-10;
						if (inc_x>0) inc_x=4;  end
						if (inc_x<0) inc_x=-4; end
						if (inc_x==0)
							if (flags) inc_x=4; else inc_x=-4; end
						end
						nuevo_estado=_recibir_toss; 
						intensidad=0;
					end
					x+=inc_x;
					if (inc_x>0) inc_x--; end
					if (inc_x<0) inc_x++; end
				end
				if (paso>11)
					if (x<=16 or x>=736)
						if (enemigo.he_dado==0 and enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
				end
			end
			
			//bozo flojos
			case _recibir_flojos_bozo:
				tipo_ataque=NULO;
				if (paso==0 and vida>0)
					if (rand(0,4)==0) voz=3; end
				end y=220;
				graph=reci_flojos_bozo[paso++];
				if (graph==411)
					if (luchador==FIGHTER_ATHENA or luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON) graph=410; end
					if (luchador==FIGHTER_KASUMI) graph=405; end
				end
				if (paso==sizeof(reci_flojos_bozo)/DIV)
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						hit_combo=0;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
				if (paso>9)
					if (vida<=0 and game_mode!=MODE_TRAINING)
						nuevo_paso=14; inc_y=-10;
						if (inc_x>0) inc_x=4;  end
						if (inc_x<0) inc_x=-4; end
						if (inc_x==0)
							if (flags) inc_x=4; else inc_x=-4; end
						end
						nuevo_estado=_recibir_toss; 
						intensidad=0;
					end
					x+=inc_x;
					if (paso%2==0)
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
					end
				end
				if (paso>8)
				   if (x<=16 or x>=736)
					  if (enemigo.he_dado==0 and enemigo.estatico==0)
						 enemigo.x-=inc_x;
					  end
				   end
				end
			end
			
			case _recibir_genjuro:
				tipo_ataque=NULO;
				if (paso==0 and vida>0)
					if (rand(0,3)==0) voz=4; end
				end
				y=220; graph=reci_genjuro[paso++];
				if (graph==411)
					if (luchador==FIGHTER_ATHENA or luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON) graph=410; end
					if (luchador==FIGHTER_KASUMI) graph=405; end
				end
				if (paso==sizeof(reci_genjuro)/DIV)
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						hit_combo=0;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
				if (paso>16)
					if (vida<=0 and game_mode!=MODE_TRAINING)
						nuevo_paso=14; inc_y=-10;
						if (inc_x>0) inc_x=4;  end
						if (inc_x<0) inc_x=-4; end
						if (inc_x==0)
							if (flags) inc_x=4; else inc_x=-4; end
						end
						nuevo_estado=_recibir_toss; 
						intensidad=0;
					end
					x+=inc_x;
					if (inc_x>0) inc_x--; end
					if (inc_x<0) inc_x++; end
				end
				if (paso>15)
					if (x<=16 or x>=736)
						if (enemigo.he_dado==0 and enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
				end
			end
			
			//agachado fuertes
			case _recibir_fuertes_agachado:
				tipo_ataque=NULO;
				if (paso==0 and vida>0)
					if (rand(0,3)==0) voz=4; end
				end
				graph=reci_fuertes_agac[paso++];
				if (paso==sizeof(reci_fuertes_agac)/DIV)
					nuevo_paso=0;
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						hit_combo=0;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
				if (paso>12)
					if (vida<=0 and game_mode!=MODE_TRAINING)
						nuevo_paso=14; inc_y=-10;
						if (inc_x>0) inc_x=4;  end
						if (inc_x<0) inc_x=-4; end
						if (inc_x==0)
							if (flags) inc_x=4; else inc_x=-4; end
						end
						nuevo_estado=_recibir_toss; 
						intensidad=0;
					end
					x+=inc_x;
					if (inc_x>0) inc_x--; end
					if (inc_x<0) inc_x++; end
				end
				if (paso>11)
					if (x<=16 or x>=736)
						if (enemigo.he_dado==0 and enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
				end
			end
			
			//recibir barridos fuertes
			case _recibir_barridos_fuertes:
				tipo_ataque=nulo;
				if (paso==0 and vida>0)
					if (rand(0,2)==0) voz=4; end
				end
				paso++;
				if (paso<16)
					if (luchador==FIGHTER_ATHENA or luchador==FIGHTER_KASUMI or luchador==FIGHTER_K) graph=418;
					else graph=417; end
					if (luchador==FIGHTER_KULA) graph=441; end
				end
				if (paso==16)  graph=418; end
				if (paso==20) graph=419; end
				if (paso==24) graph=420; end
				if (paso==28)
					if (luchador==FIGHTER_ATHENA or luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON or
						luchador==FIGHTER_KULA or luchador==FIGHTER_K9999)
						graph=421;
					end
				end
				if (luchador==FIGHTER_KULA)
					if (paso>15 and paso<21) graph=442; end
					if (paso>20 and paso<35) graph=443; end
				end
				
				//parte comun a todos
				if (paso==2 or paso==4 or paso==6 or paso==8 or paso==10)
					x+=2;
				end
				if (paso==1 or paso==3 or paso==5 or paso==7 or paso==9)
					x-=2;
				end
				
				if (paso==12)
					if (vida<=0)
						if (inc_x>0) inc_x=4;  end
						if (inc_x<0) inc_x=-4; end
						if (inc_x==0)
							if (flags) inc_x=4; else inc_x=-4; end
						end
						nuevo_estado=_recibir_toss; 
						intensidad=0;
						nuevo_paso=paso; 
						y0=0;
					end
					inc_y=-8;
				end
				if (paso==28 and y<220) paso--; end
				if (paso>10)
					y+=inc_y; 
					if (game_frame%2==0) inc_y++; end
					if (paso<28) x+=inc_x; end
					if (y>=220) y=220; end
				end
				
				if (paso==28)
					if (luchador==FIGHTER_KASUMI) graph=425;
					else graph=422; end y=220;
					nuevo_estado=_recibir_toss; 
					nuevo_paso=36;
					intensidad=0;
					hit_combo=0; y0=0;
				end
				
				//si esta cayendo//
				if (paso>=18 and y>=200 and vida>0 and
					control(rodar) and pipiolos>0)
					if (flags) inc_x=1;
					else inc_x=-1; end
					nuevo_paso=7; y=220;
					nuevo_estado=_rodar;
					voltear=36; hit_combo=0;
				end
				if (paso==16 and vida==0 and game_mode!=MODE_TRAINING)
					if (enemigo.setwin==asaltos-1)
						partido(0); enemigo.setwin++;
					end
				end
			end
			
			//flojos suelo
			case _recibir_flojos_suelo:
				tipo_ataque=NULO;
				if (paso==0 and vida>0)
					if (rand(0,4)==0) voz=3; end
				end
				if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)
					graph=mea_culpa[paso++];
				else
					graph=reci_flojos[paso++];
					if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
						if (graph==405) graph=402; end
					end
				end 
				y=220;
				if (paso==sizeof(reci_flojos)/DIV)
					nuevo_paso=0;
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						hit_combo=0;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
				if (paso>9)
					if (vida<=0 and game_mode!=MODE_TRAINING)
						nuevo_paso=14; inc_y=-9;
						if (inc_x>0) inc_x=4;  end
						if (inc_x<0) inc_x=-4; end
						if (inc_x==0)
							if (flags) inc_x=4; else inc_x=-4; end
						end
						nuevo_estado=_recibir_toss; 
						intensidad=0;
					end
					x+=inc_x;
					if (paso%2==0)
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
					end
				end
				if (paso>8)
					if (x<=16 or x>=736)
						if (enemigo.he_dado==0 and enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
				end
			end
			
			//flojos agachado
			case _recibir_flojos_agachado:
				tipo_ataque=NULO;
				if (paso==0 and vida>0)
					if (rand(0,4)==0) voz=3; end
				end
				graph=reci_flojos_agac[paso++];
				if (paso==sizeof(reci_flojos_agac)/DIV)
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						hit_combo=0;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
				if (paso>9)
					if (vida<=0 and game_mode!=MODE_TRAINING)
						nuevo_paso=14; inc_y=-9;
						if (inc_x>0) inc_x=4;  end
						if (inc_x<0) inc_x=-4; end
						if (inc_x==0)
							if (flags) inc_x=4; else inc_x=-4; end
						end
						nuevo_estado=_recibir_toss; 
						intensidad=0;
					end
					x+=inc_x;
					if (paso%2==0)
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
					end
				end
				if (paso>8)
					if (x<=16 or x>=736)
						if (enemigo.he_dado==0 and enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
				end
			end
			
			//cuando reciben en el aire fuertes
			case _recibir_fuertes_aire:
				
				tipo_ataque=NULO;
				if (paso==0 and vida>0) inc_x=0;
					if (rand(0,3)==0) voz=4; end
				end
				paso++;
				
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					if (paso>=1 and paso<14)   graph=418; end
					if (paso>=14 and paso<20)  graph=33; end
					if (paso>=20 and paso<24) graph=32; end
					if (paso>=24 and paso<26) graph=31; end
					if (paso>=26 and paso<30) graph=30; end
					if (paso>=30) graph=29; end
				end
				if (luchador==FIGHTER_ATHENA)//meados
					if (paso>=1 and paso<14)   graph=418; end
					if (paso>=14 and paso<20)  graph=37; end
					if (paso>=20 and paso<24) graph=36; end
					if (paso>=24 and paso<26) graph=35; end
					if (paso>=26 and paso<30) graph=34; end
					if (paso>=30) graph=33; end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)// usted ridiculo
					if (paso>=1 and paso<14)   graph=418; end
					if (paso>=14 and paso<18)   graph=419; end
					if (paso>=18 and paso<22)  graph=417; end
					if (paso>=22 and paso<26) graph=42;  end
					if (paso>=26 and paso<30) graph=41;  end
					if (paso>=30) graph=41; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)// teri bogado
					if (paso>=1 and paso<14) graph=409; end
					if (paso>=14 and paso<18) graph=417; end
					if (paso==18) graph=139; end
					if (paso==20) graph=138; end
					if (paso==22) graph=137; end
					if (paso==24) graph=136; end
					if (paso==26) graph=17;  end
					if (paso>=28) graph=18;  end
				end
				if (luchador==FIGHTER_KASUMI)
					if (paso>=1 and paso<14) graph=418; end
					if (paso==14)  graph=25; end
					if (paso==16)  graph=24; end
					if (paso==18)  graph=23; end
					if (paso==20) graph=22; end
					if (paso==22) graph=19; end
					if (paso==26) graph=20; end
					if (paso>=30) graph=21; end
				end
				if (luchador==FIGHTER_TAKUMA)
					if (paso>=1 and paso<14) graph=418; end
					if (paso==14)  graph=23; end
					if (paso==16)  graph=22; end
					if (paso==18)  graph=21; end
					if (paso==20) graph=19; end
					if (paso>=22) graph=20; end
				end
				if (luchador==FIGHTER_K)
					if (paso>=1 and paso<14) graph=418; end
					if (paso==14)  graph=123; end
					if (paso==18)  graph=56; end
					if (paso>=22) graph=55; end
				end
				if (luchador==FIGHTER_KULA)
					if (paso>=1 and paso<14) graph=418; end
					if (paso==14)  graph=47; end
					if (paso==18)  graph=48; end
					if (paso==22) graph=49; end
					if (paso==26) graph=50; end
					if (paso>=30) graph=51; end
				end
				if (luchador==FIGHTER_K9999)
					if (paso>=1 and paso<14) graph=409; end
					if (paso==14)  graph=417; end
					if (paso==20) graph=43; end
					if (paso==22) graph=44; end
					if (paso==26) graph=45; end
					if (paso>=30) graph=46; end
				end
				if (paso==2 or paso==4 or paso==6 or paso==8 or paso==10)
					x+=2;
				end
				if (paso==1 or paso==3 or paso==5 or paso==7 or paso==9)
					x-=2;
				end
				if (paso==10) inc_y=-6;
					if (enemigo.x==x)
						if (enemigo.flags) inc_x=-1; else inc_x=1; end
					end
					if (enemigo.x<x)
						if (enemigo.flags) inc_x=0; else inc_x=2; end
					end
					if (enemigo.x>x)
						if (enemigo.flags) inc_x=-2; else inc_x=0; end
					end
				end
				if (paso>10)//comienza los incrementos
					y+=inc_y; x+=inc_x; if (game_frame%2) inc_y++; end
				end
				if (paso>20 and y>=220)
					y=220; inc_y=0; inc_x=0; play_snd (s_floor,450,256);
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						voltear=15; hit_combo=0;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
				if (vida<=0 and paso==12 and game_mode!=MODE_TRAINING)
					nuevo_paso=14; 
					nuevo_estado=_recibir_toss; 
					intensidad=0;
					inc_y = -6; 
					if (inc_x>0) inc_x++; end
					if (inc_x<0) inc_x--; end
				end
			end
			
			///////////////////////////////////////////////////////
			case _charge:
				tipo_ataque=NULO;
				if (paso>4) power++; end
				if (paso==0)
					if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
						play_voice(s_kyo17,512,256);
					end
					if (luchador==FIGHTER_ATHENA)
						play_voice(s_ath10,512,256);
					end
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)
						play_voice(s_iori5,512,256);
					end
					if (luchador==FIGHTER_KASUMI)
						play_voice(s_kasumi1,512,256);
					end
					if (luchador==FIGHTER_TAKUMA)
						play_voice(s_takuma8,512,256);
					end
				end
				if (luchador<>FIGHTER_ATHENA and luchador<>FIGHTER_TAKUMA and
					luchador<>FIGHTER_K and luchador<>FIGHTER_KULA)
					graph=kyo_carga[paso++];
					if (paso==sizeof(kyo_carga)/DIV) paso=6; end
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_TERRY or luchador==FIGHTER_CRIMSON or
						luchador==FIGHTER_KASUMI or luchador==FIGHTER_K9999)
						if (graph==358) graph=300; end
					end
					if (luchador==FIGHTER_TERRY94)
						if (graph==300 or graph==358) graph=127; end
						if (graph==301) graph=168; end
						if (graph==302) graph=169; end
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					paso++;
					if (paso==1) graph=300; end
					if (paso==4) graph=301; end
					if (paso==5) graph=302; end
					if (paso==6) graph=303; end
					if (paso==7) paso=5; graph=302; end
				end
				if (luchador==FIGHTER_K)
					paso++;
					if (paso==1)  graph=216; end
					if (paso==9)  graph=217; end
					if (paso==11) graph=218; end
					if (paso==13) graph=219; end
					if (paso==15) paso=9; graph=217; end
				end
				if (luchador==FIGHTER_KULA)
					paso++;
					if (paso==1) graph=214; end
					if (paso==9) graph=212; end
					if (paso==11) graph=213; end
					if (paso==13) paso=9; graph=212; end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					graph=ath_carga[paso++];
					if (paso==sizeof(ath_carga)/DIV)
						paso=16;
					end
					if (paso==1)
						if (flags) x+=3; else x-=3; end
					end
					if (not control(charge))
						if (flags) x-=3; else x+=3; end
					end
				end
				if (paso==8)
					if (id==id_luchador1 and s_charge1==-1)
						s_charge1=play_snd (s_charging,512,225);
					end
					if (id==id_luchador2 and s_charge2==-1)
						s_charge2=play_snd (s_charging,512,225);
					end
				end
				if (game_frame%6==0)
					hit_stars (10,x,y);
				end
				if (not control(charge) or power=>74)
					nuevo_estado=_normal;
				   
					if (id==id_luchador1)
						stop_snd(s_charge1); s_charge1=-1;
					end
					if (id==id_luchador2)
						stop_snd(s_charge2); s_charge2=-1;
					end
					stop_voice (id);
					
					if (power=>74)
						play_snd (s_charged,512,256); power=74;
					end
				end
			end
			
			case _saltar:
				
				if (paso==0)
					tipo_ataque=NULO;
					
					inc_x = 0; 
					inc_y = -9;
					
					if (luchador==FIGHTER_ATHENA) inc_y=-10; end
					if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON) inc_y=-8; end
					
					if (control(avanzar))
						if (flags) inc_x=-3; else inc_x=3; end
						if (bSuperJump) inc_x=inc_x<<1; end
						
					elseif (control(retroceder))
						if (flags) inc_x=3; else inc_x=-3; end
						if (bSuperJump) inc_x=inc_x<<1; end
						
					else
						if (bSuperJump) inc_y -= 1; end
					end
				end
				
				if (paso<=6 and not control(saltar))
					if (id==id_luchador2 and cputype==1 and 
						game_mode==MODE_TRAINING)
					else
						inc_y=-6; altura=1;//contador de tipo saltejo
						if (inc_x==0) bSuperJump = false; end
					end
				end
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					if (inc_x==0 or altura==1)
						graph=salt_kyo[paso++];
						if (paso==sizeof(salt_kyo)/DIV) paso--; end
					end
					if ((inc_x>0 and altura==0 and flags) or
						(inc_x<0 and altura==0 and flags==0))
						graph=salt_kyo_atras[paso++];
						if (paso==sizeof(salt_kyo_atras)/DIV) paso--; end
					end
					if ((inc_x>0 and altura==0 and flags==0) or
						(inc_x<0 and altura==0 and flags))
						graph=salt_kyo_alante[paso++];
						if (paso==sizeof(salt_kyo_alante)/DIV) paso--; end
					end
				end
				if (luchador==FIGHTER_ATHENA) ive_hit=2;
					if (inc_x==0 or altura==1)
						graph=salto_ath[paso++];
						if (paso==sizeof(salto_ath)/DIV) paso--; end
					end
					if ((inc_x>0 and altura==0 and flags) or
						(inc_x<0 and altura==0 and flags==0))
						graph=saltoatrasath[paso++];
						if (paso==sizeof(saltoatrasath)/DIV) paso--; end
						if (x=>scroll.x0+300 and control(avanzar) and y<200)
							graph=164; y-=20; frame(500); graph=165; frame;
							paso=8; inc_x=-inc_x*2;
							if (control(saltar)) inc_y=-6;
							else inc_y=-3; altura=1; end
						end
						if (x=<scroll.x0+20 and control(avanzar) and y<200)
							graph=164; y-=20; frame(500); graph=165; frame;
							paso=8; inc_x=-inc_x*2;
							if (control(saltar)) inc_y=-6;
							else inc_y=-3; altura=1; end
						end
					end
					if ((inc_x>0 and altura==0 and flags==0) or
						(inc_x<0 and altura==0 and flags))
						graph=saltoala_ath[paso++];
						if (paso==sizeof(saltoala_ath)/DIV) paso--; end
					end
					if (get_dist(enemigo)<80 and control(agachar) and
						enemigo.y<220 and y<180 and hado>-11 and shoryu<19 and
						enemigo.paso<40)
						if (control(s_punch) and sp_bloker==0)
							nuevo_estado=_voltear; inc_x=2; inc_y=0;
							enemigo.estado=enemigo.nuevo_estado=100;
							if (flags) flags=0; else flags=1; end
						end
					end
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)
					graph=salto_vd[paso++];
					if (paso==sizeof(salto_vd)/DIV) paso--; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
					graph=salto[paso++];
					if (paso==sizeof(salto)/DIV) paso--; end
				end
				if (luchador==FIGHTER_KASUMI) ive_hit=2; he_dado=0;
					if (inc_x==0 or altura==1)
						graph=sal_kas[paso++];
						if (paso==sizeof(sal_kas)/DIV) paso--; end
					end
					if ((inc_x>0 and altura==0 and flags) or
						(inc_x<0 and altura==0 and flaGS==0))
						graph=sal_kas_rew[paso++];
						if (paso==sizeof(sal_kas_rew)/DIV) paso--; end
					end
					if ((inc_x>0 and altura==0 and flags==0) or
						(inc_x<0 and altura==0 and flags))
						graph=sal_kas_avz[paso++];
						if (paso==sizeof(sal_kas_avz)/DIV) paso--; end
					end
				end
				if (luchador==FIGHTER_TAKUMA)//el antonio
					if (inc_x==0 or altura==1)
						graph=sal_taku[paso++];
						if (paso==sizeof(sal_taku)/DIV) paso--; end
					end
					if ((inc_x>0 and altura==0 and flags) or
						(inc_x<0 and altura==0 and flags==0))
						graph=sal_taku_ret[paso++];
						if (paso==sizeof(sal_taku_ret)/DIV) paso--; end
					end
					if ((inc_x>0 and altura==0 and flags==0) or
						(inc_x<0 and altura==0 and flags))
						graph=sal_taku_ava[paso++];
						if (paso==sizeof(sal_taku_ava)/DIV) paso--; end
					end
				end
				if (luchador==FIGHTER_K) ive_hit=2;
					graph=slt_k[paso++];
					if (paso==sizeof(slt_k)/DIV) paso--; end
					if ((inc_x>0 and altura==0 and flags==0) or
						(inc_x<0 and altura==0 and flags))
						if (graph==55 and paso<8) graph=122; end
					end
					if ((inc_x>0 and altura==0 and flags) or
						(inc_x<0 and altura==0 and flags==0))
						if (graph==55 and paso<8) graph=123; end
					end
				end
				if (luchador==FIGHTER_KULA) ive_hit=2;
					if ((inc_x>0 and flags==0) or
						(inc_x<0 and flags) or inc_x==0)
						graph=s1_kula[paso++];
						if (altura==1)
							if (paso==3 or paso==7 or paso==11) paso++; end
						end
						if (paso==sizeof(s1_kula)/DIV) paso--; end
					end
					if ((inc_x>0 and flags) or
						(inc_x<0 and flags==0))
						graph=s2_kula[paso++];
						if (paso==sizeof(s2_kula)/DIV) paso--; end
					end
				end
				if (luchador==FIGHTER_K9999)
					graph=st_tetsuo[paso++];
					if (paso==sizeof(st_tetsuo)/DIV) paso--; end
				end
				if (paso>=6)
					y+=inc_y; x+=inc_x; 
					if ((game_frame%2)==0) inc_y++; end
				end
				if (y>=220 and paso>=8)
					y=220; inc_y=0; altura=0;
					play_snd (s_floor,450,256);
					nuevo_estado=_agachar;
					if (x>enemigo.x) flags=1; end
					if (x<enemigo.x) flags=0; end
				end
				if (control(l_punch)  and lp_bloker==0 and not
					(luchador==FIGHTER_KASUMI and hado>10) and not
					(luchador==FIGHTER_ATHENA and hado<-10) and not
					(luchador==FIGHTER_ATHENA and shoryu>19))
					nuevo_estado=_lpunchair;
				end
				if (control(s_punch)  and sp_bloker==0 and not
					(luchador==FIGHTER_KASUMI and hado>10) and not
					(luchador==FIGHTER_ATHENA and hado<-10) and not
					(luchador==FIGHTER_ATHENA and shoryu>19) and not
					(luchador==FIGHTER_ATHENA and get_dist(enemigo)<90 and
					control(agachar)))
					nuevo_estado=_spunchair;
					if (luchador==FIGHTER_KYO94)
						if (control(agachar)) intensidad=1;
						else intensidad=0; end
					end
				end
				if (control(l_kick)  and lk_bloker==0 and not
					(luchador==FIGHTER_ATHENA and hado>10))
					nuevo_estado=_lkickair;
				end
				if (control(s_kick)  and sk_bloker==0 and not
					(luchador==FIGHTER_ATHENA and hado>10))
					nuevo_estado=_skickair;
				end
				if (control(toss)  and ts_bloker==0 and not
					(luchador==FIGHTER_ATHENA and hado<-10))
					nuevo_estado=_tossair;
				end
				if (bSuperJump)
					if (paso<30 and (paso%2==0))
						prota_shadow(x,y,0);
					end
					if (paso==6) play_snd (s_sjump,480,256); end
				else
					if (paso==6) play_snd (s_jump,480,256); end			
				end
			end
			
			case _rodar:
				if (paso==0) 
					tipo_ataque=NULO;
					intensidad=voltear=0;
				end
				if (paso==1) atravesar=1;
					if (inc_x==0)
						if (flags) inc_x=-1; else inc_x=1; end
					end
				end
				if (rod==1)
					if (paso<5)
						prota_shadow(x,y,0);
					end
				end
				if (luchador==FIGHTER_KASUMI)//excepcion rara
					if (paso==7 and intensidad<>0 and intensidad<>1)
						intensidad=1; paso=5;
					end
				end
				if (paso==7) 
					rod=0;
					if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
						if (voltear>0)
							play_voice(s_kyo20,512,256);
						else
							play_voice(s_kyo8,512,256);
						end
					end
					if (luchador==FIGHTER_ATHENA)
						play_voice(s_ath24,512,256);
					end
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)
						if (voltear>0 and luchador==FIGHTER_IORI)
							play_voice(s_iori24,512,256);
						else
							play_voice(s_iori11,512,256);
						end
					end
					if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
						play_voice(s_terry9,512,256);
					end
					if (luchador==FIGHTER_KASUMI)
						play_voice(s_kasumi8,512,256);
					end
					if (luchador==FIGHTER_TAKUMA)
						play_voice(s_takuma3,512,256);
					end
					if (luchador==FIGHTER_K and voltear>0)
						play_voice(s_k22,472,256);
					end
				end
				
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					if ((inc_x<0 and flags==1) or (inc_x>0 and flags==0))
						graph=rodarala_kyo[paso++];
					else
						graph=rodaratra_kyo[paso++];
					end
					if (paso>8 and paso<28)
						if (inc_x<0) x-=5; else x+=5; end
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA ASAM.
					if (voltear>0)
						graph=recuperar_ath[paso++];
						if (paso==sizeof(recuperar_ath)/DIV) paso=30; end
						if (paso<24)
							if (inc_x<0) x-=(24-paso)/2; else x+=(24-paso)/2; end
						end
					else
						if ((inc_x<0 and flags==1) or (inc_x>0 and flags==0))
							graph=rodarala_ath[paso++];
						end
						if ((inc_x<0 and flags==0) or (inc_x>0 and flags==1))
							graph=rodaratr_ath[paso++];
						end
						if (paso>8 and paso<28)
							if (inc_x<0) x-=5; else x+=5; end
						end
					end
				end
				if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)//IORI YAGAM.
					if ((inc_x<0 and flags==1) or (inc_x>0 and flags==0))
						graph=rodarayala_vd[paso++];
					end
					if ((inc_x<0 and flags==0) or (inc_x>0 and flags==1))
						graph=rodaratra_vd[paso++];
					end
					if (paso>7 and paso<28)
						if (inc_x<0) x-=6; else x+=6; end
					end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)//TERRY BOGAR.
					if ((inc_x<0 and flags==1) or (inc_x>0 and flags==0))
						graph=rodarala[paso++];
					end
					if ((inc_x<0 and flags==0) or (inc_x>0 and flags==1))
						graph=rodaratra[paso++];
					end
					if (paso>6 and paso<27)
						if (inc_x<0) x-=6; else x+=6; end
					end
				end
				if (luchador==FIGHTER_KASUMI)//kasumi
					if (paso==0)
						if ((inc_x<0 and flags==1) or (inc_x>0 and flags==0))
							intensidad=0;
						end
						if ((inc_x<0 and flags==0) or (inc_x>0 and flags==1))
							intensidad=1;
						end
					end
					if (intensidad==0)
						graph=rodara_kas[paso++];
						if (paso==7 or paso==23)
							if (flags==0) flags=1; else flags=0; end
						end
					end
					if (intensidad==1)
						graph=rodarb_kas[paso++];
					end
					if (paso>6 and paso<25)
						if (inc_x<0) x-=6; else x+=6; end
					end
				end
				if (luchador==FIGHTER_TAKUMA)//takuma
					graph=rodar_taku[paso++];
					if ((inc_x<0 and flags==0) or (inc_x>0 and flags==1))
						if (flags) flags=0; else flags=1; end
					end
					if (paso>6 and paso<21)
						if (inc_x<0) x-=7; else x+=7; end
					end
				end
				if (luchador==FIGHTER_K)//k'
					if (voltear>0)
						graph=rodar_monte[paso++];
						if (paso==sizeof(rodar_monte)) paso=30; end
						if (paso<23)
							if (inc_x<0) x-=(23-paso)/2; else x+=(23-paso)/2; end
						end
				   else
						if ((inc_x<0 and flags==1) or (inc_x>0 and flags==0))
							graph=rodar_ala_k[paso++];
							if (paso==sizeof(rodar_ala_k)/DIV) paso=30; end
						end
						if ((inc_x<0 and flags==0) or (inc_x>0 and flags==1))
							graph=rodar_atr_k[paso++];
							if (paso==sizeof(rodar_atr_k)/DIV) paso=30;	end
						end
						if (paso>8 and paso<28)
							if (inc_x<0) x-=7; else x+=7; end
							prota_shadow(x,y,0);
						end
					end
				end
				if (luchador==FIGHTER_KULA)//kula
					if (voltear>0)
						graph=rodext_kula[paso++];
						if (paso<24)
							if (inc_x<0) x-=(24-paso)/2; else x+=(24-paso)/2; end
						end
					else
						if ((inc_x<0 and flags==1) or (inc_x>0 and flags==0))
							graph=rodral_kula[paso++];
						end
						if ((inc_x<0 and flags==0) or (inc_x>0 and flags==1))
							graph=rodrat_kula[paso++];
							if (paso>6 and paso<13) prota_shadow(x,y,0); end
						end
						if (paso>4 and paso<23)
							if (inc_x<0) x-=6; else x+=6; end
						end
					end
				end
				if (luchador==FIGHTER_K9999)//tetsuo shima
					graph=rd_tetsuo[paso++];
					if ((inc_x<0 and flags==0) or (inc_x>0 and flags==1))
						if (flags) flags=0; else flags=1; end
					end
					if (paso>6 and paso<23)
						if (inc_x<0) x-=8; else x+=8; end
					end
				end
				
				// final del rodar
				if (paso==30) 
					atravesar=0; inc_x=0; 
					nuevo_estado=_normal;
					if (control(agachar) and control(retroceder))
						nuevo_estado=_agachadoguardia;
					end
					if (control(agachar) and not control(retroceder))
						nuevo_estado=_agachado;
					end
					if (not control(agachar) and control(retroceder))
						nuevo_estado=_retroceder;
					end
					if (not control(agachar) and not control(retroceder))
						nuevo_estado=_normal;
					end
					
					if ((flags and x<enemigo.x) or (flags==0 and x>enemigo.x))
						shoryu=-shoryu; hado=-hado; shokoh=-shokoh;
					end
					if (enemigo.x>x) flags=0; else flags=1; end
				end
			end
			
			case _gesto_princ:
				tipo_ataque=NULO;
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94) //KYO
					if (enemigo.luchador==FIGHTER_IORI)
						graph=kyovsiori[paso++];
						if (paso==sizeof(kyovsiori)/DIV)
							nuevo_estado=_normal;
						end
						if (paso<110)
							get_real_point(1,&hit_x,&hit_y);
						end
						if (paso==30)
							son=pegata (hit_x,hit_y,0,c_scroll,0,100,-2,16,file);
						end
						if (paso==42) son.paso=0; son.estado=1; end
						if (paso==110)
							play_snd (s_kyo1,500,256);
							son.paso=0; son.estado=2;
						end
						if (paso==150)
							if (flags) x+=15; else x-=15; end
						end
						if (paso==170)
							play_snd (s_kyo32,512,256);
						end
						if (paso==312)
							if (flags) x-=4; else x+=4; end
							if (id==id_luchador1) x=329; else x=459; end
						end
						if (paso>40 and paso<265 and enemigo.paso==127)
							enemigo.paso--;
						end
					else
						
						graph=inicio_kyo[paso++];
						get_real_point(1,&hit_x,&hit_y);
						if (paso==sizeof(inicio_kyo)/DIV)
							son.paso=0; son.estado=2;
							nuevo_estado=_normal;
							if (flags) x-=3; else x+=3; end
						end
						if (paso==72)
							son=pegata (hit_x,hit_y,0,c_scroll,0,100,-2,16,file);
						end
						if (paso==86) SON.PASO=0; SON.ESTADO=1; end
						if (paso==108) play_snd (s_kyo2,512,256); end
						if (paso==112)
							if (flags) x+=12; else x-=12; end
							play_snd (s_kyo1,500,256);
							son.paso=0; son.estado=2;
						end
					end
				end
				if (luchador==FIGHTER_ATHENA)//athena
				   graph=inicio_ath[paso];
				   if (game_frame%2==0) paso++;
						if (paso==sizeof(inicio_ath)/DIV)
							nuevo_estado=_normal;
							if (flags) x-=12; else x+=12; end
						end
						if (paso==73 or paso==75 or paso==77 or
							paso==79 or paso==143)
							if (flags) x-=6; else x+=6; end
						end
						if (paso==98)
							if (flags) x+=3; else x-=3; end
						end
						if (paso==110)
							if (flags) x+=6; else x-=6; end
						end
						
						if (paso==62) play_snd (s_ath12,512,256); end
						if (paso==110) play_snd (s_ath13,512,256); end
						if (paso==81)
							if (flags) hit_x=x+12; else hit_x=x-12; end
							pegata (hit_x,y-99,0,c_scroll,flags,100,z+1,17,id.file);
							play_snd (s_ath2,512,260);
						end
					end
				end
				if (luchador==FIGHTER_IORI)//IORI Y.
					if (enemigo.luchador==FIGHTER_KYO or 
						enemigo.luchador==FIGHTER_KYO94)
						graph=iorivskyo[paso++];
						if (paso==sizeof(iorivskyo)/DIV)
							nuevo_estado=_normal;
						end   
						if (paso==23)
							get_real_point(1,&hit_x,&hit_y);
							pegata (hit_x,hit_y,900,c_scroll,flags,100,z+1,102,file);
						end
						if (paso==29)
							play_snd (s_iori30,512,256);
						end
						if (paso==139 or paso==145 or paso==151 or paso==157)
							if (flags) x+=7; else x-=7; end
						end
						if (paso<116 and enemigo.paso==50)
							enemigo.paso--;
						end
					else
						graph=sugu_raku[paso++];
						if (paso==sizeof(sugu_raku)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==47) play_snd (s_iori1,512,256); end
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					graph=vacile_inicial[paso++];
					if (paso==sizeof(vacile_inicial)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==69) play_snd (s_terry10,512,256); end
				end
				if (luchador==FIGHTER_CRIMSON)
					graph=llamanar[paso++];
					if (paso==sizeof(llamanar)/DIV)
						nuevo_estado=_normal;
					end
					if (enemigo.luchador==FIGHTER_IORI and paso<75 and
						enemigo.paso==2) enemigo.paso--;
					end
					if (paso==29) play_snd (s_iori28,512,256); end
					if (paso==99) play_snd (s_iori29,512,256); end
					if (paso<157)
						get_real_point(1,&hit_x,&hit_y);
					end
					if (paso==9 or paso==11)
						if (flags) x+=5; else x-=5; end
					end
					if (paso==15)
						if (flags) x+=6; else x-=6; end
					end
					if (paso==195 or paso==203)
						if (flags) x-=8; else x+=8; end
					end
					if (paso==23)
						son=pegata (hit_x,hit_y,0,c_scroll,flags,100,-2,16,file);
						son.estado=4;
					end
					if (paso==95)  son.estado=10; son.graph=546; end
					if (paso==97)  son.graph=585; end
					if (paso==101) son.graph=586; cambiar=1;
						from counter=549 to 552;
							convert_palette (file,counter,&naranxlila);
						end
					end
					if (paso==103) son.estado=4;  end
					if (paso==157) son.estado=6; son.paso=0;
						play_snd (s_burn1,512,320);
					end
				end
				if (luchador==FIGHTER_KASUMI)
					if (enemigo.luchador==FIGHTER_TAKUMA)
						graph=kyokugenryu[paso++];
						if (paso==sizeof(kyokugenryu)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==28) play_snd (s_kasumi20,512,256); end
						if (paso==83)
							if (flags) x-=2; else x+=2; end
						end
						if (paso==91) play_snd (s_kasumi21,512,256);
							if (flags) x-=4; else x+=4; end
						end
					else
						graph=kasumi_pres[paso++];
						if (paso==sizeof(kasumi_pres)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==31 or paso==47)
							if (flags) x-=12; else x+=12; end
						end
						if (paso==103)
							if (flags) hit_x=x-12; else hit_x=x+12; end
							pegata (hit_x,y,500,c_scroll,flags,100,z-10,98,file);
							play_snd (s_kasumi10,512,256);
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)//antoito
					graph=start_taku[paso++];
					if (paso==sizeof(start_taku)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==1)
						get_real_point(1,&hit_x,&hit_y);
						pegata (hit_x,hit_y,graph,c_scroll,flags,100,z-1,96,file);
					end
					if (paso==5 or paso==9 or paso==13)
						if (flags) x-=4; else x+=4; end
					end
				end
				if (luchador==FIGHTER_K)//k
					if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_KYO94 or
						enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON)
						graph=kvskyo[paso++];
						if (paso==sizeof(kvskyo)/DIV)
							nuevo_estado=_normal;
						end
						if ((paso<sizeof(kvskyo)/DIV)-24)
							get_real_point(1,&hit_x,&hit_y);
							enemigo.paso=1;
						end
						if (paso==15)
							pegata (hit_x,hit_y,525,c_scroll,flags,100,-3,104,file);
						end
					else
						if (enemigo.luchador==FIGHTER_K9999)
							graph=mofa_k[paso++];
							if (paso==sizeof(mofa_k)/DIV)
								nuevo_estado=_normal;
							end
							if (paso==7) play_snd (s_k18,512,256); end
							if (enemigo.estado==_gesto_princ)
								paso=0; graph=9;
							end
						else
							graph=pre_k[paso++];
							if (paso==sizeof(pre_k)/DIV)
								nuevo_estado=_normal;
							end
							if (paso==63) play_snd (s_k9,412,256); end
						end
					end
				end
				if (luchador==FIGHTER_KULA)//kula
					graph=pre_kula[paso++];
					if (paso==sizeof(pre_kula)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==9) play_snd (s_kura39,512,256); end
					if (paso==83)
						pegata (x,y,540,c_scroll,flags+16,100,z-3,120,file);
					end
					if (paso==123)
						if (flags)
							pegata (x+40,160,543,c_scroll,flags,100,z+3,121,file);
						else
							pegata (x-40,160,543,c_scroll,flags,100,z+3,121,file);
						end
					end
					if (graph>199 and graph<206) y=190; end
					if (graph==206) y=205; end
					if (graph=>207) y=220; end
				end
				if (luchador==FIGHTER_K9999)//tetsuo shima
					if (enemigo.luchador==FIGHTER_KULA)
						graph=pre_nonest[paso++];
						if (paso==sizeof(pre_nonest)/DIV)
							nuevo_estado=_normal;
						end
						if (enemigo.paso<240 and enemigo.estado==44) paso=1; end
						if (paso==23) play_snd (s_tetsuo15,412,256); end
				   else
						graph=pre_tetsuo[paso++];
						if (paso==sizeof(pre_tetsuo)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==35)
							if (enemigo.luchador==FIGHTER_K) play_snd (s_tetsuo20,412,256);
							else play_snd (s_tetsuo14,412,256); end
						end
					end
				end
			end
			
///////////////////GUARDIAS /////////////////////////
			case _guardiaalta:
				tipo_ataque=NULO;
				if (paso<6 and super_guard==1) paso=6; end
				if (paso<7)
					if (enemigo.estado<>_spunch1 and enemigo.estado<>_skick1 and
						enemigo.estado<>_spunch2 and enemigo.estado<>_skick2 and
						enemigo.estado<>_spunchair and enemigo.estado<>_spunchaga and
						enemigo.estado<>_skickair and enemigo.estado<>_toss1 and
						enemigo.estado<>_tossair and enemigo.estado<>_ayuken and
						enemigo.estado<>_shoryuken and enemigo.estado<>_uatras_punch and
						enemigo.estado<>_uatras_kick and enemigo.estado<>_satras_kick and
						enemigo.estado<>_extra_move and enemigo.estado<>_special1 and
						enemigo.estado<>_special2 and enemigo.estado<>_u_kick)
						nuevo_estado=_retroceder;
					end
				end
				
				paso++;
				if (paso<7) ive_hit=2;
					if (paso==1) inc_x=0; end
					if (luchador==FIGHTER_KULA)
						if (paso==1) graph=396;
							pegata (x,y,0,c_scroll,flags,100,z-3,124,file);
						end
						if (paso==3) graph=398; end
					else
						if (paso==1) graph=388; end
						if (paso==3) graph=389; end
					end
					if (paso==6) graph=400; paso--; end
					if (control(avanzar)) nuevo_estado=_avanzar; end
					if (control(guasa)) nuevo_estado=_burla; end
					if (control(l_punch) and shoryu>-20 and
						hado>-11 and not control(agachar))
						if (abs(enemigo.x-x)>=55)
							nuevo_estado=_lpunch1;
						end
						if (abs(enemigo.x-x)<=55)
							nuevo_estado=_lpunch2;
						end
					end
					if (control(l_kick) and shoryu>-20 and
						hado>-11 and not control(agachar))
						if (abs(enemigo.x-x)>=55)
							nuevo_estado=_lkick1;
						end
						if (abs(enemigo.x-x)<=55)
							nuevo_estado=_lkick2;
						end
					end
					if (control(s_punch) and shoryu>-20 and
						hado>-11 and not control(agachar))
						if (abs(enemigo.x-x)>=55)
							nuevo_estado=_spunch1; intensidad=0;
						end
						if (abs(enemigo.x-x)<=54)
							nuevo_estado=_spunch2;
						end
					end
					if (control(s_kick) and shoryu>-20 and
						hado>-11 and not control(agachar))
						if (abs(enemigo.x-x)>=55)
							nuevo_estado=_skick1; intensidad=0;
						end
						if (abs(enemigo.x-x)<=54)
							nuevo_estado=_skick2;
						end
					end
					if (control(charge) and power<74)
						if (file==fich1 and id_pow1.estado<>2)
							nuevo_estado=_charge;
						end
						if (file==fich2 and id_pow2.estado<>2)
							nuevo_estado=_charge;
						end
					end
					if (control(toss) and not (hado<-11 and
						(vida<DANGER_LIFE or power==74)))
						nuevo_estado=_toss1;
					end
					if (control(rodar))
						nuevo_estado=_rodar;
						if (control(retroceder))
							if (flags) inc_x=1; else inc_x=-1; end
						else
							if (flags) inc_x=-1; else inc_x=1; end
						end
					end
					if (control(saltar))
						nuevo_estado=_saltar;
					end
					if (control(agachar))
						nuevo_estado=_guardiabaja; nuevo_paso=paso;
					end
					if (not control(retroceder))
						nuevo_estado=_normal;
					end
				end
				if (paso>=7)//si ha recibido pal pelo
					graph=400;
					if (paso>16 and super_guard==0)
						if (inc_x>0 and game_frame%2==0) inc_x-=1; end
						if (inc_x<0 and game_frame%2==0) inc_x+=1; end
						
						x+=inc_x;
						if ((x<=18 or x>=736) and darmagia==0 and
							enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
					
					if (paso>24)
						super_guard=0; //vuelve a su valor original
						if (control(retroceder))
							if (abs(id_luchador1.x-id_luchador2.x)<=170 and
								enemigo.estado==_spunch1 xor
								enemigo.estado==_skick1 xor
								enemigo.estado==_spunch2 xor
								enemigo.estado==_skick2 xor
								enemigo.estado==_spunchair xor
								enemigo.estado==_spunchaga xor
								enemigo.estado==_skickair xor
								enemigo.estado==_toss1 xor
								enemigo.estado==_tossair xor
								(enemigo.estado==_ayuken and enemigo.luchador<>FIGHTER_ATHENA and
								(enemigo.luchador<>FIGHTER_IORI and enemigo.intensidad<>3) and
								(enemigo.luchador<>FIGHTER_CRIMSON and enemigo.intensidad<>3)) xor
								enemigo.estado==_ayuken xor
								enemigo.estado==_shoryuken xor
								enemigo.estado==_uatras_punch xor
								enemigo.estado==_uatras_kick xor
								enemigo.estado==_satras_kick xor
								enemigo.estado==_extra_move xor
								enemigo.estado==_special1 xor
								enemigo.estado==_special2 xor
								enemigo.estado==_u_kick)
								paso=3;
							else
								graph=388;
								if (abs(id_luchador1.x-id_luchador2.x)<=170 and
									enemigo.estado==_lpunch1 xor
									enemigo.estado==_lkick1 xor
									enemigo.estado==_lpunch2 xor
									enemigo.estado==_lkick2 xor
									enemigo.estado==_lpunchaga xor
									enemigo.estado==_lpunchair xor
									enemigo.estado==_lkickair)
									nuevo_estado=_guardiaaltafloja;
								else
									nuevo_estado=_retroceder;
								end
							end
						else
							nuevo_estado=_normal;
						end
					end
					if (control(agachar) and control(retroceder))
						nuevo_estado=_guardiabaja; nuevo_paso=paso;
					end
					if (control(rodar) and power==74)
						nuevo_estado=_rodar;
						if (control(retroceder))
							if (flags) inc_x=1; else inc_x=-1; end
						else
							if (flags) inc_x=-1; else inc_x=1; end
						end
						baja_pows=399; rod=1;
					end
				end
			end
			
			//mando diagonal atras-abajo como para guard
			case _agachadoguardia: 
				tipo_ataque=NULO; ive_hit=2;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) graph=23; end
				if (luchador==FIGHTER_ATHENA) graph=26; end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON)
					graph=agachado_vd[paso++];
					if (paso==sizeof(agachado_vd)/DIV) paso=0; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) graph=16; END
				if (luchador==FIGHTER_KASUMI or luchador==FIGHTER_TAKUMA) graph=15; END
				if (not control(agachar))
					nuevo_estado=_retroceder;
				end
				if (luchador==FIGHTER_K)
					graph=aga_k[paso++];
					if (paso==sizeof(aga_k)/DIV) paso--; end
				end
				if (luchador==FIGHTER_KULA)
					graph=ag_kula[paso++];
					if (paso==sizeof(ag_kula)/DIV) paso--; end
				end
				if (luchador==FIGHTER_K9999)
					if (paso==1) graph=38; end
					if (paso==0) graph=37; paso++; end
				end
				if (paso==1) inc_x=0; end
				if (abs(id_luchador1.x-id_luchador2.x)<=170 and
					enemigo.estado==_spunch1 xor
					enemigo.estado==_skick1 xor
					enemigo.estado==_spunch2 xor
					enemigo.estado==_skick2 xor
					enemigo.estado==_spunchaga xor
					enemigo.estado==_skickaga xor
					enemigo.estado==_toss1 xor
					(enemigo.estado==_ayuken and enemigo.luchador<>FIGHTER_ATHENA and
					(enemigo.luchador<>FIGHTER_IORI and enemigo.intensidad<>3) and
					(enemigo.luchador<>FIGHTER_CRIMSON and enemigo.intensidad<>3)) xor
					enemigo.estado==_shoryuken xor
					enemigo.estado==_uatras_punch xor
					enemigo.estado==_uatras_kick xor
					enemigo.estado==_satras_kick xor
					enemigo.estado==_extra_move xor
					enemigo.estado==_special1 xor
					enemigo.estado==_special2 xor
					enemigo.estado==_u_kick)
					paso=0;
					nuevo_estado=_guardiabaja;
				end
				if (abs(id_luchador1.x-id_luchador2.x)<=170 and
					enemigo.estado==_Lpunch1 xor
					enemigo.estado==_Lkick1 xor
					enemigo.estado==_Lpunch2 xor
					enemigo.estado==_Lkick2 xor
					enemigo.estado==_Lpunchaga xor
					enemigo.estado==_Lkickaga)
					paso=0;
					nuevo_estado=_guardiabajaFLOJA;
				end
				if (control (agachar) and not control(retroceder))
					nuevo_estado=_agachado;
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON or luchador==FIGHTER_K)
						nuevo_paso=paso;
					end
				end
				if (control(l_punch) and lp_bloker==0 and not
					(shoryu<-19 and control(retroceder)))
					nuevo_estado=_lpunchaga;
				end
				if (control(l_kick) and lk_bloker==0 and not
					(shoryu<-19 and control(retroceder)))
					nuevo_estado=_lkickaga;
				end
				if (control(s_punch) and sp_bloker==0 and not
					(shoryu<-19 and control(retroceder)))
					nuevo_estado=_spunchaga;
				end
				if (control(s_kick) and sk_bloker==0 and not
					(shoryu<-19 and control(retroceder)))
					nuevo_estado=_skickaga;
				end
				if (x>enemigo.x) flags=1; else flags=0; end
				if (control(saltar)) 
					bSuperJump = false;
					nuevo_estado=_saltar;
				end
			end
		 
			case _guardiabaja:
				tipo_ataque=NULO;
				if (paso<6 and super_guard==1) paso=6; end
				if (paso<7)
					if (enemigo.estado<>_spunch1 and enemigo.estado<>_skick1 and
						enemigo.estado<>_spunch2 and enemigo.estado<>_skick2 and
						enemigo.estado<>_spunchaga and enemigo.estado<>_skickaga and
						enemigo.estado<>_toss1 and enemigo.estado<>_tossair and
						enemigo.estado<>_ayuken and enemigo.estado<>_shoryuken and
						enemigo.estado<>_uatras_punch and enemigo.estado<>_uatras_kick and
						enemigo.estado<>_satras_kick and enemigo.estado<>_extra_move and
						enemigo.estado<>_special1 and enemigo.estado<>_special2 and
						enemigo.estado<>_u_kick)
						nuevo_estado=_agachadoguardia;
					end
				end
				paso++;
				if (paso<7) 
					ive_hit=2; graph=401;
					if (paso==1) inc_x=0; end
					if (luchador==FIGHTER_KULA)
						if (paso==1) graph=397;
							pegata (x,y,0,c_scroll,flags,100,z-3,124,file);
						end
						if (paso==3) graph=399; end
						if (paso=>5) graph=401; end
					end
					if (paso==6) paso--; end
					if (control(avanzar) and not control(agachar))
						nuevo_estado=_avanzar;
					end
					if (control(saltar))
						bSuperJump = false;
						nuevo_estado=_saltar;
					end
					if (not control(agachar) and control(retroceder))
						nuevo_estado=_guardiaalta; nuevo_paso=paso;
					end
					if (not control(retroceder) and not control(agachar))
						nuevo_estado=_normal;
					end
					if (not control(retroceder) and control(agachar))
						nuevo_estado=_agachado;
					end
				end
				if (paso>=7)//si ha recibido pal pelo
					graph=401; ive_hit=0;
					
					if (paso>16 and super_guard==0)
						if (inc_x>0 and game_frame%2==0) inc_x-=1; end
						if (inc_x<0 and game_frame%2==0) inc_x+=1; end
						
						x+=inc_x;
						if ((x<=18 or x>=736) and darmagia==0 and 
							enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
					
					if (paso>24)
						super_guard=0; //vuelve a su valor original
						if (control(retroceder))
							if (abs(id_luchador1.x-id_luchador2.x)<=170 and
								enemigo.estado==_spunch1 xor
								enemigo.estado==_skick1 xor
								enemigo.estado==_spunch2 xor
								enemigo.estado==_skick2 xor
								enemigo.estado==_spunchair xor
								enemigo.estado==_spunchaga xor
								enemigo.estado==_skickair xor
								enemigo.estado==_toss1 xor
								enemigo.estado==_tossair xor
								(enemigo.estado==_ayuken and enemigo.luchador<>FIGHTER_ATHENA and
								(enemigo.luchador<>FIGHTER_IORI and enemigo.intensidad<>3) and
								(enemigo.luchador<>FIGHTER_CRIMSON and enemigo.intensidad<>3)) xor
								enemigo.estado==_shoryuken xor
								enemigo.estado==_uatras_punch xor
								enemigo.estado==_uatras_kick xor
								enemigo.estado==_satras_kick xor
								enemigo.estado==_extra_move xor
								enemigo.estado==_special1 xor
								enemigo.estado==_special2 xor
								enemigo.estado==_u_kick)
								paso=3;
							else
								graph=399;
								if (abs(id_luchador1.x-id_luchador2.x)<=170 and
									enemigo.estado==_lpunch1 xor
									enemigo.estado==_lkick1 xor
									enemigo.estado==_lpunch2 xor
									enemigo.estado==_lkick2 xor
									enemigo.estado==_lpunchaga xor
									enemigo.estado==_lpunchair xor
									enemigo.estado==_lkickair)
									nuevo_estado=_guardiabajafloja;
								else
									nuevo_estado=_agachadoguardia;
								end
							end
						else
							nuevo_estado=_agachado;
						end
					end
					if (not control(agachar))
						nuevo_estado=_guardiaalta; nuevo_paso=paso;
					end
					if (control(rodar) and power==74)
						nuevo_estado=_rodar;
						if (control(retroceder))
							if (flags) inc_x=1; else inc_x=-1; end
						else
							if (flags) inc_x=-1; else inc_x=1; end
						end
						baja_pows=399; rod=1;
					end
				end
			end
			case _guardiaaltafloja:
				tipo_ataque=NULO;
				if (paso<3 and super_guard==1) paso=3; end
				if (paso<4)
					if (enemigo.estado<>_lpunch1 and enemigo.estado<>_lkick1 and
						enemigo.estado<>_lpunch2 and enemigo.estado<>_lkick2 and
						enemigo.estado<>_lpunchair and enemigo.estado<>_lkickair)
						nuevo_estado=_retroceder;
					end
				end
				paso++;
				if (paso<4) ive_hit=2;
					if (luchador==FIGHTER_KULA)
						if (paso==1) graph=396;
							pegata (x,y,0,c_scroll,flags,100,z-3,124,file);
						end
						if (paso==2) graph=398; end
						if (paso=>3) graph=400; end
					else
						graph=398;
					end
					if (paso==1) inc_x=0; end
					if (paso==3) paso--; END
					if (control(avanzar)) nuevo_estado=_avanzar; end
					if (control(guasa)) nuevo_estado=_burla; end
					
					if (control(saltar))
						bSuperJump = false;
						nuevo_estado=_saltar;
					end
					if (control(rodar) and power==74)
						nuevo_estado=_rodar;
						if (control(retroceder))
							if (flags) inc_x=1; else inc_x=-1; end
						else
							if (flags) inc_x=-1; else inc_x=1; end
						end
						rod=1;
					end
					if (hado<-10 and (control(s_kick) or
						control(l_kick)) and shoryu>-20 and luchador<>FIGHTER_KYO94)
						if (control(l_kick) and lk_bloker==0)
							intensidad=1; nuevo_estado=_uatras_kick;
						end
						if (control(s_kick) and sk_bloker==0)
							intensidad=2; nuevo_estado=_uatras_kick;
						end
					end
					if (control(agachar)) //asi se agacha
						nuevo_estado=_guardiabajafloja; nuevo_paso=paso;
					end
					if (not control(retroceder))
						nuevo_estado=_normal;
					end
				end
				if (paso>=4) 
					ive_hit=0;//si ha recibido pal pelo
					graph=400;
					
					if (paso>6 and super_guard==0)
						if (inc_x>0 and game_frame%2==0) inc_x-=1; end
						if (inc_x<0 and game_frame%2==0) inc_x+=1; end
						
						x+=inc_x;
						if ((x<=18 or x>=736) and darmagia==0 and 
							enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
					if ((inc_x==0 and super_guard==0 and paso>16) or
						(paso>16 and super_guard==1))
						super_guard=0;
						if (control(retroceder))
							if (abs(id_luchador1.x-id_luchador2.x)<=170 and
								enemigo.estado==_spunch1 xor
								enemigo.estado==_skick1 xor
								enemigo.estado==_spunch2 xor
								enemigo.estado==_skick2 xor
								enemigo.estado==_spunchair xor
								enemigo.estado==_spunchaga xor
								enemigo.estado==_skickair xor
								enemigo.estado==_toss1 xor
								enemigo.estado==_tossair xor
								(enemigo.estado==_ayuken and enemigo.luchador<>FIGHTER_ATHENA and
								(enemigo.luchador<>FIGHTER_IORI and enemigo.intensidad<>3) and
								(enemigo.luchador<>FIGHTER_CRIMSON and enemigo.intensidad<>3)) xor
								enemigo.estado==_shoryuken xor
								enemigo.estado==_uatras_punch xor
								enemigo.estado==_uatras_kick xor
								enemigo.estado==_satras_kick xor
								enemigo.estado==_extra_move xor
								enemigo.estado==_special1 xor
								enemigo.estado==_special2 xor
								enemigo.estado==_u_kick)
								nuevo_estado=_guardiaalta;
							else
								if (abs(id_luchador1.x-id_luchador2.x)<=170 and
									enemigo.estado==_lpunch1 xor
									enemigo.estado==_lkick1 xor
									enemigo.estado==_lpunch2 xor
									enemigo.estado==_lkick2 xor
									enemigo.estado==_lpunchaga xor
									enemigo.estado==_lpunchair xor
									enemigo.estado==_lkickair)
									paso=0;
								else
									nuevo_estado=_retroceder;
								end
							end
						else
							nuevo_estado=_normal;
						end
					end
					if (control(agachar) and control(retroceder))
						nuevo_estado=_guardiabajafloja; nuevo_paso=paso;
					end
					if (control(rodar) and power==74)
						nuevo_estado=_rodar;
						if (control(retroceder))
							if (flags) inc_x=1; else inc_x=-1; end
						else
							if (flags) inc_x=-1; else inc_x=1; end
						end
						baja_pows=399; rod=1;
					end
				end
			end
			
			//guardiabajafloja
			case _guardiabajafloja:
				tipo_ataque=NULO;
				if (paso<4 and super_guard==1) paso=4; end
				if (paso<4)
					if (enemigo.estado<>_Lpunch1 and
						enemigo.estado<>_Lkick1 and
						enemigo.estado<>_Lpunch2 and
						enemigo.estado<>_Lkick2 and
						enemigo.estado<>_Lpunchaga and
						enemigo.estado<>_Lkickaga)
						nuevo_estado=_agachadoguardia;
					end
				end
				paso++; graph=399;
				if (paso<4)  ive_hit=2;
					if (luchador==FIGHTER_KULA)
						if (paso==1) graph=397;
							pegata (x,y,0,c_scroll,flags,100,z-3,124,file);
						end
						if (paso==2) graph=399; end
						if (paso=>3) graph=401; end
					end
					if (paso==1) inc_x=0; end
					if (paso==3) paso--; END
					if (control(avanzar) and not control(agachar))
						nuevo_estado=_avanzar;
					end
					if (control(saltar)) 
						bSuperJump = false;
						nuevo_estado=_saltar;
					end
					if (not control(agachar) and control(retroceder))
						nuevo_estado=_guardiaaltafloja; nuevo_paso=paso;
					end
					if (not control(retroceder) and not control(agachar))
						nuevo_estado=_normal;
					end
					if (not control(retroceder) and control(agachar))
						nuevo_estado=_agachado;
					end
				end
				if (paso>=4) ive_hit=0;//si ha recibido pal pelo
					if (luchador==FIGHTER_KULA) graph=401; end
					
					if (paso>6 and super_guard==0)
						if (inc_x>0 and game_frame%2==0) inc_x-=1; end
						if (inc_x<0 and game_frame%2==0) inc_x+=1; end
						
						x+=inc_x;
						if ((x<=18 or x>=736) and darmagia==0 and 
							enemigo.estatico==0)
							enemigo.x-=inc_x;
						end
					end
					
					if ((inc_x==0 and super_guard==0 and paso>16) or
						(paso>16 and super_guard==1))
						super_guard=0; //vuelve a su valor original
						if (control(retroceder))
							if (abs(id_luchador1.x-id_luchador2.x)<=170 and
								enemigo.estado==_spunch1 xor
								enemigo.estado==_skick1 xor
								enemigo.estado==_spunch2 xor
								enemigo.estado==_skick2 xor
								enemigo.estado==_spunchair xor
								enemigo.estado==_spunchaga xor
								enemigo.estado==_skickair xor
								enemigo.estado==_toss1 xor
								enemigo.estado==_tossair xor
								(enemigo.estado==_ayuken and enemigo.luchador<>FIGHTER_ATHENA and
								(enemigo.luchador<>FIGHTER_IORI and enemigo.intensidad<>3) and
								(enemigo.luchador<>FIGHTER_CRIMSON and enemigo.intensidad<>3)) xor
								enemigo.estado==_shoryuken xor
								enemigo.estado==_uatras_punch xor
								enemigo.estado==_uatras_kick xor
								enemigo.estado==_satras_kick xor
								enemigo.estado==_extra_move xor
								enemigo.estado==_special1 xor
								enemigo.estado==_special2 xor
								enemigo.estado==_u_kick)
								nuevo_estado=_guardiabaja;
							else
								if (abs(id_luchador1.x-id_luchador2.x)<=170 and
									enemigo.estado==_lpunch1 xor
									enemigo.estado==_lkick1 xor
									enemigo.estado==_lpunch2 xor
									enemigo.estado==_lkick2 xor
									enemigo.estado==_lpunchaga xor
									enemigo.estado==_lpunchair xor
									enemigo.estado==_lkickair)
									paso=0;
								else
									nuevo_estado=_agachadoguardia;
								end
							end
						else
							nuevo_estado=_agachado;
						end
					end
					if (not control(agachar))
						nuevo_estado=_guardiaaltafloja; nuevo_paso=paso;
					end
					if (control(rodar) and power==74)
						nuevo_estado=_rodar;
						if (control(retroceder))
							if (flags) inc_x=1; else inc_x=-1; end
						else
							if (flags) inc_x=-1; else inc_x=1; end
						end
						baja_pows=399; rod=1;
					end
				end
			end
		 
////////////cases de gays//////de adornillo////////
			case _levantandose:
				tipo_ataque=NULO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					graph=getup_kyo[paso++];
					if (paso==7) y-=15; end
					if (paso==8) y+=15; end
				end
				if (luchador==FIGHTER_ATHENA) graph=getup_ath[paso++]; end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON) graph=getup_vd[paso++]; end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_KASUMI or luchador==FIGHTER_TAKUMA or
					luchador==FIGHTER_TERRY94)
					graph=getup[paso++];
				end
				if (luchador==FIGHTER_K) graph=getup_k[paso++]; end
				if (luchador==FIGHTER_KULA) graph=getup_kula[paso++]; end
				if (luchador==FIGHTER_K9999) graph=getup_tetsuo[paso++]; end
				if ((luchador==FIGHTER_KYO and paso==sizeof(getup_kyo)/DIV) or
					(luchador==FIGHTER_ATHENA and paso==sizeof(getup_ath)/DIV) or
					(luchador==FIGHTER_IORI and paso==sizeof(getup_vd)/DIV) or
					((luchador==FIGHTER_TERRY or luchador==FIGHTER_TAKUMA or luchador==FIGHTER_TERRY94 or
					luchador==FIGHTER_KASUMI) and paso==sizeof(getup)/DIV) or
					(luchador==FIGHTER_CRIMSON and paso==sizeof(getup_vd)/DIV) or
					(luchador==FIGHTER_K and paso==sizeof(getup_k)/DIV) or
					(luchador==FIGHTER_KULA and paso==sizeof(getup_kula)/DIV) or
					(luchador==FIGHTER_K9999 and paso==sizeof(getup_tetsuo)/DIV) or
					(luchador==FIGHTER_KYO94 and paso==sizeof(getup_kyo)/DIV))
					inc_y=0;inc_x=0;
					if (x<enemigo.x) flags=0;
					else flags=1; end
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						hit_combo=0; voltear=15;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
			end
			
			case _saltar_atras:
				tipo_ataque=NULO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) graph=15; end
				if (luchador==FIGHTER_ATHENA) graph=109;
					if (hado<-10 and (control(s_punch) or
						control(l_punch)) and y<190 and not control(toss))
						if (control(l_punch)) intensidad=1;
						else intensidad=2; end
						nuevo_estado=_extra_move;
						if (enemigo.x>x) flags=0;
						else flags=1; end
					end
					if (shoryu>19 and not control(toss) and
						(control(s_punch) or control(l_punch)))
						if (control(l_punch))
							intensidad=1;
						else
							intensidad=2;
						end
						nuevo_estado=_shoryuken;
					end
					if (power==74 or vida<DANGER_LIFE)
						if (control(toss) and hado<-10 and not
							control(l_punch) and not control(s_punch))
							nuevo_estado=_special2;
							nuevo_paso=0;
						end
					end
				end
				if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)//iori(vegeta).
					if (paso<4) graph=169; else graph=170; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) graph=12; end
				if (luchador==FIGHTER_KASUMI) graph=99; end
				if (luchador==FIGHTER_TAKUMA)
					if (paso<=3) graph=310; else graph=311; end
				end
				if (luchador==FIGHTER_K)
					if (paso==1) graph=311; end
					if (paso==3) graph=312; end
					if (paso==5) graph=313; end
				end
				if (luchador==FIGHTER_KULA)
					if (paso==1) graph=310; end
					if (paso==2) graph=311; end
					if (paso==6) graph=310; end
				end
				if (luchador==FIGHTER_K9999)
					if (paso==1) graph=36; end
					if (paso==2) graph=40; end
					if (paso==6) graph=41; end
				end
				paso++;
				if (paso==1)
					inc_y=-5; play_snd (s_jump,256,380);
					if (flags) inc_x=8; else inc_x=-8; end
				end
				if (paso>=4)
					x+=inc_x; 
					y+=inc_y; 
					if (paso%2==0) inc_y++; end
					if (paso%3==0)
						if (inc_x>0) inc_x--; else inc_x++; end
					end
				end
				if (paso>=8 and y>=220)
					inc_x=0; inc_y=0; dos=0; y=220;
					play_snd (s_floor,400,256);
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)
						graph=171;
					end
					if (control(agachar) and control(retroceder))
						nuevo_estado=_agachadoguardia;
					end
					if (control(agachar) and not control(retroceder))
						nuevo_estado=_agachado;
					end
					if (not control(agachar) and control(retroceder))
						nuevo_estado=_retroceder;
					end
					if (not control(agachar) and not control(retroceder))
						nuevo_estado=_normal;
					end
				end
				if (x<enemigo.x) flags=0; else flags=1; end
			end
		 
			case _correr: ive_hit=2;
				tipo_ataque=NULO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94 or luchador==FIGHTER_KASUMI or luchador==FIGHTER_K9999)
					graph=correr_kyo[paso++];
				end
				if (luchador==FIGHTER_ATHENA)//ath.
					graph=correr_ath[paso++];
				end
				if (luchador==FIGHTER_IORI OR luchador==FIGHTER_CRIMSON or luchador==FIGHTER_K)//vd.
					graph=correr_vd[paso++];
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)//treey(lobaut)
					graph=correr[paso++];
				end
				if (luchador==FIGHTER_TAKUMA)//takumah
					graph=run_taku[paso++];
				end
				if (luchador==FIGHTER_KULA)
					graph=run_kula[paso++];
					if (paso==sizeof(run_kula)/DIV)
						paso=0;
					end
					if (!is_playing_voice(id))
						play_voice(s_kura5,512,256);
					end
					if (not control(avanzar) or control (saltar) or
						control(l_punch) or control(s_punch) or
						control(l_kick) or control(s_kick) or
						control(toss) or (control(charge) and power<74) or
						control(rodar))
						if (is_playing_voice(id))
							stop_voice(id);
						end
					end
				else
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON or luchador==FIGHTER_K)
						if (paso==sizeof(correr_vd)/DIV)
							play_snd (s_run1,512,256); paso=0;
						end
						if (paso==16) play_snd (s_run2,512,256); end
					else
						if (paso==sizeof(correr_kyo)/DIV)
							play_snd (s_run1,512,256); paso=0;
						end
						if (paso==14) play_snd (s_run2,512,256); end
					end
				end
				if (not control(avanzar)) dos=0;
					if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) graph=22;  end
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON) graph=199; end
					if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) graph=388; end
					if (luchador==FIGHTER_ATHENA)  graph=61;  end
					if (luchador==FIGHTER_KASUMI)  graph=309; end
					if (luchador==FIGHTER_TAKUMA)  graph=166; end
					if (luchador==FIGHTER_K)  graph=289; end
					if (luchador==FIGHTER_KULA) graph=46;  end
					if (luchador==FIGHTER_K9999) graph=88;  end
					nuevo_estado=_normal;
				end
				if (control(agachar) and hado<11 and shoryu<20)
					if (control(l_punch)) nuevo_estado=_lpunchaga; end
					if (control(l_kick)) nuevo_estado=_lkickaga; end
					if (control(s_punch)) nuevo_estado=_spunchaga; end
					if (control(s_kick)) nuevo_estado=_skickaga; end
				end
				if (control(l_punch) and not control(agachar) and not
					hado<11 and shoryu<20)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_lpunch1;
					end
					if (abs(enemigo.x-x)<=55)
						nuevo_estado=_lpunch2;
					end
				end
				if (control(l_kick) and not control(agachar) and not
					hado<11 and shoryu<20)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_lkick1;
					end
					if (abs(enemigo.x-x)<=55)
						nuevo_estado=_lKICK2;
					end
				end
				if (control(s_punch) and not control(agachar) and not
					hado<11 and shoryu<20)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_spunch1; intensidad=1;
					end
					if (abs(enemigo.x-x)<=54)
						nuevo_estado=_spunch2;
					end
				end
				if (control(s_kick) and not control(agachar) and not
					hado<11 and shoryu<20)
					if (abs(enemigo.x-x)>=55)
						nuevo_estado=_skick1;
						if (luchador==FIGHTER_KASUMI)
							nuevo_paso=2;
						else
							intensidad=1;
						end
					end
					if (abs(enemigo.x-x)<=54)
						nuevo_estado=_skick2;
					end
				end
				if (control(toss)) nuevo_estado=_toss1; end
				if (control(charge) and power<74)
					if (file==fich1 and id_pow1.estado<>2)
						nuevo_estado=_charge;
					end
					if (file==fich2 and id_pow2.estado<>2)
						nuevo_estado=_charge;
					end
				end
				if (control(rodar))
				   if (flags) inc_x=-1; else inc_x=1; end
				   nuevo_estado=_rodar;
				end
				
				// 60fps OK
				x+=inc_x;
				if (flags)
					if (enemigo.x<x and abs(enemigo.x-x)<40 and
						enemigo.y==220 and enemigo.atravesar==0)
						inc_x=-2;
					else
						inc_x=-6;
					end
				else
					if (enemigo.x>x and abs(enemigo.x-x)<40 and
						enemigo.y==220 and enemigo.atravesar==0)
						inc_x=2;
					else
						inc_x=6;
					end
				end
				if (abs(enemigo.x-x)<=36 and y==enemigo.y and
					enemigo.estado<>_rodar)
					if (flags) enemigo.x-=2;
					else enemigo.x+=2; end
				end
				if (control(saltar))
					bSuperJump = true;
					nuevo_estado=_saltar;
				end
			end
			
			//volteando
			case _voltear:
				tipo_ataque=NULO;
				if (paso==0)
					enemigo.estado=enemigo.nuevo_estado=100;
				end
				if (paso==1) //pone al enemigo en flags correspondientes
					he_dado=1;
					enemigo.atravesar=0; 
					enemigo.vulnerable=1; 
					enemigo.estado=enemigo.nuevo_estado=100;
					if (flags) enemigo.flags=0;
					else enemigo.flags=1; end
				   
					stop_voice (enemigo);//hace callar al enemigo a hostias
					
					if (game_mode==MODE_TRAINING and enemigo.hit_combo==0)
						if (enemigo==id_luchador1 and rojo==0)
							enemigo.vida=MAX_LIFE; id_alive1.x=89;
						end
						if (enemigo==id_luchador1 and rojo==1)
							enemigo.vida=DANGER_LIFE-1; id_alive1.x=184;
						end
						if (enemigo==id_luchador2 and (cputype<>3 or
							(cputype==3 and rojo==0)))
							enemigo.vida=MAX_LIFE; id_alive2.x=231;
						end
						if (enemigo==id_luchador2 and cputype==3 and rojo==1)
							enemigo.vida=DANGER_LIFE-1;
							id_alive2.x=136;
						end
					end
				end
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94)
					paso++;
					if (inc_x==0)//tipo puo
						if (paso==1) graph=47;
							if (flags) hit_stars(11,x-31,y-79); enemigo.x=x-48;
							else hit_stars(11,x+31,y-79); enemigo.x=x+48; end
						end
						if (paso>=4 and paso<16) graph=118; end
						if (paso==18) graph=110; end
						if (paso==20) graph=111; end
						if (paso==24) graph=119; end
						if (paso==26) graph=120;
							play_snd (s_kyo12,512,256);
							if (flags) hit_stars(1,x-55,y-70);
							else      hit_stars(1,x+55,y-70); end
							enemigo.paso=1; 
							enemigo.intensidad=0;
							enemigo.estado=_recibir_toss;
							enemigo.hit_combo++; 
							
							he_dado=0;
							channel[30]=play_snd (s_hit2,512,256);
							if (flags) enemigo.inc_x=-5;
							else enemigo.inc_x=5; end
							enemigo.inc_y=-9;
							if (rand(0,2)==0) enemigo.voz=4; end
						end
						if (paso>=28 and paso<=44) graph=121; end
						if (paso==46) graph=122; end
						if (paso==50)
							nuevo_estado=_normal; enemigo.vulnerable=0;
						end
					end
				   
					if (inc_x==1)//tipo patada
						if (paso==1)
							if (flags) hit_stars(11,x-31,y-79);
							else hit_stars(11,x+31,y-79); end
						end
						if (paso<11) graph=118;
							if (flags) enemigo.x=x-48;
							else enemigo.x=x+48; end
						end
						if (paso==11) camara_y+=4; enemigo.y-=70;
							if (flags) camara_x+=21; enemigo.x=x-70;
							else camara_x-=21; enemigo.x=x+70; end
						end
						if (paso==13)
							if (flags) camara_x+=10; else camara_x-=10; end
						end
						if (paso>=11 and paso<19)
							if (paso<15) graph=123;
								enemigo.graph=418; enemigo.angle=-90000;
							else graph=124;
								enemigo.graph=454; enemigo.angle=0;
							end
						end
						if (paso==15) camara_x=0; enemigo.x=x; end
						if (paso==17)
							if (flags) camara_x+=15; else camara_x-=15; end
						end
						if (paso==19)
							graph=125; enemigo.graph=418;
							enemigo.angle=-180000;
							camara_y+=3; enemigo.y-=50;
							if (flags)
								camara_x-=20; enemigo.x=x+55;
								if (enemigo.x=>739) x=684; enemigo.x=739; end
							else
								camara_x+=20; enemigo.x=x-55;
								if (enemigo.x=<16) x=71; enemigo.x=16; end
							end
						end
						if (paso==23)//estampar
							graph=125; enemigo.graph=407; tembleque(1,-1);
							if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON or
								enemigo.luchador==FIGHTER_KASUMI) enemigo.graph=409;
							end
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
								enemigo.graph=410; enemigo.y-=10;
							end
							play_snd (s_kyo12,512,256);
							if (flags) hit_x=x+55; else hit_x=x-55; end
							hit_stars(9,hit_x,220); channel[30]=play_snd (s_fall,512,256);
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_KASUMI)
								enemigo.y+=10;
							end
							enemigo.y+=40; camara_x=0; camara_y-=7;
							if (flags)
								enemigo.x=x+70; enemigo.flags=0;
								if (enemigo.x=>739) x=669; enemigo.x=739; end
							else
								enemigo.x=x-70; enemigo.flags=1;
								if (enemigo.x=<16) x=86; enemigo.x=16; end
							end
							enemigo.hit_combo++; he_dado=-2;
						end
						if (paso==41)
							graph=126; enemigo.angle=0; enemigo.y=220;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
								enemigo.graph=423;
							else
								enemigo.graph=422;
							end
							if (flags)
								enemigo.x=x+99;
								if (enemigo.x=>739) x=640; enemigo.x=739; end
							else
								enemigo.x=x-99;
								if (enemigo.x=<16) x=115; enemigo.x=16; end
							end
							y-=20;
						end
						if (paso==45)
							graph=127; enemigo.graph=425;//el del suelo
						end
						if (paso==49)//codazo
							graph=128; enemigo.graph=423;
							channel[30]=play_snd (s_hit2,512,256);
							enemigo.y+=10; y=220;
							if (flags) hit_stars(1,x+74,y+4);
							else hit_stars(1,x-74,y+4); end
							enemigo.hit_combo++; he_dado=2;
							if (rand(0,2)==0) enemigo.voz=4; end
						end
						
						//tiembla
						if (paso==51) enemigo.y+=4; end
						if (paso==53) enemigo.y-=4; end
						if (paso==55) enemigo.y+=3; end
						if (paso==57) enemigo.y-=3; end
						if (paso==59) enemigo.y+=2; end
						if (paso==61) enemigo.y-=2; end
						if (paso==63) enemigo.y+=1; end
						if (paso==65) enemigo.y-=1; end
						if (paso==69) graph=129;
							if (flags) enemigo.inc_x=4;
							else enemigo.inc_x=-4; end
							enemigo.inc_y=-6; 
							enemigo.paso=23;
							enemigo.estado=_recibir_toss;
							enemigo.intensidad=0; 
							enemigo.y=219;
						end
						if (paso==77) graph=100;
							if (flags) flags=0; else flags=1; end
						end
						if (paso==83) graph=24; end
						if (paso==90)
							y=220; nuevo_estado=_normal;
						end
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					if (id==id_luchador1 and striker1==1) ive_hit=2; end
					if (id==id_luchador2 and striker2==1) ive_hit=2; end
					if (inc_x==0)//tipo puo
						if (paso==0) graph=110;
							play_snd (s_ath4,512,310);
							if (flags) hit_stars(12,x-34,y-65);
							else hit_stars(12,x+34,y-65); end
						end
						paso++;
						if (paso<24) graph=111; end
						if (paso==24)
							graph=120; 
							enemigo.paso=8;
							enemigo.estado=_recibir_toss;
							enemigo.intensidad=0;
							enemigo.hit_combo++; he_dado=0;
							if (rand(0,2)==0) enemigo.voz=4; end
							enemigo.inc_y=-9; channel[30]=play_snd (s_ath2,512,256);
							if (flags) enemigo.inc_x=-7; hit_x=x-50;
							else enemigo.inc_x=+7; hit_x=x+50; end
							play_voice(s_ath27,512,256);
						end
						if (paso==24) graph=121;
							pegata (hit_x,165,541,c_scroll,flags+16,100,z-6,27,file);
						end
						if (paso==30) graph=122; end
						if (paso==32) graph=123; end
						if (paso>=34 and paso<42) graph=124; end
						if (paso==42) graph=150; end
						if (paso==46) nuevo_estado=_normal; end
					end
					if (inc_x==1)//tipo patada
						if (paso==0) graph=125;
							if (flags) hit_stars(12,x-60,y-70);
							else hit_stars(12,x+60,y-70); end
						end
						paso++;
						if (paso<20)
							graph=126; enemigo.z=z+1;
							if (flags) enemigo.x=x-48;
							else enemigo.x=x+48; end
						end
						if (paso==20)
							graph=127; enemigo.y-=20; camara_y+=7;
							if (flags) enemigo.x+=20;
							else enemigo.x-=20; end
						end
						if (paso>19 and paso<26)
							graph=128; enemigo.graph=403; enemigo.y=80;
							enemigo.angle=180000; enemigo.graph=419;
						end
						if (paso==26)
							channel[30]=play_snd (s_ath2,512,256);
							play_voice(s_ath27,512,256);
							
							inc_y=-3; //lo que salta
							if (flags) flags=0; else flags=1; end
						end
						if (paso>26 and paso<52) //salto hacia atras
							y+=inc_y; inc_y++;
							if (y>220) inc_y=0; y=220; end
							if (flags) x+=4; else x-=4; end
						end
						if (paso>=26 and paso<32)
							graph=90; enemigo.graph=403;
						end
						if (paso==28 or paso==29 or paso==30 or paso==31 or paso==32 or paso==33)
							enemigo.y+=6;
							if (flags) enemigo.x-=6;
							else enemigo.x+=6; end
						end
						if (paso==32)
							graph=91; play_snd (s_fall,512,256);
							camara_y-=12; enemigo.hit_combo++; he_dado=0;
							if (rand(0,2)==0) enemigo.voz=4; end
							if (flags) hit_stars(9,x-48,220);
							else hit_stars(9,x+48,220); end
							if (enemigo.luchador==FIGHTER_KASUMI)
								enemigo.graph=425;
							else
								enemigo.graph=422;
							end
							enemigo.angle=0; enemigo.y=220;
							if (flags)
								enemigo.flags=1; enemigo.x-=20;
							else
								enemigo.flags=0; enemigo.x+=20;
							end
						end
						if (paso==38) camara_y+=5; tembleque(1,1); end
						if (paso==48)
							graph=92; enemigo.inc_y=-7;
							if (flags) enemigo.inc_x=-6;
							else enemigo.inc_x=6; end
							enemigo.estado=_recibir_toss;//cae como un cabron
							enemigo.paso=40;
							enemigo.y0=0;
							enemigo.intensidad=0;
						end
						if (paso==52) graph=25; end
						if (paso==60) nuevo_estado=_normal; end
					end
					if (inc_x==2)//volteo aereo
						paso++;
						if (paso==1)
							if (flags) hit_stars(11,x+30,y-20);
							else hit_stars(11,x-30,y-20); end
							enemigo.paso=0; y-=30;
						end
						if (paso==3 or paso==7 or paso==11)
							angle=-180000; enemigo.y=y-65; graph=166;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
								enemigo.graph=410;
							else
								enemigo.graph=411;
							end
							enemigo.angle=-180000;
							if (flags) enemigo.x=x+25;
							else enemigo.x=x-25; end
						end
						if (paso==15)
							angle=-135000; enemigo.y=y-30;
							if (flags) enemigo.x=x+40; camara_x-=7;
							else enemigo.x=x-40; camara_x+=7; end
							enemigo.angle=-225000; camara_y-=25;
						end
						if (paso==19)
							angle=-90000; enemigo.y=y+20;
							if (flags) enemigo.x=x+50; camara_x-=2;
							else enemigo.x=x-50; camara_x+=2; end
							enemigo.angle=-270000;
						end
						if (paso==23)
							angle=-45000; enemigo.y=y+38;
							if (flags) enemigo.x=x+10; camara_x+=7;
							else enemigo.x=x-10; camara_x-=7; end
							enemigo.angle=-315000;
						end
						if (paso==27)
							angle=0; enemigo.y=y+46;
							if (flags) enemigo.x=x-30;
							else enemigo.x=x+30; end
							enemigo.angle=0;
						end
						if (paso==31) enemigo.intensidad=0;
							graph=167; he_dado = 0;
							enemigo.estado=_recibir_toss;
							enemigo.paso=15; 
							enemigo.inc_y=10; 
							if (flags) enemigo.inc_x=-5;
							else enemigo.inc_x=5; end
							camara_y+=25; camara_x=0;
						end
						if (paso==35) enemigo.vulnerable=1;
							graph=168; inc_y=4; y+=30;
							if (flags) enemigo.inc_x=-5;
							else enemigo.inc_x=5; end
							channel[30]=play_snd (s_ath2,512,256);
						end
						if (paso>35)
							if (y>200) nuevo_estado=_agachar; graph=25; y=220;
							else if (game_frame%2==0) inc_y++; end y+=inc_y; end
							if (flags) x+=(paso/3)/2;
							else x-=(paso/3)/2; end
							if (enemigo.paso==34 and enemigo.vulnerable==1)
								tembleque(1,1);
								enemigo.hit_combo++; he_dado=0;
								enemigo.vulnerable=0;
							end
							if (enemigo.paso==40 or enemigo.paso==41 or 
								enemigo.paso==42 or enemigo.paso==43)
								enemigo.inc_y=-4;
							end
						end
					end
				end
				if (luchador==FIGHTER_IORI)//USTED
					paso++;
					if (inc_x==0)//tipo puo
						if (paso==1)
							if (flags)
								hit_stars(11,x-34,y-62); enemigo.x=x-32;
							else
								hit_stars(11,x+34,y-62); enemigo.x=x+32;
							end
						end
						if (paso>0 and paso<11) graph=172;
							if (flags==enemigo.flags) enemigo.z=z-1; end
						end
						if (paso==13 or paso==15)
							graph=173; enemigo.graph=405;
						end
						if (paso==17 or paso==19)
							graph=174; enemigo.graph=402;
						end
						if (paso==21 or paso==23)
							graph=175; enemigo.graph=403;
						end
						if (paso>11 and paso<25)
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
								if (game_frame%2==0) enemigo.graph++; end
							end
						end
						if (paso==25) graph=176;
							play_voice(s_iori12,512,256);
							if (flags)
								hit_stars(5,x-36,y-64); hit_stars(6,x-36,y-64);
							else
								hit_stars(5,x+36,y-64); hit_stars(6,x+36,y-64);
							end
							he_dado=0; 
							enemigo.hit_combo++; 
							enemigo.paso=4;
							enemigo.estado=_recibir_toss; 
							enemigo.inc_y=-10;
							channel[30]=play_snd (s_cut,450,256); enemigo.intensidad=0;
							if (flags) enemigo.inc_x=-4;
							else enemigo.inc_x=4; end
							if (rand(0,2)==0) enemigo.voz=4; end
						end
						if (paso==27 or paso==33 or paso==39 or
							paso==45) graph++;
						end
						if (paso==51) graph=161; end
						if (paso==59)
							nuevo_estado=_normal; enemigo.vulnerable=0;
						end
					end
					if (inc_x==1)//tipo patada
						graph=161;
						if (paso>0 and paso<13)
							atravesar=1; graph=161+(paso/2); enemigo.z=z-1;
							if (flags) x-=7; else x+=7; end
						end
						if (paso==13)
							if (flags)
								hit_stars(11,x+36,y-64); enemigo.x=x+42; flags=0;
							else
								hit_stars(11,x-36,y-64); enemigo.x=x-42; flags=1;
							end
							inc_x=0; paso=3; atravesar=0;
						end
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					paso++;
					if (inc_x==0)//tipo puo
						if (paso==1)
							if (flags) hit_stars(11,x-31,y-76);
							else hit_stars(11,x+31,y-76); end
						end
						if (paso<11) graph=31; end
						if (paso==13) graph=143;
							play_voice(s_terry24,512,256);
						end
						if (paso==15)
							graph=144; hit_stars(1,enemigo.x,enemigo.y-88);
						end
						if (paso==17) graph=145; enemigo.intensidad=0;
							he_dado=0;
							enemigo.paso=0; 
							enemigo.estado=_recibir_toss;
							enemigo.hit_combo++; 
							enemigo.vulnerable=1;
							if (rand(0,2)==0) enemigo.voz=4; end
							if (flags) enemigo.inc_x=-4;
							else enemigo.inc_x=4; end
							channel[30]=play_snd (s_hit2,512,256);
						end
						if (paso==21) enemigo.paso=0; end
						if (paso>=20 and paso<=35) graph=145;
							if (id==id_luchador1 and striker1==0) ive_hit=2; end
							if (id==id_luchador2 and striker2==0) ive_hit=2; end
						end
						if (paso==39) graph=146; end
						if (paso==43) graph=144; end
						if (paso==47) graph=143; end
						if (paso==53)
							nuevo_estado=_normal;
							if (enemigo.vulnerable==1) enemigo.vulnerable=0; end
						end
					end
					if (inc_x==1)//tipo patada
						if (paso==1)
							if (flags) hit_stars(11,x-31,y-76);
							else hit_stars(11,x+31,y-76); end
						end
						if (paso>1 and paso<11)
							graph=88; enemigo.z=z+1;
							if (flags) enemigo.x=x-52;
							else enemigo.x=x+52; end
						end
						if (paso>=11 and paso<15)
							enemigo.graph=418; enemigo.angle=270000;
							graph=89; enemigo.y=150; camara_y=4;
							if (flags) camara_x=28; enemigo.x=x-85;
							else camara_x=-28; enemigo.x=x+85; end
						end
						if (paso==15 or paso==16 or paso==17 or paso==18)
							enemigo.graph=454; enemigo.angle=0; graph=90;
							if (flags) camara_x=0; enemigo.x=x-25;
							else camara_x=0; enemigo.x=x+25; end
							enemigo.y=135; camara_y=5;
						end
						if (paso==19)
							enemigo.y=60;
							if (flags)
								enemigo.x=x+10;
								if (enemigo.x=>739) x=704; enemigo.x=739; end
							else
								enemigo.x=x-10;
								if (enemigo.x=<16) x=51; enemigo.x=16; end
							end
						end
						if (paso>=19 and paso<23) camara_y=8;
							graph=91; enemigo.graph=403; enemigo.angle=180000;
						end
						if (paso==23) 
							graph=92; camara_y=0;
							channel[30]=play_snd (s_fall,512,256);
							enemigo.hit_combo++; he_dado=0; enemigo.angle=0;
							if (flags) hit_stars(9,x+48,220);
							else hit_stars(9,x-48,220); end
							if (enemigo.luchador==FIGHTER_KASUMI) enemigo.graph=425;
							else enemigo.graph=422; end
							if (flags)
								enemigo.flags=0; enemigo.x=x+65;
								if (enemigo.x=>739) x=674; enemigo.x=739; end
							else
								enemigo.flags=1; enemigo.x=x-65;
								if (enemigo.x=<16) x=81; enemigo.x=16; end
							end
							if (rand(0,2)==0) enemigo.voz=4; end
						end
						if (paso==25) tembleque(1,1); end
						if (paso>=23 and paso<=37)
							if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_KYO94)
								enemigo.y=225;
							end
							if (enemigo.luchador<>FIGHTER_KYO and enemigo.luchador<>FIGHTER_KYO94)
								enemigo.y=220;
							end
						end
						if (paso==23)
							play_voice(s_terry24,512,256);
						end
						if (paso==43) enemigo.y=220;
							enemigo.inc_y=-9;
							if (flags) enemigo.inc_x=4;
							else enemigo.inc_x=-4; end
							enemigo.paso=17; 
							enemigo.estado=_recibir_toss;//cae como un cabron
							enemigo.intensidad=0;
						end
						if (paso==49)
							if (id==id_luchador1 and striker1==0) ive_hit=2; end
							if (id==id_luchador2 and striker2==0) ive_hit=2; end
							enemigo.vulnerable=1; graph=93;
						end
						if (paso==55 or paso==59)
							if (flags) x-=5; else x+=5; end
						end
						if (paso==55) graph=237; end
						if (paso==59) graph=1;
							if (flags) flags=0; else flags=1; end
						end
						if (paso==63)
							nuevo_estado=_normal;
							if (enemigo.vulnerable==1) enemigo.vulnerable=0; end
						end
					end
				end
				if (luchador==FIGHTER_CRIMSON)//crimson iori
					if (inc_x==0)//tipo puo
						if (paso==0) graph=337; end
						paso++;
						if (paso==1)
							if (flags) hit_stars(11,x-34,y-62); enemigo.x=x-32;
							else hit_stars(11,x+34,y-62); enemigo.x=x+32; end
						end
						if (paso<11)
							if (game_frame%2==0) graph++; end
							if (flags==enemigo.flags) enemigo.z=z-1; end
						end
						if (paso==13) graph=138; end
						if (paso==15) nuevo_estado=_toss1; end
					end
					
					if (inc_x==1)//tipo patada
						if (paso==1)
							enemigo.atravesar=0;
							if (flags) enemigo.flags=0; hit_stars(11,x-50,y-80);
							else enemigo.flags=1; hit_stars(11,x+50,y-80); end
						end
						if (paso<15)
							if (flags) enemigo.x=x-40;
							else enemigo.x=x+40; end
							enemigo.estado=100;
							enemigo.nuevo_estado=100;
							if (id==id_luchador1 and striker1==1) ive_hit=2; end
							if (id==id_luchador2 and striker2==1) ive_hit=2; end
						end
						//if (enemigo.estado==_recibir_fuertes_suelo)
							enemigo.atravesar=1;
							if (graph==340)
								if (flags) enemigo.x=x-40;
								else enemigo.x=x+40; end
							end
							if (graph==343)
								if (flags) enemigo.x=x-30;
								else enemigo.x=x+30; end
							end
							if (graph==344)
								enemigo.z=z-1;
								if (flags) enemigo.x=x-23;
								else enemigo.x=x+23; end
								if (id==id_luchador1 and striker1==2) ive_hit=2; end
								if (id==id_luchador2 and striker2==2) ive_hit=2; end
							end
							if (graph==345)
								if (flags) enemigo.x=x-3;
								else enemigo.x=x+3; end
								enemigo.graph=405; enemigo.paso=3;
							end
							if (graph==346)
								if (flags) enemigo.x=x+18;
									if (enemigo.x=>739) x=721; enemigo.x=739; end
								else enemigo.x=x-18;
									if (enemigo.x=<16) x=34; enemigo.x=16; end
								end
								enemigo.graph=404; ive_hit=2;
							end
							if (paso==57)
								if (flags) enemigo.inc_x+=6;
								else enemigo.inc_x-=6; end
								he_dado=0;
								enemigo.paso=15;
								enemigo.estado=_recibir_toss; 
								enemigo.intensidad=0;
								enemigo.inc_y=-10;
								enemigo.hit_combo++;
								channel[30]=play_snd (s_sjump,512,256);
								play_voice(s_iori21,512,256);
							end
						//end
						if (paso==15) paso=32; end
						graph=jugar[paso++];
						if (paso==sizeof(jugar)/DIV)
							nuevo_estado=_normal;
							enemigo.atravesar=0;
						end
						if (paso==82)
							if (flags) flags=0; else flags=1; end
						end
					end
				end
				if (luchador==FIGHTER_KASUMI)
					paso++;
					if (id==id_luchador1 and striker1==2) ive_hit=2; end
					if (id==id_luchador2 and striker2==2) ive_hit=2; end
					
					if (inc_x==0)//tipo puo
						if (paso==1) graph=300;
							if (flags) hit_stars(11,x-31,y-76);
							else hit_stars(11,x+31,y-76); end
							priority=10; enemigo.priority=9;
						end
						if (paso==5) graph=213; end
						if (paso==7) graph=55;  end
						if (paso==9) graph=56; play_snd (s_kasumi1,512,256); end
						
						if (paso==11) graph=57;
							enemigo.estado=_normal;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,2,502,-5,0,0,0,id);
							enemigo.estado=_recibir_fuertes_suelo;
							enemigo.paso=0;
						end
						
						if (paso==33) graph=58;  end
						if (paso==35) graph=59;  end
						if (paso==37) graph=95; play_snd (s_kasumi2,512,256); end
						if (paso==39) graph=96; enemigo.hit_combo=1;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,7,5,501,5,0,0,0,id);
						end
						if (paso==71) graph=97; end
						if (paso==79) graph=98; end
						if (paso==83)
							nuevo_estado=_normal; enemigo.vulnerable=0;
							enemigo.atravesar=0; atravesar=0;
						end
						if (paso<41)
							if (flags) enemigo.x=x-40;
							else enemigo.x=x+40; end
						end
						if (enemigo.paso==5 and paso>12 and paso<71)
							enemigo.paso-=2;
						end
						he_dado=1;
					end
					if (inc_x==1)//tipo patada
						atravesar=1;
						if (paso==1) graph=29; end
						if (paso==3) graph=112;
							if (flags) hit_stars(11,x-31,y-76);
							else hit_stars(11,x+31,y-76); end
						end
						if (paso==13)  graph=113; end
						if (paso==17)  graph=114; end
						if (paso==19) graph=115; end
						if (paso==21) graph=116;
							if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_KYO94) enemigo.graph=101; end
							if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON) enemigo.graph=153; end
							if (enemigo.luchador==FIGHTER_ATHENA) enemigo.graph=409; end
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94) enemigo.graph=136; end
							if (enemigo.luchador==FIGHTER_KASUMI) enemigo.graph=107; end
							if (enemigo.luchador==FIGHTER_TAKUMA) enemigo.graph=111; end
							if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
								if (enemigo.flags) enemigo.flags=0;
								else enemigo.flags=1; end
							end
						end
						if (paso==13 or paso==17 or paso==19 or paso==21)
							if (flags) enemigo.x+=10; else enemigo.x-=10; end
						end
						if (paso==23) graph=117;
							if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
								if (enemigo.flags) enemigo.flags=0;
								else enemigo.flags=1; end
							end
							if (flags) enemigo.x=x+35;
							else enemigo.x=x-35; end
							hit_stars(9,enemigo.x,220);
							channel[30]=play_snd (s_fall,512,256);
							play_snd (s_kasumi1,512,256);
							enemigo.y=130; enemigo.graph=410;
							if (enemigo.luchador==FIGHTER_ATHENA) enemigo.y+=24; end
							enemigo.angle=180000;
							enemigo.hit_combo++; he_dado=0;
							if (rand(0,2)==0) enemigo.voz=4; end
						end
						if (paso==23 or paso==27 or paso==31 or paso==35)
							camara_y+=5;
						end
						if (paso==25 or paso==29 or paso==33 or paso==39)
							camara_y-=5;
						end
						if (paso==27) graph=118; enemigo.inc_y=-5;
							enemigo.graph=420; enemigo.y=215; enemigo.angle=0;
							if (flags) enemigo.x+=25; enemigo.inc_x=5;
							else enemigo.x-=25; enemigo.inc_x=-5; end
						end
						if (paso>27 and paso<47)
							if (paso<35) enemigo.graph=420;
							else enemigo.graph=419; end
							enemigo.x+=enemigo.inc_x;
							enemigo.y+=enemigo.inc_y; 
							if (game_frame%2==0) enemigo.inc_y++; end
						end
						if (paso==45) enemigo.intensidad=0;
							enemigo.estado=_recibir_toss; 
							enemigo.paso=16;
						end
						if (paso==47) graph=29;
							if (flags) flags=0; else flags=1; end
						end
						if (paso==49) nuevo_estado=_normal; atravesar=0;
							enemigo.atravesar=0;
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					if (inc_x<3) paso++; end
					if (inc_x==0 or inc_x==1)
						if (paso==1) graph=116; end
						if (paso==2) graph=117; atravesar=1;
							if (flags) hit_stars(11,x-31,y-76); enemigo.x-=5;
							else hit_stars(11,x+31,y-76); enemigo.x+=5; end
						end
					end
					if (inc_x==0)//tipo puo
						if (paso==11) graph=118;
							if (flags) enemigo.x+=5; x-=7;
							else enemigo.x-=5; x+=7; end
						end
						if (paso==13 or paso==17 or paso==19 or paso==21)
							graph++; if (flags) x-=7; else x+=7; end
							if (paso==21) enemigo.graph=410; end
						end
						if (paso==23) 
							enemigo.graph=418; graph=123;
							if (flags) enemigo.x=x-10;
							else enemigo.x=x+10; end
						end
						if (paso==25) enemigo.graph=419; graph=124;
							if (flags) enemigo.x=x+15;
							else enemigo.x=x-15;  end
							get_real_point(1,&hit_x,&hit_y);
							hit_stars(1,hit_x,hit_y);
							channel[30]=play_snd (s_hit4,512,256);
						end
						if (paso==33) enemigo.angle=90000; graph=125;
							if (enemigo.vida<=0) enemigo.vida=1; end
							enemigo.y=160; enemigo.hit_combo++; he_dado=-2; voz=2;
						end
						if (paso==37) graph=126; enemigo.graph=453;
							enemigo.angle=0; enemigo.y=210;
							if (flags)
								enemigo.x=x-35; x-=7;
								if (enemigo.x=<16) x=46; enemigo.x=16; end
							else
								enemigo.x=x+35; x+=7;
								if (enemigo.x=>739) x=711; enemigo.x=739; end
							end
						end
						if (paso==41) graph=127; enemigo.graph=455;
							hit_stars(9,enemigo.x,220); enemigo.y=220;
							play_snd (s_fall,512,256); tembleque(2,1);
							enemigo.z-=2;
							if (flags) enemigo.x-=20; else enemigo.x+=20;  end
							if (flags)
								if (enemigo.x=<16) x=66; enemigo.x=16; end
							else
								if (enemigo.x=>739) x=691; enemigo.x=739; end
							end
						end
						if (paso==49 or paso==55 or paso==59 or paso==61)
							graph++;
						end
						if (paso==63) graph=132;
							tembleque(2,1); get_real_point(1,&hit_x,&hit_y);
							hit_stars(1,hit_x,215); hit_stars(9,enemigo.x,220);
							channel[30]=play_snd (s_hit2,512,256); enemigo.angle=180000;
							enemigo.y=170; enemigo.inc_y=-4; he_dado=2;
							enemigo.graph=423; enemigo.hit_combo++;
							if (rand(0,2)==0) enemigo.voz=4; end
						end
						if (paso==65 or paso==67 or paso==69 or paso==71 or 
							paso==73 or paso==75 or paso==77 or paso==79 or 
							paso==81) enemigo.y+=3;
						end
						if (paso==66 or paso==68 or paso==70 or paso==72 or
							paso==74 or paso==76 or paso==78 or paso==80 or
							paso==82) enemigo.y-=3;
						end
						if (paso==85) enemigo.y=220; end
						if (paso>84 and paso<101)
							enemigo.angle=0;
							enemigo.graph=454;
							enemigo.y+=enemigo.inc_y; 
							if (game_frame%2==0) enemigo.inc_y++; end
							if (flags) enemigo.x-=5;
							else enemigo.x+=5; end
						end
						if (paso==95) graph=13; end
						if (paso==99) enemigo.y=220; graph=1;
							enemigo.estado=_recibir_colleja;
							enemigo.paso=19; atravesar=0;
							hit_stars(9,enemigo.x,220);
							play_snd (s_fall,360,256); enemigo.atravesar=0;
							enemigo.graph=455;enemigo.z+=2;
							nuevo_estado=_normal;
						end
					end
					if (inc_x==1)//tipo patada
						if (paso==1) inc_y=0; end
						if (paso==9)
							if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON or
								enemigo.luchador==FIGHTER_K)
								inc_y=-10;
							end
						end
						if (paso==13)
							if (enemigo.luchador<>FIGHTER_KYO and enemigo.luchador<>FIGHTER_KYO94 and
								enemigo.luchador<>FIGHTER_K)
								inc_y=-10;
							end
							if (enemigo.luchador==FIGHTER_K) inc_y=-20; end
						end
						if (paso==17)
							if (enemigo.luchador<>FIGHTER_IORI and enemigo.luchador<>FIGHTER_CRIMSON and
								enemigo.luchador<>FIGHTER_K)
								inc_y=0;
							end
							if (enemigo.luchador==FIGHTER_K) inc_y=-20; end
						end
						if (paso==9)
							if (flags) camara_x+=26; else camara_x-=26; end
						end
						if (paso==13)
							if (flags) camara_x-=26; else camara_x+=26; end
						end
						if (paso==19)
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_KASUMI) inc_y=0; end
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94 or
								enemigo.luchador==FIGHTER_K)
								inc_y=-25;
							end
							if (enemigo.luchador==FIGHTER_TAKUMA) inc_y=-10; end
						end
						
						if (paso==9) graph=139; enemigo.angle=270000;
							enemigo.graph=418; enemigo.y=140+inc_y; enemigo.z+=2;
							if (flags) enemigo.x=x-85; else enemigo.x=x+85;  end
						end
						if (paso==13) graph=140;
							enemigo.graph=419; enemigo.y=90+inc_y;
							enemigo.x=x; enemigo.angle=180000; voz=1;
						end
						if (paso==17) graph=141; enemigo.z-=4;
							enemigo.graph=418; enemigo.y=100+inc_y;
							if (flags) enemigo.x=x+45; else enemigo.x=x-45;  end
							if (flags)
								if (enemigo.x=>739) x=694; enemigo.x=739; end
							else
								if (enemigo.x=<16) x=61; enemigo.x=16; end
							end
						end
						if (paso==19) graph=142; 
							enemigo.y=155+inc_y;
							if (enemigo.luchador==FIGHTER_K9999)
								enemigo.y=135+inc_y;
							end	
							if (enemigo.luchador==FIGHTER_TERRY or 
								enemigo.luchador==FIGHTER_TERRY94) 
								enemigo.graph=410;
							else enemigo.graph=409; end
							if (flags)
								enemigo.x=x+65;
								if (enemigo.x=>739) x=674; enemigo.x=739; end
							else
								enemigo.x=x-65;
								if (enemigo.x=<16) x=81; enemigo.x=16; end
							end
							hit_stars(9,enemigo.x,220); 
							
							he_dado=0;
							channel[30]=play_snd (s_fall,360,256);
							tembleque(2,-1); enemigo.hit_combo++; 
							if (rand(0,2)==0) enemigo.voz=4; end
						end
						if (paso==30) enemigo.inc_y=-4; graph=143;
							enemigo.graph=420; enemigo.y=215; enemigo.angle=0;
							if (flags) enemigo.inc_x=5;
							else enemigo.inc_x=-5; end
						end
						if (paso==40) graph=39;
							if (flags) x+=5; flags=0; else x-=5; flags=1; end
						end
						if (paso>30 and paso<49) 
							enemigo.graph=419;
							enemigo.y+=enemigo.inc_y; 
							enemigo.x+=enemigo.inc_x; 
							if (game_frame%2==0) enemigo.inc_y++; end
							if (paso>32)
								if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_KYO94)
									enemigo.graph=423;
								end
							end
						end
						if (paso==49) 
							enemigo.atravesar=atravesar=0;
							pegata (x,y,0,c_scroll,flags,100,z,100,file);
							nuevo_estado=_normal; enemigo.z+=2;
						end
					end
					if (inc_x==2)//tipo extra
						if (paso==1) graph=117;
							if (flags) hit_stars(11,x-31,y-76); enemigo.x=x-35;
							else hit_stars(11,x+31,y-76); enemigo.x=x+35; end
							if (enemigo.hit_combo<2) damegi1=0; damegi2=0; end
						end
						if (paso==9) y=180; graph=168;
							if (flags) x=enemigo.x+15;
							else x=enemigo.x-15; end
							atravesar=1; estatico=1;
						end
						if (paso==13 or paso==17 or paso==21 or
							paso==25 or paso==29 or paso==33 or paso==37 or
							paso==41) graph=168; enemigo.graph=405;
						end
						if (paso==12 or paso==20 or paso==28 or paso==36)
							graph=167; enemigo.graph=406; enemigo.hit_combo++;
							get_real_point(1,&hit_x,&hit_y);hit_stars(1,hit_x,hit_y);
							if (is_playing_snd(channel[30]))
								stop_snd(channel[30]); channel[30]=0;
							end
							channel[30]=play_snd (s_hit4,480,256);
							he_dado=-3;
						end
						if (paso==16 or paso==24 or paso==32 or paso==40)
							graph=169; enemigo.graph=402; enemigo.hit_combo++;
							get_real_point(1,&hit_x,&hit_y);hit_stars(-18,hit_x,hit_y);
							if (is_playing_snd(channel[30]))
								stop_snd(channel[30]); channel[30]=0;
							end
							channel[30]=play_snd (s_hit4,480,256);
							he_dado=-3;
							if (paso==40)
								he_dado=3;
							end
						end
						if (paso==43) graph=99;  end
						if (paso==45) graph=100; end
						if (paso==47) graph=102;
							he_dado=0; 
							enemigo.estado=_recibir_toss; 
							enemigo.paso=0;
							if (flags) enemigo.inc_x=-5;
							else enemigo.inc_x=5; end
							enemigo.intensidad=0;
							enemigo.hit_combo++;
							hit_stars(18,hit_x,hit_y); 
							if (is_playing_snd(channel[30]))
								stop_snd(channel[30]); channel[30]=0;
							end
							channel[30]=play_snd (s_hit5,512,256);
						end
						if (paso==59) atravesar=0; estatico=0;
							inc_x=3; inc_y=-8; paso=3; graph=16;
						end
					end
					if (inc_x==3)//tipo extra b
						graph=sal_taku_ret[paso++];
						if (paso==sizeof(sal_taku_ret)/DIV) paso--; end
						if (flags) x+=3; else x-=3; end
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
						if (y=>220) enemigo.atravesar=0; atravesar=0;
							y=220; inc_y=0; altura=0; enemigo.vulnerable=0;
							nuevo_estado=_agachar; play_snd (s_floor,450,256);
						end
					end
				end
				if (luchador==FIGHTER_K)
					if (inc_x==0) paso++;
						if (paso==1) graph=142; end
						if (paso==3) graph=191;
							if (flags) hit_stars(11,x-31,y-76); enemigo.x-=5;
							else hit_stars(11,x+31,y-76); enemigo.x+=5; end
						end
						if (paso==19) graph=192; end
						if (paso==23) graph=193; end
						if (paso==27) graph=194; end
						if (paso==29) graph=195; voz=2;
							if (flags) hit_x=x-35; else hit_x=x+35; end
							enemigo.estado=_recibir_colleja; enemigo.paso=3;
							hit_stars(18,hit_x,150); enemigo.intensidad=0;
						end
						if (paso==31) graph=196;
							enemigo.hit_combo++; he_dado=0;
							if (rand(0,2)==0) enemigo.voz=4; end
							if (is_playing_snd(channel[30]))
								stop_snd(channel[30]); channel[30]=0;
							end
							channel[30]=play_snd (s_hit5,512,256);
						end
						if (paso==33) graph=197; end
						if (paso==43) graph=198; end
						if (paso==49) graph=199; end
						if (paso==55) graph=142; end
						if (paso==61) nuevo_estado=_normal;
							enemigo.atravesar=0; atravesar=0;
						end
					end
					if (inc_x==1)//tipo patada
						paso++;
						if (paso==1) graph=314; enemigo.z=3; z=-3;
							if (flags) hit_stars(11,x-31,y-76);
							else hit_stars(11,x+31,y-76); end
							enemigo.graph=410; atravesar=1;
						end
						if (paso==7 or paso==11 or
							paso==19 or paso==21)
							if (flags)
								enemigo.x+=18;
								if (enemigo.x=>739) x=721; enemigo.x=739; end
							else
								enemigo.x-=18;
								if (enemigo.x=<16) x=34; enemigo.x=16; end
							end
						end
						if (paso==7) graph=315; end
						if (paso==11) graph=316;
							enemigo.graph=409;
						end
						if (paso==13 or paso==19)
							if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON)
								if (enemigo.flags) enemigo.flags=0;
								else enemigo.flags=1; end
							end
						end
						if (paso==13) graph=317; voz=-2;
							if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON)
								enemigo.graph=177;
							else
								enemigo.graph=450;
							end
							get_real_point(1,&hit_x,&hit_y);
							hit_stars(18,hit_x,150);
							enemigo.hit_combo++; 
							
							he_dado=0;
							if (rand(0,2)==0) enemigo.voz=4; end
							if (is_playing_snd(channel[30]))
								stop_snd(channel[30]); channel[30]=0;
							end
							channel[30]=play_snd (s_hit4,512,256);
						end
						if (paso==13 or paso==15 or paso==17)
							enemigo.x=x;
						end
						if (paso==19) graph=318;
							enemigo.graph=409;
							enemigo.y=100; camara_y=5;
							enemigo.angle=180000;
						end
						if (paso==21) camara_y=0;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON)
								enemigo.graph=421;
							else
								enemigo.graph=420;
							end
							enemigo.angle=0;
							enemigo.y=210;
						end
						if (paso==23) graph=319;
							enemigo.estado=_recibir_toss; 
							enemigo.paso=35; enemigo.y0=0;
							if (flags) enemigo.inc_x=4;
							else enemigo.inc_x=-4; end
							enemigo.inc_y=-8;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON)
								enemigo.graph=421;
							else
								enemigo.graph=420;
							end
						end
						if (paso==29) graph=320; end
						if (paso==35) graph=321; end
						if (paso==41) graph=322; end
						if (paso==47) graph=323; end
						if (paso==29 or paso==35 or paso==41)
							if (flags) x-=5; else x+=5; end
						end
						if (paso==47)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==51) graph=1; enemigo.atravesar=0;
							if (flags) flags=0; else flags=1; end
							atravesar=0; nuevo_estado=_normal;
						end
					end
				end
				
				if (luchador==FIGHTER_KULA) 
					paso++;
					if (inc_x==0)
						if (paso==1) graph=170;
							play_snd (s_kura4,512,256);
						end
						if (paso==5) graph=171;
							get_real_point(1,&hit_x,&hit_y);
							hit_stars(11,hit_x,hit_y);
						end
						if (paso==19)
							play_voice(s_kura15,412,256);
							if (enemigo.luchador==FIGHTER_ATHENA or
								enemigo.luchador==FIGHTER_KASUMI or
								enemigo.luchador==FIGHTER_K)
								enemigo.graph=418;
							end
							enemigo.y=215;
							pegata (enemigo.x,150,0,c_scroll,flags,100,z+3,125,file);
							pegata (enemigo.x,150,0,c_scroll,flags,100,z-3,126,file);
						end
						if (paso<109) 
							if (flags) enemigo.x=x-50;
								if (enemigo.x=<20) x=70; enemigo.x=20; end
							else enemigo.x=x+50;
								if (enemigo.x=>735) x=685; enemigo.x=735; end
							end
						end
						if (paso>=19 and paso<109) 
							enemigo.graph=417; 
						end
						if (paso==19 or paso==39 or paso==59)
							graph++; pantallazo(0);
						end
						if (paso==23 or paso==27 or paso==31 or paso==35 or
							paso==43 or paso==47 or paso==51 or paso==55 or
							paso==63 or paso==67 or paso==71 or paso==75)
							if (flags) enemigo.x--; else enemigo.x++; end
							graph++;
						end
						if (paso==63 or paso==67 or paso==71 or paso==75 or
							paso==79 or paso==83 or paso==87 or paso==91 or
							paso==95 or paso==99 or paso==103 or paso==107)
							graph++;
						end
						if (paso<109 and graph>174) graph=172; end
						if (paso==109) graph=171;
							he_dado=0;
							enemigo.estado=_recibir_toss;
							enemigo.paso=35; enemigo.y0=0; 
							if (flags) enemigo.inc_x=-5;
							else enemigo.inc_x=5; end
							enemigo.inc_y=-8; 
							enemigo.hit_combo++;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON)
								enemigo.graph=421;
							else
								enemigo.graph=420;
							end
						end
						if (paso==115) graph=171; end
						if (paso==121) 
							enemigo.atravesar=0;
							enemigo.vulnerable=0;
							graph=170; 
							atravesar=0; 
							nuevo_estado=_normal;
						end
					end
					if (inc_x==1)
						if (paso==1) 
							graph=175; 
							if (x<25) x=25; end
							if (x>730) x=730;end
							if (flags) enemigo.x=x-45; else enemigo.x=x+45; end
						end
						if (paso==5) 
							graph=176;
							if (flags) hit_x=x-32; else hit_x=x+32; end
							hit_stars(11,hit_x,150);
							play_voice(s_kura16,412,256);
						end
						if (paso==9) graph=177; end
						if (paso==23)
							graph=178;
							if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON)
								enemigo.graph=177;
							else
								enemigo.graph=450;
							end
							hit_stars(5,hit_x,150); hit_stars(6,hit_x,150);
							enemigo.hit_combo++; he_dado=0;
							if (rand(0,2)==0) enemigo.voz=4; end
							if (is_playing_snd(channel[30]))
								stop_snd(channel[30]); channel[30]=0;
							end
							channel[30]=play_snd (s_cut,512,256);
							pegata (enemigo.x,220,579,c_scroll,
							flags,100,z+3,127,file); pantallazo(0);
						end
						if (paso==29)
							enemigo.graph=409;
							enemigo.y=100; camara_y=5;
							enemigo.angle=180000;
						end
						if (paso==31) camara_y=0; graph=179; enemigo.x=x;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON)
								enemigo.graph=421;
							else
								enemigo.graph=420;
							end
							enemigo.angle=0;
							enemigo.y=210;
						end
						if (paso==33)
							enemigo.estado=_recibir_toss; 
							enemigo.paso=35; enemigo.y0=0;
							if (flags) enemigo.inc_x=6;
							else enemigo.inc_x=-6; end
							enemigo.inc_y=-8;
							
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON)
								enemigo.graph=421;
							else
								enemigo.graph=420;
							end
						end
						if (paso==49)
							enemigo.vulnerable=0; enemigo.atravesar=0;
							atravesar=0; nuevo_estado=_normal;
						end
					end
				end
				
				if (luchador==FIGHTER_K9999) paso++;
					if (inc_x==0)
						if (paso==1) 
							graph=140; z=enemigo.z-1;
							if (flags) hit_x=x-36; else hit_x=x+36; end
							if (flags) enemigo.x=x-45; else enemigo.x=x+45; end
							hit_stars(11,hit_x,160);
						end
						if (paso==19) graph=141; end
						if (paso==23) graph=142; end
						if (paso==25) graph=143;
							if (flags) hit_stars(1,x-55,y-70);
							else      hit_stars(1,x+55,y-70); end
							he_dado=0;
							enemigo.paso=0; 
							enemigo.estado=_recibir_toss;
							enemigo.intensidad=0;
							enemigo.hit_combo++; 
							channel[30]=play_snd (s_hit2,512,256);
							if (flags) enemigo.inc_x=-5;
							else enemigo.inc_x=5; end
							//enemigo.inc_y=-5;
							if (rand(0,2)==0) enemigo.voz=4; end
						end
						if (paso==27) graph=144; end
						if (paso==37) graph=145; end
						if (paso==41) graph=146; end
						if (paso==47) graph=147; end
						if (paso==55)
							enemigo.vulnerable=0; enemigo.atravesar=0;
							atravesar=0; nuevo_estado=_normal;
						end
					end
					if (inc_x==1)
						if (paso==1) graph=80; z=enemigo.z+1; enemigo.graph=410;
							if (flags) hit_x=x-36; else hit_x=x+36; end
							if (flags) enemigo.x=x-45; else enemigo.x=x+45; end
							hit_stars(11,hit_x,160);
						end
						if (paso==15 or paso==17)
							graph=81; enemigo.graph=407;
						end
						if (paso==19 or paso==21)
							graph=82; enemigo.y=90;
							enemigo.angle=180000; enemigo.graph=419;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_KASUMI)
								enemigo.y=100;
							end
							if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_KYO94)
								enemigo.y=115;
							end
						end
						if (paso==23 or paso==25)
							graph=83; enemigo.x=x;
							enemigo.angle=180000; enemigo.graph=418;
							if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_ATHENA or
								enemigo.luchador==FIGHTER_KYO94 or enemigo.luchador==FIGHTER_KASUMI)
								enemigo.y=115;
							else
								enemigo.y=100;
							end
						end
						if (paso==27) graph=84; end
						if (paso==27 or paso==28 or paso==29 or paso==30)
							if (flags) enemigo.x+=12; else enemigo.x-=12; end
							enemigo.y+=10;
							if (flags)
								if (enemigo.x=>739) x=739-((paso-26)*12); enemigo.x=739; end
							else
								if (enemigo.x=<16) x=16+((paso-26)*12); enemigo.x=16; end
							end
							
						end
						if (paso==30) enemigo.graph=409; tembleque(2,1);
							hit_stars(9,enemigo.x,220); play_snd (s_fall,512,256);
							enemigo.hit_combo++; he_dado=0; graph=85;
							if (rand(0,2)==0) enemigo.voz=4; end
							if (enemigo.luchador==FIGHTER_KULA) enemigo.y+=10; end
						end
						if (paso==33) graph=86; end
						if (paso==39)
							if (flags) enemigo.inc_x=4;
							else enemigo.inc_x=-4; end
							enemigo.inc_y=-6;
							enemigo.angle=0; 
							enemigo.y=210; 
							enemigo.graph=417;
						end
						if (paso>38 and paso<55)
							enemigo.x+=enemigo.inc_x; 
							enemigo.y+=enemigo.inc_y;
							if (game_frame%2==0) enemigo.inc_y++; end
						end
						if (paso==39)
							if (enemigo.luchador==FIGHTER_K9999 or enemigo.luchador==FIGHTER_ATHENA or
								enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON or
								enemigo.luchador==FIGHTER_KULA)
								enemigo.graph=421;
							else
								enemigo.graph=420;
							end
						end
						if (paso==45) enemigo.graph=419; end
						if (paso==57) 
							enemigo.intensidad=0;
							enemigo.estado=_recibir_toss; 
							enemigo.paso=23;
						end
						if (paso==51) graph=87;
							if (flags) flags=0; else flags=1; end
						end
						if (paso==57)
							enemigo.vulnerable=0; enemigo.atravesar=0;
							atravesar=0; nuevo_estado=_normal;
						end
					end
				end
				
				if (he_dado!=1)
					if (enemigo==id_luchador1)
						if (enemigo.hit_combo==2) combos(id_luchador1,1); end
						if (enemigo.hit_combo==10)combos(id_luchador1,2); end
					end
					if (enemigo==id_luchador2)
						if (enemigo.hit_combo==2) combos(id_luchador2,1); end
						if (enemigo.hit_combo==10)combos(id_luchador2,2); end
					end
					if (he_dado==0)
						power+=6;
						damage = get_real_damage (12);
					end
					if (he_dado==2 or he_dado==-2)
						power+=3;
						damage = get_real_damage (6);
					end
					if (he_dado==3 or he_dado==-3) 
						damage=get_real_damage(1);
						power+=1;						
					end
					
					enemigo.vida-=damage;
					if (he_dado<0) 
						if (enemigo.vida<=0) enemigo.vida=1; end
					end
					
					if (enemigo.file==fich1)
						if (enemigo.hit_combo==1) damegi1=0; end
						damegi1-=damage;
					end
					if (enemigo.file==fich2)
						if (enemigo.hit_combo==1) damegi2=0; end
						damegi2-=damage;
					end
					he_dado=1;
				end
				
				if (enemigo.vida<=0) 
					enemigo.vida=0;
					if (parpadeo_final==0 and game_mode!=MODE_TRAINING)
						parpadeo_final=1; ralenti(1);
						if (is_playing_snd(channel[30]))
							stop_snd(channel[30]); channel[30]=0;
						end
						channel[30]=play_snd (s_fhit,512,256);
					end
				end
			end
			case _recibir_colleja: //caida bocabajo
				tipo_ataque=NULO;
				if (paso==0 and vida>0)
					if (rand(0,2)==0) voz=4; end
				end
				graph=recibir_colleja[paso++];
				if (paso==sizeof(recibir_colleja)/DIV)
					voltear=15;
					if (pipiolos>0)
						if (control(agachar) and control(retroceder))
							nuevo_estado=_agachadoguardia;
						end
						if (control(agachar) and not control(retroceder))
							nuevo_estado=_agachado;
						end
						if (not control(agachar) and control(retroceder))
							nuevo_estado=_retroceder;
						end
						if (not control(agachar) and not control(retroceder))
							nuevo_estado=_normal;
						end
						hit_combo=0;
					else
						nuevo_estado=_pajaritos; pipiolos=140;
					end
				end
				if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)
					if (graph==450) graph=407; end
					if (graph==451) graph=408; end
				end
				if (graph==452 and (luchador==FIGHTER_KYO or luchador==FIGHTER_ATHENA or
					luchador==FIGHTER_KYO94 or luchador==FIGHTER_TAKUMA or luchador==FIGHTER_K or
					luchador==FIGHTER_K9999)) graph=450;
				end
				if (graph==454)
					if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) graph=428; end
				end
				if (luchador==FIGHTER_ATHENA or luchador==FIGHTER_K)
					if (graph==453 or graph==454) graph--; end
				end
				if (luchador==FIGHTER_KULA)
					if ((enemigo.luchador==FIGHTER_IORI or 
						enemigo.luchador==FIGHTER_CRIMSON) and
						enemigo.estado==_uatras_kick)
					else
						if (paso==1 or paso==2 or paso==5 or paso==6 or paso==9 or paso==10) graph=407; end
						if (paso==3 or paso==4 or paso==7 or paso==8) graph=408; end
					end
					
					if (paso>22 and paso<29) 
						graph=456; 
					end
					if (paso>28 and paso<33) graph=457; end
					if (paso>33 and paso<38) graph=166; end
					if (paso>37 and paso<42) graph=167; end
					if (paso>41) graph=46; end
					
				end
				if (paso==13)
					if ((enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON) and
						enemigo.estado==_uatras_kick)
					else
						tembleque(1,1); play_snd (s_fall,320,256);
						if (flags)
							pegata (x+35,220,132,c_scroll,flags,100,z-4,44,fichad);
						else
							pegata (x-35,220,132,c_scroll,flags,100,z-4,44,fichad);
						end
					end
				end
				if (graph==457 and (luchador==FIGHTER_KYO or luchador==FIGHTER_KASUMI or
					luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON or luchador==FIGHTER_KYO94))
					if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) graph=100; end
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)
						graph=153;
						if (paso==35)
							if (flags) flags=0; else flags=1; end
						end
					end
					if (luchador==FIGHTER_KASUMI) graph=427; end
				end
				if (graph==458 and (luchador==FIGHTER_ATHENA or
					luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON or luchador==FIGHTER_K))
					if (luchador==FIGHTER_ATHENA or luchador==FIGHTER_K) graph=457; end
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)
						graph=162;
						if (paso==39)
							if (flags) flags=0; else flags=1; end
						end
					end
				end
				if (graph==459 and (luchador==FIGHTER_ATHENA or
					luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON or luchador==FIGHTER_K))
					if (luchador==FIGHTER_ATHENA) graph=26; end
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON) graph=31; end
					if (luchador==FIGHTER_K) graph=54; end
				end
				if ((graph==458 or graph==459) and
					(luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94 or luchador==FIGHTER_KASUMI or luchador==FIGHTER_TAKUMA))
					if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) graph=24; end
					if (luchador==FIGHTER_KASUMI or luchador==FIGHTER_TAKUMA) graph=15; end
				end
				
				if ((enemigo.luchador==FIGHTER_IORI or 
					enemigo.luchador==FIGHTER_CRIMSON) and
					enemigo.estado==_uatras_kick)
					if (y<220 and paso>9)
						if (game_frame%2==0) inc_y++; end 
						y+=inc_y; paso=11; x+=inc_x;
					end
					if (y>220) inc_x=0; paso=13; y=220; end
					if (y==220 and inc_x<>0)
						paso=12; x+=inc_x;
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
					end
				else
					if (enemigo.vida<=0) enemigo.vida=0; end
					if (paso>18 and vida==0 and game_mode!=MODE_TRAINING) paso--; 
						graph=455;
						if (luchador==FIGHTER_KULA) graph=456; end
					end
				end
				if (vida<=0 and paso==16 and game_mode!=MODE_TRAINING)
					if (enemigo.setwin==asaltos-1)
						partido(0); enemigo.setwin++;
					end
				end
			end
			case _recibir_toss:
				tipo_ataque=NULO;
				graph=408;
				if (paso==0)
					if (intensidad==0) inc_y=-10; end
					if (intensidad==3) inc_y=-12; end
				end
				if (y>220 and paso<38) paso=38; y=220; end
				
				paso++;
				if (paso==1 and vida>0)
					if (rand(0,2)==0) voz=4; end
				end
				if (paso==1 or paso==3 or paso==5 or paso==7 or 
					paso==9 or paso==11 or paso==13)
					if (intensidad==0)
						if (y==220) graph=407;
						else graph=444; end
					end
					if (intensidad==3) graph=445; end
				end
				if (paso==2 or paso==4 or paso==6 or 
					paso==8 or paso==10 or paso==12 or paso==14)
					if (intensidad==0)
						if (y==220) graph=408;
						else
							graph=418;
							if (luchador==FIGHTER_K9999) graph=417; end
						end
					end
					if (intensidad==3) graph=446; end
				end
				if (paso>=14 and 
					paso!=39 and paso!=40 and 
					paso!=41 and paso!=42)
					if (game_frame%2==0) inc_y++; end 
					y+=inc_y; x+=inc_x;
				end
				if (paso>10 and paso<25)
					if (intensidad==3)
						if (paso==11 or paso==12) graph=446; end
						if (paso>12 and paso<19) graph=447; end
						if (paso>18 and paso<25) graph=448; end
					else
						graph=418;
					end
				end
				if (paso>24 and paso<37)
					if (intensidad==3)
						if (paso<32) graph=449; else graph=419; end
					else
						if (luchador==FIGHTER_KULA)
							if (paso<32) graph=419; end
							if (paso>30 and paso<36) graph=424; end
							if (paso>34) graph=420; end
						else
							if (paso<36) graph=419; else graph=420; end
						end
					end
				end
				if (paso>36 and paso<39) graph=420;
					if (paso>36 and (luchador==FIGHTER_ATHENA or
						luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON))
						graph=421;
					end
					if (y<220)
						if (paso==38) paso--; end
					else
						paso=39;
					end
				end
				if (paso>34 and y>200) vulnerable=0; end
				if (paso<35) y0=0; end
				if (paso>34 and paso<39)
					if (control(rodar) and pipiolos>0 and
						enemigo.estado<>_voltear) 
						y0=1; vulnerable=0;
					end
				end
				if (paso==39)
					if (y0==1)
						if (flags==0 and inc_x>0) flags=1; end
						if (flags==1 and inc_x<0) flags=0; end
						if (x<enemigo.x) inc_x=-1; else inc_x=1; end
						
						y=220; hit_combo=0;
						nuevo_estado=_rodar; y0=0;
						nuevo_paso=7; voltear=36;
					else
						play_snd (s_fall,300,256); hit_stars(9,x,220); vulnerable=0;
						if (flags)
							pegata (x+35,220,132,c_scroll,flags,100,z-4,44,fichad);
						else
							pegata (x-35,220,132,c_scroll,flags,100,z-4,44,fichad);
						end
					end
				end
				if ((paso>38 and paso<44) and y0==0) 
					y=220; inc_y=-6;
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON or luchador==FIGHTER_KASUMI) graph=425;
					else graph=422; end
				end
				if (paso==44) graph=423; y=220; end
				if (paso>=45)
					if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) graph=424;
					else graph=423; end
					if (paso==47 and y<220) paso--; end
				end
				if (paso>=48 and y>=220)
					y=220; inc_y=0; inc_x=0; graph=425;
				end
				if (paso==49 and y==220) play_snd (s_fall,300,256); end
				
				if (vida<=0 and paso>8 and paso<70 and 
					game_mode!=MODE_TRAINING)
					if (enemigo.setwin==asaltos-1)
						partido(0); enemigo.setwin++;
					end
				end
				if (paso==71) y=220;
					if (vida>0 or game_mode==MODE_TRAINING)
						nuevo_estado=_levantandose;
					else
						if (game_mode!=MODE_TRAINING) paso--; hit_combo=0; end
					end
				end
			end
			
			case _pajaritos:
				tipo_ataque=NULO;
				if (luchador==FIGHTER_KULA)
					graph=pajaritos_kula[paso++];
				else
					graph=pajaritos[paso++];
					if (luchador==FIGHTER_TAKUMA or luchador==FIGHTER_KASUMI)
						if (graph==394) graph=396; end
					end
				end
				if (paso==sizeof(pajaritos)/DIV)
					if (control(agachar) and control(retroceder))
						nuevo_estado=_agachadoguardia;
					end
					if (control(agachar) and not control(retroceder))
						nuevo_estado=_agachado;
					end
					if (not control(agachar) and control(retroceder))
						nuevo_estado=_retroceder;
					end
					if (not control(agachar) and not control(retroceder))
						nuevo_estado=_normal;
					end
					hit_combo=0; pipiolos=100;
				end
			end
			
			case _ayuken:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or (luchador==FIGHTER_KYO94 and intensidad==-11))//kyo
					if (intensidad==1 or intensidad==10 or intensidad==-11 or
						intensidad==11 or intensidad==12 or intensidad==13)
						if (intensidad==1)  //esmoniga1
							if (paso==0)
								if (flags) x-=24; else x+=24; end
								if (power==74) guardia=3; end
							end
							if (graph==141) guardia=0; end
							
							graph=esmoniga[paso++];
							if (paso==sizeof(esmoniga)/DIV)
								nuevo_estado=_normal;
								if (he_dado==0 and enemigo.estado==_recibir_toss)
									enemigo.vulnerable=0;
								end
							end
							if (paso==1)
								play_snd (s_flame1,0,256);
								play_voice(s_kyo16,512,256);
							end
							if (paso==14)//llama1
								play_snd (s_flame1,275,256);
								if (flags)
									pegata (x-80,y-68,517,c_scroll,1,100,z-2,25,file);
								else
									pegata (x+80,y-68,517,c_scroll,0,100,z-2,25,file);
								end
								ive_hit++;
							end
							if ((paso=>14 and paso<=18) and he_dado==1)
								get_real_point(1,&Hit_x,&hit_y);
								golpe(hit_x,hit_y,14,26,613,11,1,8,8,id);
							end
							if (paso==36)
								play_voice(s_kyo25,512,256);
							end
						end
						if (intensidad==10) //esmoniga2
							if (paso==1 or paso==3 or paso==5 or 
								paso==7 or paso==9 or paso==25 or paso==37)
								if (flags) x-=10; else x+=10; end
							end
							graph=esmoniga2[paso++];
							if (paso=>sizeof(esmoniga2)/DIV)
								nuevo_estado=_normal;
								if (he_dado==0 and enemigo.estado==_recibir_toss)
									enemigo.vulnerable=0;
								end
							end
							if (paso==11)//llama2
								play_snd (s_flame1,275,256);
								play_voice(s_kyo26,512,256);
								if (flags)
									pegata (x-50,y-68,528,c_scroll,1,100,z-2,25,file);
								else
									pegata (x+50,y-68,528,c_scroll,0,100,z-2,25,file);
								end
							end
							if (graph==156 and he_dado==1)
								get_real_point(1,&Hit_x,&hit_y);
								golpe(hit_x,hit_y,14,26,613,5,1,8,8,id);
								ive_hit++;
							end
						end
						if (intensidad==11 or intensidad==-11) //patada esmoniga
							graph=esmoniga_kick[paso++];
							if (paso==sizeof(esmoniga_kick)/DIV)
								nuevo_estado=_normal;
							end
							if (graph==168 and he_dado==1)
								get_real_point(1,&Hit_x,&hit_y);
								if (intensidad==11)
									if (power==74)
										golpe(hit_x,hit_y,10,14,532,5,1,16,8,id);
									else
										golpe(hit_x,hit_y,7,14,532,5,1,16,8,id);
									end
								else
									golpe(hit_x,hit_y,7,4,532,15,0,12,12,id);
								end
								ive_hit--;
							end
							if (paso==12) play_snd (s_sjump,400,256); inc_x=7; end
							if (paso>10 and graph==168)
								if (flags) x-=inc_x; else x+=inc_x; end
							end
						end
						if (intensidad==12)  //esmoniga 3a
							tipo_ataque=ALTO;
							graph=esmoniga3[paso++];
							if (paso==sizeof(esmoniga3)/DIV)
								nuevo_estado=_normal;
							end
							if (paso==20)
								play_snd (s_flame1,275,256);
								play_voice(s_kyo27,512,256);
								if (flags)
									pegata (x-70,y-68,528,c_scroll,3,100,z-2,25,file);
								else
									pegata (x+70,y-68,528,c_scroll,2,100,z-2,25,file);
								end
							end
							if ((paso==20 or paso==21) and he_dado==1)
								if (flags) golpe(x-70,y-50,11,26,613,12,2,18,8,id);
								else golpe(x+70,y-50,11,26,613,12,2,18,8,id); end
								ive_hit--;
							end
						end
						if (intensidad==13) //esmoniga 3b
							tipo_ataque=BAJO;
							graph=esmoniga4[paso++];
							if (paso==sizeof(esmoniga4)/DIV)
								nuevo_estado=_normal;
							end
							if (paso==14 or paso==18 or paso==20)
								if (flags) x-=8; else x+=8; end
							end
							if (paso==34 or paso==36 or paso==40)
								if (flags) x+=8; else x-=8; end
							end
							if (paso==20)
								play_snd (s_flame1,275,256);
								play_voice(s_kyo27,512,256);
								if (flags)
									pegata (x-70,y-32,528,c_scroll,3,100,z-2,25,file);
								else
									pegata (x+70,y-32,528,c_scroll,2,100,z-2,25,file);
								end
							end
							if ((paso==20 or paso==21) and he_dado==1)
								if (flags) golpe(x-50,y-32,3,26,613,12,2,18,8,id);
								else golpe(x+50,y-32,3,26,613,12,2,18,8,id); end
								ive_hit--;
							end
						end
					end
					if (intensidad==2 or intensidad==20 or intensidad==22)
						if (intensidad==2)
							if (paso==0 and power==74) guardia=3; end
							if ((enemigo.x>725 or enemigo.x<25) and
								abs(enemigo.x-x)<38)
							else
								if (paso<17)
									if (flags) x-=6; else x+=6; end
								end
								if (abs(enemigo.x-x)<38)
									if (flags) enemigo.x-=2;
									else enemigo.x+=2; end
								end
							end
							graph=kore1[paso++];
							if (paso==sizeof(kore1)/DIV)
								if (he_dado==0 and enemigo.estado==_recibir_toss)
									enemigo.vulnerable=0;
								end
								nuevo_estado=_normal;
							end
							if (paso==16)//LLAMA1
								play_snd (s_flame1,350,256); guardia=0;
								play_voice(s_kyo15,512,256);
								if (flags)
									pegata (x-65,y-68,517,c_scroll,1,100,z-2,25,file);
								else
									pegata (x+65,y-68,517,c_scroll,0,100,z-2,25,file);
								end
							end
							if ((paso==20 or paso==21) and he_dado==1)//llama1
								if (flags) golpe(x-45,y-65,14,26,613,15,1,10,8,id);
								else golpe(x+45,y-65,14,26,613,15,1,10,8,id); end
								ive_hit++;
							end
						end
						if (intensidad==20)
							if (paso==0 or paso==27)
								if (flags) x-=5; else x+=5; end
							end
							graph=kore2[paso++];
							if (paso==sizeof(kore2)/DIV)
								nuevo_estado=_normal;
							end
							if (paso==5 or paso==29)
								if (flags) x-=15; else x+=15; end
							end
							if (paso==9)//llama1
								play_snd (s_flame1,350,256);
								if (flags)
									pegata (x-70,y-68,528,c_scroll,1,100,z-2,25,file);
									golpe(x-60,y-50,14,26,520,5,1,10,7,id);
								else
									pegata (x+70,y-68,528,c_scroll,0,100,z-2,25,file);
									golpe(x+60,y-50,14,26,520,5,1,10,7,id);
								end
								ive_hit++;
							end
							if (paso==12 and he_dado==0 and enemigo.y==220)
								enemigo.inc_x=enemigo.inc_x/2;
							end
						end
						if (intensidad==22)
							if (paso==0)
								if (flags) x-=8; else x+=8; end
							end
							graph=kore3[paso++];
							if (paso==sizeof(kore3)/DIV)
								nuevo_estado=_normal;
							end
							if (paso==1) inc_y=-6; end
							if (paso>10 and paso<33)
								if (game_frame%2==0) inc_y++; end 
								y+=inc_y;
								if (flags) x-=3; else x+=3; end
								if (paso==32 and y<220) paso--; end
							end
							if (y>220) inc_y=0; y=220; end
							if (paso==33) play_snd (s_floor,400,256); end
							if ((paso==5 or paso==6) and he_dado==1)//llama1
								if (flags) golpe(x-40,y-40,7,26,612,5,1,18,8,id);
								else golpe(x+40,y-40,7,26,612,5,1,18,8,id); end
								ive_hit--;
							end
						end
					end
				end
				if (luchador==FIGHTER_ATHENA)//ATHENA
					if (paso==0)//condiciones para voltear
						if ((enemigo.estado<23 or (enemigo.estado>29 and
							enemigo.estado<36) or enemigo.estado==_pajaritos or
							(enemigo.estado==_guardiaalta and enemigo.paso<9) or
							(enemigo.estado==_guardiabaja and enemigo.paso<9) or
							(enemigo.estado>47 and enemigo.estado<57)) and
							abs(enemigo.x-x)<60 and enemigo.voltear==0 and
							enemigo.y==220)
							enemigo.estado=100;
							enemigo.nuevo_estado=100;
							if (game_mode==MODE_TRAINING and enemigo.hit_combo==0)
								if (enemigo==id_luchador1 and rojo==0)
									enemigo.vida=MAX_LIFE; id_alive1.x=89;
								end
								if (enemigo==id_luchador1 and rojo==1)
									enemigo.vida=DANGER_LIFE-1; id_alive1.x=184;
								end
								if (enemigo==id_luchador2 and (cputype<>3 or
									(cputype==3 and rojo==0)))
									enemigo.vida=MAX_LIFE; id_alive2.x=231;
								end
								if (enemigo==id_luchador2 and cputype==3 and rojo==1)
									enemigo.vida=DANGER_LIFE-1; id_alive2.x=136;
								end
							end
							
							stop_voice (enemigo);                        
							play_voice(s_ath30,512,256);
						end
					end
					if (paso==1)
						play_snd (s_ath4,512,310);
						if (flags) hit_stars(12,x-50,y-60);
						else hit_stars(12,x+50,y-60); end
						if (enemigo.estado==100)
							enemigo.atravesar=0; 
							enemigo.vulnerable=1;
							enemigo.flags=1-flags;
						end
					end
					if (paso<31 and enemigo.estado==100)
						enemigo.z=z+1;
						if (flags) enemigo.x=x-48;
						else enemigo.x=x+48; end
						if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
							enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
							enemigo.graph=410;
						else
							enemigo.graph=411;
						end
					end
					if (paso==31)
						channel[30]=play_snd (s_ath2,512,256);
						enemigo.estado=_recibir_toss; enemigo.intensidad=0;
						enemigo.paso=16; enemigo.inc_y=-9-(intensidad*2);
						enemigo.vulnerable=1; enemigo.hit_combo++;
						enemigo.vida-=get_real_damage (5);
						
						if (flags) enemigo.inc_x=-1;
						else enemigo.inc_x=1; end
						if (enemigo==id_luchador1)
							if (enemigo.hit_combo==2) combos(id_luchador1,1); end
							if (enemigo.hit_combo==10)combos(id_luchador1,2); end
						end
						if (enemigo==id_luchador2)
							if (enemigo.hit_combo==2) combos(id_luchador2,1); end
							if (enemigo.hit_combo==10)combos(id_luchador2,2); end
						end
					end
					graph=psyco_pres[paso++];
					if (paso==sizeof(psyco_pres)/DIV or
						(paso==23 and enemigo.estado<>100))
						nuevo_estado=_normal;
					end
					if (enemigo.vida<=0) 
						enemigo.vida=0;
						if (parpadeo_final==0 and game_mode!=MODE_TRAINING)
							parpadeo_final=1; pantallazo(10); ralenti(1);
							if (is_playing_snd(channel[30]))
								stop_snd(channel[30]); channel[30]=0;
							end
							channel[30]=play_snd (s_fhit,512,256);
						end
					end
				end
				if (luchador==FIGHTER_IORI) //doshita!!!
					if (intensidad==3)//coje al enemigo
						if (paso==0)//condiciones para voltear
							if ((enemigo.estado<23 or (enemigo.estado>29 and
								enemigo.estado<36) or enemigo.estado==_pajaritos or
								(enemigo.estado==_guardiaalta and enemigo.paso<9) or
								(enemigo.estado==_guardiabaja and enemigo.paso<9) or
								(enemigo.estado>47 and enemigo.estado<57)) and
								abs(enemigo.x-x)<60 and enemigo.voltear==0 and
								enemigo.y==220)
								
								stop_voice (enemigo);
								enemigo.estado=100;
								enemigo.nuevo_estado=100;
								
								if (x<30)  x=30;  end
								if (x>722) x=722; end
								
							end
						end
						if (paso==1 and enemigo.estado==100)
							enemigo.atravesar=0;
							enemigo.flags=1-flags;
							if (flags) hit_stars(11,x-50,y-80);
							else hit_stars(11,x+50,y-80); end
						end
						if (paso==12 and enemigo.estado==100) paso=32; end
						if (paso<35 and enemigo.estado==100)
							enemigo.z=z+1;
							if (flags) enemigo.x=x-40;
							else enemigo.x=x+40; end
							if (enemigo.luchador==FIGHTER_ATHENA or 
								enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON or 
								enemigo.luchador==FIGHTER_KASUMI)
								enemigo.graph=410;
							else
								enemigo.graph=411;
							end
						end
						if (enemigo.estado==100 or (enemigo.atravesar=1 and
							enemigo.estado==_recibir_fuertes_suelo))
							enemigo.atravesar=1;
							if (graph==340)
								if (flags) enemigo.x=x-36;
								else enemigo.x=x+36; end
							end
							if (graph==343)
								if (flags) enemigo.x=x-30;
								else enemigo.x=x+30; end
							end
							if (graph==344)
								enemigo.z=z-1;
								if (flags) enemigo.x=x-23;
								else enemigo.x=x+23; end
							end
							if (graph==345)
								if (flags) enemigo.x=x-3;
								else enemigo.x=x+3; end
								enemigo.graph=405; enemigo.paso=3;
							end
							if (graph==346)
								if (flags) enemigo.x=x+18;
								else enemigo.x=x-18; end
								enemigo.graph=404;
							end
							if (graph>346 and paso<57)
								if (x<35)  x+=6; end
								if (x>718) x-=6; end
								if (flags) enemigo.x+=6;
								else enemigo.x-=6; end
								enemigo.graph=402;
							end
							if (paso==61)
								play_voice(s_iori25,512,256);
								enemigo.estado=200;
								if (flags) enemigo.inc_x=+9;
								else enemigo.inc_x=-9; end
								paso++;
							end
						end
						graph=jugar[paso++];
						if (paso==83 or (paso==39 and enemigo.estado<>100))
							nuevo_estado=_normal;
							if (paso==sizeof(jugar)/DIV)
								enemigo.atravesar=0;
							end
						end
						if (paso==81)
							if (flags) flags=0; else flags=1; end
							shoryu+=-shoryu*2; hado+=-hado*2;
						end
					end
					if (intensidad<3)//lanza la magia
						graph=doshita[paso++];
						if (paso==sizeof(doshita)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==11 and get_real_point(1,&hit_x,&hit_y))
							pegata (hit_x,hit_y,509,c_scroll,flags,100,z-5,31,file);
						end
						if ((paso==1 or paso==5 or paso==9) and
							intensidad==1) paso++;
						end
						if ((paso==21 or paso==25 or paso==29) and
							intensidad==2) paso++;
						end
						if (paso==13)
							inc_x=4*intensidad; play_snd (s_flame4,512,256); ive_hit--;
							if (flags) magia=hadoken(1,x-25,y,id);//crea la magia
							else magia=hadoken(1,x+25,y,id); end
							play_voice(s_iori14,512,256);
						end
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)//pawaueib
					graph=arenfri[paso++];
					if (paso==sizeof(arenfri)/DIV)
						he_dado=1; hado=0; nuevo_estado=_normal;
					end
					if (paso==1) y=220; end
					if (paso==7)
						play_voice(s_terry13,512,256);
					end
					if (paso==13)
						get_real_point(1,&hit_x,&hit_y);
						if (intensidad==1) inc_x=4;  end
						if (intensidad==2) inc_x=6; end
						magia=hadoken(0,hit_x,y,id);//crea la magia
						play_snd (s_terry25,512,256); ive_hit--;
					end
				end
				if (luchador==FIGHTER_CRIMSON)//CRIMSON USTED
					if (intensidad==3)//coje al enemigo
						if (paso==0)//condiciones para voltear
							if ((enemigo.estado<23 or (enemigo.estado>29 and
								enemigo.estado<36) or enemigo.estado==_pajaritos or
								(enemigo.estado==_guardiaalta and enemigo.paso<5) or
								(enemigo.estado==_guardiabaja and enemigo.paso<5) or
								(enemigo.estado>47 and enemigo.estado<57)) and
								abs(enemigo.x-x)<60 and enemigo.voltear==0 and
								enemigo.y==220) he_dado=0;
							end
						end
						if (paso==7 and he_dado==1) paso=73; end
						if (paso==73 and he_dado==0) paso=95; end
						if (paso==1 and he_dado==0)
							enemigo.atravesar=0; enemigo.z=z-1;
							if (flags)
								enemigo.flags=0;hit_stars(11,x-50,y-80);enemigo.x=x-40;
							else
								enemigo.flags=1;hit_stars(11,x+50,y-80);enemigo.x=x+40;
							end
						end
						if (paso>0 and paso<53 and he_dado==0)
							enemigo.z=z-1; 
							enemigo.nuevo_estado=100;
							enemigo.estado=100; 
							enemigo.graph=407;
							if (enemigo.luchador==FIGHTER_ATHENA) enemigo.graph=410; end
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94) enemigo.graph=411; end
							if (flags) enemigo.x=x-45;
							else enemigo.x=x+45; end
						end
						if (paso==53 and he_dado==0) 
							enemigo.intensidad=0;
							enemigo.estado=_recibir_toss; 
							enemigo.blend_fx=2;
							tembleque(2,1); pantallazo(0); 
							play_snd (s_boom,512,256);
							if (game_mode==MODE_TRAINING and enemigo.hit_combo==0)
								if (enemigo==id_luchador1 and rojo==0)
									enemigo.vida=MAX_LIFE; id_alive1.x=89;
								end
								if (enemigo==id_luchador1 and rojo==1)
									enemigo.vida=DANGER_LIFE-1; id_alive1.x=184;
								end
								if (enemigo==id_luchador2 and (cputype<>3 or
									(cputype==3 and rojo==0)))
									enemigo.vida=MAX_LIFE; id_alive2.x=231;
								end
								if (enemigo==id_luchador2 and cputype==3 and rojo==1)
									enemigo.vida=DANGER_LIFE-1; id_alive2.x=136;
								end
							end
							
							enemigo.vida-=get_real_damage(20);	
							enemigo.paso=0; enemigo.hit_combo++;
							enemigo.vulnerable=0;
							if (enemigo==id_luchador1)
								if (enemigo.hit_combo==2) combos(id_luchador1,1); end
								if (enemigo.hit_combo==10)combos(id_luchador1,2); end
							end
							if (enemigo==id_luchador2)
								if (enemigo.hit_combo==2) combos(id_luchador2,1); end
								if (enemigo.hit_combo==10)combos(id_luchador2,2); end
							end
							if (enemigo.vida<=0)
								if (parpadeo_final==0 and game_mode!=MODE_TRAINING)
									pantallazo(10); parpadeo_final=1; ralenti(1);
								end
								enemigo.vida=0;
							end
							play_voice(s_iori25,512,256);
						end
						if (paso==63 and he_dado==0)
							if (flags) enemigo.inc_x=-8;
							else enemigo.inc_x=8; end
						end
						graph=usted_crimson[paso++];
						if (paso==sizeof(usted_crimson)/DIV)
							nuevo_estado=_normal;
						end
					end
					if (intensidad==1 or intensidad==2)
						estatico=1;
						graph=doshita_cr[paso++];
						if (paso==sizeof(doshita_cr)/DIV)
							nuevo_estado=_normal;
						end
						if (intensidad==1)
							if (paso==1) paso=7; end
						else
							if (paso==27 or paso==33 or paso==37) paso++; end
						end
						if (paso==13 and get_real_point(1,&hit_x,&hit_y))
							pegata (hit_x,hit_y,509,c_scroll,flags,100,z-5,31,file);
						end
						if (paso==13)
							ive_hit--;
							play_voice(s_iori25,512,256);
							if (flags) orlas (x-36,215,z-5,1,13,-1,id);
							else orlas (x+36,215,z-5,0,13,-1,id); end
						end
					end
				end
				if (luchador==FIGHTER_KYO94 and intensidad<>-11)//druee!!!
					graph=kurae[paso++];
					if (paso==1) //paso=4-intensidad; 
						if (intensidad==1) paso=8; end
						if (intensidad==2) paso=2; end
					end
					if (paso==sizeof(kurae)/DIV)
						he_dado=1; hado=0; nuevo_estado=_normal;
					end
					if (paso==16)
						if (intensidad==1) inc_x=4; end
						if (intensidad==2) inc_x=8; end
						play_snd (s_flame4,512,256); ive_hit--;
						if (flags) hit_x=x-40; else hit_x=x+40; end
						magia=hadoken(3,hit_x,y,id);//crea la magia
					end
					if (paso==14)
						play_voice(s_kyo15,512,256);
						if (flags)
							pegata (x,y-105,0,c_scroll,flags,100,z-1,41,file);
						else
							pegata (x,y-105,0,c_scroll,flags,100,z-1,41,file);
						end
					end
				end
				if (luchador==FIGHTER_KASUMI)
					if ((y=>220 and paso==39) or (y<220 and paso==7))
						play_voice(s_kasumi11,512,256);
					end
					if (y=>220) y=220;
						graph=mvkasumi1[paso++];
						if (paso==sizeof(mvkasumi1)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1) paso=5; end
						if (paso==7 and intensidad==1) paso=11; end
						if (paso>12 and paso<31)
							if (power==74 and (control(l_punch) or control(s_punch)))
							else paso=39; end
						end
						if (paso==41)
							if (flags) hit_x=x-56; else hit_x=x+56; end
							orlas (hit_x,195,z-2,flags,30,0,id);
						end
					end
					if (y<220)
						graph=mvkasumi8[paso++];
						if (paso==1 and intensidad==1) paso++; end
						if (paso==sizeof(mvkasumi8)/DIV) 
							bSuperJump = false;
							nuevo_estado=_saltar;
							nuevo_paso=11; 
							inc_x=0; inc_y=0;
						end
						if (paso==9)
							if (flags) hit_x=x-36; else hit_x=x+36; end
							orlas (hit_x,y-50,z-2,flags,30,-1,id);
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=kohken[paso++];
					if (paso==sizeof(kohken)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==1)
						play_voice(s_takuma9,512,256);
					end
					if (intensidad==1) inc_x=5; end
					if (intensidad==2) inc_x=8; end
					if (paso==11)
						if (flags) x-=10; else x+=10; end
						get_real_point(1,&hit_x,&hit_y);
						magia=hadoken(10,hit_x,hit_y,id);
					end
					if (paso==35 or paso==41)
						if (flags) x+=5; else x-=5; end
					end
				end
				if (luchador==FIGHTER_K)
					if (intensidad<3)
						graph=fogata[paso++];
						if (paso==sizeof(fogata)/DIV)
							nuevo_estado=_normal;
						end
						if ((paso==3 or paso==7) and intensidad==1) paso++; end
						if (paso==13) voz=1;
							get_real_point(1,&hit_x,&hit_y);
							pegata (hit_x,hit_y,506,c_scroll,flags,100,-3,29,file);
							if (flags) hit_x=x-60; else hit_x=x+60; end
							orlas (hit_x,hit_y,-3,flags,15,1,id);
						end
						if (paso>24 and paso<33)
							if (control(avanzar) and not control(retroceder))
								if (control(l_kick)) paso=0; intensidad=3; end
								if (control(s_kick)) paso=0; intensidad=4; end
							end
							if (not control(avanzar) and control(retroceder))
								if (control(l_kick) or control(s_kick))
									nuevo_estado=_u_kick; intensidad=1; voz=10;
								end
							end
						end
					end
					if (intensidad==3)
						graph=strike_k[paso++];
						if (paso==sizeof(strike_k)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==5)
							play_voice(s_k21,412,256);
						end
						if (paso<11)
							if (flags) x-=2; else x+=2; end
						end
						if (paso==11)
							play_snd (s_airk,300,256);
							inc_x=8; ive_hit--;
							get_real_point(1,&hit_x,&hit_y);
							hadoken(14,hit_x,hit_y,id);
						end
					end
					if (intensidad==4)
						graph=toss_k[paso++];
						if (paso==sizeof(toss_k)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==4 or paso==7)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==39 or paso==44)
							if (flags) x+=10; else x-=10; end
						end
						if (paso==5)
							play_voice(s_k20,412,256);
						end
						if (paso==15)
							play_snd (s_airk,300,256);
							play_snd (s_flame2,350,256);
							if (get_real_point(1,&hit_x,&hit_y))
								golpe(hit_x,enemigo.y-50,10,26,503,8,1,8,10,id);
							end
							if (flags) hit_x=x-32; else hit_x=x+32; end
							pegata (hit_x,72,162,c_scroll,flags,100,-3,105,fichad);
							ive_hit--;
						end
						if (paso==16)
							if (he_dado==0 and enemigo.estado==_recibir_toss)
								enemigo.inc_y=-10;
							end
						end
						if (power==74)
							/*if (paso==18 or paso==21 or paso==24)
								paso++;
							end*/
						end
				   end
				end
				if (luchador==FIGHTER_KULA)//te escupe a la cara
					graph=fuuu[paso++];
					if (paso==sizeof(fuuu)/DIV)
						nuevo_estado=_normal;
					end
					if (intensidad==1)
						if (paso==1) paso=15; end
						if (paso==19 or paso==23 or paso==49) paso++; end
					end
					if (intensidad==2 and paso==49) paso=56; end
					if (intensidad==2 and paso==57)
						nuevo_estado=_normal;
					end
					if (paso==17)
						if (intensidad==1) play_voice(s_kura24,412,256);
						else play_voice(s_kura25,412,256); end
					end
					if (paso==25)
						get_real_point(1,&hit_x,&hit_y);
						orlas (hit_x,hit_y,z-3,flags,32,1,id);
					end
				end
				if (luchador==FIGHTER_K9999)//pedillo
					graph=uala_tetsuo[paso++];
					if (paso==sizeof(uala_tetsuo)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==17 or paso==21 or paso==25 or
						(paso==29 and intensidad==2))
						if (paso==17) if (flags) hit_x=x-55; else hit_x=x+55; end end
						if (paso==21) if (flags) hit_x=x-68; else hit_x=x+68; end end
						if (paso==25) if (flags) hit_x=x-81; else hit_x=x+81; end end
						if (paso==29) if (flags) hit_x=x-94; else hit_x=x+94; end end
						orlas (hit_x,180,z-3,flags,37,0,id);
					end
					if (paso==17) play_snd (s_tetsuo3,452,256); end
					if (paso==5)
						play_voice(s_tetsuo13,412,256);
					end
					if (paso==39 and intensidad==1) paso+=4; graph=178; end
					if (paso==1 or paso==3 or paso==5)
						if (flags) x-=10; else x+=10; end
					end
					if (paso==37 or paso==43 or paso==49)
						if (flags) x+=10; else x-=10; end
					end
				end
			end
			
			case _shoryuken:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94)
					if (paso==0) estatico=1;
						if (flags) x-=7; else x+=7; end
					end
					graph=shoryu_kyo[paso++];
					if (paso==sizeof(shoryu_kyo)/DIV)
						shoryu=0; nuevo_estado=_normal;
						if (he_dado==0 and enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (intensidad==1)//flojo
						if (paso<12) inc_y=-6; end
						if (paso==22) paso++; end
					end
					if (intensidad==2)//fuerte
						if (paso<12) inc_y=-7; end
					end
					if (paso==6)//fostia con el codo
						play_snd (s_flame1,350,256);
						play_voice(s_kyo13,512,256);
						get_real_point(1,&Hit_x,&hit_y);
						golpe(hit_x,hit_y,14,26,603,3+intensidad,1,8,7,id);
					end
					if (paso==8 or ((paso==10 or paso==12) and power==74))
						hit_y=y-98; 
						if (flags) hit_x=x-42; else hit_x=x+42; end
						orlas (hit_x,hit_y,z-5,flags,intensidad-1,1,id);
						if (paso==8) he_dado=1; end
					end
					if (paso==14) vulnerable=1; END
					if (paso==16) ive_hit--; end
					if (paso>8 and paso<20 and graph>129)//incremento durante el salto
						if (flags) x-=2+(intensidad*2);
						else x+=2+(intensidad*2); end
					end
					if (paso>8 and paso<40) 
						if (game_frame%3==0) inc_y++; end 
						y+=inc_y; 
					end
					if (paso>16 and paso<40 and y=>220) y=220; inc_y=0; end//para la caida
					if (paso==38 and y<220) paso--; end//para la caida
					if (paso==40) play_snd (s_floor,350,256); end
					
					if (inc_y==5) tipo_ataque=VULN; end
				end
				
				if (luchador==FIGHTER_ATHENA) //psyco sword
					graph=psyco_sodo[paso++];
					if (paso==sizeof(psyco_sodo)/DIV)
						nuevo_estado=_normal;
						if (he_dado==0 and enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					get_real_point(1,&hit_x,&hit_y);
					if (paso==1)
						estatico=1; inc_y=-12-(intensidad*2);
						pegata (hit_x,hit_y,516,c_scroll,flags+16,100,z-2,26,file);
						play_voice(s_ath20,512,256);
					end
					if (paso==5) play_snd (s_ath6,512,256); end
					if (paso==9) vulnerable=1; end
					if (paso==11) ive_hit--; end
					if (paso==11 and inc_y<-12) paso--; end
					if (paso>8 and paso<36)
						y+=inc_y/2; inc_y++;
						if (graph==141)
							if (flags) x-=2; else x+=2; end
						end
					end
					if (intensidad==1)
						if (paso==34 and y<220) paso--; end
						if (y>220) paso=36; inc_y=0; y=220; end
					else
						if (paso==34 and y<200) paso--; end
						if (paso==34 and y>200) paso=36; inc_y=0; y=220; end
					end
					if (paso==36) play_snd (s_floor,350,256); y=220; end
					if (paso==7 or graph==141)
						if (paso==7)
							golpe(hit_x,y-35,10,14,521,5,1,8,7,id);
						else
							if ((paso<12 and he_dado==-1) or he_dado<>-1)
								golpe(hit_x,y-75,10,14,543,4,1,8,7,id);
							end
						end
					end
					if (inc_y==-15 and he_dado==0) enemigo.vulnerable-=1; end
					if (inc_y<-14 and he_dado==0 and enemigo.vida>0)
						enemigo.inc_x=0;
					end
					if (he_dado==0 and enemigo.paso==0) enemigo.y-=12; end
					if (inc_y==6) tipo_ataque=VULN; end
				end
				if (luchador==FIGHTER_IORI)//shoryuken Iori
					if (paso==0 or paso==1)
						estatico=1;
						if (flags) x-=15; else x+=15; end
					end
					graph=shoryu_iori[paso++];
					if (paso==sizeof(shoryu_iori)/DIV)
						nuevo_estado=_normal;
						if (he_dado==0 and enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (paso==1)//fostia con el codo
						if (intensidad==1) inc_y=-8; end
						if (intensidad==2) inc_y=-9; end
						damage = 10;
						
						play_snd (s_flame1,350,256);
						play_voice(s_iori13,512,256);
						if (get_real_point(1,&Hit_x,&hit_y))
							if (intensidad==1 and power<74)
								golpe(hit_x,hit_y,7,36,701,damage,1,8,8,id);
							else
								golpe(hit_x,hit_y,15,36,701,damage,1,8,8,id);
							end
						end
					end
					if (paso==4)
						if (he_dado==0) damage = 4; end
						he_dado=1;
					end
					if ((paso>3 and paso<15) and he_dado==1)
						golpe(hit_x,y-60,10,36,702,damage,1,8,8,id);
					end
					if (paso==18 and power==74)//si esta en pow la lia
						if (get_real_point(1,&Hit_x,&hit_y))
							golpe(hit_x,hit_y,7,36,501,4,1,8,8,id);
						end
					end
					
					if (paso>4 and paso<28) 
						if (game_frame%2==0) inc_y++; end
						y+=inc_y; 
					end
					if (paso==7) vulnerable=1; end
					if (paso==11) ive_hit--; end
					if (paso==3 or (paso==11 and power==74))
						if (get_real_point(1,&Hit_x,&hit_y))
							orlas (hit_x,hit_y,z-5,flags,(2+intensidad)-1,1,id);
						end
						if (paso==11 and power==74) he_dado=1; end
					end
					
					if (paso==17 and power==74)//si esta en pow la lia
						if (get_real_point(1,&Hit_x,&hit_y))
							if (flags) orlas (hit_x+30,hit_y+50,z+5,2,2,1,id);
							else orlas (hit_x-30,hit_y+50,z+5,3,2,1,id); end
						end
					end
					if (paso<11+intensidad and he_dado==0 and
						power==74 and enemigo.vida>0)
						enemigo.inc_x=0; 
						enemigo.inc_y-=(intensidad>>1);
					end
					if (paso==27 and y<220) paso--; end
					if (paso>11 and paso<28 and y=>220)
						y=220; inc_y=0; paso=27;
					end
					if (paso==29) play_snd (s_floor,350,256); end
					if (paso==35 and intensidad==2) paso++; end
					if (inc_y==6) tipo_ataque=VULN; end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)//kapunkapun
					if (paso==0)
						estatico=1; y=220;
						if (flags) x-=24; else x+=24; end
					end
					graph=spinning[paso++];
					if (paso==sizeof(spinning)/DIV)
						nuevo_estado=_agachar;
						if (he_dado==0 and enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (paso==1)
						if (intensidad==1) inc_y=-6; end
						if (intensidad==2) inc_y=-8; end
						play_snd (s_terry3,512,256);
						play_voice(s_terry14,512,256);
					end
					if (paso==5)
						get_real_point(1,&hit_x,&hit_y);
						if (enemigo.y<220 or (enemigo.estado>22 and
							enemigo.estado<30))
							golpe(hit_x,y-45,10,14,532,2+intensidad,1,3,8,id);
						else
							golpe(hit_x,y-45,4,14,532,2+intensidad,1,3,8,id);
						end
						vulnerable=1;
					end
					if (paso==9) ive_hit--; end
					if (intensidad==1 and paso==11) paso=16; end
					if (paso==7 or paso==9 or paso==13 or paso==15 or
						paso==19 or paso==21 or paso==25 or paso==27)
						if (get_real_point(1,&hit_x,&hit_y))
							golpe (hit_x,y-45,10,14,532,2,1,3,4,id);
						end
					end
					if (paso>6 and paso<33)
						if (intensidad==2)
							if (flags) x-=1; else x+=1; end
						end
					end
					if (paso>6 and paso<39)
					  
						if (game_frame%3==0) inc_y+=1; end 
						y+=inc_y;
						if (paso==37)
							if (y<220) paso--;
							else
								y=220; inc_y=0; play_snd (s_floor,350,256);
								graph=15; paso=39;
							end
						end
						if (paso<29 and he_dado==0 and enemigo.vida>0 and
							enemigo.estado==_recibir_toss)
							enemigo.vulnerable=1; enemigo.y-=2;
						end
					end
					if (inc_y==5) tipo_ataque=VULN; end
				end
				if (luchador==FIGHTER_CRIMSON)//shoryuken CRIMSON
					if (paso==0 or paso==1)
						estatico=1;
						if (flags) x-=15; else x+=15; end
					end
					graph=shoryu_iori[paso++];
					if (paso==sizeof(shoryu_iori)/DIV)
						nuevo_estado=_normal;
						if (enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (paso==1)//fostia con el codo
						play_snd (s_flame1,250,256);
						play_voice(s_iori13,512,256);
						if (get_real_point(1,&Hit_x,&hit_y))
							if (enemigo.y==220)//en el suelo le infla normal
								if (power==74)
									if (intensidad==1)
										golpe(hit_x,hit_y,7,26,701,9,1,12,8,id);
									else
										golpe(hit_x,hit_y,14,26,701,9,1,16,8,id);
									end
								else
									if (intensidad==1)
										golpe(hit_x,hit_y,7,26,701,6,1,10,8,id);
									else
										golpe(hit_x,hit_y,14,26,701,6,1,12,8,id);
									end
								end
							else//en el aire le hace caer
								golpe(hit_x,hit_y,7,26,701,6,1,10,7,id);
							end
						end
					end
					if (graph==182 and he_dado==0)
						get_real_point(1,&hit_x,&hit_y);
						if (enemigo.y==220) hit_y=160; end
						if (power==74)
							golpe(hit_x,hit_y+inc_y,7,26,703,6,1,12,8,id);
						else
							golpe(hit_x,hit_y+inc_y,7,26,703,6,1,10,8,id);
						end
					end
					if (graph==183 and he_dado==0)
						get_real_point(1,&hit_x,&hit_y);
						if (power==74)
							golpe(hit_x,hit_y+inc_y,7,26,703,6,1,12,8,id);
						else
							golpe(hit_x,hit_y+inc_y,7,26,703,6,1,10,8,id);
						end
					end
					if (graph==184 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						if (power==74)
							golpe(hit_x,hit_y+inc_y,7,26,706,6,1,12,8,id);
						else
							golpe(hit_x,hit_y+inc_y,7,26,706,6,1,10,8,id);
						end
					end
					if (graph==185 and he_dado==1)
						vulnerable=1; ive_hit--;
						get_real_point(1,&hit_x,&hit_y);
						if (power==74)
							golpe(hit_x,hit_y+inc_y,7,26,700,3,1,12,8,id);
						else
							golpe(hit_x,hit_y+inc_y,7,26,700,3,1,10,8,id);
						end
					end
					if (intensidad==1)//flojo
						if (paso==1) inc_y=-8; end
					end
					if (intensidad==2)//fuerte
						if (paso==1) inc_y=-10; end
					end
					if (paso>4 and paso<28)
						if (game_frame%2==0) inc_y++; end 
						y+=inc_y;
					end
					if (paso==3 and power==74)
						get_real_point(1,&Hit_x,&hit_y);
						pegata (hit_x,hit_y,503,c_scroll,flags,100,z-5,67,file);
					end
					if (paso==27 and y<220) paso--; end
					if (paso>12 and paso<29 and y=>220)
						y=220; inc_y=0; paso=28;
					end
					if (paso==28) play_snd (s_floor,350,256); end
					if (inc_y==6) tipo_ataque=VULN; end
				end
				if (luchador==FIGHTER_KASUMI)
					if (paso==0 or paso==3 or paso==19 or paso==25)
						if (flags) flags=0; else flags=1; end
					end
					if (paso==0) inc_y=-5; play_snd (s_sjump,512,256);
						if (flags) inc_x=intensidad*2;
						else inc_x=-intensidad*2; end
					end 
					
					x+=inc_x;
					if (paso==1) inc_y=-4;
						if (x>enemigo.x) flags=0; end
						if (x<enemigo.x) flags=1; end
					end
					if (paso==3) vulnerable=1; end
					if (paso>20)
						if (inc_x>0 and (game_frame%2==0)) inc_x-=intensidad; end
						if (inc_x<0 and (game_frame%2==0)) inc_x+=intensidad; end
					end
					if (paso<19) 
						y+=inc_y; 
						if (paso%2==0) inc_y++; end 
					end
					if (paso==19)  y=220;  end
					graph=mvkasumi5[paso++];
					if (paso==sizeof(mvkasumi5)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==27)
						if (enemigo.x>x and flags==1) flags=0; end
						if (enemigo.x<x and flags==0) flags=1; end
					end
					if (graph==95) he_dado=1; ive_hit--; end
					if (graph==104 or graph==96)
						get_real_point(1,&Hit_x,&hit_y);
						if (graph==104 and he_dado==1)
							golpe(hit_x,hit_y+inc_y,14,14,501,5+intensidad,1,10,8,id);
						end
						if (graph==96 and he_dado==1)
							golpe(hit_x,hit_y+inc_y,7,15,501,11+intensidad,1,10,10,id);
						end
					end
					if (paso==15)
						play_voice(s_kasumi19,512,256);
						play_snd (s_airt,512,256);
					end
					if (paso==31)
						play_voice(s_kasumi11,512,256);
						play_snd (s_airp,512,256);
					end
				end
				if (luchador==FIGHTER_TAKUMA) vulnerable=1;
					if (intensidad==1 or intensidad==2)
						graph=zanretsu[paso++];
						if (paso==sizeof(zanretsu)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1)
							play_voice(s_takuma10,512,256);
						end
						if (paso==7 or paso==19 or paso==31 or paso==43)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,11,507,-3,1,2,4,id);
						end
						if (paso==9 or  paso==13 or paso==15 or
							paso==21 or paso==25 or paso==27 or
							paso==33 or paso==37 or paso==39 or
							paso==45 or paso==49 or paso==51)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,11,507,-3,0,2,4,id);
						end
						if (paso==7 or paso==13 or paso==19 or paso==25 or
							paso==31 or paso==37 or paso==43 or paso==49)
							play_snd (s_airp,412,256); ive_hit--;
						end
						if (he_dado==0)
							if ((flags==1 and enemigo.x<x) or
								(flags==0 and enemigo.x>x))
								frame;
								if (flags) enemigo.x=x-55;
								else enemigo.x=x+55; end
								enemigo.y=220; intensidad+=4; paso=0;
								enemigo.estado=_recibir_fuertes_bozo;
								enemigo.paso=0;
							end
						end
					end
					if (intensidad==3 or intensidad==4)
						graph=shokohken[paso++];
						if (paso==sizeof(shokohken)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==9)
							play_voice(s_takuma13,512,256);
						end
						if (paso>28 and paso<97)
							if (control(l_punch) or control(s_punch))
							else paso=96; end
						end
						if (paso==9 or paso==13 or paso==17 or paso==21)
							if (flags) x+=15; else x-=15; end
						end
						if (paso==97)
							if (flags) x-=15; else x+=15; end
						end
						if (paso==99)
							if (abs(x-enemigo.x)>50 or
								enemigo.estado==_recibir_toss or
								(flags==0 and enemigo.x<x) or
								(flags==1 and enemigo.x>x))
								if (flags) x-=45; else x+=45; end
							end
						end
						if (paso==101)
							if (power==74)
								if (intensidad==3) inc_x=6; end
								if (intensidad==4) inc_x=10; end
							else
								if (intensidad==3) inc_x=5; end
								if (intensidad==4) inc_x=8; end
							end
							get_real_point(1,&hit_x,&hit_y);
							if (power==74) hadoken(12,hit_x,hit_y,id);
							else hadoken(11,hit_x,hit_y,id); end
						end
					end
					if (intensidad==5 or intensidad==6)
						graph=retsuken[paso++];
						if (paso==sizeof(retsuken)/DIV)
							nuevo_estado=_normal;
						end
						if (paso<41)
							if (paso==1 or paso==5 or paso==9 or paso==13 or
								paso==17 or paso==21 or paso==25 or paso==29 or
								paso==33 or paso==37)
								get_real_point(1,&hit_x,&hit_y);
								golpe(enemigo.x,hit_y,4,14,515,-1,1,2,0,id);
							else
								enemigo.graph=410; enemigo.paso=2;
							end
							enemigo.y=220-paso;
							if (enemigo.estado==_recibir_toss or
								enemigo.estado==_recibir_barridos_fuertes)
								enemigo.estado=_recibir_fuertes_suelo;
							end
						end
						if (paso<55)
							if (flags) enemigo.x=x-55;
							else enemigo.x=x+55; end
							if (paso>20) enemigo.y=200; end
						end
						if (paso==40) he_dado=1; end
						if (graph==75 and he_dado==1)
							get_real_point(1,&hit_x,&hit_y); enemigo.vulnerable=1;
							golpe(hit_x,hit_y,7,15,518,7,1,12,12,id);
						end
					end
				end
				if (luchador==FIGHTER_K)
					if (intensidad<3)
						graph=shoryu_k[paso++];
						if (paso==sizeof(shoryu_k)/DIV)
							nuevo_estado=_normal;
							if (enemigo.estado==_recibir_toss)
								enemigo.vulnerable=0;
							end
						end
						if (intensidad==1)
							if (paso==1 or paso==15 or paso==19 or paso==23 or
								paso==29 or paso==25)
								paso++;
							end
						end
						if (paso==3)
							play_snd (s_flame1,450,256);
							play_voice(s_k13,412,256);
						end
						if (paso==7) ive_hit--;
							get_real_point(1,&hit_x,&hit_y);
							pegata (hit_x,hit_y,506,c_scroll,flags,100,-3,29,file);
							pegata (hit_x,hit_y,542,c_scroll,flags,100,-3,106,file);
							if (intensidad==1) inc_x=0; inc_y=-4; end
							if (intensidad==2) inc_y=-7;
								if (flags) inc_x=-4; else inc_x=4; end
							end
						end
						if (paso==11)
							vulnerable=1;
							if (flags) x-=8; else x+=8; end
						end
						if (paso==13)
							get_real_point(1,&hit_x,&hit_y);
							pegata (hit_x,155,551,c_scroll,flags,100,-4,107,file);
						end
						if (intensidad==2)
							if (paso==15 or paso==23) he_dado=1; end
							if (paso>26 and paso<47 and control(avanzar) and
								(control(l_kick) or control(s_kick)))
								intensidad=3; paso=0;
							end
						end
						if ((paso==11 or graph==363 or graph==364) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							if (paso==11)
								golpe(hit_x,hit_y,10,26,502,18-(intensidad*2),1,8,7,id);
							end
							if (graph==363)
								golpe(hit_x,hit_y,14,26,502,5,1,8,7,id);
							end
							if (graph==364)
								golpe(hit_x,hit_y,14,26,555,5,1,8,6,id);
							end
						end
					end
					if (intensidad==3)
						graph=infacek[paso++];
						if (paso==sizeof(infacek)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==13)
							if (he_dado==0)
								enemigo.vulnerable=1; he_dado=1;
							end
							play_snd (s_flame2,350,256);
							play_snd (s_airk,300,256);
							if (flags) hit_x=x-24; else hit_x=x+24; end
							pegata (hit_x,y-100,162,c_scroll,
							flags,100,-3,105,fichad);
							ive_hit--;
						end
						if ((paso==13 or paso==15) and he_dado==1)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,7,26,422,5,0,7,7,id);
						end
						if (graph==157 and he_dado==1)
							get_real_point(1,&hit_x,&hit_y);
							if (enemigo.y==220)
								golpe(hit_x,hit_y,11,26,504,6,0,7,7,id);
							else
								if (enemigo.y<y) hit_y-=25; end
								golpe(hit_x,hit_y,7,26,504,6,0,7,7,id);
							end
						end
						if (enemigo.estado==_recibir_toss and
							paso>14 and he_dado==0)
							if (enemigo.paso<19)
								enemigo.paso=35; enemigo.inc_y=6;
								if (flags) enemigo.inc_x=-6;
								else enemigo.inc_x=6; end
							end
							if (enemigo.paso==39) tembleque(1,1);
								enemigo.inc_y=-10;
								if (flags) enemigo.inc_x=-4;
								else enemigo.inc_x=4; end
							end
						end
					end
					if (paso==47)
						play_snd (s_floor,512,256);
					end
					if ((paso>14 or intensidad==3) and paso<47)
						x+=inc_x; y+=inc_y; 
						if (paso%3==0) inc_y++; end
						if (paso==45) paso--; end
						if (y=>220) y=220; graph=54; paso=47; end
					end
					if (inc_y==5) tipo_ataque=VULN; end
				end
				if (luchador==FIGHTER_KULA)
					graph=shokura[paso++];
					if (paso==sizeof(shokura)/DIV)
						nuevo_estado=_normal;
						if (enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (paso==1) vulnerable=1; end
					if (paso<10 or (paso>14 and paso<43))
						if (flags) x-=4; else x+=4; end
					end
					if (paso==7) inc_y=-5-(intensidad*2); vulnerable=1; voz=2;
						pegata (x,y,628,c_scroll,flags+16,100,z-2,132,file);
					end
					if (paso==11) paso++; end
					if (paso>14 and paso<43)
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
						if (paso==41 and y<220) paso--; end
						if (y=>220) paso=43; graph=46; end
					end
					if ((paso==7 or paso==9 or graph==194) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (flags) hit_x-=6+paso; else hit_x+=6+paso; end
						golpe(hit_x,hit_y-25,10,60,526,6,1,8,7,id);
						if (ive_hit==0) ive_hit--; end
					end
					if (paso==15) he_dado=1; end
					if ((graph==195 or graph==196) and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (flags) hit_x-=(6+paso)/2; else hit_x+=(6+paso)/2; end
						golpe(hit_x,hit_y,10,60,526,8,1,8,7,id);
					end 
					if (paso==43)
						play_snd (s_floor,512,256);
					end 
					if (inc_y==5) tipo_ataque=VULN; end
				end
				
				//warero he dicho q me des las pastillas
				if (luchador==FIGHTER_K9999)
					graph=shou_tetsuo[paso++];
					if (paso==sizeof(shou_tetsuo)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==1 and intensidad==1) paso=7; end
					if (paso==15)
						play_snd (s_flame2,500,256);
						play_voice(s_tetsuo12,412,256);
						pegata (x,142,162,c_scroll,flags,100,-3,105,fichad);
					end
					if (paso==19 and intensidad==2) 
						he_dado=1; vulnerable=1;
					end
					if (paso>15 and paso<31 and he_dado==1)
						if (enemigo.y=>220) hit_y=175; else hit_y=140; end
						if (flags) hit_x=x-24; else hit_x=x+24; end
						golpe(hit_x,hit_y,10,26,501,9,1,8,0,id);
					end
					if (intensidad==2 and he_dado==0 and
						enemigo.paso==9 and enemigo.estado==_recibir_toss)
						enemigo.vulnerable=1; enemigo.inc_x=0;
						enemigo.inc_y=-12;
					end
				end
			end
			case _u_kick:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO)//nuevo golpe de moda
					if (he_dado==0 and intensidad<10 and
						enemigo.estado==_recibir_toss)
						if (enemigo.paso==7)
							enemigo.inc_y=-8; enemigo.vulnerable=1;
						end
						if (abs(enemigo.x-x)<50 and enemigo.paso<10)
							if (flags and enemigo.x<x) enemigo.x=x-50; end
							if (not flags and enemigo.x>x) enemigo.x=x+50; end
						end
					end
					if (intensidad==1 or intensidad==2)//primera patada
						if (paso==0)
							
							inc_y=-3-intensidad;
							if (flags) inc_x=-(1+intensidad); 
							else inc_x=1+intensidad; end
							
							if (power==74 and enemigo.y==220 and
								abs(enemigo.x-x)<80) 
								intensidad=0;
							end
						end
						graph=ngm[paso++];
						if (paso==sizeof(ngm)/DIV)
							nuevo_estado=_normal;
						end
						if (paso<37)
							x+=inc_x;
						end
						if (paso>14 and paso<35)
							y+=inc_y; 
							if (game_frame%3==0) inc_y++; end
							if (paso==34 and y<220) paso--; end
							if (y=>220) y=220; inc_y=0; paso=34; end
						end
						if (paso==13)
							play_snd (s_airk,400,256);
							play_voice(s_kyo19,412,256);
						end
						if (graph==310)//fostia que da gusto
							get_real_point(1,&hit_x,&hit_y);
                            golpe(hit_x,hit_y-10,10,14,509,2+intensidad,1,0,7,id);
							ive_hit--;
						end
						if (((control(l_kick) and lk_bloker==0) or
							(control(s_kick) and sk_bloker==0)) and
							(paso>19 and paso<34))
							if (control(l_kick))
								intensidad=10; paso=0; ive_hit=0;
							end
							if (control(s_kick))
								intensidad=20; paso=0; ive_hit=0;
							end
						end
						if (paso==34) play_snd (s_floor,350,256); end
					end
				   
					if (intensidad==10 or intensidad==20)//2 patada
						graph=ngm2[paso++];
						if (paso==sizeof(ngm2)/DIV)
							nuevo_estado=_normal;
						end
						y+=inc_y;//solo de y el inc_x lo uso para otra cosa
						if (y<220) 
							if (game_frame%3==0) inc_y++; end 
						end//si no esta en el suelo lo baja
						if (paso<27)//el movimiento de x durante el salto
							x+=inc_x;
						end
						if (paso==5)
							play_snd (s_airk,400,256);
							play_voice(s_kyo19,412,256);
						end
						if (graph==314)
							get_real_point(1,&Hit_x,&hit_y);
							if (enemigo.y=<y)
								golpe(hit_x,hit_y-10,10,14,509,2+intensidad/10,1,0,8,id);
							else
								golpe(hit_x,hit_y+30,10,14,509,2+intensidad/10,1,0,8,id);
							end
							ive_hit--;
						end
					  
						if (paso==27 and y<220) paso--; end
						if (y>220) y=220; inc_y=0; paso=27; end
						if (paso==28) play_snd (s_floor,350,256); end
					end
					if (intensidad==0)
						if (paso==0 or paso==4 or paso==24)
							if (flags) x-=5; else x+=5; end
						end
						graph=kore2[paso++];
						if (paso==sizeof(kore2)/DIV)
							nuevo_estado=_normal;
						end
						if (graph==190) graph=189; end
						if (paso==8)//llama1
							play_snd (s_flame1,350,256);
							if (flags)
								pegata (x-60,y-70,528,c_scroll,1,100,z-2,25,file);
								golpe(x-60,y-50,14,26,520,2,1,10,12,id);
							else
								pegata (x+60,y-70,528,c_scroll,0,100,z-2,25,file);
								golpe(x+60,y-50,14,26,520,2,1,10,12,id);
							end
							ive_hit--;
						end
						if ((control(l_kick) and lk_bloker==0) or
							(control(s_kick) and sk_bloker==0) and
							paso>9 and paso<23)//si das a la
							if (control(l_kick))  //y no es la tercera da
								intensidad=1; paso=4; ive_hit=0;//la segunda
							end
							if (control(s_kick))
								intensidad=2; paso=4; ive_hit=0;
							end
						end
					end
				end
				if (luchador==FIGHTER_ATHENA) //psykick teleport
					if (paso==0)
						play_voice(s_ath23,512,256);
						atravesar = 1;
						tipo_ataque=NULO;
					end
					graph=psyco_tere[paso++];
					if (paso==sizeof(psyco_tere)/DIV)
						atravesar = 0;
						if (y==220)
							nuevo_estado=_normal;
						else
							bSuperJump = false;
							nuevo_estado=_saltar; altura=1;
							inc_y=-1; nuevo_paso=22;
							if (flags==1) inc_x=-1;   end
							if (flags==0) inc_x=1;    end
							if (enemigo.x<x) flags=1; end
							if (enemigo.x>x) flags=0; end
						end
						if ((flags and x<enemigo.x) or
							(flags==0 and x>enemigo.x))
							shoryu=-shoryu; hado=-hado; shokoh=-shokoh;
						end
					end
					if (paso<19 and power==74)
						if (intensidad==1) paso=19; end
						if (intensidad==2) paso=23; end
					end
					if (paso==19 or (paso==23 and
						intensidad==2 and power==74))
						play_snd (s_ath4,512,256); ive_hit--;
						pegata (x,y,151,c_scroll,flags,100,z+1,34,file);
					end
					if (paso>19 and paso<47)
						if (flags) x-=11; else x+=11; end
					end
					if (paso==33 and intensidad==1) paso=47; end
					if (paso==45 or paso==47)
						if (y<220)
							atravesar = 1;
							nuevo_estado=_saltar; altura=1;
							inc_y=-1; nuevo_paso=22;
							if (flags==1) inc_x=-1;   end
							if (flags==0) inc_x=1;    end
							if (enemigo.x<x) flags=1; end
							if (enemigo.x>x) flags=0; end
							graph=31;
						end
					end
				end
				if (luchador==FIGHTER_TERRY)//power charge
					graph=power_charge[paso++];
					if (paso==sizeof(power_charge)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==1) y=220;
						if (flags) inc_x=-8;
						else inc_x=8; end
						play_voice(s_terry15,512,256);
					end
					if (paso>1 and paso<27)
						if (abs(x-enemigo.x)>45) x+=inc_x; end
						if (inc_x>0 and (game_frame%2==0)) inc_x--; end
						if (inc_x<0 and (game_frame%2==0)) inc_x++; end
					end
					if (paso==13) play_snd (s_airk,400,256);
						play_snd (s_dash,180,256);
						pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
					end
					if (paso>14 and paso<23 and he_dado==1)
						get_real_point(1,&Hit_x,&hit_y);
						if (enemigo.estado==_recibir_toss and enemigo.vulnerable>0)
						else golpe(hit_x,hit_y-10,10,15,522,4+intensidad,1,0,8,id);
						end//cosa rara donde las haya
						ive_hit--;
					end
					if (he_dado==0 and paso>14)
						if (enemigo.inc_x>0) enemigo.inc_x=2;  end
						if (enemigo.inc_x<0) enemigo.inc_x=-2; end
					end
					if (intensidad==1)
						if (paso==21 or paso==25) paso++; end
					end
				end
				if (luchador==FIGHTER_KASUMI)
					if (paso==0)
						play_voice(s_kasumi1,412,256);
					end
					if (intensidad==1)
						if (paso==0) guardia=6; play_snd (s_airp,512,256); end
						graph=counterb1[paso++];
						if (paso==sizeof(counterb1)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==23) guardia=0; end
					end
					if (intensidad==2)
						if (paso==0) guardia=7; play_snd (s_airp,512,256); end
						graph=countera1[paso++];
						if (paso==sizeof(countera1)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==23) guardia=0; end
					end
					if (intensidad>2 and paso==0)
						enemigo.nuevo_estado=100;
						enemigo.estado=100; 
						enemigo.z=z+1; 
						enemigo.y=220; enemigo.angle=0;
						if (enemigo.x<x) flags=1; else flags=0; end
						if (flags)
							enemigo.flags=0; enemigo.x=x-60;
						else
							enemigo.flags=1; enemigo.x=x+60;
						end
						if (enemigo.luchador==FIGHTER_ATHENA or 
							enemigo.luchador==FIGHTER_IORI or
							enemigo.luchador==FIGHTER_CRIMSON or 
							enemigo.luchador==FIGHTER_KASUMI)
							enemigo.graph=410;
						else
							enemigo.graph=411;
						end
					end
					if (intensidad==3)
						graph=counterb2[paso++];
						if (paso==sizeof(counterb2)/DIV)
							nuevo_estado=_normal; atravesar=0;
						end
						if (paso==5 or paso==25 or paso==31)
							if (flags) x-=12; else x+=12; end
						end
						if (paso==15)
							get_real_point(1,&hit_x,&hit_y);
							enemigo.estado=_recibir_fuertes_suelo;
							enemigo.paso=4;
							golpe(hit_x,hit_y,7,5,503,15,1,30,8,id);
						end
					end
					if (intensidad==4)
						graph=countera2[paso++];
						if (paso==sizeof(countera2)/DIV)
							paso--;
						end
						if (paso==25 or paso==29 or paso==31)
							if (flags) x+=10; else x-=10; end
						end
						if (paso==25 or paso==27)
							if (flags) enemigo.x=x-=20;
							else enemigo.x=x+20; end
							if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_KYO94 or
								enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
								enemigo.y=100;
							else
								enemigo.y=75;
							end
							enemigo.angle=180000; enemigo.graph=420;
						end
						if (paso==29)
							enemigo.x=x;
							if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_KYO94)
								camara_y=-2;
							else
								camara_y=-3;
							end
							enemigo.graph--;
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
								enemigo.y=80;
							end
						end
						if (paso==31)
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
								camara_y=-3;
							else
								if (flags)
									enemigo.x=x+=45;
									if (enemigo.x=>736) x=692; enemigo.x=736; end
								else
									enemigo.x=x-45;
									if (enemigo.x=<16) x=61; enemigo.x=16; end
								end
							end
							play_snd (s_sjump,512,210); 
							play_snd (s_sjump,480,210);
							enemigo.y=90; enemigo.inc_y=-6;
							
							damage = get_real_damage(15);							
							enemigo.vida-=damage;
							if (enemigo.file==fich1) damegi1=0; damegi1-=damage; end
							if (enemigo.file==fich2) damegi2=0; damegi2-=damage; end
							if (enemigo.vida<=0)
								enemigo.vida=0; 
								ralenti(1);
							end
							if (flags) enemigo.inc_x=4;
							else enemigo.inc_x=-4; end
							enemigo.graph=418;
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
								if (flags) enemigo.x=x+=20;
								else enemigo.x=x-20; end
							end
						end
						if (paso==35)
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
								if (flags) enemigo.x=x+=20;
								else enemigo.x=x-20; end
							end
							enemigo.graph=408; enemigo.y+=10;
						end
						if (paso==39)
							enemigo.graph=420; camara_y=0;
							enemigo.angle=0; enemigo.y=160;
							if (flags) enemigo.x+=30;
							else enemigo.x-=30; end
						end
						if (paso==43) enemigo.graph=419;
							if (enemigo.luchador<>FIGHTER_IORI and enemigo.luchador<>FIGHTER_CRIMSON)
								enemigo.y+=30;
							end
						end
						if (paso>32)
							enemigo.x+=enemigo.inc_x;
							enemigo.y+=enemigo.inc_y;
							if (game_frame%2==0) enemigo.inc_y++; end
							if (enemigo.y=>200) 
								enemigo.intensidad=0;
								enemigo.y=220; 
								enemigo.estado=_recibir_toss;
								enemigo.paso=31; 
								
								graph=13; 
								nuevo_estado=_normal;
								if (flags) flags=0; else flags=1; end
							end
						end
						if (paso==23)
							if (flags) camara_x+=7; else camara_x-=7; end
						end
						if (paso==24) camara_x=0; end
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=takumakc[paso++];
					if (paso==sizeof(takumakc)/DIV)
						nuevo_estado=_normal; carga1=0;
					end
					if (paso==1) if (flags) inc_x=-7; else inc_x=7; end
						play_voice(s_takuma11,512,256);
					end
					if (paso>12 and paso<53)
						if (abs(enemigo.x-x)<60 and enemigo.y==220)
							x+=inc_x/2;
						else
							x+=inc_x;
						end
						if (intensidad==1 and paso==28) paso=50; end
						if (intensidad==2 and paso==20) paso=24; end
						if (paso<49) y=210; 
						else
							if (paso==49) y=212; graph=93; end
							if (paso==50) y=215; graph=93; ive_hit=-1; end
						end
						if (graph==313 and he_dado==1)
							get_real_point(1,&hit_x,&hit_y);
							if (intensidad==1 or enemigo.y<220)
								golpe(hit_x,hit_y,10,15,512,8,1,10,9,id);
							else
								golpe(hit_x,hit_y,1,15,512,6,1,8,7,id);
							end
						end
						if (paso<30 and he_dado<>1 and intensidad==2)
							paso=30; he_dado=1;
						end
						if (graph==92 and he_dado==1)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,10,15,513,6,1,10,9,id);
						end
					end
					if (paso==53) y=220; end
				end
				if (luchador==FIGHTER_TERRY94)
					if (intensidad==1 or intensidad==2)
						graph=dashkick[paso++];
						if (paso==sizeof(dashkick)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1) y=220; end
						if (paso>6 and paso<35)
							if (flags) x-=3+intensidad;
							else x+=3+intensidad; end
						end
						if (paso==9) play_snd (s_dash,512,256); end
						if (paso==7 or paso==9 or paso==11)//levanta polvo
							pegata (x,220,132,c_scroll,flags,90,z-4,44,fichad);
						end
						if (paso==15 or paso==17 or paso==19)
							if (he_dado==0) ive_hit=-1; paso=23; graph=181; end
						end
						if (paso==21 and he_dado<>0) intensidad=3; paso=0; end
						if (paso==57 or paso==63)
							if (flags) x-=8; else x+=8; end
						end
						if (graph==179)
							if (flags) inc_x=-7-(intensidad*2);
							else inc_x=+7+(intensidad*2); end
							play_voice(s_terry4,512,256);
						end
						if (graph==180 and he_dado==1)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,16,14,510,5,1,10,7,id);
						end
						if (paso==33) play_snd (s_airk,400,256);
							if (flags) inc_x=-7-(intensidad*2);
							else inc_x=+7+(intensidad*2); end
							play_voice(s_terry24,512,256);
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,10,15,523,2+intensidad*4,1,10,7,id);
						end
					end
					if (intensidad==3)
						graph=dashmis[paso++];
						if (paso==sizeof(dashmis)/DIV)
							nuevo_estado=_normal;
						end
					end
				end
				if (luchador==FIGHTER_K)
					graph=fantasma[paso++];
					if (paso==sizeof(fantasma)/DIV)
						nuevo_estado=_normal;
						if ((flags and x<enemigo.x) or
							(flags==0 and x>enemigo.x))
							shoryu=-shoryu; hado=-hado; shokoh=-shokoh;
						end
					end
					if (intensidad==1 and paso==13) paso=22; end
					
					if (paso==1) inc_x=0;
						if (power==74)
							pegata (x,y,graph,c_scroll,flags,100,z,108,file);
						end
						if (is_playing_voice(id))
							play_voice(s_k19,412,256);
						else
							play_voice(s_k11,412,256);
						end
						play_snd (s_k23,512,256);
					end
					if (paso>2 and paso<33)
						if (power==74) graph=0; end
						if (paso<6) inc_x+=((paso+1)/1); end
						if (paso>23) inc_x-=2; end
						if (flags) x-=inc_x; else x+=inc_x; end
						if (paso>4 and paso<31 and power<74)
							prota_shadow(x,y,0);
						end
					end
				end
				if (luchador==FIGHTER_K9999)//HE DICHO Q ME DES LAS PASTILLASSSSS
					if (paso==0) intensidad=0; end
					graph=proj_tetsuo[paso++];
					if (paso==sizeof(proj_tetsuo)/DIV)
						nuevo_estado=_normal;
						if (he_dado==0 and enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (paso>12 and paso<75 and intensidad<2)
						if (hado==10 and (control(l_kick) or
							control(s_kick))) he_dado=0;
						end
					end
					if (paso>52 and he_dado==0)
						he_dado=1; paso=17; intensidad++;
					end
					if (paso==21)
						get_real_point(1,&hit_x,&hit_y); hit_stars(9,x,220);
						pegata (hit_x,hit_y-2,521,c_scroll,flags,100,z-2,139,file);
					end
					if (enemigo.paso==0 and intensidad==2 and
						enemigo.estado==_recibir_toss)
						enemigo.blend_fx=2; enemigo.blend_frame=0;
						pegata (enemigo.x+rand(-32,0),hit_y+rand(-5,5),
						172,c_scroll,flags,rand(90,125),-5,112,fichad);
						pegata (enemigo.x+rand(0,32),hit_y+rand(0,25),
						172,c_scroll,flags,rand(90,125),-5,112,fichad);
						pegata (enemigo.x+rand(12,45),hit_y+rand(-25,0),
						172,c_scroll,flags,rand(90,125),-5,112,fichad);
					end
					if (paso==29 and intensidad<2) paso=41; end
				end
			end
			case _uatras_punch:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_ATHENA)
					graph=psyco_boru[paso++];
					if (paso==sizeof(psyco_boru)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==1)
						play_voice(s_ath19,512,256);
					end
					if (graph==134)
						if (power==74)
							if (intensidad==1) inc_x=3; else inc_x=9; end
						else
							inc_x=3*intensidad;
						end
						get_real_point(1,&hit_x,&hit_y);
						magia=hadoken(2,hit_x,hit_y,id);//crea la magia
						play_snd (s_ath5,512,256);ive_hit--;
					end
				end
				if (luchador==FIGHTER_IORI or (luchador==FIGHTER_CRIMSON and intensidad==-21))
					if (intensidad==1 or intensidad==2)//1 u atras
						if (paso==0)
							if (intensidad==1)
								if (flags) inc_x=-8; else inc_x=8; end
							else
								if (flags) inc_x=-10; else inc_x=10; end
								intensidad=2;
							end
						end
						x+=inc_x;
						graph=aoibana[paso++];
						if (paso==sizeof(aoibana)/DIV)
							nuevo_estado=_normal;
							if (he_dado==0 and enemigo.estado==_recibir_toss)
								enemigo.vulnerable=0;
							end
						end
						if ((paso==1 or paso==27) and intensidad==1) paso++; end
						if (paso==7)
							play_snd (s_airp,300,256);
							play_voice(s_iori15,512,256);
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,15,12,713,3+intensidad,1,8,8,id);
							ive_hit++;
						end
						if (inc_x<>0) //baja el incremento hasta 0
							if (flags) inc_x++; else inc_x--; end
						end
					end
					if (intensidad==11 or intensidad==12)//2 u atras
						if (paso==0)
							if (intensidad==11)
								if (flags) inc_x=-8; else inc_x=8; end
							else
								if (flags) inc_x=-10; else inc_x=10; end
							end
						end
						x+=inc_x;
						graph=aoibana2[paso++];
						if (paso==sizeof(aoibana2)/DIV)
							nuevo_estado=_normal; y=220;
						end
						if (paso==5)
							play_snd (s_airp,300,256); ive_hit++;
							play_voice(s_iori16,512,256);
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,10,12,713,3+intensidad-10,1,8,8,id);
						end
						if (paso==9 and he_dado==0) enemigo.inc_y=-7; end
						if (inc_x<>0)
							if (flags) inc_x++; else inc_x--; end
						end
					end
					if (intensidad==21 or intensidad==22 or intensidad==-21)
						tipo_ataque=ALTO;
						if (paso==0)
							play_snd (s_sjump,512,256); inc_y=-8;
							if (flags) inc_x=-6; else inc_x=+6; end
						end
						graph=aoibana3[paso++];
						if (paso==sizeof(aoibana3)/DIV)
							nuevo_estado=_normal; y=220;
						end
						if (paso<16)//activa los incrementos
							y+=inc_y; inc_y++;
							if (((flags and enemigo.x<x)or
								(flags==0 and enemigo.x>x)) and
								(abs(enemigo.x-x)<56) and
								enemigo.y==220)
								x+=inc_x/2;
							else
								x+=inc_x;
							end
							if (paso==14 and y<220) paso--; end
							if (paso==14 and y>220) y=220; paso=15; end
						end
						if (paso==9)
							play_snd (s_airk,400,256);
							play_voice(s_iori17,512,256);
						end
						if (graph==323 and he_dado==1)//fostia
							get_real_point(1,&hit_x,&hit_y);
							if (enemigo.y<220) hit_y=120; end
							if (intensidad>0)
								golpe(hit_x,hit_y,11,15,704,10,1,12,12,id);
							else
								golpe(hit_x,hit_y,11,5,704,15,0,12,12,id);
							end
							ive_hit--;
						end
						if (enemigo.paso==7 and he_dado==0 and
							enemigo.estado!=_recibir_colleja)//si ha fostiado...
							enemigo.estado=_recibir_toss;
							enemigo.intensidad=0;
							enemigo.paso=31;
							enemigo.inc_y=6;
							if (flags) inc_x=-7; else inc_x=7; end
							he_dado=2;
						end
						if (he_dado==2 and enemigo.paso==39)
							tembleque(2,1);
						end	
					end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
					graph=burn_knu[paso++];
					if (paso==sizeof(burn_knu)/DIV)
						nuevo_estado=_normal;
						if (he_dado==0 and enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (paso==1) y=220;
						play_snd (s_terry1,512,256); ive_hit--;
						play_voice(s_terry11,512,256);
					end
					if (paso==6)
						inc_y=-1-(intensidad*2);
						pegata (x,y,0,c_scroll,flags,100,z-2,32,file);
					end
					if (paso==14 and intensidad==1)
						play_voice(s_terry12,512,256);
					end
					if (paso==20 and intensidad==2)
						play_voice(s_terry12,512,256);
					end
					if (power==74 and (paso==10 or paso==14 or
						paso==18 or paso==22 or paso==26)) graph=133;
					end
					if (paso>11 and paso<29)
						if (game_frame%2==0) inc_y++; end 
						y+=inc_y;
						if (abs(x-enemigo.x)>60 or enemigo.estado==_recibir_toss or
							(flags==0 and enemigo.x<x) or (flags==1 and enemigo.x>x) or 
							enemigo.atravesar==1)
							if (flags) inc_x=-7; else inc_x=7; end
							x+=inc_x;
						end
						if ((paso==14 or paso==18 or paso==22 or paso==26) and
							intensidad==1)
							paso++;
						end
						if (get_real_point(1,&hit_x,&hit_y) and he_dado==1)
							if (enemigo.hit_combo>0)
								golpe(hit_x,hit_y,7,12,510,12,1,10,9,id);
							else
								if (power==74)
									golpe(hit_x,hit_y,-7,12,510,18,2,15,11,id);
								else
									golpe(hit_x,hit_y,7,12,510,15,1,12,10,id);
								end
							end
						end
					end
					if (paso==28) 
						if (y => 220)
							y = 220;
							play_snd (s_dash,400,256);
							pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
						else
							paso--;
						end    
					end
					if (paso>27)
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
						x+=inc_x;
					end
				end
				if (luchador==FIGHTER_CRIMSON and intensidad<>-21)//cr.
					if (intensidad==2)
						estatico=1; graph=fogata1[paso++];
						if (paso==sizeof(fogata1)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==9)
							get_real_point(1,&hit_x,&hit_y); ive_hit++;
							golpe(hit_x,hit_y,14,26,702,7,1,10,8,id);
							if (flags)
								pegata (x-20,y-25,graph,c_scroll,0,100,z-1,52,file);
							else
								pegata (x+20,y-25,graph,c_scroll,1,100,z-1,52,file);
							end
							play_snd (s_flame1,350,256);
							play_voice(s_iori15,512,256);
						end
						if (paso>9)
							if (he_dado<>1 and enemigo.y==220 and enemigo.vida>0)
								enemigo.inc_x=0;
							end
						end
					end
					if (intensidad==6)
						estatico=0; graph=fogata2[paso++];
						if (paso==sizeof(fogata2)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1 or paso==5 or paso==9 or paso==13)
							if (flags) x-=5; else x+=5; end
						end
						if (paso==9) ive_hit++;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,15,26,702,5,1,12,8,id);
							if (flags)
								pegata (x-55,y-65,graph,c_scroll,flags,100,z-1,52,file);
							else
								pegata (x+55,y-65,graph,c_scroll,flags,100,z-1,52,file);
							end
							play_snd (s_flame1,350,256);
							play_voice(s_iori16,512,256);
						end
					end
					if (intensidad==1)
						if (paso==0) vulnerable=10; end
						graph=aoi_crimson[paso++];
						if (paso==sizeof(aoi_crimson)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1)
							if (flags) inc_x=-6; else inc_x=6; end
						end
						if (paso==5) vulnerable=0; end
						if (paso<19) x+=inc_x;
							if (inc_x!=0 and (paso%2==0))
								if (flags) inc_x++;
								else inc_x--; end
							end
						end
						if (paso==9)
							play_snd (s_flame1,350,256); ive_hit--;
							play_voice(s_iori17,512,256);
							if (flags) orlas (x-45,y-68,z-1,3,17,1,id);
							else orlas (x+45,y-68,z-1,2,17,1,id); end
						end
						if (he_dado==0 and paso>9)
							if (enemigo.inc_x>0) enemigo.inc_x=2;  end
							if (enemigo.inc_x<0) enemigo.inc_x=-2; end
						end
					end
				end
				if (luchador==FIGHTER_KASUMI)
					if (paso==0)
						if ((enemigo.estado<23 or (enemigo.estado>29 and
							enemigo.estado<36) or enemigo.estado==_pajaritos or
							(enemigo.estado==_guardiaalta and enemigo.paso<5) or
							(enemigo.estado==_guardiabaja and enemigo.paso<5) or
							(enemigo.estado>47 and enemigo.estado<57)) and
							abs(enemigo.x-x)<48 and enemigo.voltear==0 and
							enemigo.y==220) 
							if (((enemigo.x<x and flags==1) or
								(enemigo.x>x and flags==0)))
								enemigo.estado=200;
								intensidad=7;
							end
						end
					end
					if (intensidad==1 or intensidad==2)
						graph=mvkasumi2[paso++];
						if (paso==sizeof(mvkasumi2)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1 or paso==19)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==5 or paso==7 or paso==9 or paso==15 or paso==19)
							if (flags) x-=12; else x+=12; end
						end
						if (paso==9)
							play_voice(s_kasumi2,512,256);
						end
						if (paso==11 or paso==23)
							play_snd (s_airp,320,256); ive_hit=1;
							get_real_point(1,&hit_x,&hit_y);
							if (paso==23)
								if (flags) hit_x-=12; else hit_x+=12; end
							end
							golpe(hit_x,hit_y,1,12,502,5,1,5,8,id);
						end
						if (paso>23 and move_ok==0)
							intensidad+=2; paso=0; ive_hit=0;
						end
					end
					if (intensidad==3 or intensidad==4)
						graph=mvkasumi3[paso++];
						if (paso==sizeof(mvkasumi3)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1 or paso==3 or paso==5 or paso==9)
							if (flags) x-=14; else x+=14; end
						end
						if (paso==21 or paso==27 or paso==33 or paso==39)
							if (flags) x+=14; else x-=14; end
						end
						if (paso==11)
							play_snd (s_airp,320,256); ive_hit++;
							if (flags) hit_x=x-36; else hit_x=x+36; end
							golpe(hit_x,180,5,12,501,5,1,5,8,id);
						end
					end
					if (intensidad==5 or intensidad==6)
						graph=skick1_kasu[paso++];
						if (paso==sizeof(skick1_kasu)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1 or paso==13 or paso==19 or paso==31)
							if (flags) x-=12; else x+=12; end
						end
						if (graph==44 and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,7,15,501,7,1,30,12,id);
						end
						if (graph==44 and ive_hit==0)
							ive_hit--; play_snd (s_airt,320,256);
						end
						if (he_dado==0 and enemigo.paso==6)
							enemigo.inc_y=-8;
							if (enemigo.inc_x<0) enemigo.inc_x-=3;
							else enemigo.inc_x+=3; end
						end
					end
					
					if (intensidad==7)
						graph=mvkasumi7[paso++];
						if (paso==sizeof(mvkasumi7)/DIV)
							nuevo_estado=_normal;
							enemigo.vulnerable=1;
						end
						if (paso==3 or paso==13 or paso==27 or paso==35)
							ive_hit=-1; get_real_point(1,&hit_x,&hit_y);
							if (paso==3 or paso==13)
								golpe(hit_x,hit_y,1,12,502,3,1,5,8,id);
								if (paso==3)
									play_voice(s_kasumi14,512,256);
								end
								if (paso==13)
									play_voice(s_kasumi15,512,256);
								end
								play_snd (s_airp,320,256);
							end
							if (paso==27)
								golpe(hit_x,hit_y,4,14,503,3,1,5,8,id);
								play_snd (s_airt,320,256);
							end
							if (paso==35)
								golpe(hit_x,hit_y,10,15,502,5,1,5,8,id);
								play_voice(s_kasumi16,512,256);
								play_snd (s_airp,320,256);
							end
						end
						if (paso==7)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==9 or paso==11 or paso==13)
							if (flags) x-=12; else x+=12; end
						end
						if (paso>4 and paso<49 and he_dado==0)
							if (flags) enemigo.x=x-40;
							else enemigo.x=x+40; end
						end
						if (he_dado==0 and enemigo.estado==_recibir_toss and
							enemigo.paso==11)
							enemigo.inc_y-=3; enemigo.inc_x/=2;
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					if (intensidad==1 or intensidad==2)
						graph=megitta[paso++];
						if (paso==sizeof(megitta)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1)  guardia=3; end
						if (paso==3 and intensidad==1) paso=11; end
						if (paso==27) guardia=0;
							play_voice(s_takuma14,512,256);
						end
						if (paso==33)
							play_snd (s_airp,360,256);
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,-7,50,500,15*intensidad,intensidad,30,20,id);
						end
						if (paso==36 and he_dado==0) paso=0; intensidad=3; end
					end
					if (intensidad==3)
						graph=vacile[paso++];
						if (paso==sizeof(vacile)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==31)
							if (flags) x+=2; else x-=2; end
							play_voice(s_takuma15,512,256);
						end
					end
				end
				if (luchador==FIGHTER_KULA)
					if (intensidad<3)	
						graph=iranai[paso++];
						if (paso==sizeof(iranai)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==9 or paso==13 or paso==19)
							if (flags) x+=5; else x-=5; end
						end
						if (paso==11)
							play_snd (s_airk,512,256);
							play_voice(s_kura31,412,256);
						end
						if (paso==15 or paso==17 or paso==19 or
							paso==21 or paso==23)
							if (flags) hit_x=x-((32-paso)*2);
							else hit_x=x+((32-paso)*2); end
							pegata (hit_x,125+(paso*2),650,
							c_scroll,flags+16,100,z-2,134,file);
						end
						if (enemigo.magia and paso<40)
							if (abs(enemigo.magia.x-x)<80)
								enemigo.magia.vida=0; intensidad=3; paso=1;
							end
						end
						if (paso==41 or paso==47 or paso==59)
							if (flags) x-=5; else x+=5; end
						end
					end
					if (intensidad==3)
						graph=toss_kula[paso++];
						if (paso==sizeof(toss_kula)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso==3 or paso==7)
							if (flags) x-=12; else x+=12; end
						end
						if (paso==43 or paso==47)
							if (flags) x+=12; else x-=12; end
						end
						if (paso==13)
							play_snd (s_airk,300,256); ive_hit--; inc_x=16;
							if (flags) hit_x=x-48; else hit_x=x+48; end
							pegata (hit_x,160,645,c_scroll,flags,100,z-3,135,file);
							hadoken(7,hit_x,160,id); play_snd (s_kura3,412,256);
							play_voice(s_kura32,412,256);
						end
					end
				end
			end
			
			//u atras a la patada
			case _uatras_kick:
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO) //u atras de kyo(uuuurrryaaaa!!!!)
					if (paso==0) inc_y=0;
						play_voice(s_kyo10,512,256);
					end
					if (paso<33)
						if (intensidad==1)
							if (flags) inc_x=-4; else inc_x=4; end
						else
							if (flags) inc_x=-5; else inc_x=5; end
							intensidad=2;
						end
					end
					graph=urrya[paso++];
					if (paso==sizeof(urrya)/DIV or paso==38)
						nuevo_estado=_normal; magia=0;
					end
					if (paso==20) play_snd (s_run1,512,256); end
					if (paso==10 or paso==30) play_snd (s_run2,512,256); end
					if (paso==40) play_snd (s_dash,512,256); end
					if (paso>8) x+=inc_x; end //valida el incremento
					if (paso<49)
						if (power==74 and paso>9)//si esta en pow corre mas
							if (flags) x-=2; else x+=2; end
						end
						if (paso>35 and inc_x>0) inc_x--; end
						if (paso>35 and inc_x<0) inc_x++; end
					end
					if (intensidad==1 and paso==22) paso=32; end
					if (paso>9 and paso<37 and 
						abs(enemigo.x-x)<80 and enemigo.y>140) 
						paso=46;
					end
					if (paso==48) //golpea
						play_snd (s_airk,400,256); ive_hit--;
						play_voice(s_kyo12,512,256);
						if (flags) hit_x=x-40; else hit_x=x+40; end
						if (enemigo.y==220)
							golpe(hit_x,160,7,12,612,3+intensidad,1,0,7,id);
						else
							golpe(hit_x,145,7,12,612,3+intensidad,1,0,7,id);
						end
					end
					if (paso==50 and (he_dado<>0 or enemigo.y<161)) paso=125; end
					if (paso==120 and he_dado==0) paso+=8; end
					if (paso==50 and enemigo.y<200 and he_dado==0)
						enemigo.paso--;
					end
					if (paso==54)
						if (power==74) //si esta en pow hace
							magia=orlas (hit_x,145,z-5,flags,intensidad-1,0,id);
							magia.paso=3; play_snd (s_flame1,125,256);
						end
						paso=54;
					end
					if (paso>49 and paso<105)
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
					end
					if (paso>49 and paso<105 and he_dado==0)
						enemigo.flags=1-flags; 
						if (paso==60)
							if (enemigo.y>170) inc_y=2; end
						end
						if (paso==62 and inc_y>0) enemigo.y=190; paso=66; end
						if (paso==62 and inc_y<>2) paso=68; end
						if (paso==68 and inc_y==0) inc_y=3; end
						if (inc_y>0) enemigo.z=z+2; 
							enemigo.intensidad=0;
							enemigo.estado=_recibir_toss; 
							enemigo.paso=1;
							if (paso<69) enemigo.y=190; end
							if (paso>69) enemigo.y=170; end
						 
							if (enemigo.luchador==FIGHTER_TERRY or 
								enemigo.luchador==FIGHTER_TERRY94 or
								enemigo.luchador==FIGHTER_K)
								if (flags) enemigo.x=x-16;
								else enemigo.x=x+16; end
							elseif (enemigo.luchador==FIGHTER_K9999)
								if (flags) enemigo.x=x-48;
								else enemigo.x=x+48; end
							else
								if (flags) enemigo.x=x-32;
								else enemigo.x=x+32; end
							end
							enemigo.graph=407;
						end
						if ((paso==70 and inc_y==3) or paso==66)
							if (flags) hit_stars(11,x-45,enemigo.y-45);
							else hit_stars(11,x+45,enemigo.y-45); end
						end
					end
					if (paso==105 and he_dado==0)
						enemigo.paso=12; enemigo.inc_y=-12;
						enemigo.blend_fx=2; enemigo.blend_frame=0;
						enemigo.hit_combo++; pantallazo(0);
						play_voice(s_kyo11,512,256);
						if (enemigo==id_luchador1)
							if (enemigo.hit_combo==2) combos(id_luchador1,1); end
							if (enemigo.hit_combo==10)combos(id_luchador1,2); end
						end
						if (enemigo==id_luchador2)
							if (enemigo.hit_combo==2) combos(id_luchador2,1); end
							if (enemigo.hit_combo==10)combos(id_luchador2,2); end
						end
						
						if (power==74)
							damage = get_real_damage(12+(intensidad*2));
						else
							damage = get_real_damage(10+(intensidad*2));
						end
						enemigo.vida-=damage;
						
						if (enemigo.file==fich1)
							if (enemigo.hit_combo==1) damegi1=0; end
							damegi1-=damage;
						end
						if (enemigo.file==fich2)
							if (enemigo.hit_combo==1) damegi2=0; end
							damegi2-=damage;
						end
						if (flags)
							inc_x=8;
							pegata (x-32,95,540,c_scroll,flags,100,z-5,29,file);
						else
							inc_x=-8;
							pegata (x+32,95,540,c_scroll,flags,100,z-5,29,file);
						end
						tembleque(2,-1); play_snd (s_boom,512,256); enemigo.z=z;
					end
					if (paso>105 and inc_x<>0)//hecha a kyo atras
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
					end
					if (enemigo.vida<=0)
						if (parpadeo_final==0 and game_mode!=MODE_TRAINING)
							pantallazo(10); parpadeo_final=1; ralenti(1);
						end
						enemigo.vida=0;
					end
				end
				if (luchador==FIGHTER_ATHENA)//psyco reflector
					graph=psyco_rifu[paso++];
					if (paso==sizeof(psyco_rifu)/DIV)
						nuevo_estado=_normal;
						if (he_dado==0 and enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (paso<18)
						get_real_point(1,&hit_x,&hit_y);
					else
						hit_y=160;
						if (flags) hit_x=x-75; else hit_x=x+75; end
					end
					if (paso==1)
						if (intensidad==2) 
							inc_y=-4; 
							if (flags) inc_x=-4; else inc_x=4; end
						end 
						ive_hit--;
						orlas (hit_x,hit_y,z-4,flags,4+intensidad,0,id);
					end
					if (paso==18 or (paso==26 and power==74) or
						(paso==34 and power==74 and intensidad==2))
						pegata (hit_x,hit_y,541,c_scroll,flags,100,z-6,27,file);
					end
					if ((paso==18 and power<74) or (paso==26 and power==74))
						play_voice(s_ath21,512,256);
					end
					if (intensidad==1)
						if (paso==4 or paso==12) paso+=4; end
					else
						if (paso>12 and paso<16)
							y+=inc_y; if (game_frame%2==0) inc_y++; end
							if (enemigo.y!=220 or abs(x-enemigo.x)>60) x+=inc_x; end
						end
						if (paso==14 and y<220) paso--; end
						if (y>220) y=220; inc_y=0; end
					end
				end
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					if (paso<15)
						if (flags) inc_x=-6; else inc_x=6; end
					end
					graph=uuuoo[paso++];
					if (paso==sizeof(uuuoo)/DIV or paso==34)
						nuevo_estado=_normal; atravesar=0; magia=0;
					end
					if (paso>2) x+=inc_x; end //valida el incremento
					if (paso==11 or paso==23) play_snd (s_run1,512,256); end
					if (paso==5 or paso==17 or (paso==29 and intensidad<>1))
						play_snd (s_run2,512,256);
					end
					if (paso<46)
						if (power==74 and paso>2)//si esta en pow corre mas
							if (flags) x-=1; else x+=1; end
						end
						if (paso>30 and inc_x>0) inc_x--; end
						if (paso>30 and inc_x<0) inc_x++; end
					end
					if (intensidad==1 and paso==12) paso=14; end
					if (paso<34 and abs(enemigo.x-x)<90 and
						enemigo.y>140) paso=35; atravesar=1;
					end
					if (paso==38)
						play_snd (s_airk,400,256); ive_hit--;
						play_voice(s_iori18,512,256);
					end
					if (graph==328 and he_dado==1)//usted fostia
						get_real_point(1,&hit_x,&hit_y);
						if (abs(x-enemigo.x)>50)
							if (flags) hit_x=hit_x-15; else hit_x=hit_x+15; end
						end
						golpe(hit_x,hit_y,4,12,702,(3+intensidad),1,0,8,id);
					end
					if (graph>328 and he_dado==0 and enemigo.y>160)// and
						//(enemigo.vida>0 or game_mode==MODE_TRAINING))
						if (paso<69)
							enemigo.y=220; enemigo.inc_x=0; enemigo.inc_y=0;
						end
						if (paso==47) //aparece agarrado
							if (flags)
								enemigo.x=x-60; enemigo.flags=0;
								if (enemigo.x=<17) x=67; enemigo.x=17; end
							else
								enemigo.x=x+60; enemigo.flags=1;
								if (enemigo.x=>735) x=675; enemigo.x=735; end
							end
						end
						if (paso==49)
							enemigo.estado=_recibir_colleja; enemigo.paso=1;//usted le baja
							if (flags)
								enemigo.x=x-70;
								if (enemigo.x=<17) x=77; enemigo.x=17; end
							else
								enemigo.x=x+70;
								if (enemigo.x=>735) x=665; enemigo.x=735; end
							end
							if (power==74) //si esta en pow hace
								if (flags)  //lo que le rota
									magia=orlas (x-40,145,z-5,3,1+intensidad,0,id);
								else
									magia=orlas (x+40,145,z-5,2,1+intensidad,0,id);
								end
								magia.paso=6; play_snd (s_flame1,125,256);
							end
							tembleque(1,1); play_snd (s_fall,200,256);
						end
						if (graph==332)
							enemigo.paso=11;//y le empotra
							if (flags)
								enemigo.x=x-85;
								if (enemigo.x=<17) x=102; enemigo.x=17; end
							else
								enemigo.x=x+85;
								if (enemigo.x=>735) x=650; enemigo.x=735; end
							end
						end
						if (paso==53)
							if (flags)
								enemigo.x=x-100;
								if (enemigo.x=<17) x=117; enemigo.x=17; end
							else enemigo.x=x+100;
								if (enemigo.x=>735) x=635; enemigo.x=735; end
							end
							get_real_point(1,&hit_x,&hit_y);
							hit_stars(9,hit_x,hit_y);
						end
						if (paso==55 or paso==57) enemigo.paso=17; end
						if (paso==65)
							tembleque(2,1); play_snd (s_boom,512,256);
						end//temblor grande
						if (paso==69)
							enemigo.paso=15; enemigo.y=210;
							enemigo.inc_y=-5; enemigo.hit_combo++;
							if (enemigo==id_luchador1)
								if (enemigo.hit_combo==2) combos(id_luchador1,1); end
								if (enemigo.hit_combo==10)combos(id_luchador1,2); end
							end
							if (enemigo==id_luchador2)
								if (enemigo.hit_combo==2) combos(id_luchador2,1); end
								if (enemigo.hit_combo==10)combos(id_luchador2,2); end
							end
							if (luchador==FIGHTER_IORI)
								play_voice(s_iori19,512,256);
							end
							if (luchador==FIGHTER_CRIMSON)
								play_voice(s_iori25,512,256);
							end
							if (luchador==FIGHTER_IORI) enemigo.blend_fx=3; end
							if (luchador==FIGHTER_CRIMSON) enemigo.blend_fx=2; end
							enemigo.blend_frame=0;
							
							if (power==74)
								damage = get_real_damage (12+(intensidad*2));
							else
								damage = get_real_damage (10+(intensidad*2));
							end
							enemigo.vida-=damage;
							if (enemigo.file==fich1)
								if (enemigo.hit_combo==1) damegi1=0; end
								damegi1-=damage;
							end
							if (enemigo.file==fich2)
								if (enemigo.hit_combo==1) damegi2=0; end
								damegi2-=damage;
							end
							
							if (flags) enemigo.inc_x=-6;
							else enemigo.inc_x=6; end
						 
							if (luchador==FIGHTER_IORI)
								pegata (hit_x,200,524,c_scroll,flags,100,z-5,29,file);
							end
						end
						if (paso>69 and paso<83) enemigo.paso=10; end
						if (paso>80 and paso<100)//hace que se arrastre
							if (paso==89) play_snd (s_dash,480,256); end
							if (flags) enemigo.inc_x=-6;
							else enemigo.inc_x=6; end
							if (flags and paso==89)
								pegata (enemigo.x+25,220,132,c_scroll,1,100,z-4,44,fichad);
							end
							if (not flags and paso==89)
								pegata (enemigo.x-25,220,132,c_scroll,0,100,z-4,44,fichad);
							end
						end
					else
						if (graph==329) paso=83; end
					end
					if (enemigo.vida<=0)
						enemigo.vida=0;
						if (parpadeo_final==0 and game_mode!=MODE_TRAINING)
							pantallazo(10); parpadeo_final=1; ralenti(1);
						end
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					tipo_ataque=ALTO;
					graph=crack_shoot[paso++];
					if (paso==sizeof(crack_shoot)/DIV)
						nuevo_estado=_normal;
						if (enemigo.estado==_recibir_toss) enemigo.vulnerable=0; end
						if ((flags and x<enemigo.x) or (flags==0 and x>enemigo.x))
							shoryu=-shoryu; hado=-hado; shokoh=-shokoh;
						end
					end
					if (paso==1) 
						y=220;
						if (intensidad==1) 
							inc_y = -6; inc_x = 4;
						else 
							inc_y = -8; inc_x = 5; 
						end
						if (flags) inc_x=-inc_x; end
					end
				   
					if ((paso==29 or paso==35) and intensidad==1) paso++; end
					if (enemigo.y==220)//en el suelo le infla normal
						if (paso==3)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+inc_y,14,14,522,2+intensidad*2,1,6,8,id);
						end
						if (paso==15 or paso==17)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+30,1,14,419+graph,2+intensidad*2,1,6,8,id);
						end
						if (paso==19 and power==74)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+30,1,14,524,4+intensidad,1,6,8,id);
						end
					else
						if (paso==3)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+inc_y,10,14,522,4+intensidad,1,6,8,id);
						end
						if (paso==11 or paso==15 or paso==17)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+inc_y,10,14,419+graph,4+intensidad,1,6,8,id);
						end
						if (paso==19 and power==74)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x+inc_x,hit_y+inc_y,10,14,524,4+intensidad,1,6,8,id);
						end
					end
					if (paso==3)
						play_voice(s_terry16,512,256);
						ive_hit--;
					end
					if (paso==13) play_snd (s_terry2,500,256); end
					if (paso>4 and paso<27)
						x+=inc_x; y+=inc_y; 
						if (game_frame%3<2) inc_y++; end
						if (paso==26 and y<220) paso--; end
					end
					if (y>220) y=220; inc_y=0; inc_x=0; paso=27; graph=108; end
					if (paso==27) play_snd (s_floor,350,256); end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=mvkasumi4[paso++];
					if (paso==sizeof(mvkasumi4)/DIV)
						nuevo_estado=_normal;
					end
					if (intensidad==1 and paso==9) paso=23; end
					if (paso==39 and power==74)
						tembleque(1,1); play_snd (s_fall,512,256);
						if (flags)
							pegata (x-18,220,132,c_scroll,flags,100,z-4,44,fichad);
							hit_stars(9,x-20,220);
						else
							pegata (x+18,220,132,c_scroll,flags,100,z-4,44,fichad);
							hit_stars(9,x+20,220);
						end
					end
					if (abs(enemigo.x-x)>40)
						if ((paso==39 and power<74) or (paso==37 and power==74))
							if (flags) x-=28; else x+=28; end
						end
						if (paso==31 or paso==39)
							if (flags) x-=14; else x+=14; end
						end
					end
					if (paso==67)
						if (flags) x+=28; else x-=28; end
					end
					if (paso==73)
						if (flags) x+=14; else x-=14; end
					end
					if (paso==31 and power==74) paso+=2; end
					if (paso==33 and power<74)  paso+=2; end
					if (paso==1) guardia=3; end
					if (paso==29) ive_hit--; guardia=0; end
					if (paso==43)
						play_voice(s_kasumi1,512,256);
						play_snd (s_airp,512,256);
						get_real_point(1,&Hit_x,&hit_y);
						if (power==74)
							golpe(hit_x,hit_y,7,15,502,14,2,30,12,id);
						else
							golpe(hit_x,hit_y,7,15,502,10,1,20,8,id);
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					tipo_ataque=COJER;
					if (intensidad==1 or intensidad==2)
						if (paso==0)
							if (flags) inc_x=-6; else inc_x=6; end
							play_voice(s_takuma12,512,256);
						end
						graph=isenkyaku[paso++];
						if (intensidad==1 and paso==1) paso++; end
						if (power==74 and paso==3) paso++; end
						if (paso==sizeof(isenkyaku)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==19)  play_snd (s_run1,512,256); end
						if (paso==31 and intensidad==1) paso=37; end
						if (paso==31) play_snd (s_run2,512,256); end
						if (paso==39)
							if (intensidad==1) play_snd (s_run2,512,256); end
							if (intensidad==2) play_snd (s_run1,512,256); end
						end
						if (paso>14 and paso<45) x+=inc_x; end
						if (paso==37 or paso==38 or paso==39 or paso==40 or paso==41)
							if (flags) inc_x++; else inc_x--; end
						end
						if (paso>14 and paso<39)
							if (enemigo.y==220 and abs(enemigo.x-x)<50)
								intensidad+=2; paso=0;
							end
						end
					end
					if (intensidad==3 or intensidad==4)
						paso++; inc_x=2;
						if (paso==1) graph=116; end
						if (paso==5) graph=117; end
						if (paso==9 and ((flags==0 and enemigo.x>x) or
							(flags==1 and enemigo.x<x)))
							if ((enemigo.estado<23 or (enemigo.estado>29 and
								enemigo.estado<36) or enemigo.estado==_pajaritos or
								(enemigo.estado==_guardiaalta and enemigo.paso<9) or
								(enemigo.estado==_guardiabaja and enemigo.paso<9) or
								(enemigo.estado>47 and enemigo.estado<57)) and
								abs(enemigo.x-x)<60 and enemigo.voltear==0 and
								enemigo.y==220) nuevo_estado=_voltear;
								enemigo.estado=enemigo.nuevo_estado=100;
								enemigo.z=z+1;
								if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
									enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
									enemigo.graph=410;
								else
									enemigo.graph=411;
								end
							end
						end
						if (paso==29) graph=151;
							nuevo_estado=_normal;
						end
					end
				end
				if (luchador==FIGHTER_K)
					if (intensidad<3)
						graph=suela[paso++];
						if (paso==sizeof(suela)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1 or paso==5 or (paso==9 and y==220))
							if (flags) x-=15; else x+=15; end
						end
						if (paso==1 or (paso==9 and voz==10))
							play_voice(s_k12,412,256);
							play_snd (s_xjump,412,256); voz=0;
						end
						if (paso==1 or paso==9) 
							y-=3; inc_y=-1;
							if (flags) inc_x=-3-(intensidad*3);
							else inc_x=3+(intensidad*3); end
						end
						if (paso>9 and paso<35)
							y+=inc_y;
							if (abs(enemigo.x-x)>50 or abs(enemigo.y-y)>32 or enemigo.atravesar==1)
								x+=inc_x;
							end
							if (paso>20)
								if (paso%3==0) inc_y++; end
								if ((inc_x>1) and (paso%2==0)) inc_x--; end
								if ((inc_x<1) and (paso%2==0)) inc_x++; end
							end
							if (paso==34 and y<220) paso--; inc_y++; end
							if (y>220)
								paso=35; graph=45; y=220;
							end
						end
						if (paso==35)
							play_snd (s_floor,512,256);
						end
						if (graph==297 and he_dado==1)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y+10,-7,15,501,
							13+(intensidad*2),1,15,10,id);
						end
						if (paso>15 and paso<31 and hado<-10 and y>200 and 
							(control(l_kick) or control(s_kick)))
							intensidad=3; paso=0; y=220; he_dado=1;
							if (intensidad==2)
								if (inc_x>0) inc_x-=1; end
								if (inc_x<0) inc_x+=1; end
							end
						end
					end
					if (intensidad==3)
						tipo_ataque=BAJO;
						graph=asocial[paso++];
						if (paso==sizeof(asocial)/DIV)
							nuevo_estado=_normal;
						end
						if (graph==387 and he_dado==1)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,3,14,501,10,1,20,8,id);
						end
						if (abs(enemigo.x-x)<50 and abs(enemigo.y-y)<32)
							x+=inc_x/3;
						else
							x+=inc_x;
						end
						if (paso>12)
							if (inc_x>0) inc_x--; end
							if (inc_x<0) inc_x++; end
						end
					end
				end
				if (luchador==FIGHTER_KULA)
					if (intensidad<3)
						graph=sakura[paso++];
						if (paso==sizeof(sakura)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1) inc_y=-intensidad*3; x1=0;
							if (flags) inc_x-=6; else inc_x+=6; end
						end
						if (paso>1 and paso<45)
							y+=inc_y; 
							if (game_frame%3==0) inc_y++; end
							if (paso==44 and y<220) paso--; end
							if (y>=220) paso=45; end
							if ((flags==1 and enemigo.x<x) or
								(flags==0 and enemigo.x>x))
								if (abs(enemigo.x-x)<48) x+=inc_x/2;
								else x+=inc_x; end
							else
								x+=inc_x;
							end
						end
						if (paso==45) y=220; play_snd (s_floor,412,256); end
						if (paso==15 or paso==29)
							play_snd (s_airk,512,256);
							get_real_point(1,&hit_x,&hit_y);
							if (enemigo.y==220 and intensidad==1)
								golpe(hit_x,hit_y,5,14,525,6,1,15,10,id);
							else
								golpe(hit_x,hit_y,10,14,525,
								7-intensidad,1,15,10,id);
							end
						end
						if (paso>45 and paso<59)
							if (control(avanzar) and not control(retroceder))
								if (control(l_kick)) paso=1; intensidad=3; end
								if (control(s_kick)) paso=1; intensidad=4; end
							end
						end
					end
					if (intensidad==3)//patada
						graph=toss_kula[paso++];
						if (paso==sizeof(toss_kula)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso==3 or paso==7)
							if (flags) x-=12; else x+=12; end
						end
						if (paso==43 or paso==47)
							if (flags) x+=12; else x-=12; end
						end
						if (paso==13)
							play_snd (s_airk,300,256); ive_hit--;
							play_snd (s_kura3,412,256);
							if (flags) hit_x=x-48; else hit_x=x+48; end
							pegata (hit_x,160,645,c_scroll,flags,100,z-3,135,file);
							play_voice(s_kura32,412,256);
						end
						if (paso==15)
							get_real_point(1,&hit_x,&hit_y);
							hit_y=enemigo.y-50;
							if (enemigo.y<120) hit_y=70; end
							golpe(hit_x,hit_y,10,60,527,10,1,14,7,id);
						end
					end
					if (intensidad==4)//barrido
						tipo_ataque=BAJO;
						graph=lkick4_kula[paso++];
						if (paso==sizeof(lkick4_kula)/DIV)
							nuevo_estado=_normal; dos=0;
						end
						if (paso==2) he_dado=1; end
						if (paso>10 and paso<23)
							if (flags) x-=7; else x+=7; end
						end
						if ((graph>160 and graph<164) and he_dado==1)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y,3,4,525,8,0,10,7,id);
						end
						if (graph==161 and ive_hit==0) ive_hit--;
							play_snd (s_airk,360,256);
							if (rand(0,2)==0) voz=1; end
						end
					end
				end
			end
			case _satras_kick://shoryuken atras y patada
				tipo_ataque=NORMAL;
				if (luchador==FIGHTER_KYO)
					tipo_ataque=ALTO;
					graph=cortacabezas[paso++];
					if (paso==sizeof(cortacabezas)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==6) //da incrementos
						play_snd (s_sjump,512,256);
						inc_y=-4-(intensidad*3);
						if (flags) inc_x=-3-(intensidad*2);
						else  inc_x=3+(intensidad*2);  end
					end
					if (paso>5 and paso<31)
						y+=inc_y; x+=inc_x; inc_y++;
					end
					if (paso==30 and y<220) paso--; end
					if (y>220) inc_y=0; y=220; paso=32; end
					if (paso==32) play_snd (s_floor,350,256); end
					if (paso==6)
						play_voice(s_kyo14,512,256);
					end
					if ((paso==1 or paso==8) and intensidad==1) paso++; end
					if ((graph==321 or graph==322 or graph==323) and he_dado==1)
						get_real_point(1,&hit_x,&hit_y); ive_hit--;
						golpe(hit_x,hit_y,11,14,613,12+intensidad,2,12,8,id);
					end
					if (he_dado==0 and enemigo.estado==_recibir_toss)
						if (enemigo.paso>2 and enemigo.paso<10)
							enemigo.paso=14; enemigo.inc_y=10;
							inc_x=0; inc_y=0;
							if (flags) enemigo.inc_x=-4;
							else enemigo.inc_x=4; end
						end
						if (enemigo.paso==40) tembleque(1,1);
							enemigo.inc_y=-10;
						end
					end
				end
				if (luchador==FIGHTER_KYO94)
					if ((he_dado==0) and (intensidad<10) and (abs(enemigo.y-y)<50) and
						enemigo.estado==_recibir_toss and
						(abs(enemigo.x-x)<50) and (enemigo.paso<10))
						if (flags and enemigo.x<x) enemigo.x=x-50; end
						if (not flags and enemigo.x>x) enemigo.x=x+50; end
					end
					graph=cortacabezas94[paso++];
					if (paso==6) play_snd (s_sjump,512,256); end
					if (paso>6) 
						y+=inc_y; x+=inc_x;
						if (paso>43)
							if (inc_x>4) inc_x--; end
							if (inc_x<-4) inc_x++; end
							if (game_frame%2==0) inc_y++; end 
						end
					else
						inc_y=-2;
						if (flags) inc_x=-4; else inc_x=4; end					
					end
					
					if (intensidad==1 and paso==16) paso=44; end
					
					if (paso==sizeof(cortacabezas94)/DIV) paso--; end
					if (intensidad==1)
						if (paso==14)
							play_snd (s_airk,400,256);ive_hit--;
							get_real_point(1,&hit_x,&hit_y);
							if (power<74)
								golpe(hit_x,hit_y,7,14,613,12-(enemigo.vulnerable*2),2,12,7,id);
							else
								golpe(hit_x,hit_y,10,14,613,12-(enemigo.vulnerable*2),2,12,7,id);
							end
						end
					end
					if (intensidad==2)
						if (paso==12 or paso==26)
							play_snd (s_airk,400,256); 
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,10,14,613,12-(enemigo.vulnerable*2),2,0,7,id);
						end
						if (paso==40)
							play_snd (s_airk,400,256); 
							get_real_point(1,&hit_x,&hit_y);
							if (enemigo.y<y) hit_y-=25; end
							golpe(hit_x,hit_y,7,14,613,12-(enemigo.vulnerable*2),2,12,10,id);
						end
					end
					if (y>220 and paso>9)
						y=220; nuevo_estado=_agachar; play_snd (s_floor,450,256);
					end
				end
			end
			case _extra_move://phoenix arrow y power dunk
				tipo_ataque=ALTO;
				if (luchador==FIGHTER_ATHENA) //phoenix arrow
					if (paso==0) y+=18; end
					graph=phoenix[paso++];
					if (paso==sizeof(phoenix)/DIV)
						nuevo_estado=_normal;
						if (enemigo.estado==_recibir_toss) enemigo.vulnerable=0; end
					end
					if (paso==9)
						y-=40;
						ive_hit--; 
						play_snd (s_speed,400,256);
						if (flags) hit_x=x+10; else hit_x=x-10; end
						pegata (hit_x,y+30,574,c_scroll,flags+16,100,z+1,35,file);
						play_voice(s_ath22,512,256);
					end
					if (paso>8 and y<191)
						if (intensidad==1) inc_x=2;
							if (flags) x-=2; angle-=45000;
							else x+=2; angle+=45000; end
							y+=6;
						end
						if (intensidad==2) inc_x=4;
							if (flags) x-=4; angle-=45000;
							else x+=4; angle+=45000; end
							y+=4;
						end
						if (paso==11) paso--; end
						if (game_frame%2==0)
							if (enemigo.y==220 and enemigo.estado<>_saltar)
								golpe(x,y,5,12,graph,rand(1,2),rand(0,1),2,6,id);
							else
								golpe(x,y,10,12,graph,rand(1,2),rand(0,1),2,6,id);
							end
						end
					end
					if (paso>14 and paso<31)
						if (flags) x-=inc_x; else x+=inc_x; end
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
						if (paso==17 and not (control(l_kick) or control(s_kick)))
							paso=39; y=220;
						end
					end
					if (y>190 and (paso==11))
						if (x>enemigo.x and flags==0)
							flags=1; inc_x=-3;
						end
						if (x<enemigo.x and flags==1)
							flags=0; inc_x=3;
						end
						angle=0; paso=15; y=220;
						graph=phoenix[paso];
					end
					if (paso==17) y=220; he_dado=1; end
					if (paso==27) play_snd (s_airk,512,256); end
					if ((graph==160) and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,7,15,549,10,1,12,10,id);
					end
					if (paso>8 and paso<35 and he_dado==0)
						enemigo.vulnerable=1;
					end
				end
				if (luchador==FIGHTER_TERRY)//power drunk
					graph=power_dunk[paso++];
					if (paso==sizeof(power_dunk)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==1) y=220;
						inc_y=-6-intensidad;
						if (flags) inc_x=-2-intensidad;
						else inc_x=+2+intensidad; end
						play_voice(s_terry17,512,256);
					end
					if (paso>6 and paso<39)
						y+=inc_y; x+=inc_x; 
						if (game_frame%2==0) inc_y++; end
					end
					if (paso==35 and y<220) paso=33; end
					if (paso<39 and y>220) 
						paso=39; inc_y=0; y=220;
						graph=power_dunk[paso]; 
					end
					if (paso>6 and paso<13 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,10,14,523,8,1,6,8,id);
						if (paso==7) play_snd (s_sjump,500,300); ive_hit--; end
					end
					if (paso==25) he_dado=1; end
					if ((paso>27 and paso<37) and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,11,15,543,12,1,12,8,id);
						if (paso==28)
							pegata (hit_x,hit_y,532,c_scroll,flags,100,z-1,38,file);
							play_snd (s_terry1,512,256);
							play_voice(s_terry18,512,256);
						end
					end
					if (paso==39) play_snd (s_floor,350,256); end
				end
				if (luchador==FIGHTER_CRIMSON)//shoryuken patada
					if (paso==0)
						if (intensidad==1) 
							inc_y=-4; 
							if (flags) inc_x=-5; else inc_x=5; end                  
						end
						if (intensidad==2) 
							inc_y=-8; 
							if (flags) inc_x=-6; else inc_x=6; end                  
						end
						if (power==74) inc_x+=inc_x/3; end
						if (enemigo.z<z) enemigo.z=z+1; end
						play_snd (s_sjump,512,256);
					end
					
					if (paso==7) ive_hit--; end
					if (graph<376)
						if (abs(enemigo.x-x)>50 and (enemigo.atravesar==0))
							x+=inc_x;
						end
								
						if (graph>366 and graph<376) 
							y+=inc_y;
							if (y>220) y=220; end
							if (paso%3<2) inc_y++; end
						end    
					end
					
					if (intensidad == 1)
						graph=spk_crimson[paso++];
						if (paso==sizeof(spk_crimson)/DIV)
							nuevo_estado=_normal;
						end
					else
						graph=spk_crimson2[paso++];
						if (paso==sizeof(spk_crimson2)/DIV)
							nuevo_estado=_normal;
						end
					end    
					if (graph==374 and (he_dado==1))
						if (flags) hit_x=x-60; else hit_x=x+60; end
						hit_y = y-65;
						orlas (hit_x,hit_y,z-1,flags,17,0,id);
						play_snd (s_flame1,250,256);
						play_voice(s_iori26,512,256);
						play_snd (s_floor,512,256);
						he_dado=0;
					end
					if (graph>375)
						if (hado<-10 and (control(s_kick) or
							control(l_kick)) and shoryu>-20)
							if (control(l_kick) and lk_bloker==0)
								intensidad=1; nuevo_estado=_uatras_kick;
							end
							if (control(s_kick) and sk_bloker==0)
								intensidad=2; nuevo_estado=_uatras_kick;
							end
						end
						if (hado<-10 and (control(s_punch) or
							control(l_punch)) and shoryu>-20)
							if (control(l_punch) and lp_bloker==0)
								intensidad=1; nuevo_estado=_uatras_punch;
							end
							if (control(s_punch) and sp_bloker==0)
								intensidad=2; nuevo_estado=_uatras_punch;
							end
						end
					end
				end
				if (luchador==FIGHTER_KASUMI)
					tipo_ataque=BAJO;
					if (paso==0)
						if (flags) inc_x=-intensidad*4;
						else inc_x=intensidad*4; end
					end
					if ((enemigo.x>x and flags==0) or (enemigo.x<x and flags==1))
						if (abs(enemigo.x-x)>36 or enemigo.y<220) x+=inc_x; end
					else
						x+=inc_x;
					end
					if (paso>2)
						if (inc_x>0 and (game_frame%4==0)) inc_x-=intensidad; end
						if (inc_x<0 and (game_frame%4==0)) inc_x+=intensidad; end
					end
					graph=mvkasumi6[paso++];
					if (paso==sizeof(mvkasumi6)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==21 and he_dado==0)
						he_dado=1;
					end
					if (paso==27 or paso==39 or paso==45)
						if (flags) x-=12; else x+=12; end
					end
					if (paso==7) play_snd (s_dash,512,256); end
					if (graph==39 and he_dado<>1) he_dado=1;
						if (enemigo.estado==34) enemigo.inc_x/=2; end
					end
					if (graph==64 or graph==44)
						get_real_point(1,&Hit_x,&hit_y);
						if (graph==64 and he_dado==1)
							golpe(hit_x,hit_y+inc_y,16,14,501,5+intensidad,1,10,8,id);
						end
						if ((paso==27 or paso==29) and he_dado==1)
							golpe(hit_x,hit_y+inc_y,7,15,501,11+intensidad,1,10,10,id);
						end
					end
					if (paso==11)
						play_voice(s_kasumi19,512,256);
						play_snd (s_airt,512,256);
					end
					if (paso==27)
						play_voice(s_kasumi11,512,256);
						play_snd (s_airp,512,256);
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=gitano[paso++];
					if (paso==sizeof(gitano)/DIV)
						nuevo_estado=_normal; super_sp=1;
					end
					if (paso==69) hit_stars(9,x,220);
						play_snd (s_fall,320,250); tembleque(2,1);
					end
				end
			end
			
			case _special1:
				tipo_ataque=NORMAL;
				if (paso==0)
					signal(enemigo,s_freeze_tree); 
					intensidad=0;
					if (enemigo.z<z) enemigo.z=z+1; end
				end
				if (luchador==FIGHTER_KYO)//kyo kobushi
					if (intensidad==0)
						if (paso==0)
							if (flags) hit_x=x-9; else hit_x=x+9; end
							special_star(1,hit_x,163);
							play_voice(s_kyo21,512,256);
							voltear=30;
						end
						graph=honto[paso++];
						if (paso==10)//crea explosion...
							if (flags) orlas (x-80,210,z-5,flags,11,1,id);
							else orlas (x+80,210,z-5,flags,11,1,id); end
							if (flags) hit_x=x-40; else hit_x=x+40;  end
						end
						if (paso==14)
							if (super_sp==0) intensidad=1;
							else intensidad=2; paso=0; graph=178; end
							play_voice(s_kyo22,512,256);
						end
					end
					if (intensidad==1)//special normal
						graph=honto[paso++];
						if (paso==sizeof(honto)/DIV)
							if (he_dado==0 and enemigo.estado==_recibir_toss)
								enemigo.vulnerable=0;
							end
							if (he_dado==0 and (control(l_punch) or
								control(s_punch) or control(toss)))
								paso=1; intensidad=3;
							else
								nuevo_estado=_normal;
							end
						end
						if (paso==18)
							from counter=178 TO 186;
								blend_gfx (file,counter,FIGHTER_KYO,2);
							end
							pegata (x,y,0,c_scroll,flags,100,z+1,59,file);
						end
						if ((enemigo.x>725 or enemigo.x<25) and
							abs(enemigo.x-x)<38)
						else
							if (graph>178 and graph<184 and paso<30)
								if (flags) x-=16;
								else x+=16; end
							end
							if (abs(enemigo.x-x)<38 and paso<30)
								if (flags) enemigo.x-=9;
								else enemigo.x+=9; end
							end
						end
						if (paso==122 or paso==123 or paso==124)
							if (abs(enemigo.x-x)<38)
								if (flags) enemigo.x-=3; x+=6;
								else enemigo.x+=3; x-=6; end
							end
						end
						if (paso==28 or paso==42 or paso==56)
							if ((flags and enemigo.x>x) or
								(flags and enemigo.x>x))
								golpe(x,y-65,14,24,613,2,1,10,1,id);
							else
								if (flags)
									golpe(x-25,y-65,14,24,613,2,1,10,1,id);
								else
									golpe(x+25,y-65,14,24,613,2,1,10,1,id);
								end
							end
						end
						if (graph==184 and he_dado==1 and paso>69)
							if ((flags and enemigo.x>x) or
								(flags and enemigo.x>x))
								golpe(x,y-65,7,25,613,6,1,10,16,id);
							else
								if (flags)
									golpe(x-25,y-65,-7,25,613,6,1,10,16,id);
								else
									golpe(x+25,y-65,-7,25,613,6,1,10,16,id);
								end
							end
							ive_hit--;
						end
						if (paso==32 or paso==46 or paso==60) he_dado=1;
							pegata (hit_x,220,177,c_scroll,flags+4,100,z+1,60,file);
						end
						
						if (paso==36 or paso==50 or paso==64) flags+=4; end
						if (paso==42 or paso==56 or paso==70) flags-=4; end
						
						if (paso==66) he_dado=1; end
						if ((enemigo.estado==_recibir_fuertes_bozo or
							enemigo.estado==_recibir_fuertes_agachado))
							enemigo.inc_x=0;
						end
						if ((enemigo.estado==_guardiaalta or
							enemigo.estado==_guardiabaja) and paso<70)
							enemigo.inc_x=0;
						end
						if (paso==70)
							play_snd (s_burn1,512,256);
							if (flags)
								pegata (x-75,y-64,571,c_scroll,1,100,Z-2,25,file);
							else
								pegata (x+75,y-64,571,c_scroll,0,100,Z-2,25,file);
							end
						end
						if (he_dado<>0)
							if (paso==30 or paso==44 or paso==58) paso+=2;
								if (flags)
									pegata (hit_x+32,220,178,c_scroll,flags+4,100,z+1,60,file);
								else
									pegata (hit_x-32,220,178,c_scroll,flags+4,100,z+1,60,file);
								end
							end
						end
						if (paso>32) vulnerable=1; end
					end
					if (intensidad==2)//super
						graph=spdmk[paso++];
						if (paso==sizeof(spdmk)/DIV)
							nuevo_estado=_normal;
							if (he_dado==0 and enemigo.estado==_recibir_toss)
								enemigo.vulnerable=0;
							end
						end
						if (paso==2)
							from counter=178 TO 194;
								blend_gfx (file,counter,FIGHTER_KYO,2);
							end
							blend_gfx (file,130,FIGHTER_KYO,2);
							pegata (x,y,0,c_scroll,flags,100,z+1,-59,file);
							vulnerable=1;
						end
						if (((paso<40 or paso>75) and paso<102) and
							he_dado==0 and enemigo.vida>0) enemigo.inc_x=0;
						end
						if (paso==4)
							hit_x=x; hit_y=y;
							orlas (hit_x,hit_y,z-1,flags+4,20,0,id);
						end
						if (paso==12)
							orlas (hit_x,hit_y,z-1,flags+4,20,0,id);
						end
						if (paso==20)
							orlas (hit_x,hit_y,z-1,flags+4,20,0,id);
							orlas (hit_x,hit_y,z-1,flags+4,-20,0,id);
						end
						if (paso==28)
							orlas (hit_x,hit_y,z-1,flags,20,0,id);
						end
						if (paso==1 or paso==6 or paso==8 or
							paso==10 or paso==12 or paso==14)
							if ((enemigo.x>725 or enemigo.x<25) and
								abs(enemigo.x-x)<38)
							else
								if (flags) x-=28; else x+=28; end
								if (abs(enemigo.x-x)<38)
									if (flags) enemigo.x-=16;
									else enemigo.x+=16; end
								end
							end
						end
						if (paso==52)
							hit_x=x; hit_y=y;
							orlas (hit_x,hit_y,z-1,flags+4,21,0,id);
						end
						if (paso==60)
							orlas (hit_x,hit_y,z-1,flags+4,21,0,id);
						end
						if (paso==68)
							orlas (hit_x,hit_y,z-1,flags+4,21,0,id);
							orlas (hit_x,hit_y,z-1,flags+4,-21,0,id);
						end
						if (paso==76)
							orlas (hit_x,hit_y,z-1,flags,21,0,id);
						end
						if (paso==54 or paso==56 or paso==58)
							if ((enemigo.x>725 or enemigo.x<25) and
								abs(enemigo.x-x)<38)
							else
								if (flags) x-=11; else x+=11; end
								if (abs(enemigo.x-x)<38)
									if (flags) enemigo.x-=6;
									else enemigo.x+=6; end
								end
							end
						end
						if (he_dado==0)
							if (paso==96)
								hit_x=x; hit_y=y;
								if (flags) x-=15; else x+=15; end
								orlas (hit_x,hit_y,z-1,flags+4,22,0,id);
							end
							if (paso==102)
								orlas (hit_x,hit_y,z-1,flags+4,22,0,id);
								orlas (hit_x,hit_y,z-1,flags+4,-22,0,id);
								inc_y=-6;
							end
						end
						if (paso==98 and he_dado<>0)
							intensidad=4; paso=18;
						end
						if (paso>110)
							y+=inc_y; 
							if (game_frame%3==0) inc_y++; end
							if (y<220)
								if (paso==(sizeof(spdmk)/DIV)-4) paso--; end
							end
							if (y>220) y=220; inc_y=0; end
						end
						if (paso==110)
							get_real_point(1,&Hit_x,&hit_y);
							golpe(hit_x,hit_y-10,10,28,509,10,1,5,0,id);
						end
						if (paso==112) play_snd (s_kyo1,512,256); end
						if (paso==112 or paso==113 or paso==114 or paso==115)
							if (he_dado==0 and enemigo.estado==_recibir_toss)
								enemigo.inc_x=0; enemigo.vulnerable=1;
								if ((flags and enemigo.x<x) or
									(not flags and enemigo.x>x))
									if (abs(enemigo.x-x)<36)
										if (flags) enemigo.x=x-36;
										else enemigo.x=x+36; end
									end
								end
							end
						end
						if (paso==118)
							get_real_point(1,&Hit_x,&hit_y); inc_y=-2;
							golpe(hit_x,hit_y+10,10,28,509,10,1,10,14,id);
						end
						if (paso==110 or paso==112)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==114)
							if (flags) x-=5; else x+=5; end
						end
						if (paso==116)
							if (flags) x-=2; else x+=2; end
						end
					end
					if (intensidad==3)
						graph=sp_kyo4[paso++];
						if (paso==sizeof(sp_kyo4)/DIV)
							nuevo_estado=_normal;
						end
						if (paso>2 and paso<34)
							get_real_point(1,&hit_x,&hit_y);
						end
						if (paso==4)
							play_voice(s_kyo31,450,256);
							pegata (hit_x,hit_y,500,c_scroll,flags,100,z-2,42,file);
						end
						if (paso==52 or paso==60)
							if (flags) x-=4; else x+=4; end
						end
					end
					if (intensidad==4)
						if (paso==28)
							if (flags) x-=5; else x+=5; end
						end
						graph=kore2[paso++];
						if (paso==sizeof(kore2)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==30)
							if (flags) x-=15; else x+=15; end
						end
					end
				end
				
				if (luchador==FIGHTER_ATHENA)//athena healing
					tipo_ataque=VULN;
				    if (y==220)
						graph=sp_ath2[paso++];
						if (paso==sizeof(sp_ath2)/DIV)
							nuevo_estado=_normal;
							if (game_mode==MODE_TRAINING and vida<MAX_LIFE) vida=DANGER_LIFE-1; end
						end
					else
						graph=sp_ath2[paso++]-132;
						if (paso==sizeof(sp_ath2)/DIV)
							nuevo_estado=_saltar; inc_x=0;
							nuevo_paso=15; inc_y=0;
							if (game_mode==MODE_TRAINING and vida<MAX_LIFE) vida=DANGER_LIFE-1; end
						end
						if (graph==168) graph=27; end
					end
					if (paso==117) paso=159; end
					if (paso==2)
						if (enemigo.x<x) flags=1; else flags=0; end
						if (flags) special_star(1,x,y-75);
						else special_star(1,x,y-75); end
						vulnerable=1; ive_hit--;
					end
					if (paso==5)
						pegata (x,y-60,0,c_scroll,flags,200,z+1,63,id.file);
						s_exath=play_snd (s_ath8,512,256);
						play_voice(s_ath10,512,256);
						if (super_sp==1)
							if (flags)
								pegata (x-19,y-97,184,c_scroll,flags,100,z-1,90,file);
							else
								pegata (x+19,y-97,184,c_scroll,flags,100,z-1,90,file);
							end
						end
					end
					if (paso>6 and paso<105 and
						is_playing_snd(s_exath)==0)
						s_exath=play_snd (s_ath8,512,256);
					end
					if (control(cuatro) and paso<105)
						if (is_playing_snd(s_exath)) stop_snd(s_exath); end
						paso=159;
					end
					if (paso==159) play_snd (s_ath2,512,256); end
					if (paso<117 and vida<MAX_LIFE and estado_juego==1)
						if (super_sp==0 and paso%6==0) vida+=get_real_damage(1); end
						if (super_sp==1 and paso%4==0) vida+=get_real_damage(1); end
						if (vida=>MAX_LIFE)
							vida = MAX_LIFE; paso=118;
						end
					end
					if (super_sp==1)
						if (paso>4 and paso<159) graph=112; end
						if (y==220)
							if (paso<5) graph=169; end
							if (paso==159 or paso==160 or paso==165 or paso==166) graph=172; vulnerable=1; end
							if (paso==161 or paso==162 or paso==167 or paso==168) graph=173; end
							if (paso==163 or paso==164 or paso==169 or paso==170) graph=174; end
							if (paso>170 and paso<175) graph=171; end
							if (paso>174 and paso<179) graph=170; end
							if (paso>178 and paso<181) graph=169; end
						end	
					end
					tipo_ataque=VULN;
				end
				if (luchador==FIGHTER_IORI)
					graph=sp_honto[paso++];
					if (paso==sizeof(sp_honto)/DIV or paso==65)
						nuevo_estado=_normal;
					end
					if (paso==3)
						inc_x=30; voltear=15;
						if (flags) special_star(1,x+15,y-92);
						else special_star(1,x-15,y-92); end
						vulnerable=1; ive_hit--;
					end
					if (paso==13)
						if (flags) hit_x=x-32; else hit_x=x+32; end
						orlas (hit_x,220,z-3,flags,33,0,id);
						play_voice(s_iori31,512,256);
					end
					if (paso==45)
						if (flags) hit_x=x-54; else hit_x=x+54; end
						orlas (hit_x,220,z-3,flags,34,0,id);
					end
					if (paso==121 or (paso==125 and super_sp==1) or
						(paso==129 and super_sp==1))
						if (paso==121)
							if (flags) hit_x=x-54; else hit_x=x+54; end
							play_voice(s_iori32,512,256);
						end
						if (paso==125)
							if (flags) hit_x=x-69; else hit_x=x+69; end
						end
						if (paso==129)
							if (flags) hit_x=x-84; else hit_x=x+84; end
						end
						orlas (hit_x,220,z-3,flags,35,0,id);
						if (enemigo.y==220) tembleque(2,0);
						else tembleque(2,-1); end
					end
					if (paso==64 and he_dado<>1) paso=73; end
					if (paso<129 and enemigo.estado==_recibir_toss and he_dado==0)
						if (enemigo.paso==35) enemigo.paso--;
							enemigo.vulnerable=1;
						end
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					if (intensidad==0)
						graph=power_geiser[paso++];
						if (paso==sizeof(power_geiser)/DIV)
							nuevo_estado=_normal;
							if (he_dado==0 and enemigo.estado==_recibir_toss)
								enemigo.vulnerable=0;
							end
						end
						if (paso==(sizeof(power_geiser)/DIV)-6 and super_sp==1)
							intensidad=1; paso=1;
							if (he_dado==0) enemigo.vulnerable=1; end
						end
						if (paso>16 and enemigo.paso==13 and
							enemigo.estado==_recibir_toss)
							enemigo.inc_y=-12;
						end
						if (paso==1) y=220; end
						if (paso==3)
							if (flags) special_star(1,x+5,y-115);
							else special_star(1,x-5,y-115); end
							play_voice(s_terry19,512,256);
							voltear=30;
						end
						if (paso==11)
							play_snd (s_boom,512,256);
							vulnerable=1; ive_hit--;
							play_voice(s_terry20,512,256);
							if (flags)
								orlas (x-70,212,z-4,flags,7,0,id);
								hit_stars(9,x-40,220);
							else
								orlas (x+70,212,z-4,flags,7,0,id);
								hit_stars(9,x+40,220);
							end
						end
					end
					if (intensidad==1)
						if (paso==1 or paso==9)
							if (flags) flags=0; else flags=1; end
						end
						graph=super_power[paso++];
						if (paso==sizeof(super_power)/DIV)
							nuevo_estado=_normal;
							if (he_dado==0 and enemigo.estado==_recibir_toss)
								enemigo.vulnerable=0;
							end
						end
						if (paso<35 and enemigo.paso==13 and
							enemigo.estado==_recibir_toss)
							enemigo.inc_y=-7;
						end
						if (paso==11)
							play_snd (s_boom,512,256);
							if (flags)
								orlas (x-120,212,z-4,flags,7,0,id);
								hit_stars(9,x-20,220);
							else
								orlas (x+120,212,z-4,flags,7,0,id);
								hit_stars(9,x+20,220);
							end
						end
						if (paso==29)
							play_snd (s_boom,512,256);
							if (flags)
								orlas (x-170,212,z-4,flags,-7,0,id);
								hit_stars(9,x-50,220);
							else
								orlas (x+170,212,z-4,flags,-7,0,id);
								hit_stars(9,x+50,220);
							end
						end
					end
				end
				if (luchador==FIGHTER_CRIMSON)
					graph=sp_crimson2[paso++];
					if (paso==sizeof(sp_crimson2)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==7)
						inc_x=6; ive_hit--;
						if (flags)
							pegata (x-30,y-124,546,c_scroll,1,100,z+1,66,file);
							special_star(1,x-35,y-125);
						else
							pegata (x+30,y-124,546,c_scroll,0,100,z+1,66,file);
							special_star(1,x+35,y-125);
						end
						play_voice(s_iori10,512,256);
					end
					if (paso==9) vulnerable=1; end
					if (paso==9 and control(toss)) paso--; end
					if (paso==13)
						get_real_point(1,&hit_x,&hit_y); voltear=15;
					end
					if (paso==19)
						pegata (hit_x,hit_y,509,c_scroll,flags,100,z-5,31,file);
					end
					if (paso==13)
						if (super_sp==0)
							if (flags) poison=hadoken(5,x-25,220,id);
							else poison=hadoken(5,x+25,220,id); end
							play_snd (s_flame4,512,256);
						end
						
						if (super_sp==1)
							poison = crimsom (id, id);
							if (flags) poison.x = x-25;
							else poison.x=x+25; end
							
							if (enemigo.poison==19) poison.super_sp=0; end
							if (enemigo.poison<>19) poison.super_sp=1; end
						end
					end
				end
				if (luchador==FIGHTER_KYO94)//kyo 94
					nuevo_estado=_special2; nuevo_paso=0;
				end
				if (luchador==FIGHTER_KASUMI)//kasumi
					graph=mvkasumi1[paso++];
					if (paso==sizeof(mvkasumi1)/DIV)
						nuevo_estado=_normal;
					end
					if (paso==1) paso=5;
						 play_voice(s_kasumi12,512,256);
					end
					if (paso==11) vulnerable=1;
						if (flags) special_star(1,x+25,y-105);
						else special_star(1,x-25,y-105); end
					end
					if (paso>12 and paso<31)
						if (control(toss)) else paso=39; end
					end
					if (paso==41)
						play_voice(s_kasumi13,512,256);
						if (flags) hit_x=x-56; else hit_x=x+56; end
						pegata (x,220,0,c_scroll,flags,100,0,99,file);
					end
				end
				if (luchador==FIGHTER_TAKUMA)//takumita
					if (he_dado==0) x0=15; else x0=0; end
					if (super_sp<2)
						if (paso==3)
							if (flags) special_star(1,x-30,y-60);
							else special_star(1,x+30,y-60); end
							ive_hit--; estatico=1;
							play_voice(s_takuma18,512,256);
						end
						
						damage=10-super_sp;
						
						if (paso==17) 
							vulnerable=1; 
							play_snd (s_airp,356,256);
							get_real_point(1,&hit_x,&hit_y);
							if (enemigo.y==220)
								golpe(hit_x,142,1,15,500,-damage,2,0,16,id);
							else
								golpe(hit_x,142,10,15,502,-damage,2,0,16,id);
							end
						end
						if (paso==35) play_snd (s_airp,356,256);
							get_real_point(1,&hit_x,&hit_y);
							if (enemigo.y==220)
								golpe(hit_x,hit_y,4,15,500+x0,-damage,2,0,16,id);
							else
								golpe(hit_x,hit_y,10,15,502,-damage,2,0,16,id);
							end
						end
						if (paso==17 and he_dado==0)  paso+=2;  end
						if (paso==37 and he_dado==0)  paso+=4; end
					end
					if (super_sp==0)
						graph=sp_takuma3[paso++];
						if (paso==sizeof(sp_takuma3)/DIV)
							nuevo_estado=_normal; estatico=0;
						end
						if (paso==43 or paso==45 or paso==47 or
							paso==49 or paso==51)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==61 or paso==67 or paso==75)
							if (flags) x-=17; else x+=17; end
						end
						if (paso==53) play_snd (s_airp,356,256);
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,7,50,500+x0,20,2,0,24,id);
						end
						if (paso<53 and he_dado==0 and enemigo.y==220)
							enemigo.inc_x=0;
						end
					end
				   if (super_sp==1)
						graph=sp_takuma4[paso++];
						if (paso==sizeof(sp_takuma4)/DIV)
							nuevo_estado=_normal; estatico=0;
						end
						if (paso==49) 
							vulnerable=1; play_snd (s_airp,356,256);
							get_real_point(1,&hit_x,&hit_y);
							if (enemigo.y==220)
								golpe(hit_x,hit_y,1,15,500+x0,-8,2,0,16,id);
							else
								golpe(hit_x,hit_y,10,15,502,-8,2,0,16,id);
							end
						end
						if (he_dado==0 and enemigo.y==220 and abs(enemigo.x-x)<100)
							if (paso==51) paso+=2; end
							if (paso==55) paso+=4; end
						end
						if (paso==67) he_dado=1; end
						if (paso==71) play_snd (s_airp,356,256);
							get_real_point(1,&hit_x,&hit_y);
							if (enemigo.y==220)
								golpe(hit_x,hit_y,4,15,500+x0,-8,2,0,16,id);
							else
								golpe(hit_x,hit_y,10,15,502,-8,2,0,16,id);
							end
						end
						if (paso==71 and he_dado==0) super_sp=2; paso=0; end
						if (he_dado==0 and enemigo.y==220) enemigo.inc_x=0; end
					end
					
				   if (super_sp==2)
						graph=sp_takuma5[paso++];
						if (paso==sizeof(sp_takuma5)/DIV)
							nuevo_estado=_normal; estatico=0;
						end
						if (paso==13)
							get_real_point(1,&hit_x,&hit_y);
							if (enemigo.y==220)
								golpe(hit_x,hit_y,1,50,518,8,2,0,24,id);
							else
								golpe(hit_x,hit_y,10,50,501,8,2,0,24,id);
							end
						end
						if (paso==15) play_snd (s_airp,356,256); hit_y-=5;
							golpe(hit_x,hit_y,7,50,518,10,2,0,24,id);
						end
						if (paso==45)
							play_voice(s_takuma19,512,256);
						end
						if (paso<16 and he_dado==0 and enemigo.y==220)
							enemigo.inc_x=0;
						end
					end
				end
				if (luchador==FIGHTER_K)//asocial
					graph=special_k1[paso++];
					if (paso==sizeof(special_k1)/DIV)
						nuevo_estado=_normal; vulnerable=0;
					end
					if (paso==1 or paso==5) vulnerable=1;
						if (flags) x-=4; inc_x=-(11+super_sp);
						else inc_x=11+super_sp; x+=4; end
					end
					if (paso==5)
						if (flags) hit_x=x-7; else hit_x=x+7; end
						special_star(-1,hit_x,132);
					end
					if (paso<127)
						get_real_point(1,&hit_x,&hit_y);
					end
					if (paso==11)
						pegata (hit_x,hit_y,506,c_scroll,flags,100,-3,29,file);
					end
					if (paso==17)
						pegata (hit_x,hit_y,525,c_scroll,flags,100,-3,104,file);
					end
					if (paso>40 and paso<127 and not control(toss))
						paso=127; graph=375;
					end
					if (paso<159)
						prota_shadow(x,y,0);
					end
					if (paso==127)
						play_voice(s_k14,412,256);
					end
					if (paso>128)
						if (abs(enemigo.x-x)<55) x+=inc_x;
							if (paso<143) paso=143; end
						else
							x+=inc_x;
						end
						if (inc_x>0 and (paso%2==0)) inc_x--; end
						if (inc_x<0 and (paso%2==0)) inc_x++; end
						ive_hit=-1;
					end
					if ((paso>136 and paso<153) and (graph==0 or
						graph>378) and he_dado==1)
						if (flags) hit_x=x-60; else hit_x=x+60; end
						if (super_sp==0)
							golpe(hit_x,155,-7,50,501,32,3,24,16,id);
						else
							golpe(hit_x,155,-7,50,501,50,5,32,18,id);
						end
					end
				end
				if (luchador==FIGHTER_KULA)
					graph=ikio[paso++];
					if (paso==sizeof(ikio)/DIV)
						nuevo_estado=_normal; vulnerable=0;
					end
					if (paso==1)
						if (flags) hit_x=x-7; else hit_x=x+7; end
						special_star(1,hit_x,132);
						if (super_sp==0) play_voice(s_kura28,412,256);
						else play_voice(s_kura29,412,256); end
					end
					if (paso==11) vulnerable=1; end
					if (super_sp==0 and paso==37) paso=85; end
					if (paso==23 and super_sp==1)
						if (flags) hit_x=x-120; else hit_x=x+120; end
						play_voice(s_kura30,512,256);
					end
					if (paso==15 or paso==39 or paso==63)
						if (paso==15)
							if (flags) hit_x=x-40; else hit_x=x+40; end
						end
						if (paso==39)
							if (flags) hit_x=x-120; else hit_x=x+120; end
						end
						if (paso==63)
							if (flags) hit_x=x-200; else hit_x=x+200; end
						end
						orlas (hit_x,220,z-3,flags,36,1,id);
					end
					if (he_dado==0 and enemigo.estado==_recibir_toss and
						enemigo.paso==2 and paso<63 and super_sp==1)
						enemigo.inc_y=-7;
						if (enemigo.inc_x>0) enemigo.inc_x=6; end
						if (enemigo.inc_x<0) enemigo.inc_x=-6; end
					end
					if (paso==85) ive_hit=-1; end
				end
				if (luchador==FIGHTER_K9999)//kaneda ayudame
					graph=special_ts1[paso++];
					if (paso==sizeof(special_ts1)/DIV)
						nuevo_estado=_normal;
						if (he_dado==0 and enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (paso==1)
						play_voice(s_tetsuo22,512,256);
						if (flags) hit_x=x+7; else hit_x=x-7; end
						special_star(-1,x,175); intensidad=0;
					end
					if (paso==3 or paso==7)
						if (flags) x-=10; else x+=10; end
					end
					if (paso==179 or paso==183) vulnerable=1;
						if (flags) x+=10; else x-=10; end
					end
					if (paso==49)
						pegata (hit_x,hit_y,526,c_scroll,flags,100,z+3,142,file);
						s_exk49=play_snd (s_tetsuo2,512,256);						
					end
					if (paso==51)
						pegata (0,0,534,c_scroll,16,100,z+15,143,file);
					end
					if (paso>50 and paso<119)
						get_real_point(1,&hit_x,&hit_y);
						
						if (paso<77 and is_playing_snd(s_exk49)==0)
							s_exk49=play_snd (s_tetsuo2,512,256);
						end
					  
						if ((he_dado==1) and
							((enemigo.x<x and flags) or (enemigo.x>x and !flags)))
							inc_x=enemigo.x;
							if (super_sp==0)
								if (inc_x<x-250) inc_x=x-250; end
								if (inc_x>x+250) inc_x=x+250; end
							end
							if (flags==1 and inc_x>x) inc_x=x-30; end
							if (flags==0 and inc_x<x) inc_x=x+30; end
							if (enemigo.y>160) inc_y=180;
							else inc_y=140; end
							
							if (paso<111)
								golpe(inc_x,inc_y,15,14,501,-3,1,3,0,id);
							else
								golpe(inc_x,inc_y,-7,14,501,3,1,0,0,id);
							end	
						end
						
						if (he_dado<>1) intensidad++;
							if (super_sp==1 and intensidad==3) intensidad=6; end
							if (intensidad==2 or intensidad==6)
								if (enemigo.estado<>_recibir_toss)
									enemigo.paso=2+intensidad;
								end
							end
							if (intensidad>6) intensidad=0; he_dado=1; end
						end
					end
					if (paso==120) vulnerable=0; end
				end
			end
			
			case _special2:
				tipo_ataque=NORMAL;
				if (paso==0)
					signal(enemigo,s_freeze_tree);
					intensidad=0;
					if (enemigo.z<z) enemigo.z=z+1; end
				end
				if (luchador==FIGHTER_KYO)
					if (intensidad==0 or intensidad==-1)
						graph=sp_kyo2[paso++];
						if (paso==sizeof(sp_kyo2)/DIV)
							nuevo_estado=_normal;
							if (enemigo.estado==_recibir_toss)
								enemigo.vulnerable=0;
							end
						end
						if (paso>(sizeof(sp_kyo2)/DIV)-24)
							if (super_sp==1 and move_ok==1 and
								((enemigo.vida>0 and game_mode!=MODE_TRAINING) or
								game_mode==MODE_TRAINING))
								if (enemigo.estado==_recibir_toss)
									enemigo.vulnerable=1;
								end
								paso=0; intensidad=1; vulnerable=0;
								signal(enemigo,s_freeze_tree);
							end
						end
						if (paso==2)
							if (flags) inc_x=-8;
							else inc_x=8; end
							if (flags) special_star(1,x-23,y-114);
							else special_star(1,x+23,y-114); end
							if (super_sp==1) orlas (x,y,z-1,flags,19,1,id); end
							move_ok=1;
							
							get_real_point(1,&hit_x,&hit_y);
							pegata (hit_x,hit_y,0,c_scroll, flags,100,z-1,16,file);
						 
						end
						if (paso<92)
							get_real_point(1,&hit_x,&hit_y);
						end
						if (paso==6)
							play_voice(s_kyo17,512,256);
						end
						if (paso>5 and paso<92)
							if (not control(toss))
								paso=92;
								if (move_ok==1) intensidad=-1; end
							else
								move_ok=0;
							end
						end
						if (paso==6 and super_sp==0) vulnerable=1; end
						if (paso==112) vulnerable=1; end
						if (paso==94) voltear=30;
							if (flags)
								pegata (x+30,y-90,0,c_scroll,3,100,z-1,41,file);
							else
								pegata (x-30,y-90,0,c_scroll,2,100,z-1,41,file);
							end
							if (move_ok==0 and super_sp==1)
								pegata (x,y-70,564,c_scroll,flags,100,z-2,-58,file);
							else
								pegata (x,y-70,564,c_scroll,flags,100,z-2,58,file);
							end
						end
						if (paso==104)
							play_snd (s_flame2,510,250); ive_hit--;
							play_voice(s_kyo18,512,256);
							orlas (x,165,z-3,flags,10,0,id);
						end
						if (paso>103 and inc_x<>0)
							if (abs(enemigo.x-x)>60) x+=inc_x;
							else x+=inc_x-(inc_x/3); end
							if (inc_x>0 and (game_frame%2==0)) inc_x--; end
							if (inc_x<0 and (game_frame%2==0)) inc_x++; end
						end
					end
					if (intensidad==1)
						if (paso==0) hit_y=y-114;
							if (flags)
								pegata (x-40,y-114,0,c_scroll,flags,100,z+1,16,file);
							else
								pegata (x+40,y-114,0,c_scroll,flags,100,z+1,16,file);
							end
						end
						graph=sp_kyo3[paso++];
						if (paso==sizeof(sp_kyo3)/DIV)
							nuevo_estado=_normal;
							if (he_dado==0 and enemigo.estado==_recibir_toss)
								enemigo.vulnerable=0;
							end
						end
						if (paso==2)
							if (flags) inc_x=-8; else inc_x=8; end
							if (flags) special_star(1,x-40,y-114);
							else special_star(1,x+40,y-114); end
							vulnerable=1;
						end
						if (paso==6)
							play_voice(s_kyo11,512,256);
						end
						if (paso==8)
							voltear=30; vulnerable=0;
							if (flags)
								pegata (x,y-60,0,c_scroll,0,100,z+1,41,file);
								pegata (x+32,y-65,564,c_scroll,flags,100,z+2,-57,file);
							else
								pegata (x,y-60,0,c_scroll,1,100,z+1,41,file);
								pegata (x-22,y-65,564,c_scroll,flags,100,z+2,-57,file);
							end
							he_dado=1;
						end
						if (paso>9 and inc_x<>0)
							if (abs(enemigo.x-x)>60) x+=inc_x;
							else x+=inc_x-(inc_x/3); end
							if (inc_x>0 and (game_frame%2==0)) inc_x--; end
							if (inc_x<0 and (game_frame%2==0)) inc_x++; end
						end
						if (paso==14)
							orlas (x-60,y+270,z-3,flags,-10,0,id);
							play_snd (s_flame2,510,250);
						end
						if (paso==20) vulnerable=1; end
					end
					if (super_sp==1)
						prota_shadow (x,y,0);
					end
				end
				
				if (luchador==FIGHTER_ATHENA)
					voltear=15; estatico=1;
					if (intensidad==0)
						if (y==220)
							graph=sp_ath2[paso++];
							if (paso==sizeof(sp_ath2)/DIV)
								nuevo_estado=_normal;
							end
						else
							graph=sp_ath2[paso++]-132;
							if (paso==sizeof(sp_ath2)/DIV)
								nuevo_estado=_saltar; inc_x=0;
								nuevo_paso=29; inc_y=0;
							end
							if (graph==168) graph=27; end
						end
						if (paso==2)
							if (enemigo.x<x) flags=1; else flags=0; end
							if (flags) special_star(1,x,y-75);
							else special_star(1,x,y-75); end
							ive_hit--;
						end
						if (paso==5)
							s_exath=play_snd (s_ath8,512,256);
							if (super_sp==1)
								if (flags)
									pegata (x-19,y-97,184,c_scroll,flags,100,z-1,90,file);
								else
									pegata (x+19,y-97,184,c_scroll,flags,100,z-1,90,file);
								end
							end
							play_voice(s_ath10,512,256);
							orlas (x,y-75,z+2,flags,8,1,id);
							orlas (x,y-75,z+2,flags,9,1,id);
						end
						if (paso>6 and paso<159 and
							is_playing_snd(s_exath)==0)
							s_exath=play_snd (s_ath8,512,256);
						end
						if (paso==9) vulnerable=1; end
						if (control(cuatro) and paso<105)
							if (is_playing_snd(s_exath)) stop_snd(s_exath); end
							stop_voice (id); 
							stop_voice (enemigo);
							paso=159;
						end
						if (paso==159) play_snd (s_ath2,512,256); end
						if (paso>10 and hado<-10 and (control(s_punch) or
							control(l_punch)) and shoryu>-20 and
							paso<159 and not magia) paso=1;
							if (control(l_punch)) intensidad=1; end
							if (control(s_punch)) intensidad=2; end
							signal(enemigo,s_freeze_tree);
							if (is_playing_snd(s_exath)) stop_snd(s_exath); end
							stop_voice (id); 
							stop_voice (enemigo);
						end
						if (paso==5 or //
							enemigo.estado==_normal or 
							enemigo.estado==_rodar)
							cambiar = 0; bloker = 0;
						end
						if (paso>6 and paso<153)
							if (he_dado==1)
								if (flags)
									golpe(x-19,y-97,10,49,188,8+(super_sp*3),1+super_sp,10,8,id);
								else
									golpe(x+19,y-97,10,49,188,8+(super_sp*3),1+super_sp,10,8,id);
								end
							else
								bloker++;
								if (bloker>12 and cambiar<2)
									if (he_dado==0) cambiar++; end
									he_dado = 1;
									bloker = 0;
								end
							end
						end
						if (super_sp==1)
							if (paso>4 and paso<159) graph=112; vulnerable=0; end
							if (y==220)
								if (paso<5) graph=169; end
								if (paso==159 or paso==160 or paso==165 or paso==166) graph=172; vulnerable=1; end
								if (paso==161 or paso==162 or paso==167 or paso==168) graph=173; end
								if (paso==163 or paso==164 or paso==169 or paso==170) graph=174; end
								if (paso>170 and paso<175) graph=171; end
								if (paso>174 and paso<179) graph=170; end
								if (paso>178 and paso<181) graph=169; end
							end	
						end
					end
					if (intensidad==1 or intensidad==2)
						if (paso==9)
							get_real_point (1,&hit_x,&hit_y);
							special_star (10,hit_x,hit_y);
						end
						if (paso==11)
							hadoken (6,hit_x,hit_y,id);
						end
						if (y==220)
							graph=sp_ath3[paso++];
							if (paso==sizeof(sp_ath3)/DIV)
								nuevo_estado=_normal;
							end
						else
							graph=sp_ath3_air[paso++];
							if (paso==sizeof(sp_ath3_air)/DIV)
								nuevo_estado=_saltar; nuevo_paso=15;
								inc_x=0; inc_y=0;
							end
						end
						if (magia and paso<83 and
							intensidad==1 and not control(l_punch))
							if (paso>14) paso=83; end
						end
						if (magia and paso<83 and
							intensidad==2 and not control(s_punch))
							if (paso>14) paso=83; end
						end
						if (paso==83) he_dado=1;
							play_snd (s_ath7,512,256);
							play_voice(s_ath25,512,256);
						end
					end
				end
				if (luchador==FIGHTER_IORI)//usted
					if (intensidad==0) estatico=1;
						graph=sp_iori2[paso++];
						if (paso==sizeof(sp_iori2)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==1)
							if (flags) inc_x=-9; else inc_x=9; end
							if (flags) special_star(1,x-6,y-114);
							else special_star(1,x+6,y-114); end
							voltear=30;
						end
						if (paso==3)
							play_voice(s_iori8,512,256);
						end
						if (paso>10)
							if (((flags and enemigo.x<x) or
								(flags==0 and enemigo.x>x)) and
								(abs(enemigo.x-x)<56) and enemigo.y==220)
								x+=inc_x/2;
							else
								x+=inc_x;
							end
							if (((enemigo.luchador==FIGHTER_IORI and enemigo.paso<25) or
								(enemigo.luchador==FIGHTER_TAKUMA and enemigo.paso<17)) and
								enemigo.estado==_special2 and
								enemigo.super_sp>=super_sp)
								if (id==id_luchador1 and
									enemigo.super_sp<=super_sp)
									if (abs(x-enemigo.x)<80)
										nuevo_estado=_recibir_toss;
										enemigo.estado=_recibir_toss;
										enemigo.paso=0; enemigo.intensidad=0;
										if (flags) inc_x=5; else inc_x=-5;end
										if (enemigo.flags)enemigo.inc_x=5;else enemigo.inc_x=-5;end
										hit_stars(1,(enemigo.x+x)/2,180);
										pantallazo(0); play_snd (s_hit5,512,256);
									end
								end
								
							elseif (paso>12 and he_dado==1 and
								paso<(sizeof(sp_iori2)/DIV)-12)
								if (flags) golpe(x-20,y-50,13,10,706,0,0,0,6,id);
								else golpe(x+20,y-50,13,10,706,0,0,0,6,id); end
								
							end
							
							if (paso==13) vulnerable=1; end
							
							if (paso>12 and paso<35)
								prota_shadow(x,y,0);
							end
							if (he_dado==0 and paso<41)
								intensidad=1; paso=0;
								if (flags) enemigo.flags=0; else enemigo.flags=1; end
								if (enemigo.seconds==1) enemigo.seconds=0; end
								if (super_sp==1)
									pegata (0,0,0,c_screen,0,100,0,43,file);
								end
							end
						end
						if (he_dado==-1 and paso<31) paso=31; end
						if (paso==31) ive_hit--; end
						if (paso>31)
							if (flags)
								if (inc_x<0) inc_x++; end
							else
								if (inc_x>0) inc_x--; end
							end
						end
					end
					if (intensidad==1)
						if (paso==0)
							if (flags) x=enemigo.x+40;
							else x=enemigo.x-40; end						
						end
						if (paso<131)
							if (flags) enemigo.x=x-40;
							else enemigo.x=x+40; end
						end
						graph=sp_iori3[paso++];
						if (paso==sizeof(sp_iori3)/DIV)
							nuevo_estado=_normal; inc_y=0;
						end
						
						if (paso==5)
							enemigo.estado=_normal; enemigo.paso=1;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,4,17,702,-3,1,0,7,id);
						end
						if (paso==13)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,2,17,702,-3,1,0,7,id);
						end
						if (paso==21)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y+24,9,17,706,-3,1,0,7,id);
						end
						if ((paso==11 and super_sp==0) or
							(paso==19 and super_sp==1))
							play_voice(s_iori9,512,256);
						end
						if (paso==31)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,17,706,-3,1,0,7,id);
						end
						if (paso==39)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,9,17,702,-3,1,0,7,id);
						end
						if (paso==47)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,9,17,702,-3,1,0,7,id);
						end
						if (paso==59)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,17,702,-3,1,0,7,id);
						end
						if ((paso==67 or paso==68 or paso==69 or paso==70) and super_sp==1) graph=61; end
						if ((paso==71 or paso==72 or paso==73 or paso==74) and super_sp==1) graph=54; end
						if (paso==75 and super_sp==1) graph=55; end
						if (paso==75)
							get_real_point(1,&hit_x,&hit_y);
							if (super_sp==0) hit_stars(11,hit_x,hit_y); end
							pantallazo(0); 
							enemigo.nuevo_estado=100;
							enemigo.estado=100;
							if (enemigo.luchador==FIGHTER_KYO or enemigo.luchador==FIGHTER_KYO94 or
								enemigo.luchador==FIGHTER_TAKUMA)
								enemigo.graph=424;
							end
							if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON)
								enemigo.graph=433;
							end
							if (enemigo.luchador==FIGHTER_ATHENA)
								enemigo.graph=435;
							end
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
								enemigo.graph=426;
							end
							intensidad=2; inc_y=0;
							if (super_sp==1) paso=0; end
						end
					end
					if (intensidad==2)
						if (super_sp==0)
							graph=sp_iori3[paso++];
							if (paso==sizeof(sp_iori3)/DIV)
								nuevo_estado=_normal;
							end
							if (paso>75 and paso<131)
								enemigo.estado=100; 
								enemigo.nuevo_estado=100;
								enemigo.graph=407;
								if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_KULA)
									enemigo.graph=410;
								end
								if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_K or
									enemigo.luchador==FIGHTER_TERRY94) enemigo.graph=411; end
									if (flags) enemigo.x=x-45;
									else enemigo.x=x+45; end
								end
								if (paso==131)
									
									pegata (hit_x,140,524,c_scroll,flags,100,z-5,29,file);
									tembleque(2,1); play_snd (s_boom,512,256);
									enemigo.estado=_recibir_toss; 
									enemigo.blend_fx=3;
									enemigo.intensidad=0;
									enemigo.hit_combo++;
									if (enemigo==id_luchador1 and
										enemigo.hit_combo==10)
										combos(id_luchador1,2);
									end
									if (enemigo==id_luchador2 and
										enemigo.hit_combo==10)
										combos(id_luchador2,2);
									end
									
									damage = get_real_damage (24);
									enemigo.vida-=damage;
									if (enemigo.file==fich1) damegi1-=damage; end
									if (enemigo.file==fich2) damegi2-=damage; end
									enemigo.paso=0; pantallazo(0);
									
									if (enemigo.vida<=0)
										if (parpadeo_final==0 and 
										game_mode!=MODE_TRAINING)
										pantallazo(10); parpadeo_final=1;
										ralenti(1);
									end
									enemigo.vida=0;
								end
							end
							if (paso==133)
								if (flags) enemigo.inc_x=-9;
								else enemigo.inc_x=9; end
							end
						end
						if (super_sp==1)
							if (paso==0)
								if (flags) hit_stars(11,x-60,y-90);
								else hit_stars(11,x+60,y-90); end
							end
							graph=sp_iori4[paso++];
							if (paso==sizeof(sp_iori4)/DIV)
								nuevo_estado=_normal; magia=0;
							end
							if (graph==330) //aparece agarrado
								enemigo.graph=410;
								enemigo.y=220; enemigo.inc_x=0;
								if (flags)
									enemigo.x=x-60; enemigo.flags=0;
									if (enemigo.x=<16) x=76; enemigo.x=16; end
								else
									enemigo.x=x+60; enemigo.flags=1;
									if (enemigo.x=>739) x=679; enemigo.x=739; end
								end
							end
							if (graph==331)
								enemigo.estado=_recibir_colleja; enemigo.paso=1;
								if (flags)
									enemigo.x=x-70; enemigo.flags=0;
									if (enemigo.x=<16) x=86; enemigo.x=16; end
								else
									enemigo.x=x+70; enemigo.flags=1;
									if (enemigo.x=>739) x=669; enemigo.x=739; end
								end
								if (flags)  //lo que le rota
									magia=orlas (x-40,145,z-5,3,1+intensidad,0,id);
								else
									magia=orlas (x+40,145,z-5,2,1+intensidad,0,id);
								end
								magia.paso=5; play_snd (s_flame1,125,256);
							end
							if (graph==332)
								enemigo.paso=11;//y le empotra
								if (flags)
									enemigo.x=x-85; enemigo.flags=0;
									if (enemigo.x=<16) x=101; enemigo.x=16; end
								else
									enemigo.x=x+85; enemigo.flags=1;
									if (enemigo.x=>739) x=654; enemigo.x=739; end
								end
							end
							
							//temblor chico
							if (paso==7)
								tembleque(1,1); //play_snd (s_fall,200,256);
							end
							if (paso==11)
								if (flags) enemigo.x=x-100;
								else enemigo.x=x+100; end
								get_real_point(1,&hit_x,&hit_y);
								hit_stars(9,hit_x,hit_y);
							end
							if ((paso>12 and  paso<27) or
								(paso>28 and paso<49) or
								(paso>50 and paso<71) or
								(paso>72 and paso<91))
								enemigo.paso=11;
								enemigo.graph=455;
							end
							if (paso==27 or paso==49 or paso==71)
								enemigo.paso=15; tembleque(2,1);
								pantallazo(0); play_snd (s_boom,512,256);
								pegata (hit_x,200,524,c_scroll,flags,100,z-5,29,file);
							end
							//temblor grande
							if (paso==26 or paso==27 or paso==28 or paso==29 or  
								paso==49 or paso==50 or paso==51 or paso==52 or
								paso==71 or paso==72 or paso==73 or paso==74)
								enemigo.graph=454;
							end
							if (paso==91 or paso==92 or paso==93 or 
								paso==94 or paso==95 or paso==96)
								if (paso==91 or paso==92 or paso==93 or paso==94)
									enemigo.estado=_recibir_toss;
									enemigo.paso=17; enemigo.z=z-1;
									enemigo.intensidad=0; enemigo.y=219;
									if (enemigo.luchador==FIGHTER_KYO or
										enemigo.luchador==FIGHTER_ATHENA or
										enemigo.luchador==FIGHTER_KYO94 or
										enemigo.luchador==FIGHTER_KASUMI or
										enemigo.luchador==FIGHTER_TAKUMA or
										enemigo.luchador==FIGHTER_K9999)
										enemigo.graph=456;
									end
									if (enemigo.luchador==FIGHTER_IORI or
										enemigo.luchador==FIGHTER_TERRY or
										enemigo.luchador==FIGHTER_TERRY94 or
										enemigo.luchador==FIGHTER_CRIMSON or
										enemigo.luchador==FIGHTER_KULA)
										enemigo.graph=414; enemigo.paso=12;
										enemigo.flags=flags;
									end
									if (enemigo.luchador<>FIGHTER_IORI and
										enemigo.luchador<>FIGHTER_CRIMSON)
										if (flags) enemigo.x=x-55;
										else enemigo.x=x+55; end
									end
								else
									enemigo.paso=23;
								end
								enemigo.inc_x=0; enemigo.inc_y=0;
								if (paso==95 or paso==96)
									enemigo.y=y;
									if (enemigo.luchador==FIGHTER_IORI or
										enemigo.luchador==FIGHTER_TERRY or
										enemigo.luchador==FIGHTER_TERRY94 or
										enemigo.luchador==FIGHTER_CRIMSON)
										if (flags) enemigo.x=x-35;
										else enemigo.x=x+35; end
									else
										if (flags) enemigo.x=x-25;
										else enemigo.x=x+25; end
									end
									enemigo.flags=flags; enemigo.paso=12;
								end
							end
							if (paso==97)
								enemigo.estado=_recibir_toss; 
								enemigo.intensidad=0;
								enemigo.paso=23; enemigo.inc_x=0;
								enemigo.inc_y=0; enemigo.z=z-1;
								enemigo.y=y-6;
								if (enemigo.luchador==FIGHTER_TERRY or 
									enemigo.luchador==FIGHTER_TERRY94)
									if (flags) enemigo.x=x-15;
									else enemigo.x=x+15; end
								else
									if (flags) enemigo.x=x-5;
									else enemigo.x=x+5; end
								end
								enemigo.inc_y=-12;
								if (flags) enemigo.inc_x=8;
								else enemigo.inc_x=-8; end
								play_snd (s_sjump,512,256);
							end
							if (paso==27 or paso==59 or paso==71)
								enemigo.paso=15; enemigo.hit_combo++;
								if (enemigo==id_luchador1 and
									enemigo.hit_combo==10)
									combos(id_luchador1,2);
								end
								if (enemigo==id_luchador2 and
									enemigo.hit_combo==10)
									combos(id_luchador2,2);
								end
								
								damage = get_real_damage (9+(intensidad*2));
								enemigo.vida-=damage;
								if (enemigo.file==fich1) damegi1-=damage; end
								if (enemigo.file==fich2) damegi2-=damage; end
								
								if (enemigo.vida<=0)
									if (paso==71)
										if (parpadeo_final==0 and 
											game_mode!=MODE_TRAINING)
											pantallazo(10); parpadeo_final=1; 
											ralenti(1);
										end
										enemigo.vida=0;
									else
										enemigo.vida=1;
									end
								end
								if (flags) enemigo.inc_x=-6;
								else enemigo.inc_x=6; end
							end
							if (paso==125)
								if (flags==1) flags=0; else flags=1; end
							end
						end
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					if (intensidad==0)
						graph=final[paso++];
						if (paso==sizeof(final)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==(sizeof(final)/DIV)-4 and super_sp==1 and
							he_dado==0 and enemigo.estado==_recibir_toss)
							intensidad=1; paso=0; enemigo.vulnerable=1;
							signal(enemigo,s_freeze_tree);
						end
						if (paso==1) y=220;
							if (flags) special_star(1,x+25,y-70);
							else special_star(1,x-25,y-70); end
							play_voice(s_terry19,512,256);
							vulnerable=1;
						end
						if (paso==5)
							play_snd (s_terry1,512,256);
							play_voice(s_terry12,512,256);
						end
						if (paso>8 and paso<23)
							x+=inc_x;
							if (flags) inc_x=-10; else inc_x=+10; end
							if (get_real_point(1,&hit_x,&hit_y));
								if (paso==13 or paso==17 and !SLOW_MACHINE)
									pegata (hit_x,hit_y,532,c_scroll,flags,100,z-4,40,file);
								end
								if (paso==11 or paso==15 or paso==19)
									pegata (hit_x,hit_y,533,c_scroll,flags,100,z-4,39,file);
								end
							end
							if (he_dado==1)
								get_real_point(1,&x0,&y0);
								if (enemigo.y<220 or (enemigo.estado>22 and enemigo.estado<30))
									golpe(hit_x,hit_y,10,14,534,4,1,0,10,id);
								else
									golpe(hit_x,hit_y,1,14,534,6,1,0,12,id);
								end
							else
								if (paso==21)
									golpe(enemigo.x,y0,-7,15,534,6,1,5,24,id);
								elseif (game_frame%2==0)
									golpe(enemigo.x,y0,10,14,534,6,1,5,0,id);
								end
								ive_hit--;
								if (enemigo.estado==_recibir_toss)
									if (paso<19) enemigo.paso=13;
										enemigo.vulnerable=1;
										if (enemigo.y>160) enemigo.inc_y=-2;
										else enemigo.inc_y=-7; end
									end
									if (paso==11) enemigo.vulnerable=0; end
								end
							end
							if (he_dado==-1) paso=23; end
						end
						if (paso>22 and paso<35)
							if (inc_x>0) inc_x--; end
							if (inc_x<0) inc_x++; end
							if (enemigo.x<x) flags=1; end
							if (enemigo.x>x) flags=0; end
							if (inc_x>0 and flags==1) inc_y=0; end
							if (inc_x<0 and flags==0) inc_y=0; end
							if (inc_x>0 and flags==0) inc_y=1; end
							if (inc_x<0 and flags==1) inc_y=1; end
							if (inc_y==0)
								if (graph==109) graph=135; end
							end
							if (paso==23)
								play_snd (s_dash,512,256);
								pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
								if (enemigo.estado==_recibir_toss and
									he_dado==2 and super_sp==1)
									if (flags)
										enemigo.inc_x=abs(enemigo.x-x)/10;
									else
										enemigo.inc_x=-abs(enemigo.x-x)/10;
									end
								end
							end
						end
						if (paso>22) x+=inc_x; end
					end
					if (intensidad==1)
						if (paso==0)
							if (flags) x-=24; else x+=24; end he_dado=1;
						end
						graph=spinning[paso++];
						if (paso>26) graph=117; end
						if (paso==sizeof(spinning)/DIV) paso--; end
						if (paso==3)
							inc_y=-12; play_snd (s_terry3,512,256);
							if (enemigo.vida>0 or
								(enemigo.vida=<0 and game_mode==MODE_TRAINING))
								if (flags) special_star(1,x-5,y-35);
								else special_star(1,x+5,y-35); end
							else
								signal(enemigo,s_wakeup_tree);
							end
						end
						if (paso==6) vulnerable=0; end
						if (paso>6 and paso<19)
							if (paso%2==1)
								get_real_point(1,&hit_x,&hit_y);
								golpe(hit_x,enemigo.y,10,14,532,3,1,5,1,id);
							end    
							if (flags) x--; else x++; end
						end
						if (paso==19)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,y-45,10,14,532,3,1,5,10,id);
							if (flags) x--; else x++; end
						end
						if (paso==9 or paso==13 and !SLOW_MACHINE)
							pegata (x,y-140,532,c_scroll,flags,100,z-4,40,file);
						end
						if (paso==7 or paso==11 or paso==15)
							pegata (x,y-140,533,c_scroll,flags,100,z-4,39,file);
						end
						if (paso>6)
							if (game_frame%2==0) inc_y++; end 
							y+=inc_y;
							if (y==220) y+=1; end
							if (y>220)
								y=220; inc_y=0; play_snd (s_floor,350,256);
								nuevo_estado=_agachar;
								if (he_dado==0 and enemigo.estado==_recibir_toss)
									enemigo.vulnerable=0;
								end
							end
							if (paso<15 and he_dado==0 and enemigo.vida>0 and
								enemigo.estado==_recibir_toss)
								enemigo.paso=13; enemigo.vulnerable=1;
								enemigo.inc_x=0; enemigo.inc_y=-10;
							end
						end
					end
				end
				if (luchador==FIGHTER_CRIMSON)
					tipo_ataque=alto;
					if (intensidad==0)
						if (paso==1)
							if (flags) special_star(1,x-35,y-40);
							else special_star(1,x+35,y-40); end
							inc_y=-8; 
							if (flags) inc_x=-6; else inc_x=6; end 
							vulnerable=1; ive_hit--;
						end
						
						if (graph<376)
							if (abs(enemigo.x-x)>50 and (enemigo.atravesar==0))
								x+=inc_x;
							end
								
							if (graph>366 and graph<376) 
								y+=inc_y;
								if (y>220) y=220; end
								if (paso%3<2) inc_y++; end
							end    
						end
					  
						graph=spk_crimson2[paso++];
						if (paso==sizeof(spk_crimson2)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==28)
							if (flags) hit_x=x-60; else hit_x=x+60; end
							hit_y = y-65;
							orlas (hit_x,hit_y,z-1,flags,17,0,id);
							play_snd (s_flame1,250,256);
							play_voice(s_iori26,512,256);
							play_snd (s_floor,512,256);
						  
						end                  
					  
						if (paso==35 and he_dado==0 and enemigo.y==220 and
							(enemigo.vida>0 or game_mode==MODE_TRAINING))
							if (enemigo.estado==_recibir_toss)
								enemigo.estado=_recibir_fuertes_bozo;
							end
							enemigo.vulnerable=1; paso=0; intensidad=1;
						end
					end
					if (intensidad==1)
						if (paso<12)
							if (flags) enemigo.x=x-45;
							else enemigo.x=x+45; end
						end
						if (super_sp==0)
							graph=sp_crimson[paso++];
							if (paso==sizeof(sp_crimson)/DIV)
								nuevo_estado=_normal;
								if (he_dado==0 and enemigo.estado==_recibir_toss)
									enemigo.vulnerable=0;
								end
							end
						end
						if (super_sp==1)
							graph=sp_crimson3[paso++];
							if (paso==sizeof(sp_crimson3)/DIV)
								nuevo_estado=_normal;
								if (he_dado==0 and enemigo.estado==_recibir_toss)
									enemigo.vulnerable=0;
								end
							end
						end
						if (paso<85 and enemigo.vida<=0) enemigo.vida=1; end
						if (paso>484 and enemigo.vida<0) enemigo.vida=0; end
						if (paso==7)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,2,26,703,3,1,0,8,id);
							if (flags)
								pegata (x-55,y-75,graph,c_scroll,1,100,z-5,-52,file);
							else
								pegata (x+55,y-75,graph,c_scroll,0,100,z-5,-52,file);
							end
							play_voice(s_iori15,512,256);
						end
						if (paso==13)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,4,26,702,3,1,0,8,id);
							play_voice(s_iori20,512,256);
						end
						if (paso==15)
							if (he_dado==0) enemigo.inc_x=0; he_dado=1; end
							if (flags)
								pegata (x-10,y-25,graph,c_scroll,0,100,z-5,52,file);
							else
								pegata (x+10,y-25,graph,c_scroll,1,100,z-5,52,file);
							end
						end
						if (paso==19 or (super_sp==1 and paso==35))
							get_real_point(1,&hit_x,&hit_y);
							if (super_sp==0 or (super_sp==1 and paso==35))
								golpe(hit_x,hit_y,9,28,706,20,3,20,18,id);
							else
								golpe(hit_x,hit_y,9,28,706,7,1,0,12,id);                        
							end
							inc_y=-9;
							if (flags) x-=12; else x+=12; end
							if (he_dado==0 and enemigo.estado>29 and
								enemigo.estado<39) tembleque(2,1);
							end
								play_voice(s_iori13,512,256);
							if (he_dado==0) enemigo.inc_x=0; end
						end
						if (super_sp==0)
							if (paso==21) he_dado=1;
								get_real_point(1,&hit_x,&hit_y);
								golpe(hit_x,hit_y,10,28,703,14,1,10,14,id);
								pegata (hit_x,hit_y,502,c_scroll,flags,100,z-100,67,file);
							end
							if (paso==23)
								pegata (hit_x,hit_y,520,c_scroll,flags,100,z-100,67,file);
							end
							if (paso<21 and enemigo.vida<=0) enemigo.vida=1; end
							if (paso=>21 and enemigo.vida<2 and he_dado==0)
								enemigo.vida=0;
							end
							if (paso>22 and paso<45) 
								if (game_frame%2==0) inc_y++; end y+=inc_y;
								if (paso==44 and y<200) paso--; end
							end
							if (paso==45) y=220; end
						end
						if (super_sp==1)
							if (paso==21 or paso==27)
								get_real_point(1,&hit_x,&hit_y);
								golpe(hit_x,hit_y,2,28,703,7,1,10,8,id);
								pegata (hit_x,hit_y,502,c_scroll,flags,100,z-100,67,file);
							end
							if (paso==23 or paso==29)
								pegata (hit_x,hit_y,520,c_scroll,flags,100,z-100,67,file);
							end
							if (paso>20 and paso<33)
								if (flags) x-=4; else x+=4; end
							end
							if (paso==37) he_dado=1;
								if (enemigo.estado==_recibir_fuertes_agachado)
									enemigo.estado=_recibir_fuertes_bozo;
								end
								get_real_point(1,&Hit_x,&hit_y);
								orlas (hit_x,hit_y-15,z-5,flags,2,0,id);
							end
							if (paso==41)
								if (flags)
									orlas (hit_x-10,hit_y-15,z-5,flags,12,0,id);
								else
									orlas (hit_x+10,hit_y-15,z-5,flags,12,0,id);
								end
							end
							if (paso<39 and enemigo.vida<=0) enemigo.vida=1; end
							if (paso>39 and enemigo.vida<2 and he_dado==0)
								enemigo.vida=0;
							end
							if (paso>38 and paso<61) 
								if (game_frame%2==0) inc_y++; end 
								y+=inc_y;
								if (paso==59 and y<200) paso--; end
							end
							if (paso==61) y=220; end
							if (paso>76)
								if (control(avanzar))
									nuevo_estado=_avanzar;
								end
								if (control(retroceder))
									nuevo_estado=_retroceder;
								end
								if (control(agachar))
									nuevo_estado=_agachar;
								end
							end
							if (he_dado==0 and paso<51) enemigo.vulnerable=1; end
						end
					end
				end
				if (luchador==FIGHTER_KYO94)
					graph=sp_kyo2[paso++];
					if (paso==sizeof(sp_kyo2)/DIV)
						nuevo_estado=_normal;
						if (enemigo.estado==_recibir_toss)
							enemigo.vulnerable=0;
						end
					end
					if (paso==2)
						if (flags) inc_x=-8; special_star(1,x-23,y-114);
						else inc_x=8; special_star(1,x+23,y-114); end
						move_ok=1;
					end
					if (paso==3)
						get_real_point(1,&hit_x,&hit_y);
						pegata (hit_x,hit_y,0,c_scroll,flags,100,z-1,16,file);
					end
					if (paso==5)
						play_voice(s_kyo17,512,256);
					end
					if (paso>5 and paso<92)
						if (not control(toss)) paso=92; end
					end
					if (paso==5 and super_sp==0)  vulnerable=1; end
					if (paso==109 and super_sp==1) vulnerable=1; end
					
					if (paso==94) 
						voltear=30;
						if (flags)
							pegata (x+30,y-90,0,c_scroll,3,100,z-1,41,file);
						else
							pegata (x-30,y-90,0,c_scroll,2,100,z-1,41,file);
						end
						if (super_sp==1)
							pegata (x,y-70,564,c_scroll,flags,100,z-2,-58,file);
						else
							pegata (x,y-70,564,c_scroll,flags,100,z-2,58,file);
						end
					end
					if (paso==101)
						play_snd (s_flame2,510,250); ive_hit--;
						play_voice (s_kyo18,512,256);
						orlas (x-50,y-80,z-3,flags,24,0,id);
					end
					if (paso==105)
						if (super_sp==1) orlas (x-60,y-80,z-3,flags,25,0,id); end
					end
					if (paso==109)
						if (super_sp==1) orlas (x-70,y-80,z-3,flags,26,0,id); end
					end
					if (he_dado==0 and paso>100 and enemigo.paso<5)
						enemigo.paso=5;
						if (flags) enemigo.inc_x=-4; else enemigo.inc_x=4; end
						enemigo.inc_y=-10; enemigo.vulnerable=1;
					end
					if (he_dado==0 and paso<99)
						if (enemigo.inc_x>0) enemigo.inc_x=3; end
						if (enemigo.inc_x<0) enemigo.inc_x=-3; end
					end
					if (paso>103 and inc_x<>0)
						if (abs(enemigo.x-x)>60) x+=inc_x;
						else x+=inc_x-(inc_x/3); end
						if (inc_x>0 and (game_frame%2==0)) inc_x-=1; end
						if (inc_x<0 and (game_frame%2==0)) inc_x+=1; end
					end
				end
				if (luchador==FIGHTER_KASUMI)
					if (intensidad==0)
						if (paso==0) guardia=8; vulnerable=1; end
						if (paso==1)
							play_voice(s_kasumi3,512,256);
							if (flags) special_star(1,x-10,y-60);
							else special_star(1,x+10,y-60); end
						end
						graph=spkasumi1[paso++];
						if (paso==sizeof(spkasumi1)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==(sizeof(spkasumi1)/DIV)-3) guardia=0; end
					end
					if (intensidad==1)
						graph=spkasumi3[paso++];
						if (paso==sizeof(spkasumi3)/DIV)
							if (enemigo.vida<=0)
								nuevo_estado=_normal;
							else
								intensidad=3; paso=1;
								if (flags) hit_stars(11,x-24,y-65);
								else hit_stars(11,x+24,y-65); end
							end
						end
						if (enemigo.seconds==1) enemigo.seconds=0; end
						
						if (enemigo.vida=<0) inc_y=1; end
						if (paso==3)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,150,4,14,503,-3,1,3,10,id);
						end
						if (paso==11)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,125,1,14,503,-3,1,3,4,id);
						end
						if (paso==15)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,125,1,14,503,-3,1,3,4,id);
						end
						if (paso==23)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,150,4,14,503,-3,1,3,20,id);
						end
						if (enemigo.vida>0) enemigo.inc_x=0; end
					end
					if (intensidad==2)
						guardia=0; enemigo.y=220;
						if (enemigo.x<x) flags=1; else flags=0; end
						if (flags) enemigo.flags=0; enemigo.x=x-45;
						else enemigo.flags=1; enemigo.x=x+45; end
						if (super_sp==0) intensidad=3; end
						if (super_sp==1) intensidad=1; end
					end
					if (intensidad==3)
						if (paso==1)
							enemigo.estado=100; 
							enemigo.nuevo_estado=100;
							enemigo.z=z+1; inc_x=50;
							if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON or enemigo.luchador==FIGHTER_KASUMI)
								enemigo.graph=410;
							else
								enemigo.graph=411;
							end
							if (super_sp==1) paso=4; end
						end
						graph=spkasumi2[paso++];
						if (paso==sizeof(spkasumi2)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==3) inc_y=4; end
						if (paso==17) inc_x=30; inc_y=-6; end
						if (paso==19) inc_x=25; inc_y=-12; end
						if (paso==21) inc_y=-18;
							enemigo.graph=405; inc_x=20; play_snd (s_dash,420,256);
						end
						if (paso==23) inc_x=15; inc_y=-25; end
						if (paso==25) inc_x=5;  inc_y=-34; end
						if (paso==27)
							enemigo.graph=402; inc_x=-25; inc_y=-53;
						end
						if (paso==29) inc_x=-35; inc_y=-52; end
						if (paso==31) inc_x=-40; inc_y=-53; end
						if (paso==33) inc_x=-45; inc_y=-55; end
						if (paso==35)
							enemigo.graph++; inc_x=-40; inc_y=-53;
							play_snd (s_sjump,256,180); play_snd (s_sjump,512,180);
						end
						if (paso==41 or paso==43)
							enemigo.graph=418;
							if (paso==39) enemigo.y=205; inc_x=-20; end
						end
						if (paso==45 or paso==47) inc_y=-38;
							enemigo.graph=423; enemigo.y=160; inc_x=-10;
						end
						if (paso==49)
							enemigo.graph=418; inc_y=-40;
							enemigo.angle=90000; inc_x=-15; enemigo.y=145;
						end
						if (paso==51) inc_y=6; enemigo.hit_combo++;
							enemigo.angle=0; enemigo.graph=453;
							enemigo.y=220; inc_x=90; tembleque(2,1);
							play_snd (s_fall,512,256); hit_stars(9,enemigo.x,220);
							
							damage = get_real_damage (10);
							enemigo.vida-=damage;
							
							if (enemigo.file==fich1)
								if (super_sp==0) damegi1=0; end
								damegi1-=damage;
							end
							if (enemigo.file==fich2)
								if (super_sp==0) damegi2=0; end
								damegi2-=damage;
							end
							if (enemigo.vida<0) enemigo.vida=1; end
						end
						if (paso==53) inc_y=0; end
						if (paso==59 or paso==61) enemigo.graph++; end
						if (paso==71)
							play_voice(s_kasumi11,512,256);
						end
						if (paso==75) tembleque(2,1);
							if (flags) hit_x=x-40; else hit_x=x+40; end
							hit_stars(18,hit_x,215); hit_stars(9,enemigo.x,220);
							play_snd (s_megahit,512,256); enemigo.angle=180000;
							enemigo.y=170; enemigo.inc_y=-5; enemigo.graph=423;
							
							damage = get_real_damage (20);
							enemigo.vida-=damage; enemigo.hit_combo++;
							if (enemigo.file==fich1)
								damegi1-=damage;
								if (super_sp==0) combos(id_luchador1,1); end
							end
							if (enemigo.file==fich2)
								damegi2-=damage;
								if (super_sp==0) combos(id_luchador2,1); end
							end
							
							if (enemigo.vida<=0) 
								enemigo.vida=0;
								if (game_mode!=MODE_TRAINING and parpadeo_final==0) 
									pantallazo(10); parpadeo_final=1; ralenti(1);
								end	
							end
						end
						if (paso<75)
							if (flags) enemigo.x=x-inc_x;
							else enemigo.x=x+inc_x; end
							if (flags) camara_x=inc_y;
							else camara_x=-inc_y; end
						end
						if (paso==77 or paso==81 or paso==85 or
							paso==89 or paso==93 or paso==97)
							enemigo.y+=3;
						end
						if (paso==79 or paso==83 or paso==87 or
							paso==91 or paso==95 or paso==99)
							enemigo.y-=3;
						end
						if (paso==91)
							if (enemigo.vida==0 and 
								setwin==asaltos-1 and
								game_mode!=MODE_TRAINING)
								partido(0);
							end
						end
						if (paso==99) enemigo.y=220; end
						if (paso>98 and paso<115)
							enemigo.angle=0; 
							enemigo.graph=454;
							enemigo.y+=enemigo.inc_y; 
							if (game_frame%2==0) enemigo.inc_y++; end
							if (flags) enemigo.x-=4; else enemigo.x+=4; end
						end
						if (paso==117) enemigo.y=220;
							enemigo.estado=_recibir_colleja;
							enemigo.paso=19; 
							enemigo.graph=455;
							hit_stars(9,enemigo.x,220);
							play_snd (s_fall,360,256);
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					if (intensidad==0) intensidad=1; end
					if (intensidad==1)
						if (paso==1) inc_y=-3;
							if (flags) special_star(1,x-20,y-80); inc_x=-12;
							else special_star(1,x+20,y-80); inc_x=12; end
						end
						if (paso==3)
							play_voice(s_takuma16,512,256);
						end
						graph=sp_takuma1[paso++];
						if (paso==sizeof(sp_takuma1)/DIV)
							nuevo_estado=_normal;
						end
						if (paso==11) play_snd (s_sjump,512,200); play_snd (s_sjump,312,200); end
						if (paso>10 and paso<33) x+=inc_x; y+=inc_y; 
							if (paso%3==0) inc_y++; end
							if (paso>20)
								if (inc_x>0) inc_x--; end
								if (inc_x<0) inc_x++; end
							end
							get_real_point(1,&hit_x,&hit_y);
							if (((enemigo.luchador==FIGHTER_IORI and enemigo.paso<25) or
								(enemigo.luchador==FIGHTER_TAKUMA and enemigo.paso<27)) and
								enemigo.estado==_special2 and
								enemigo.super_sp>=super_sp)
								if (id==id_luchador1 and enemigo.super_sp<=super_sp)
									if (abs(x-enemigo.x)<80)
										nuevo_estado=_recibir_toss;
										enemigo.estado=_recibir_toss;
										enemigo.paso=0; enemigo.intensidad=0;
										if (flags) inc_x=5; else inc_x=-5; end
										if (enemigo.flags) enemigo.inc_x=5; else enemigo.inc_x=-5; end
										hit_stars(1,(enemigo.x+x)/2,180);
										pantallazo(0); play_snd (s_hit5,512,256);
									end
								end
							else
								if (paso<31) golpe(hit_x,hit_y,13,4,512,0,1,0,7,id); end
							end
							if (he_dado==0) enemigo.paso=0; enemigo.y=220;
								enemigo.estado=_recibir_fuertes_bozo; y=220;
								intensidad=2; paso=0; estatico=1;
								if (enemigo.seconds==1) enemigo.seconds=0; end
								if (flags) enemigo.x=x-55;
								else enemigo.x=x+55; end
								if (super_sp==1) intensidad=3; end
							end
							if (he_dado==-1 and paso<31) paso=31; y=220; end
						end
						if (paso==33) y=220; end
						if (paso=>31 and paso<=37)
							if (flags) x-=(37-paso); else x+=(37-paso); end
						end
						if (paso==11) vulnerable=1; end
					end
					if (intensidad==2)
						graph=sp_takuma2[paso++];
						if (paso==sizeof(sp_takuma2)/DIV)
							nuevo_estado=_normal; estatico=0;
						end
						if (paso==3 or paso==11 or paso==33 or
							paso==41 or paso==59 or paso==65)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,12,515,-1,0,0,6,id);
						end
						if (paso==23 or paso==49)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,4,14,518,-1,0,0,6,id);
						end
						if (paso<73) enemigo.inc_x=0; end
						if (paso==73)
							play_snd (s_sjump,512,210); play_snd (s_sjump,512,210);
							enemigo.estado=_pajaritos; enemigo.paso=0; inc_y=-5;
						end
						if (paso>72 and paso<83)
							if (flags) x+=5; else x-=5; end
							y+=inc_y; 
							if (game_frame%2==0) inc_y++; end
							if (paso==81 and y<220) paso--; end
							if (y>220) y=220; end
						end
						if (paso==89) inc_x=12;
							get_real_point(1,&hit_x,&hit_y);
							hadoken(11,hit_x,hit_y,id);
						end
					end
					if (intensidad==3)
						graph=sp_takuma6[paso++];
						if (paso==sizeof(sp_takuma6)/DIV)
							nuevo_estado=_normal; estatico=0;
						end
						if (paso==11 or paso==17 or paso==59 or
							paso==67 or paso==89)
							get_real_point(1,&hit_x,&hit_y);
							hit_x=abs(x+enemigo.x)/2;
							golpe(hit_x,hit_y,1,12,518,-1,0,0,5,id);
						end
						if (paso==23 or paso==33 or paso==47 or
							paso==77 or paso==3)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,4,14,518,-1,0,0,7,id);
						end
						if (paso<147) enemigo.inc_x=0;
							if (enemigo.vida<=0) enemigo.vida=1; end
						end
						if (paso==97)
							play_snd (s_sjump,512,210); play_snd (s_sjump,512,210);
							enemigo.estado=_pajaritos; enemigo.paso=0; inc_y=-5;
						end
						if (paso>96 and paso<107)
							if (flags) x+=5; else x-=5; end
							y+=inc_y; 
							if (game_frame%2==0) inc_y++; end
							if (paso==105 and y<220) paso--; end
							if (y>220) y=220; end
						end
						if (paso==113 or paso==129 or paso==145) inc_x=12;
							get_real_point(1,&hit_x,&hit_y);
							hadoken(12,hit_x,hit_y,id);
						end
					end
					if ((intensidad==2 and paso==77) or
						(intensidad==3 and paso==109))
						play_voice(s_takuma17,512,256);
					end
				end
				if (luchador==FIGHTER_K)//macarra de barrio
					if (intensidad<3)
						graph=special_k2[paso++];
						if (paso==58 or paso==102 or paso==sizeof(special_k2)/DIV)
							nuevo_estado=_normal;
							vulnerable=0;
						end
						if (paso==1) vulnerable=1; inc_x=12;
							if (flags) special_star(1,x+10,y-95);
							else special_star(1,x-10,y-95); end
							intensidad=super_sp;
						end
						if (paso==19)
							get_real_point(1,&hit_x,&hit_y);
							pegata (hit_x,hit_y,284,c_scroll,flags,100,z,110,file);
						end
						if (paso<59 and he_dado<>1)
							paso=59; graph=0;
							inc_x=abs(x-enemigo.x)/12;
							if (flags) inc_x=-inc_x; end
							pegata (x,y,274,c_scroll,flags,100,z,109,file);
						end
						if (paso>59 and paso<79 and he_dado==0 and enemigo.y==220 and enemigo.paso==6)
							enemigo.paso-=2;
						end
						if (paso>70 and paso<81) x+=inc_x; end
						if (paso==79 and he_dado==0 and enemigo.y==220)
							if (flags) hit_x=x-50; else hit_x=x+50; end
							golpe(hit_x,150,4,15,517,-1,1,3,4-intensidad,id);
						end
						if (paso==87) he_dado=1;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,12,517,-3,1,3,4-intensidad,id);
						end
						if (paso==101 and he_dado==0 and enemigo.y==220 and
							(enemigo.vida>0 or game_mode==MODE_TRAINING))
							paso=107; graph=139;
						end
						if (paso==111)
							if (he_dado==0)
								enemigo.estado=30; enemigo.graph=402;
							end
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,11+(super_sp*10),
							517,-3,1,3,4-intensidad,id);
						end
						if (paso==119)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,11+(super_sp*10),
							517,-3,1,3,4-intensidad,id);
						end
						if (paso==132)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,4,13+(super_sp*10),
							517,-3,1,3,4-intensidad,id);
						end
						if (paso==143)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,4,13+(super_sp*10),
							517,-3,1,3,4-intensidad,id);
						end
						if (paso==151)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,12+(super_sp*10),
							517,-2,1,3,4-intensidad,id);
						end
						if (paso==163)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,4,14+(super_sp*10),
							517,-2,1,3,4-intensidad,id);
						end
						if (paso==173)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y+5,1,12+(super_sp*10),
							517,-2,1,3,4-intensidad,id);
						end
						if (paso==187) enemigo.z=2; z=0; end
						if (paso==189)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y+5,1,14+(super_sp*10),
							517,-2,1,3,4-intensidad,id);
						end
						if (paso==191) enemigo.z=-1; z=0; end
						if (paso==199 or paso==201) enemigo.z=0;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,12+(super_sp*10),
							517,-3,1,3,5-intensidad,id);
						end
						if (paso==203 and super_sp==1)
							if (intensidad==1) paso=103; intensidad=2;
							else intensidad=3; paso=0; end
						end
						if (paso>202 and paso<219)
							if (enemigo.vida<=0) enemigo.vida=1; end
							if (enemigo.paso>3) enemigo.paso=2; end							
						end
						if (paso==219) voz=2;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,7,50,517,10,1,2,16,id);
						end
					end
					if (intensidad==3)
						graph=super_k[paso++];
						if (paso==sizeof(super_k)/DIV)
							nuevo_estado=_normal; intensidad=0;
						end
						if (paso==5)
							pegata (x,y,127,c_scroll,flags,100,z,111,file);
							if (flags) hit_x=x-45; else hit_x=x+45; end
							hit_y=145;
						end
						if (paso==9)
							golpe(hit_x,hit_y,1,28,503,5,1,2,30,id);
						end
						if (paso>8 and paso<23)
							if (enemigo.vida<=0) enemigo.vida=1; end
							if (enemigo.paso==4) enemigo.paso=2; end
						end
						if (paso==23)
							golpe(hit_x,hit_y,-7,28,503,5,1,2,21,id);
						end
					end
				end
				if (luchador==FIGHTER_KULA)
					graph=shiranai[paso++];
					if (paso==sizeof(shiranai)/DIV)
						nuevo_estado=_normal;vulnerable=0;
					end
					if (paso==1) y1=2;
						if (flags) special_star(1,x-22,y-52);
						else special_star(1,x+22,y-52); end
					end
					if (paso==5)
						play_voice(s_kura27,412,256);
					end
					if (paso==7)
						if (flags) hit_x=enemigo.x+100;
						else hit_x=enemigo.x-100; end
						pegata (hit_x,205,625,c_scroll,flags+4,100,z-3,131,file);
					end
					if (paso==11)  vulnerable=1;  end
					if (paso==48) pantallazo(2); end
					if (paso>48)
						if (he_dado==0) enemigo.vulnerable=1; end
						if (super_sp==0 and he_dado==1 and paso<64)
							golpe(rand(enemigo.x-10, enemigo.x+10),
							rand(enemigo.y-30,enemigo.y-120),
							10,60,700,20,1,2,1,id);
						end
						if (super_sp==1 and he_dado<>-1 and paso<127)
							if (he_dado==0 and y1>0)
								enemigo.vulnerable=1; y1--; he_dado=1;
							end
							if (he_dado==1)
								golpe(rand(enemigo.x-10, enemigo.x+10),
								rand(enemigo.y-30,enemigo.y-120),
								10,60,700,10,1,2,1,id);
							end
						end
						if (he_dado==-1)
							if (paso==53 or paso==59 or paso==65 or
								paso==71 or paso==77)
								he_dado=1;
							end
							if (super_sp==1)
								if (paso==83 or paso==89 or paso==95 or
									paso==101 or paso==107)
									he_dado=1;
								end
							end
						end
					end
				end
				if (luchador==FIGHTER_K9999)//ayudameee kaneeedaaaaa
					hit_x=enemigo.x;
					if (flags)
						if (hit_x<x-25-(hit_y/2)) hit_x=x-25-(hit_y/2); end
						if (hit_x>x+10) hit_x=x+10; end
					else
						if (hit_x>x+25+(hit_y/2)) hit_x=x+25+(hit_y/2); end
						if (hit_x<x-10) hit_x=x-10; end
					end
					hit_y=enemigo.y-50;
					if (hit_y<80) hit_y=80; end
					
					if (super_sp==0)
						graph=special_ts2[paso++];
						if (paso==sizeof(special_ts2)/DIV)
							nuevo_estado=_normal; vulnerable=0;
						end
						if ((paso>23 and paso<60) and he_dado==1)
							golpe(hit_x,hit_y,-7,50,521,32,1,12,0,id);
						end
						if (paso==61) vulnerable=1; end
						
					else
						graph=special_ts3[paso++];
						if (paso==sizeof(special_ts3)/DIV)
							nuevo_estado=_normal; vulnerable=0;
						end
						if ((paso>23 and paso<86) and he_dado==1)
							golpe(hit_x,hit_y,-7,50,521,16,1,12,0,id);
						end
						if (paso==91) vulnerable=1; end
					end
					if (paso==1)
						if (flags) special_star(1,x+10,165);
						else special_star(1,x-10,165); end
					end
					if (paso==5)
						pegata (x,y,graph,c_scroll,flags,
						size,z,140+super_sp,file);
						play_voice(s_tetsuo18,412,256);
					end
					if (he_dado!=1) ive_hit++;
						if (ive_hit>9) ive_hit=0; he_dado=1; end
					end
				end
				if (super_sp==1)
					prota_shadow(x,y,0);
				end
			end
			case _ganar://shori
				if (paso==0)
					tipo_ataque=NULO;
					if (intensidad>2 or intensidad<0)
						intensidad=rand(0,2);
					end
					if (id_luchador1.setwin==2) wins1++; end
					if (id_luchador2.setwin==2) wins2++; end
				end
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94)
					if (intensidad==0)//oreno
						graph=oreno[paso++];
						if (paso==sizeof(oreno)/DIV) paso--; end
						if (paso==(sizeof(oreno)/DIV)-2)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
						if (paso==1) play_snd (s_kyo3,512,256); end
						if (paso==60) play_snd (s_kyo4,512,256); end
					end
					if (intensidad==1)//anta
						graph=anta[paso++];
						if (paso==sizeof(anta)/DIV) paso--; end
						if (paso==(sizeof(anta)/DIV)-2)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
						if (paso==1 or paso==8)
							if (flags) x+=4; else x-=4; end
						end
						if (paso==56)
							if (flags) x-=4; else x+=4; end
						end
						if (paso==48) play_snd (s_kyo5,512,256); end
					end
					//moetarou
					if (intensidad==2) 
						graph=moetarou[paso++];
						if (paso==sizeof(moetarou)/DIV) paso--; end
						if (paso>7 and paso<41)
							get_real_point(1,&hit_x,&hit_y);
						end
						if (paso==8)
							play_snd (s_kyo6,512,256);
							pegata (hit_x,hit_y,500,c_scroll,flags,100,z-2,42,file);
						end
						if (paso==42) play_snd (s_kyo7,512,256); end
						if (paso==(sizeof(moetarou)/DIV)-2)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
						if (paso==1 or paso==8)
							if (flags) x+=4; else x-=4; end
						end
					end
				end
				if (luchador==FIGHTER_ATHENA)
					if (intensidad==0)//yatta
						graph=yatta[paso++];
						if (paso==sizeof(yatta)/DIV) paso--; end
						if (paso==65 or paso==69 or paso==73)
							if (flags) x-=8; else x+=8; end
						end
						if (paso==5) play_snd (s_ath14,512,256); end
						if (paso==(sizeof(yatta)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==1)//dedos
						graph=dedos[paso++];
						if (paso==sizeof(dedos)/DIV) paso--; end
						if (paso==15) play_snd (s_ath15,512,256); end
						if (paso==(sizeof(dedos)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==2)//makenai
						graph=makenai[paso++];
						if (paso==sizeof(makenai)/DIV) paso--; end
						if (paso==3) play_snd (s_ath16,512,256); end
						if (paso==(sizeof(makenai)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
				end
				if (luchador==FIGHTER_IORI)//USTED
					if (intensidad==0)//sono
						graph=sono[paso++];
						if (paso==sizeof(sono)/DIV) paso--; end
						if (paso==3) play_snd (s_iori2,512,256); end
						if (paso==(sizeof(sono)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==1)//risillas
						graph=risillas[paso++];
						if (paso==sizeof(risillas)/DIV) paso-=12; end
						if (paso==2) play_snd (s_iori4,512,256); end
						if (paso==(sizeof(risillas)/DIV)-16)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==2)//tsuki
						graph=tsuki[paso++];
						if (paso==sizeof(tsuki)/DIV) paso--; end
						if (paso>40) get_real_point(1,&hit_x,&hit_y); end
						if (paso==58)
							pegata (hit_x,hit_y,0,c_scroll,flags,100,x-1,71,file);
							play_snd (s_iori3,512,256);
						end
						if (paso==(sizeof(tsuki)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
				end
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_TERRY94)
					if (intensidad==0)//ok
						graph=ok[paso++];
						if (paso==sizeof(ok)/DIV) paso--; end
						if (paso==13)
								play_voice(s_terry21,512,256);
						end
						if (paso==28)
							get_real_point(1,&hit_x,&hit_y);
							pegata (hit_X,hit_Y,525,CTYPE,FLAGS,100,Z-2,55,FILE);
						end
						if (paso==(sizeof(ok)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==1)//ok2
						graph=ok2[paso++];
						if (paso==sizeof(ok2)/DIV) paso--; end
						if (paso==7 or paso==13)
							if (flags) x+=30; else x-=30; end
						end
						if (paso==27)
							play_voice(s_terry23,512,256);
						end
						if (paso==31)
							get_real_point(1,&hit_x,&hit_y);
							pegata (hit_X,hit_Y,525,CTYPE,FLAGS,100,Z-2,56,FILE);
						end
						if (paso==(sizeof(ok2)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==2)//gorra puta
						graph=gorra_puta[paso++];
						if (paso==sizeof(gorra_puta)/DIV) paso--; end
						if (paso==(sizeof(gorra_puta)/DIV)-6)
							play_voice(s_terry22,512,256);
						end
						if (paso==(sizeof(gorra_puta)/DIV)-10)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
				end
				if (luchador==FIGHTER_CRIMSON)
					if (intensidad==0)//sono
						graph=pasota[paso++];
						if (paso==sizeof(pasota)/DIV) paso--; end
						if (paso==(sizeof(pasota)/DIV)-2)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==1)//risillas
						graph=ganar_crimson[paso++];
						if (paso==sizeof(ganar_crimson)/DIV) paso--; end
						if (paso==(sizeof(ganar_crimson)/DIV)-2)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==2)//tsuki
						graph=tsuki[paso++];
						if (paso==sizeof(tsuki)/DIV) paso--; end
						if (paso>20) get_real_point(1,&hit_x,&hit_y); end
						if (paso==21)
							pegata (hit_x,hit_y,0,c_scroll,flags,100,x-1,71,file);
						end
						if (paso==(sizeof(tsuki)/DIV)-2)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
				end
				if (luchador==FIGHTER_KASUMI)//kasume la derrota
					if (intensidad==0)//hostias y guasa
						graph=win1_kasu[paso++];
						if (paso==sizeof(win1_kasu)/DIV) paso--; end
						if (paso==5 or paso==35 or paso==77)
							play_snd (s_airp,360,256); play_snd (s_kasumi1,512,256);
						end
						if (paso==55)
							play_snd (s_airt,360,256); play_snd (s_kasumi19,512,256);
						end
						if (paso==109)
							if (flags) x+=7; else x-=7; end
						end
						if (paso==(sizeof(win1_kasu)/DIV)-8)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==1)//kasumi tendo
						graph=win2_kasu[paso++];
						if (paso==51 or paso==69) play_snd (s_airt,210,256); end
						if (paso==83) play_snd (s_kasumi18,512,256); end
						if (paso==sizeof(win2_kasu)/DIV) paso-=16; end
						if (paso==(sizeof(win2_kasu)/DIV)-20)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==2)
						graph=win3_kasu[paso++];
						if (paso==sizeof(win3_kasu)/DIV) paso--; end
						if (paso==83) play_snd (s_kasumi17,512,256); end
						if (paso==(sizeof(win3_kasu)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)//takuma juan hombre
					if (intensidad==0)//ganar tipo el ultramundo
						graph=win1_taku[paso++];
						if (paso==sizeof(win1_taku)/DIV) paso--; end
						if (paso==29) play_snd (s_takuma22,500,256); end
						if (paso==(sizeof(win1_taku)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
				   end
				   if (intensidad==1)//nidea de lo que es
						graph=win2_taku[paso++];
						if (paso==sizeof(win2_taku)/DIV) paso--; end
						if (paso==19) play_snd (s_takuma21,512,256); end
						if (paso==(sizeof(win2_taku)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==2)//3/4 de lo mismo
						graph=win3_taku[paso++];
						if (paso==sizeof(win3_taku)/DIV) paso--; end
						if (paso==19) play_snd (s_takuma23,512,256); end
						if (paso==(sizeof(win3_taku)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
				end
				if (luchador==FIGHTER_K)//el orochi ese
					if (intensidad==0)//te se;ala con el dedo
						graph=win1_k[paso++];
						if (paso==sizeof(win1_k)/DIV) paso--; end
						if (paso==(sizeof(win1_k)/DIV)-2)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
						if (paso==53) play_snd (s_k15,512,256); end
					end
					if (intensidad==1)//se pone gallito
						graph=win2_k[paso++];
						if (paso==sizeof(win2_k)/DIV) paso--; end
						if (paso==(sizeof(win2_k)/DIV)-12) play_snd (s_k16,412,256); end
						if (paso==(sizeof(win2_k)/DIV)-2)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==2)//te da la espalda
						graph=win3_k[paso++];
						if (paso==sizeof(win3_k)/DIV) paso--; end
						if (paso==(sizeof(win3_k)/DIV)-2)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
						if (paso==1 or paso==4 or paso==7)
							if (flags) x-=10; else x+=10; end
						end
						if (paso==15) play_snd (s_k17,512,256); end
					end
				end
				if (luchador==FIGHTER_KULA)
					if (((x<scroll.x0+32 and flags==0) or
						(x>scroll.x0+288 and flags)) and intensidad==1)
						intensidad=0;
					end
					if (intensidad==0)//se despide sin mas
						graph=byebye[paso++];
						if (paso==1 or paso==19)
							if (flags) x-=12; else x+=12; end
						end
						if (paso==31) play_snd (s_kura19,412,256); end
						if (paso==95) play_snd (s_kura20,412,256); end
						if (paso==sizeof(byebye)/DIV) paso--; end
						if (paso==(sizeof(byebye)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==1)//las supernenas atacan de nuevo
						graph=iikura[paso++];
						if (paso==sizeof(iikura)/DIV) paso-=5; end
						if (paso==(sizeof(iikura)/DIV)-12)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
						if (paso==51) play_snd (s_kura17,412,256); end
						if (paso==113) play_snd (s_kura18,412,256); end
						if (paso==17)
							if (flags) hit_x=x+21; else hit_x=x-21; end
							pegata (hit_x,160,543,c_scroll,flags,100,z+3,128,file);
						end
						if (paso==51) y-=10; end
						if (paso==61) y=140;
							if (flags) x+=5; else x-=5; end
						end
						if (paso==69) y=130; end
						if (paso==77) y=120; end
						if (paso==85) y=150; end
						
						if (paso==93) y=210; end
						if (paso==101 or paso==107 or paso==129 or paso==149)
							if (flags) x+=5; else x-=5; end
						end
						if (paso==139)
							if (flags) x-=5; else x+=5; end
						end
					end
					if (intensidad==2)//movil (substituye al viper)
						graph=movil[paso++];
						if (paso==sizeof(movil)/DIV) paso--; end
						if (paso==(sizeof(movil)/DIV)-4)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
						if (paso==101)
							if (flags) hit_x=x+18; else hit_x=x-18; end
							pegata (hit_x,120,563,c_scroll,flags,10,z-3,129,file);
						end
						if (paso==47)  play_snd (s_kura38,412,256); end
						if (paso==115) play_snd (s_kura21,412,256); end
						if (paso==147) play_snd (s_kura35,412,256); end
						if (paso==303) play_snd (s_kura22,412,256); end
					end
				end
				if (luchador==FIGHTER_K9999)//tetsuo
					if (intensidad==0) intensidad=rand(1,2); end
					if (intensidad==1)//se pone gallo
						graph=tetsuo_w1[paso++];
						if (paso==23) play_snd (s_tetsuo16,412,256); end
						if (paso==sizeof(tetsuo_w1)/DIV) paso-=12; end
						if (paso==196) play_snd (s_tetsuo17,412,256);
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
					end
					if (intensidad==2)//capita
						graph=tetsuo_w2[paso++];
						if (paso==sizeof(tetsuo_w2)/DIV) paso-=24; end
						if (paso==(sizeof(tetsuo_w2)/DIV)-28)
							pegata (x,y,0,c_screen,0,100,-500,47,fichtxt);
						end
						if (paso==9) play_snd (s_tetsuo19,412,256); end
					end
				end
			end
			case _perder://por tiempo
				tipo_ataque=NULO;
				if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
					graph=perder_kyo[paso++];
					if (paso==sizeof(perder_kyo)/DIV) paso--; end
					if (paso==35 and enemigo.vida==vida) paso--; end
				end
				if (luchador==FIGHTER_ATHENA)
					graph=perder_ath[paso++];
					if (paso==sizeof(perder_ath)/DIV) paso-=12; end
					if (paso==99 and enemigo.vida==vida) paso--; end
				end
				if (luchador==FIGHTER_IORI)
					graph=perder_iori[paso++];
					if (paso==sizeof(perder_iori)/DIV) paso--; end
					if (paso==15 and enemigo.vida==vida) paso--; end
				end
				if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
					if (enemigo.vida==vida)
						graph=perder_terry1[paso++];
						if (paso==sizeof(perder_terry1)/DIV) paso--; end
						if (paso==1 or paso==7 or paso==13)
							if (flags) x+=10; else x-=10; end
						end
					else
						graph=perder_terry2[paso++];
						if (paso==sizeof(perder_terry2)/DIV) paso--; end
					end
				end
				if (luchador==FIGHTER_CRIMSON)
					graph=perder_crimson[paso++];
					if (paso==sizeof(perder_crimson)/DIV) paso--; end
					if (paso==3 and enemigo.vida==vida) paso--; end
				end
				if (luchador==FIGHTER_KASUMI)
					graph=lose_kasu[paso++];
					if (paso==sizeof(lose_kasu)/DIV) paso--; end
					if (paso==19 and enemigo.vida==vida) paso--; end
				end
				if (luchador==FIGHTER_TAKUMA)
					graph=time_taku[paso++];
					if (paso==sizeof(time_taku)/DIV) paso--; end
					if (paso==3 and enemigo.vida==vida) paso--; end
				end
				if (luchador==FIGHTER_K)
					graph=lose_k[paso++];
					if (paso==sizeof(lose_k)/DIV) paso--; end
					if (paso==7 or paso==15)
						if (flags) x-=10; else x+=10; end
					end
				end
				if (luchador==FIGHTER_KULA)
					if (paso==0 and enemigo.vida>vida)
						if (flags) hit_x=x+26; else hit_x=x-26; end
						pegata (hit_x,220,543,c_scroll,flags,100,z+3,130,file);
					end
					graph=llorona[paso++];
					if (paso==sizeof(llorona)/DIV) paso--; end
					if (paso==67 and enemigo.vida==vida) paso-=8; end
				end
				if (luchador==FIGHTER_K9999)
					graph=tetsuo_ls[paso++];
					if (paso==3) play_snd (s_tetsuo23,512,256); end
					if (paso==sizeof(tetsuo_ls)/DIV) paso-=12; end
					if (paso==24 and enemigo.vida==vida) paso--; end
				end
			end
		end//delswitch
      
		// clasifica el estado (para uso de la IA)
		accion = _neutral;
		if (estado>=_lpunch1 and estado<=_tossair) accion = _attack; end 
		if (estado>=_shoryuken and estado<=_special2) accion = _attack; end 
		if (estado>=_guardiaalta and estado<=_guardiabajafloja) accion = _defense; end 
		
		if (estado==_burla or estado==_charge or estado==_voltear) accion = _vulnerable; end 
		if (estado==_rodar or estado==_levantandose) accion = _invulnerable; end 
		
		if (estado>=_recibir_fuertes_suelo and estado<=_recibir_toss) accion = _damage; flags=flags%2; end 
		if (estado==_recibir_barridos_fuertes or estado==_recibir_colleja or estado==100) accion = _damage; flags=flags%2; end 
		
		
		//magias especiales
		if (enemigo.estado==100) shoryu=0; shokoh=0; hado=0; end
		if (ive_hit<0) ive_hit--; end
		if (ive_hit>0) ive_hit++;
			if ((
				((estado>-4 and estado<6) or (estado>8 and estado<23) or
				(estado>38 and estado<43 and paso<7)) and //!!?? NO SE COMO HOSTIAS pero funciona...
				
				((luchador==FIGHTER_ATHENA and y==220) or luchador<>FIGHTER_ATHENA) and
				((luchador==FIGHTER_KASUMI and y==220) or luchador<>FIGHTER_KASUMI) and
				((luchador==FIGHTER_K and y==220) or luchador<>FIGHTER_K)) or
				(luchador==FIGHTER_KYO and estado==49 and intensidad==2 and power==74))
				
				//magias comunes
				if (!(luchador==FIGHTER_K and y<220) and
					!(luchador==FIGHTER_KASUMI and y<220))
					if (shoryu>19 and control(avanzar) and
						(control(s_punch) or control(l_punch)))
						if (control(l_punch) and lp_bloker==0)
							intensidad=1; nuevo_estado=_shoryuken;
						end
						if (control(s_punch) and sp_bloker==0)
							intensidad=2; nuevo_estado=_shoryuken;
						end
					end	
				end
				
				//magias exclusivas de ciertos personajes
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_ATHENA or 
					luchador==FIGHTER_TERRY or
					(luchador==FIGHTER_KASUMI and y==220) or 
					(luchador==FIGHTER_K and y==220) or 
					luchador==FIGHTER_TERRY94 or 
					luchador==FIGHTER_K9999)
					
					if (hado>10 and (control(s_kick) or control(l_kick)))
						if (control(l_kick) and lk_bloker==0)
							intensidad=1; nuevo_estado=_u_kick;
						end
						if (control(s_kick) and sk_bloker==0)
							intensidad=2; nuevo_estado=_u_kick;
						end
					end
				end
		  
				// ualante puo
				if (luchador==FIGHTER_KYO or 
					(luchador==FIGHTER_ATHENA and y==220) or
					(luchador==FIGHTER_KULA and y==220) or
					(luchador==FIGHTER_K and y==220 and magia==0) or
					
					(luchador>FIGHTER_ATHENA and luchador!=FIGHTER_KULA and 
					luchador!=FIGHTER_K and magia==0))
					
					if (hado>10 and (control(s_punch) or
						control(l_punch)) and shoryu<20)
						if (luchador==FIGHTER_KYO and 
							estado==_ayuken and intensidad==2) 
							paso=0; he_dado=1;
							if (control(l_punch)) intensidad=10; end
							if (control(s_punch)) intensidad=22; end
						else
							if (control(l_punch) and lp_bloker==0)
							  intensidad=1; nuevo_estado=_ayuken;
							end
							if (control(s_punch) and sp_bloker==0)
								intensidad=2; nuevo_estado=_ayuken;
							end
						end
					end
				end
				
				// uatras puo
				if (((luchador==FIGHTER_ATHENA and magia==0 and y==220) or
					(luchador==FIGHTER_KASUMI and y==220) or
					luchador==FIGHTER_IORI or
					luchador==FIGHTER_CRIMSON or
					luchador==FIGHTER_TERRY or
					luchador==FIGHTER_TERRY94 or
					luchador==FIGHTER_TAKUMA or
					luchador==FIGHTER_KULA) and 
					!control(avanzar))
					
					if (hado<-10 and (control(s_punch) or
						control(l_punch)) and shoryu>-20)
						if (control(l_punch) and lp_bloker==0)
							intensidad=1; nuevo_estado=_uatras_punch;
						end
						if (control(s_punch) and sp_bloker==0)
							intensidad=2; nuevo_estado=_uatras_punch;
						end
					end
				end
				
				// uatras patada
				if (luchador!=FIGHTER_KYO94 and 
					luchador!=FIGHTER_K9999 and
					!(luchador==FIGHTER_ATHENA and y<220) and
					!(luchador==FIGHTER_KASUMI and y<220))
					if (hado<-10 and (control(s_kick) or
						control(l_kick)) and shoryu>-20)
						if (control(l_kick) and lk_bloker==0)
							intensidad=1; nuevo_estado=_uatras_kick;
						end
						if (control(s_kick) and sk_bloker==0)
							intensidad=2; nuevo_estado=_uatras_kick;
						end
					end
				end
				
				if (luchador==FIGHTER_KYO or 
					luchador==FIGHTER_KYO94)
					if (shoryu<-19 and (control(s_kick) or control(l_kick)))
						if (control(l_kick) and lk_bloker==0)
							intensidad=1; nuevo_estado=_satras_kick;
						end
						if (control(s_kick) and sk_bloker==0)
							intensidad=2; nuevo_estado=_satras_kick;
						end
						y=220;
					end
					if (luchador==FIGHTER_KYO94 and estado==_skick2)
						nuevo_paso=3; inc_y=-10;
						if (flags) inc_x=-18;
						else  inc_x=18;  end
					end
				end
				
				if (luchador==FIGHTER_TERRY or 
					luchador==FIGHTER_CRIMSON or 
					(luchador==FIGHTER_KASUMI and y==220) or
					luchador==FIGHTER_TAKUMA)
					if (shoryu>19 and (control(s_kick) or control(l_kick)))
						if (control(l_kick) and lk_bloker==0)
							intensidad=1; nuevo_estado=_extra_move;
						end
						if (control(s_kick) and sk_bloker==0)
							intensidad=2; nuevo_estado=_extra_move;
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA)
					if (shokoh>25 and (control(s_punch) or
						control(l_punch)))
						if (control(l_punch) and lp_bloker==0)
							intensidad=3; nuevo_estado=_shoryuken;
						end
						if (control(s_punch) and sp_bloker==0)
							intensidad=4; nuevo_estado=_shoryuken;
						end
					end
					if (carga1<0 and control(avanzar) and
						(control(s_kick) or control(l_kick)))
						if (control(l_kick) and lk_bloker==0)
							intensidad=1; nuevo_estado=_u_kick;
						end
						if (control(s_kick) and sk_bloker==0)
							intensidad=2; nuevo_estado=_u_kick;
						end
					end
				end
				
				//especiales
				if (power==74 or vida<DANGER_LIFE or infinitypow==1)
					if (control(toss) and hado>11 and ts_bloker==0 and y==220)
						if (luchador==FIGHTER_IORI or 
							luchador==FIGHTER_CRIMSON)
							if (poison==0) nuevo_estado=_special1; nuevo_paso=0; end
						else
							nuevo_estado=_special1; nuevo_paso=0;
						end
						if ((power==74 or infinitypow==1) and vida<DANGER_LIFE)
							super_sp=1;
						end
						intensidad=0;
					end
					if (control(toss) and hado<-11 and ts_bloker==0)
						if (luchador==FIGHTER_ATHENA or 
							((luchador!=FIGHTER_ATHENA) and y==220))
							nuevo_estado=_special2; intensidad=0; nuevo_paso=0;
							if ((power==74 or infinitypow==1) and vida<DANGER_LIFE)
								super_sp=1;
							end
						end	
					end
				end
				
				//volteos especiales
				if (luchador==FIGHTER_IORI or 
					luchador==FIGHTER_CRIMSON)
					if (hado<-4 and control(avanzar) and
						((control(s_punch) and sp_bloker==0) or
						(control(l_punch) and lp_bloker==0)))
						hado=0; shoryu=0; nuevo_estado=_ayuken; intensidad=3;
					end
				end
			end
			
			// movimientos aereos
			if (y<220 and estado<30)
				if (luchador==FIGHTER_ATHENA)
					if (hado<-10 and (control(s_punch) or
						control(l_punch)) and y<210)
						if (control(l_punch) and lp_bloker==0)
							nuevo_estado=_extra_move; intensidad=1;
						end
						if (control(s_punch) and sp_bloker==0)
							intensidad=2; nuevo_estado=_extra_move;
						end
						if (enemigo.x>x) flags=0; else flags=1; end
					end
					if (shoryu>19 and (control(s_punch) or control(l_punch)))
						if (control(l_punch) and lp_bloker==0)
							intensidad=1; nuevo_estado=_shoryuken;
						end
						if (control(s_punch) and sp_bloker==0)
							intensidad=2; nuevo_estado=_shoryuken;
						end
					end
					if (hado>10 and (control(s_kick) or control(l_kick)))
						if (control(l_kick) and lk_bloker==0)
							intensidad=1; nuevo_estado=_u_kick;
						end
						if (control(s_kick) and sk_bloker==0)
							intensidad=2; nuevo_estado=_u_kick;
						end
					end
					
					//especiales
					if (power==74 or vida<DANGER_LIFE or infinitypow==1)
						if (control(toss) and hado<-10 and move_ok==1 and not
							control(l_punch) and not control(s_punch) and ts_bloker==0)
							nuevo_estado=_special2; move_ok=0; nuevo_paso=0;
							if ((power==74 or infinitypow==1) and vida<DANGER_LIFE)
								super_sp=1;
							end
						end
					end
				end
				if (luchador==FIGHTER_KASUMI)
					if (hado>10 and move_ok==1 and (control(s_punch) or
						control(l_punch)) and shoryu<20 and he_dado<>1)
						if (control(l_punch) and lp_bloker==0)
							intensidad=1; nuevo_estado=_ayuken; move_ok=0;
						end
						if (control(s_punch) and sp_bloker==0)
							intensidad=2; nuevo_estado=_ayuken; move_ok=0;
						end
					end
				end
				if (luchador==FIGHTER_K)
					if (hado<-10 and (control(s_kick) or
						control(l_kick)) and shoryu>-20)
						nuevo_paso=4; hado=0; voz=10;
						if (control(l_kick) and lk_bloker==0)
							intensidad=1; nuevo_estado=_uatras_kick;
						end
						if (control(s_kick) and sk_bloker==0)
							intensidad=2; nuevo_estado=_uatras_kick;
						end
					end
				end
			end
			
			// kyo interrumpiendo su ualante por diversas cosas
			if (estado==49 or estado==51 or estado==-4)
				if (luchador==FIGHTER_KYO and estado<>51)//esmoniga 1
					if (intensidad==1 and hado>11 and control(l_punch) and
						paso>12 and graph<151 and lp_bloker==0)
						paso=0; intensidad=10; he_dado=1; ive_hit=0;
					end
					if (intensidad==10 and graph>156)//esmoniga 2
						if (control(l_kick) or control(s_kick))
							intensidad=11; paso=0; he_dado=1; ive_hit=0;
						end
						if (control(saltar) and control(l_punch) and lp_bloker==0)
							intensidad=12; paso=0; he_dado=1; ive_hit=0;
						end
						if (control(agachar) and control(l_punch) and lp_bloker==0)
							intensidad=13; paso=0; he_dado=1; ive_hit=0;
						end
					end
					//esmoniga fuerte
					if (intensidad==2 and hado<-10 and ((control(l_punch) and
						lp_bloker==0) or (control(s_punch) and sp_bloker==0)) and
						paso>9) intensidad=20; paso=0; he_dado=1; ive_hit=0;
					end
					if (intensidad==20 and paso>5 and control(avanzar) and
						((control(l_punch) and lp_bloker==0) or
						(control(s_punch) and sp_bloker==0)))
						intensidad=22; paso=0; he_dado=1; ive_hit=0;
					end
				end
				
				// uatras puo iori
				if (luchador==FIGHTER_IORI and estado<>49)
					if (intensidad<3 and ((control(s_punch) and
						sp_bloker==0) or (control(l_punch) and
						lp_bloker==0)) and paso>7 and hado<-10)
						if (control(l_punch)) intensidad=11;
						else intensidad=12; end
						paso=0; he_dado=1; ive_hit=0;
					end
					if ((intensidad==11 or intensidad==12) and hado<-10 and
						((control(s_punch) and sp_bloker==0) or
						(control(l_punch) and lp_bloker==0)) and paso>7)
						intensidad+=10; paso=0; he_dado=1; ive_hit=0;
					end
				end
				
				if (luchador==FIGHTER_CRIMSON and estado<>49)
					if (intensidad==2 and paso>8 and hado<-10 and//primera u atras
						(control(s_punch) or control(l_punch))) ive_hit=0;
						if (control(l_punch))
							intensidad=1; paso=1; he_dado=1;
							if (flags) inc_x=-7; else inc_x=7; end
						else
							paso=0; intensidad=6;
						end
					end
					if (intensidad==6 and paso>8 and hado<-10 and
						(control(s_punch) or control(l_punch)))
						intensidad=1; he_dado=1; paso=1; ive_hit=0;
						if (flags) inc_x=-6; else inc_x=6; end
					end
				end
				if (luchador==FIGHTER_KASUMI and estado<>49)
					if (intensidad==1 or intensidad==2)//primera u atras
						if (hado<-10 and paso>6 and (control(s_punch) or
							control(l_punch))) move_ok=0;
						end
					end
					if (intensidad==3 or intensidad==4)//segunda u atras
						if (((hado<-10 and (control(s_punch) or control(l_punch))) or
							(control(l_kick) or control(s_kick))) and paso>6)
							intensidad+=2; paso=3; he_dado=1; ive_hit=0;
						end
					end
				end
			end
			
			if ((estado==14 or estado==15 or estado==16 or
				estado==17 or estado==20) and 
				hado<11 and shoryu<20)
				if (luchador==FIGHTER_KASUMI or luchador==FIGHTER_TAKUMA or luchador==FIGHTER_K9999 or
					(luchador==FIGHTER_K and y==220) or luchador==FIGHTER_KULA)
					if (control(avanzar) and control(l_punch))
						nuevo_estado=_lpunch1; nuevo_paso=1; intensidad=1;
						if (luchador==FIGHTER_KASUMI) graph=129; end
						if (luchador==FIGHTER_TAKUMA) graph=103; end
						if (luchador==FIGHTER_K) graph=324; end
						if (luchador==FIGHTER_KULA) graph=52;
							nuevo_estado=_lpunch2;
							if (he_dado<>1 and enemigo.y==220 and
								enemigo.paso==5 and abs(x-enemigo.x)<65)
								enemigo.inc_x=enemigo.inc_x/2;
							end
						end
						if (luchador==FIGHTER_K9999)
							nuevo_estado=_lpunch2; graph=57;
						end
					end
				end
				if (luchador==FIGHTER_TAKUMA or (luchador==FIGHTER_K and y==220) or luchador==FIGHTER_CRIMSON)
					if (control(l_kick) and control(avanzar))
						nuevo_paso=1; intensidad=1; nuevo_estado=_lkick1;
						if (luchador==FIGHTER_CRIMSON)
							intensidad=2; nuevo_estado=_lKICK2; graph=288;
						end
						if (luchador==FIGHTER_TAKUMA) graph=323; end
						if (luchador==FIGHTER_K) graph=87;  end
					end
				end
				if (luchador==FIGHTER_KULA or luchador==FIGHTER_KYO94 or luchador==FIGHTER_KYO)
					if (control(l_kick) and control(avanzar) and
						control(agachar))
						nuevo_estado=_lkickaga; intensidad=1;
						if (luchador==FIGHTER_KYO)  graph=344; end
						if (luchador==FIGHTER_KULA) graph=157;
							if (he_dado<>1 and enemigo.y==220 and
								enemigo.paso==5 and abs(x-enemigo.x)<65)
								enemigo.inc_x=enemigo.inc_x/2;
							end
						end
					end
				end
			end
		end
		
		//retorna al color normal si estaba blend_fx,electrocutado,etc..
		if (estado<>nuevo_estado or y>220 or (estado==46 and paso>17) or
			(estado==47 and paso>14) or (estado==38 and paso>36) or
			estado==_levantandose or estado==100 or estado==200 or
			blend_fx==20 or blend_fx==30 or blend_fx==40)
			if (electrocutado==1)
				if (descarga==1)
					from counter=402 to 455;
						convert_palette (file,counter,&koreda);
					end
				end
				if (estado==38)
					if (flags)
						pegata (x+64,y,198,c_scroll,0,100,-8,114,fichad);
					else
						pegata (x-64,y,198,c_scroll,0,100,-8,114,fichad);
					end
				end
				electrocutado=0; descarga=0;
			end
			
			if (blend_fx==2 or blend_fx==3 or blend_fx==4 or 
				blend_fx==20 or blend_fx==30 or blend_fx==40 or 
				recibir==3)	  
				from counter=402 to 455;
					blend_return (file, counter, luchador, player_color);
				end
			end
		   
			blend_fx=0; blend_frame=0; descarga=0;
			
		end
		
		if (recibir==3) recibir=1; end
		if (estado<>nuevo_estado and estado>-1)
			estado=nuevo_estado; paso=nuevo_paso;
			nuevo_paso=0; vulnerable=0; z=0;
			he_dado=1; ive_hit=0; guardia=0; x0=0;
			if (estado==_normal) estatico=1; else estatico=0; end
			if (recibir==1) recibir=0; end//no lo entiendo ni yo
		end
		
		//una vez que ath cae al suelo puede volver a ejecutar el especial
		if (luchador==FIGHTER_ATHENA and move_ok==0 and y==220) move_ok=1; end
		if (luchador==FIGHTER_KASUMI and move_ok==0 and y==220 and estado<48) move_ok=1; end
		
		// recicla la variable magia sino existe
		if (!exists (magia) and magia!=0)
			magia=0;
		end	
		
		//controla la bajada de pow
		if (power>=74)
			power=74;
			if (infinitypow==0) poder++; end
			if (infinitypow==1 and poder<4) poder++; end
		end
		if (poder==1 and estado==_gesto_princ) poder--; end
		if (poder==2)
			prota_shadow(x,y,1);
		end
		if (power<74)
			poder=0;
		end
		if (vida<=0)
			vida=0;
		end
		if (infinitypow==1 and power<74) power+=2; end
		
		//llamas,electricidad,etc...
		if (blend_fx==2 or blend_fx==3 or blend_fx==4)//blend_fx naranja o morado
			blend_frame++;
			
			if (electrocutado==1 and descarga==1 and blend_frame==1)
				from counter=402 to 455;
					convert_palette (file,counter,&koreda);
				end
				descarga=0;
			end
			
			if (blend_fx<>4)
				if (blend_frame==3 or blend_frame==9 or blend_frame==15)
					pegata (x+rand(25,-25),y-rand(40,80),
							graph,c_scroll,0,100,-64,28,0);
				end
				if ((blend_frame==6 or blend_frame==12 and
					SLOW_MACHINE==false) and rand(0,1)==0)
					pegata (x+rand(50,-50),y-rand(60,120),
							graph,c_scroll,0,100,-64,37,0);
				end
				if (blend_frame==rand(0,18))
					pegata (x+rand(90,-90),y-rand(40,140),
							graph,c_SCROLL,0,100,-64,36,0);
				end
			end
			// converte palette / blend / efectos de color
			if (blend_fx==2 or blend_fx==3 or blend_fx==4)
				if (blend_frame==1)
					from counter=402 to 455;
						blend_gfx (file, counter, luchador, blend_fx);
					end			
				end
			end	
		end
		
		if (electrocutado==1)
			from counter=402 to 455;
				convert_palette (file,COUNTER,&koreda);
			end
			descarga++;
			if (descarga==2) descarga=0; end
			if (rand(0,5)==0)
				pegata (x+rand(25,-25),y-rand(40,80),
				192,c_SCROLL,0,100,-8,113,fichad);
			end
		else
			descarga=0;
		end
		
		
		//llamar al striker
		if (control(striker) and not strike and striks>0)
			if (estado==_normal or estado==_avanzar or
				estado==_correr or estado==_retroceder or
				estado==_agachar or estado==_agachado or
				estado==_saltar or estado==_rodar or
				(estado==_voltear and ive_hit<>0))
				//straikers para el player 1
				if (id==id_luchador1)
					if ((luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) and striker1==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,0);
						else strike=straiker(scroll[0].x0-10,220,0); end
					end
					if ((luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) and striker1==1)
						if (flags) strike=straiker(scroll[0].x0+330,130,9);
						else strike=straiker(scroll[0].x0-10,130,9); end
					end
					if ((luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) and striker1==2)
						strike=straiker(x,0,11);
					end
					if (luchador==FIGHTER_ATHENA and striker1==0 and enemigo.m8_step==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,25);
						else strike=straiker(scroll[0].x0-10,220,25); end
					end
					if (luchador==FIGHTER_ATHENA and striker1==1 and power<74)
						if (flags) strike=straiker(scroll[0].x0+330,220,10);
						else strike=straiker(scroll[0].x0-10,220,10); end
					end
					if (luchador==FIGHTER_ATHENA and striker1==2)
						if (flags) strike=straiker(scroll[0].x0+330,130,6);
						else strike=straiker(scroll[0].x0-10,130,6); end
					end
					if ((luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94 or luchador==FIGHTER_ATHENA) and striker1==3)
						if (flags) strike=straiker(scroll[0].x0+320,130,32);
						else strike=straiker(scroll[0].x0,130,32); end
					end
					if (luchador==FIGHTER_IORI and striker1==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,7);
						else strike=straiker(scroll[0].x0-10,220,7); end
					end
					if (luchador==FIGHTER_IORI and striker1==1)
						if (flags) strike=straiker(scroll[0].x0+330,0,12);
						else strike=straiker(scroll[0].x0-10,0,12); end
					end
					if (luchador==FIGHTER_IORI and striker1==2)
						if (flags) strike=straiker(scroll[0].x0+330,220,1);
						else strike=straiker(scroll[0].x0-10,220,1); end
					end
					if (luchador==FIGHTER_IORI and striker1==3)
						if (flags) strike=straiker(scroll[0].x0+330,220,14);
						else strike=straiker(scroll[0].x0-10,220,14); end
					end
					if ((luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) and striker1==0)
						if (flags) strike=straiker(enemigo.x+30,-40,8);
						else strike=straiker(enemigo.x-30,-40,8); end
					end
					if ((luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) and striker1==1)
						if (flags) strike=straiker(scroll[0].x0+330,130,5);
						else strike=straiker(scroll[0].x0-10,130,5); end
					end
					if ((luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) and striker1==2)
						if (flags) strike=straiker(scroll[0].x0+330,220,13);
						else strike=straiker(scroll[0].x0-10,220,13); end
					end
					if (luchador==FIGHTER_CRIMSON and striker1==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,3);
						else strike=straiker(scroll[0].x0-10,220,3); end
					end
					if (luchador==FIGHTER_CRIMSON and striker1==1)
						if (flags) strike=straiker(scroll[0].x0+330,220,15);
						else strike=straiker(scroll[0].x0-10,220,15); end
					end
					if (luchador==FIGHTER_CRIMSON and striker1==2)
						if (flags) strike=straiker(scroll[0].x0+330,220,2);
						else strike=straiker(scroll[0].x0-10,220,2); end
					end
					if (luchador==FIGHTER_KASUMI and striker1==0)
						if (flags) strike=straiker(scroll[0].x0+330,130,17);
						else strike=straiker(scroll[0].x0-10,130,17); end
					end
					if (luchador==FIGHTER_KASUMI and striker1==1)
						if (flags) strike=straiker(scroll[0].x0+330,220,18);
						else strike=straiker(scroll[0].x0-10,220,18); end
					end
					if (luchador==FIGHTER_KASUMI and striker1==2)
						if (flags) strike=straiker(scroll[0].x0+330,130,16);
						else strike=straiker(scroll[0].x0-10,130,16); end
					end
					if (luchador==FIGHTER_TAKUMA and striker1==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,20);
						else strike=straiker(scroll[0].x0-10,220,20); end
					end
					if (luchador==FIGHTER_TAKUMA and striker1==1)
						if (flags) strike=straiker(scroll[0].x0+330,-10,19);
						else strike=straiker(scroll[0].x0-10,-10,19); end
					end
					if (luchador==FIGHTER_TAKUMA and striker1==2)
						if (flags) strike=straiker(scroll[0].x0+330,180,21);
						else strike=straiker(scroll[0].x0-10,180,21); end
					end
					if (luchador==FIGHTER_K and striker1==0 and seconds==0)
						if (flags) strike=straiker(scroll[0].x0+360,220,22);
						else strike=straiker(scroll[0].x0-40,220,22); end
					end
					if (luchador==FIGHTER_K and striker1==1)
						if (flags) strike=straiker(scroll[0].x0+340,220,23);
						else strike=straiker(scroll[0].x0-20,220,23); end
					end
					if (luchador==FIGHTER_K and striker1==2)
						if (flags) strike=straiker(scroll[0].x0+340,160,24);
						else strike=straiker(scroll[0].x0-20,160,24); end
					end
					if (luchador==FIGHTER_KULA and striker1==0)
						if (flags) strike=straiker(scroll[0].x0+330,130,4);
						else strike=straiker(scroll[0].x0-10,130,4); end
					end
					if (luchador==FIGHTER_KULA and striker1==1)
						if (flags) strike=straiker(scroll[0].x0+330,130,26);
						else strike=straiker(scroll[0].x0-10,130,26); end
					end
					if (luchador==FIGHTER_KULA and striker1==2)
						if (flags) strike=straiker(scroll[0].x0+330,220,27);
						else strike=straiker(scroll[0].x0-10,220,27); end
					end
					if (luchador==FIGHTER_K9999 and striker1==0)
						if (flags) strike=straiker(scroll[0].x0+390,-50,29);
						else strike=straiker(scroll[0].x0-70,-50,29); end
					end
					if (luchador==FIGHTER_K9999 and striker1==1)
						if (flags) strike=straiker(scroll[0].x0+330,160,28);
						else strike=straiker(scroll[0].x0-10,160,28); end
					end
					if (luchador==FIGHTER_K9999 and striker1==2)
						strike=straiker(enemigo.x,220,30);
					end
					if (luchador==FIGHTER_K9999 and striker1==3)
						if (flags) strike=straiker(enemigo.x+70,0,31);
						else strike=straiker(enemigo.x-70,0,31); end
					end
				end
				
				//straikers para el player 2
				if (id==id_luchador2)
					if ((luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) and striker2==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,0);
						else strike=straiker(scroll[0].x0-10,220,0); end
					end
					if ((luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) and striker2==1)
						if (flags) strike=straiker(scroll[0].x0+330,130,9);
						else strike=straiker(scroll[0].x0-10,130,9); end
					end
					if ((luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) and striker2==2)
						strike=straiker(x,0,11);
					end
					if (luchador==FIGHTER_ATHENA and striker2==0 and enemigo.m8_step==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,25);
						else strike=straiker(scroll[0].x0-10,220,25); end
					end
					if (luchador==FIGHTER_ATHENA and striker2==1 and power<74)
						if (flags) strike=straiker(scroll[0].x0+330,220,10);
						else strike=straiker(scroll[0].x0-10,220,10); end
					end
					if (luchador==FIGHTER_ATHENA and striker2==2)
						if (flags) strike=straiker(scroll[0].x0+330,130,6);
						else strike=straiker(scroll[0].x0-10,130,6); end
					end
					if ((luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94 or luchador==FIGHTER_ATHENA) and striker2==3)
						if (flags) strike=straiker(scroll[0].x0+320,130,32);
						else strike=straiker(scroll[0].x0,130,32); end
					end
					if (luchador==FIGHTER_IORI and striker2==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,7);
						else strike=straiker(scroll[0].x0-10,220,7); end
					end
					if (luchador==FIGHTER_IORI and striker2==1)
						if (flags) strike=straiker(scroll[0].x0+330,0,12);
						else strike=straiker(scroll[0].x0-10,0,12); end
					end
					if (luchador==FIGHTER_IORI and striker2==2)
						if (flags) strike=straiker(scroll[0].x0+330,220,1);
						else strike=straiker(scroll[0].x0-10,220,1); end
					end
					if (luchador==FIGHTER_IORI and striker2==3)
						if (flags) strike=straiker(scroll[0].x0+330,220,14);
						else strike=straiker(scroll[0].x0-10,220,14); end
					end
					if ((luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) and striker2==0)
						if (flags) strike=straiker(enemigo.x+30,-40,8);
						else strike=straiker(enemigo.x-30,-40,8); end
					end
					if ((luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) and striker2==1)
						if (flags) strike=straiker(scroll[0].x0+330,130,5);
						else strike=straiker(scroll[0].x0-10,130,5); end
					end
					if ((luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) and striker2==2)
						if (flags) strike=straiker(scroll[0].x0+330,220,13);
						else strike=straiker(scroll[0].x0-10,220,13); end
					end
					if (luchador==FIGHTER_CRIMSON and striker2==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,3);
						else strike=straiker(scroll[0].x0-10,220,3); end
					end
					if (luchador==FIGHTER_CRIMSON and striker2==1)
						if (flags) strike=straiker(scroll[0].x0+330,220,15);
						else strike=straiker(scroll[0].x0-10,220,15); end
					end
					if (luchador==FIGHTER_CRIMSON and striker2==2)
						if (flags) strike=straiker(scroll[0].x0+330,220,2);
						else strike=straiker(scroll[0].x0-10,220,2); end
					end
					if (luchador==FIGHTER_KASUMI and striker2==0)
						if (flags) strike=straiker(scroll[0].x0+330,130,17);
						else strike=straiker(scroll[0].x0-10,130,17); end
					end
					if (luchador==FIGHTER_KASUMI and striker2==1)
						if (flags) strike=straiker(scroll[0].x0+330,220,18);
						else strike=straiker(scroll[0].x0-10,220,18); end
					end
					if (luchador==FIGHTER_KASUMI and striker2==2)
						if (flags) strike=straiker(scroll[0].x0+330,130,16);
						else strike=straiker(scroll[0].x0-10,130,16); end
					end
					if (luchador==FIGHTER_TAKUMA and striker2==0)
						if (flags) strike=straiker(scroll[0].x0+330,220,20);
						else strike=straiker(scroll[0].x0-10,220,20); end
					end
					if (luchador==FIGHTER_TAKUMA and striker2==1)
						if (flags) strike=straiker(scroll[0].x0+330,-10,19);
						else strike=straiker(scroll[0].x0-10,-10,19); end
					end
					if (luchador==FIGHTER_TAKUMA and striker2==2)
						if (flags) strike=straiker(scroll[0].x0+330,180,21);
						else strike=straiker(scroll[0].x0-10,180,21); end
					end
					if (luchador==FIGHTER_K and striker2==0 and seconds==0)
						if (flags) strike=straiker(scroll[0].x0+360,220,22);
						else strike=straiker(scroll[0].x0-40,220,22); end
					end
					if (luchador==FIGHTER_K and striker2==1)
						if (flags) strike=straiker(scroll[0].x0+340,220,23);
						else strike=straiker(scroll[0].x0-20,220,23); end
					end
					if (luchador==FIGHTER_K and striker2==2)
						if (flags) strike=straiker(scroll[0].x0+340,160,24);
						else strike=straiker(scroll[0].x0-20,160,24); end
					end
					if (luchador==FIGHTER_KULA and striker2==0)
						if (flags) strike=straiker(scroll[0].x0+330,130,4);
						else strike=straiker(scroll[0].x0-10,130,4); end
					end
					if (luchador==FIGHTER_KULA and striker2==1)
						if (flags) strike=straiker(scroll[0].x0+330,130,26);
						else strike=straiker(scroll[0].x0-10,130,26); end
					end
					if (luchador==FIGHTER_KULA and striker2==2)
						if (flags) strike=straiker(scroll[0].x0+330,220,27);
						else strike=straiker(scroll[0].x0-10,220,27); end
					end
					if (luchador==FIGHTER_K9999 and striker2==0)
						if (flags) strike=straiker(scroll[0].x0+390,-50,29);
						else strike=straiker(scroll[0].x0-50,-70,29); end
					end
					if (luchador==FIGHTER_K9999 and striker2==1)
						if (flags) strike=straiker(scroll[0].x0+330,160,28);
						else strike=straiker(scroll[0].x0-10,160,28); end
					end
					if (luchador==FIGHTER_K9999 and striker2==2)
						strike=straiker(enemigo.x,220,30);
					end
					if (luchador==FIGHTER_K9999 and striker2==3)
						if (flags) strike=straiker(enemigo.x+70,0,31);
						else strike=straiker(enemigo.x-70,0,31); end
					end
				end
			end
		end
		if (strike)
			if (strike.intensidad==1000)//un regalito de mr setsuna para k
				pegata (hit_x,hit_y,00,c_scroll,flags,100,-5,116,strike.file);
				strike.intensidad=0; seconds=1;
			end
		end
		
		//abajo:si la distancia de y y de x es poca y si la y no es la del
		//suelo,es decir skip,caidas,etc...;no avanza...
		if (x<16 and y==220)  x=16;  end
		if (x>736 and y==220) x=736; end
		if (x<16 and y<220 and flags==0)  x=16;  end
		if (x<17 and y<220 and flags==1)  x=17;  end
		if (x>735 and y<220 and flags==0) x=735; end
		if (x>736 and y<220 and flags==1) x=736; end
		if (x<scroll.x0+16)
			x=scroll.x0+16;
		end
		if (x>scroll.x0+304)
			x=scroll.x0+304;
		end
		
		// separa en el aire
		if (abs(enemigo.y-y)<=50 and abs(enemigo.x-x)<=35 and
			y<220 and flags<>enemigo.flags and 
			estado>0 and estado<30)
		   
			if (enemigo.y==220) 
				x-=inc_x-(inc_x/2); enemigo.x+=inc_x/2;
			else
				if ((enemigo.inc_x<0 and inc_x>0) or
					(enemigo.inc_x>0 and inc_x<0))
					x+=enemigo.inc_x;
				end
				if (enemigo.inc_x==0)
					x-=inc_x-(inc_x/2); enemigo.x+=inc_x/2;
				end
			end
		end
		
		//comportamiento al final de la pantalla
		if (abs(x-enemigo.x)<40 and atravesar==0 and enemigo.atravesar==0)
			if (x<17  and flags==0 and enemigo.x<x+40-(abs(enemigo.y-y)/3))
				enemigo.x=x+40-(abs(enemigo.y-y)/3);//puta maquina
			end
			if (x>735 and flags==1 and enemigo.x>x-40+(abs(enemigo.y-y)/3))
				enemigo.x=x-40+(abs(enemigo.y-y)/3);//now this is perfect
				//para cuando un personaje esta arrinconado
			end
			if (x<17  and enemigo.y==220 and flags==0 and enemigo.x<25)
				enemigo.x=25;
			end
			if (x>735 and enemigo.y==220 and flags==1 and enemigo.x>728)
				enemigo.x=728;
			end
			//con esto se acabaron las cosas raras al final de la pantalla
		end
		
		//pajaritos
		if (pipiolos<100)
			if ((estado<30 or estado>42) and estado<>46 and
				estado<>47 and estado<>_levantandose and estado<>_pajaritos)
				if (pipiolos>0) pipiolos++;
				else pipiolos=100; end
			end
		end
		
		//para detener el sonido de cargar si te fostian
		if (id==id_luchador1 and estado<>_charge)
			if (s_charge1>-1 and is_playing_snd(s_charge1))
				stop_snd(s_charge1);
			end
			s_charge1=-1;
		end
		if (id==id_luchador2 and estado<>_charge)
			if (s_charge2>-1 and is_playing_snd(s_charge2))
				stop_snd(s_charge2);
			end
			s_charge2=-1;
		end
		
		
		//recicla el identificador de voces cuando deja de ser usado
		if (id==id_luchador1)
			if (s_voice1>-1 and !is_playing_snd(s_voice1))
				s_voice1=-1;
			end
		end
		if (id==id_luchador2)
			if (s_voice2>-1 and !is_playing_snd(s_voice2))
				s_voice2=-1;
			end
		end
		
		//si cuando salta es mayor que 0 ejecuta el supersalto
		if (iSuperJump>0)
			iSuperJump--;//tienes 4 pasos de tiempo
		end//desde que te agachas para saltar largo
		
		//contador que indica si puedes ser volteado
		if (voltear>0) voltear--; end//en este momento no puedes ser volteado
		
		//hace ir mas lento si colisiona
		if (abs(x-enemigo.x)<36 and atravesar==0 and
			enemigo.atravesar==0 and y==220 and enemigo.y==220 and
			estado<_ganar)
			if (enemigo.x>x) x-=4; end
			if (enemigo.x<x) x+=4; end
		end
		
		//si estan juntos se separan
		if (y==220 and x==enemigo.x and atravesar==0 and
			enemigo.atravesar==0 and id==id_luchador1 and estado<_ganar)
			x++; enemigo.x--;
		end
		
		//just_guard
		if (control(retroceder))
			if (just_guard<4) //cuando llega a tres se queda ahi
				just_guard++; //el cuatro ya no vale para el super_guard
			end
		else
			just_guard=0; //sino estas pulsando atras es cero
		end
		
		//controla el contador de supers
		if (estado<>_special1 and estado<>_special2 and estado>-1)
			super_sp=0;//vuelve a su estado normal
		end
		
		if (estado==_normal and cambiar==0 and luchador==FIGHTER_CRIMSON)
			cambiar=1;
			from counter=549 to 552;
				convert_palette (file,counter,&naranxlila);
			end
		end
		
		//controla si palma el luchador para poner el grito de muerto
		if (voz==1)
			if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) play_voice(s_kyo8,512,256); end
			if (luchador==FIGHTER_ATHENA) play_voice(s_ath26,512,256); end
			if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON) play_voice(s_iori20,512,256); end
			if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) play_voice(s_terry4,512,256); end
			if (luchador==FIGHTER_KASUMI) play_voice(s_kasumi1,512,256); end
			if (luchador==FIGHTER_TAKUMA) play_voice(s_takuma3,512,256); end
			if (luchador==FIGHTER_K) play_voice(s_k3,412,256); end
			if (luchador==FIGHTER_KULA) play_voice(s_kura8,412,256); end
			if (luchador==FIGHTER_K9999) play_voice(s_tetsuo5,412,256); end
			voz=0;
		end
		if (voz==2 or voz==-2)
			if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) play_voice(s_kyo9,512,256); end
			if (luchador==FIGHTER_ATHENA) play_voice(s_ath27,512,256); end
			if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON) play_voice(s_iori21,512,256); end
			if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) play_voice(s_terry5,512,256); end
			if (luchador==FIGHTER_KASUMI) play_voice(s_kasumi2,512,256); end
			if (luchador==FIGHTER_TAKUMA) play_voice(s_takuma4,512,256); end
			if (luchador==FIGHTER_K)
				if (rand(0,2)==0 or voz==-2) play_voice(s_k4,412,256);
				else play_voice(s_k5,412,256); end
			end
			if (luchador==FIGHTER_KULA)
				if (rand(0,3)==0 or voz==-2) play_voice(s_kura10,412,256);
				else play_voice(s_kura9,412,256); end
			end
			if (luchador==FIGHTER_K9999)
				if (rand(0,1)==0 and voz==-2) play_voice(s_tetsuo7,412,256);
				else play_voice(s_tetsuo6,412,256); end
			end
			voz=0;
		end
		if (voz==3)
			if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
				play_voice(s_kyo30,512,256);
			end
			if (luchador==FIGHTER_ATHENA)
				play_voice(s_ath28,512,256);
			end
			if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)
				play_voice(s_iori22,512,256);
			end
			if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
				play_voice(s_terry6,512,256);
			end
			if (luchador==FIGHTER_KASUMI)
				play_voice(s_kasumi4,512,256);
			end
			if (luchador==FIGHTER_TAKUMA)
				play_voice(s_takuma5,512,256);
			end
			if (luchador==FIGHTER_K)
				play_voice(s_k6,412,256);
			end
			if (luchador==FIGHTER_KULA)
				play_voice(s_kura11,412,256);
			end
			if (luchador==FIGHTER_K9999)
				play_voice(s_tetsuo8,412,256);
			end
			voz=0;
		end
		if (voz==4)
			
			if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94)
				play_voice(s_kyo29,512,256);
			end
			if (luchador==FIGHTER_ATHENA)
				play_voice(s_ath29,512,256);
			end
			if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON)
				play_voice(s_iori23,512,256);
			end
			if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94)
				play_voice(s_terry7,512,256);
			end
			if (luchador==FIGHTER_KASUMI)
				if (rand(0,1)==0)
					play_voice(s_kasumi5,512,256);
				else
					play_voice(s_kasumi6,512,256);
				end
			end
			if (luchador==FIGHTER_TAKUMA)
				play_voice(s_takuma6,512,256);
			end
			if (luchador==FIGHTER_K)
				play_voice(s_k7,412,256);
			end
			if (luchador==FIGHTER_KULA)
				if (rand(0,1)==0)
					play_voice(s_kura12,412,256);
				else
					play_voice(s_kura13,412,256);
				end
			end
			if (luchador==FIGHTER_K9999)
				if (rand(0,1)==0)
					play_voice(s_tetsuo9,412,256);
				else
					play_voice(s_tetsuo10,412,256);
				end
			end
			voz=0;
		end
		
		if (vida<=0 and voz<>100 and game_mode!=MODE_TRAINING)
			if (luchador==FIGHTER_KYO or luchador==FIGHTER_KYO94) play_voice(s_kyo23,512,256); end
			if (luchador==FIGHTER_ATHENA) play_voice(s_ath11,512,256); end
			if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON) play_voice(s_iori6,512,256); end
			if (luchador==FIGHTER_TERRY or luchador==FIGHTER_TERRY94) play_voice(s_terry8,512,256); end
			if (luchador==FIGHTER_KASUMI) play_voice(s_kasumi7,512,256); end
			if (luchador==FIGHTER_TAKUMA) play_voice(s_takuma7,512,256); end
			if (luchador==FIGHTER_K) play_voice(s_k8,412,256); end
			if (luchador==FIGHTER_KULA) play_voice(s_kura14,412,256); end
			if (luchador==FIGHTER_K9999) play_voice(s_tetsuo11,412,256); end
			voz=100;
		end
		if (estado==_normal) voz=0; end
		
		//blokeo de botones
		if (cntype==1)
			if (control(l_punch)) lp_bloker=1;
			else lp_bloker=0; end
			if (control(l_kick)) lk_bloker=1;
			else lk_bloker=0; end
			if (control(s_punch)) sp_bloker=1;
			else sp_bloker=0; end
			if (control(s_kick)) sk_bloker=1;
			else sk_bloker=0; end
			
			if (control(toss)) 
				ts_bloker=1; sp_bloker=1; sk_bloker=1;
			else ts_bloker=0; end
			
			if (control(rodar)) 
				rd_bloker=1; lp_bloker=1; lk_bloker=1;
			else rd_bloker=0; end
			
			if (control(guasa)) 
				lk_bloker=1; sp_bloker=1;
			end
			if (control(striker)) 
				lp_bloker=1; sk_bloker=1;
			end
			if (control(charge)) 
				rd_bloker=1; lp_bloker=1; lk_bloker=1; sp_bloker=1;
			end
		end
		if (game_mode==MODE_TRAINING and cputype==1)
			if (file==fich2)
				if (estado==_normal)
					inc_x=0; iSuperJump=0; inc_y=-9;
					if (luchador==FIGHTER_ATHENA) inc_y=-10; end
					if (luchador==FIGHTER_IORI or luchador==FIGHTER_CRIMSON) inc_y=-16; end
					iSuperJump=-1; altura=0;
					estado=_saltar; paso=0;
				end
			end
		end
		if (game_mode==MODE_TRAINING and cputype==2)
			if (file==fich2)
				if (estado==_normal)
					paso=0; estado=_agachado;
				end
			end
		end
		
		//pone el contador que controla el hechar al enemigo atras a 0
		if (estado<30 or estado>47) darmagia=0; end
		
		
		//modo_training
		if (game_mode==MODE_TRAINING)
			//strikers ilimitados en el modo practica
			striks=99;
			
			//sube la vida del player2 despues de un tiempo
			if (id==id_luchador1)
				if (vida<MAX_LIFE and hit_combo==0 and
					estado<>100 and rojo==0)
					if (estado<>_special2) vida+=1<<PRECISION_BITS; end
				end
				if (vida<DANGER_LIFE-(1<<PRECISION_BITS) and hit_combo==0 and
					estado<>100 and rojo==1)
					if (estado<>_special2) vida+=1<<PRECISION_BITS; end
				end
			end
			
			if (id==id_luchador2)
				if (vida<MAX_LIFE and hit_combo==0 and
					estado<>100 and ((cputype==3 and rojo==0) or cputype<>3))
					if (estado<>_special2) vida+=1<<PRECISION_BITS; end
				end
				if (vida<DANGER_LIFE-(1<<PRECISION_BITS) and hit_combo==0 and
					estado<>100 and cputype==3 and rojo==1)
					if (estado<>_special2) vida+=1<<PRECISION_BITS; end
				end
			end	
			
			if (display==1 and estado_juego==1)
				if (id==id_luchador2)
					write (fontstriker1,20,90,3,"Max Rush");
					write_int (fontstriker3,80,90,3,&maxcombo2);
					write (fontstriker1,20,100,3,"Damage");
					damegi2txt = (damegi2>>PRECISION_BITS);
					write_int (fontstriker3,80,100,3,&damegi2txt);
					if (hit_combo>maxcombo2)
						maxcombo2=id_luchador2.hit_combo;
					end
					if (hit_combo>0 or estado==100 or estado==200)
						mierdones=0;
					end
					if (damegi2>MAX_LIFE) damegi2=MAX_LIFE; end
					if (id_luchador2.estado<30 or
						(id_luchador2.estado>38 and id_luchador2.estado<46) or
						(id_luchador2.estado>47 and id_luchador2.estado<57))
						mierdones++;
					end
					if (mierdones>50)
						mierdones=0; damegi2=0;
					end
				end
				if (id==id_luchador1)
					if (cputype==3)
						write (fontstriker2,300,90,5,"Max Rush");
						write_int (fontstriker3,240,90,3,&maxcombo1);
						write (fontstriker2,300,100,5,"Damage");
						damegi1txt = (damegi1>>PRECISION_BITS);
						write_int (fontstriker3,240,100,3,&damegi1txt);
						
						if (hit_combo>maxcombo1)
							maxcombo1=id_luchador1.hit_combo;
						end
						if (hit_combo>0 or estado==100 or estado==200)
							mierdones=0;
						end
						if (damegi1>MAX_LIFE) damegi1=MAX_LIFE; end
						if (id_luchador1.estado<30 or
							(id_luchador1.estado>38 and id_luchador1.estado<46) or
							(id_luchador1.estado>47 and id_luchador1.estado<57))
							mierdones++;
						end
						if (mierdones>50)
							mierdones=0; damegi1=0;
						end
					end
				end
			//else
				//damegi1=0; damegi2=0;
			end
		end
	end
end

process select();

begin
	
	// si el jugador ha terminado el modo arcade
	if (game_mode==MODE_ARCADE)
		if (wins2>0)
			game_frame = 0;
			game_over_type = 0;
			game_state = ST_GAME_OVER;
			return;
		end
		
		//if (wins1>1)
		if ((cleared_games<2 and wins1>=MAX_FASES) or
			(cleared_games>1 and wins1>=MAX_FASES+1))
			game_frame = 0;
			game_over_type = 2;
			game_state = ST_GAME_OVER;
			return;
		end	
	end
	
	file=fich_select; estado_juego=1; time=30;
	cursor (69,40,0); cursor (229,40,1); cursor (4,70,2);
	cursor (256,70,3); cursor (33,82,4); cursor (288,82,5);

	// pone caras grises a los enemigos eliminados
	for (i=0; i<sizeof(eliminados)/DIV; i++)
		if (eliminados[i]==1)
			if (i<4)
				pegata(80+(i*20),46,202+i,c_scroll,0,100,256,201,fich_select);
			end
			if (i>5 and i<8)
				pegata(80+((i-2)*20),46,202+(i-2),c_scroll,0,100,256,201,fich_select);
			end
			if (i>8)
				pegata(80+((i-3)*20),46,202+(i-3),c_scroll,0,100,256,201,fich_select);
			end
		end
	end
		
	scroll[1].ratio = 0;
	start_scroll(1,fich_select,201,200,0,12);

	stop_cd(); 
	s_select_music = load_musica (music_path[MUSIC_SELECT]);
	play_musica (s_select_music,1);
	


	
	fade_on();

	loop
        frame;
		
		if (true)
			delete_text(all_text);
		end
			
		write_int (font_numbers,210,80,4,&time);
		
        paso++;
		if (paso%2==0)
			scroll[1].x1+=1; scroll[1].y1+=1;
		end
		if (choose1!=2 and choose2!=2)
			if (paso>=fps_target) paso=0; time--; end
			if (time<=0) time=0; end
		end
      
		if (control_cancel and paso>1)
			
			unload_musica (s_select_music); 
			stop_scroll(1);
			delete_text(all_text);
			clear_screen();
			
			game_mode=0;estado_juego=1;striker1=0;striker2=0;blanquear=0;
			choose1=1;choose2=1;round=1;luchador1=0;luchador2=1;colorp1=0;
			colorp2=0;cputype=0;display=0;damegi1=0;damegi2=0;maxcombo1=0;
			maxcombo2=0;
			
			game_frame = 0;
			game_state = ST_MAIN;
			
			fade_off ();
        end
		
		/* BENNU /*
        if (key(_i) and x1==0) x1=1; end
        if (key(_n) and not key(_i) and x1==1) x1=2; end
        if (key(_d) and not key(_n) and x1==2) x1=3; end
        if (key(_i) and not key(_d) and x1==3) x1=4;
            play_snd (s_indi3,512,256);
        end
        if (key(_m) and y1==0) y1=1; end
        if (key(_o) and not key(_m) and y1==1) y1=2; end
        if (key(_e) and not key(_o) and y1==2) y1=3;
            play_snd (s_selectdo,512,256);
        end
		
		/* BENNU_WII /*
		tipo_control = control_menu;
        if (control(saltar) and !control(agachar) and x1==0) x1=1; end
        if (control(agachar) and !control(saltar) and x1==1) x1=2; end
        if (control(saltar) and !control(agachar) and x1==2) x1=3; end
        if (control(agachar) and !control(saltar) and x1==3) x1=4;
            play_snd (s_indi3,512,256);
        end
		
        if (p1_button_c and !p1_button_z and y1==0) y1=1; end
        if (p1_button_z and !p1_button_c and y1==1) y1=2; end
        if (p1_button_c and !p1_button_z and y1==2) y1=3; end
        if (p1_button_z and !p1_button_c and y1==3) y1=4;
            play_snd (s_selectdo,512,256);
        end
		/* BENNU_WIZ /*
		tipo_control = control_menu;
        if (control(saltar) and !control(agachar) and x1==0) x1=1; end
        if (control(agachar) and !control(saltar) and x1==1) x1=2; end
        if (control(saltar) and !control(agachar) and x1==2) x1=3; end
        if (control(agachar) and !control(saltar) and x1==3) x1=4;
            play_snd (s_indi3,512,256);
        end
		
        if (p1_button_c and !p1_button_z and y1==0) y1=1; end
        if (p1_button_z and !p1_button_c and y1==1) y1=2; end
        if (p1_button_c and !p1_button_z and y1==2) y1=3; end
        if (p1_button_z and !p1_button_c and y1==3) y1=4;
            play_snd (s_selectdo,512,256);
        end
		/* BENNU_GCW0 /**/
		tipo_control = control_menu;
        if (control(saltar) and !control(agachar) and x1==0) x1=1; end
        if (control(agachar) and !control(saltar) and x1==1) x1=2; end
        if (control(saltar) and !control(agachar) and x1==2) x1=3; end
        if (control(agachar) and !control(saltar) and x1==3) x1=4;
            play_snd (s_indi3,512,256);
        end
		
        if (p1_button_c and !p1_button_z and y1==0) y1=1; end
        if (p1_button_z and !p1_button_c and y1==1) y1=2; end
        if (p1_button_c and !p1_button_z and y1==2) y1=3; end
        if (p1_button_z and !p1_button_c and y1==3) y1=4;
            play_snd (s_selectdo,512,256);
        end
		/* GEMIX /*
        if (key(_i) and x1==0) x1=1; end
        if (key(_n) and not key(_i) and x1==1) x1=2; end
        if (key(_d) and not key(_n) and x1==2) x1=3; end
        if (key(_i) and not key(_d) and x1==3) x1=4;
            play_snd (s_indi3,512,256);
        end
        if (key(_m) and y1==0) y1=1; end
        if (key(_o) and not key(_m) and y1==1) y1=2; end
        if (key(_e) and not key(_o) and y1==2) y1=3;
            play_snd (s_selectdo,512,256);
        end
		/**/
		
		move_scroll(1);
		
    end
end

process cursor (x,y,tipo);

private
    striker_id;

begin
	
	priority = -10;
	
	if (tipo==0)
		luchador1=0;luchador2=11;
		for (i=0; i<9; i++)
			cursor (320-iSelect_x[i],210,6);
		end
	end
	
	if (tipo==1)
		if (game_mode==MODE_ARCADE)
			if (wins1>=MAX_FASES)
				luchador2 = iSelect_jefe[cleared_games-2];
				choose2=2; colorp2=0;
				if (iSelect_jefe[cleared_games-2]==5) x=69;  end
				if (iSelect_jefe[cleared_games-2]==4) x=129; end
				if (iSelect_jefe[cleared_games-2]==8) x=109; end
			end
		end
		
		for (i=0; i<9; i++)
			cursor (iSelect_x[i],210,7);
		end
	end
	
	// personajes ruleta p1
	if (tipo==6)
		if (x==100) graph=100; z=0; end
		if (x==84)  graph=102; size=90; z=3;  end
		if (x==70)  graph=104; size=80; z=6;  end
		if (x==58)  graph=106; size=70; z=12; end
		if (x==48)  graph=108; size=60; z=24; end
		if (x==40)  graph=110; size=50; z=36; end
		if (x==34)  graph=112; size=40; z=48; end
		if (x==30)  graph=114; size=30; z=48; end
		if (x==28)  graph=116; size=20; z=48; end
	end
	
	// personajes ruleta p2
	if (tipo==7) flags=1;
		if (x==220) graph=116; z=0; end
		if (x==236) graph=100; size=90; z=3;  end
		if (x==250) graph=102; size=80; z=6;  end
		if (x==262) graph=104; size=70; z=12; end
		if (x==272) graph=106; size=60; z=24; end
		if (x==280) graph=108; size=50; z=36; end
		if (x==286) graph=110; size=40; z=48; end
		if (x==290) graph=112; size=30; z=48; end
		if (x==292) graph=114; size=20; z=48; end
	end
	
	// strikers p1
	if (tipo==8)
		if (y==210) striker_id=0; z=-15; hit_x=30; end 
		if (x==-25) striker_id=1; z=5; hit_x=10; end 
		if (x==-73) striker_id=2; z=5; hit_x=20; end
		graph = iStriker_gfx[luchador1][striker_id];
	end
	// strikers p2
	if (tipo==9)
		if (y==210) striker_id=0; z=-15; hit_x=30; end 
		if (x==395) striker_id=1; z=5; hit_x=10; end 
		if (x==347) striker_id=2; z=5; hit_x=20; end
		graph = iStriker_gfx[luchador2][striker_id];
	end
	
	if ((tipo==0 or tipo==2 or tipo==4 or tipo==6 or tipo==8) or
		((tipo==1 or tipo==3 or tipo==5 or tipo==7 or tipo==9) and 
		game_mode==MODE_TRAINING))
		tipo_control=control_teclado1;
	end
	
	if ((tipo==1 or tipo==3 or tipo==5 or tipo==7 or tipo==9) and 
		game_mode!=MODE_TRAINING)
		tipo_control=control_teclado2;
	end
	
	loop
		file = fich_select;
		frame;
		
		if (tipo==0)//CURSOR PLAYER 1
			if (choose1==1) 
				paso++;
				
				if (game_mode==MODE_ARCADE and wins1>1)
					luchador1 = datos_arcade[0];
					colorp1 = datos_arcade[1];
					striker1 = datos_arcade[2];
					choose1 = 2;
				end
				
				if (paso%12<6) graph=20; else graph=21; end
				
				if (bloker==0)
					if (control(avanzar) and not control(retroceder) and
						time>0)
						if (luchador1<>4 and luchador1<>5 and luchador1<>8)
							play_snd (s_select,512,256); x+=20;
							if (x==69)  luchador1=0;  end
							if (x==89)  luchador1=1;  end
							if (x==109) luchador1=2;  end
							if (x==129) luchador1=3;  end
							if (x==149) luchador1=6;  end
							if (x==169) luchador1=7;  end
							if (x==189) luchador1=9;  end
							if (x==209) luchador1=10; end
							if (x==229) luchador1=11; end
							if (x>229)  luchador1=0; x=69; end
							bloker=10;
						end
					end
					if (control(retroceder) and not control(avanzar) and
						time>0)
						if (luchador1<>4 and luchador1<>5 and luchador1<>8)
							play_snd (s_select,512,256); x-=20;
							if (x==69)  luchador1=0;  end
							if (x==89)  luchador1=1;  end
							if (x==109) luchador1=2;  end
							if (x==129) luchador1=3;  end
							if (x==149) luchador1=6;  end
							if (x==169) luchador1=7;  end
							if (x==189) luchador1=9;  end
							if (x==209) luchador1=10; end
							if (x==229) luchador1=11; end
							if (x<69)   luchador1=11; x=229; end
							bloker=20;
						end
					end
				end
				if ((control(l_punch) and bloker==0) or time==0)
					play_snd (s_selectdo,5212,256);
					choose1=2; colorp1=0;
				end
				if (control(l_kick) and bloker==0)
					play_snd (s_selectdo,512,256);
					choose1=2;
					if (cleared_games>0) colorp1=1;
					else colorp1=0; end
				end
				if (control(s_punch) and bloker==0)
					play_snd (s_selectdo,512,256);
					choose1=2; colorp1=2;
				end
				if (control(s_kick) and bloker==0)
					play_snd (s_selectdo,512,256);
					choose1=2;
					if (cleared_games>1) colorp1=3;
					else colorp1=2; end
				end
			else
				datos_arcade[0] = luchador1;
				datos_arcade[1] = colorp1;
				graph=20;
			end
		end
		
		//////////////////////////////////////////////////
		if (tipo==1)//CURSOR PLAYER 2
			if (choose2==1) paso++;
				if (paso%12<6) graph=22; else graph=23; end
				
				if (bloker==0)
					if (((control(avanzar) and not control(retroceder) and game_mode<>MODE_ARCADE) or
						(game_mode==MODE_ARCADE and (paso%11==0))) and 
						time>0)
						if (luchador2<>4 and luchador2<>5 and luchador2<>8)
							play_snd (s_select,512,256); x+=20;
							if (x==69)  luchador2=0;  end
							if (x==89)  luchador2=1;  end
							if (x==109) luchador2=2;  end
							if (x==129) luchador2=3;  end
							if (x==149) luchador2=6;  end
							if (x==169) luchador2=7;  end
							if (x==189) luchador2=9;  end
							if (x==209) luchador2=10; end
							if (x==229) luchador2=11; end
							if (x>229)  luchador2=0; x=69; end
							
							while (game_mode==MODE_ARCADE and 
								eliminados[luchador2]==1 and wins1<MAX_FASES)
								x+=20;
								if(x>229) x=69; end
								if(x==69)  luchador2=0;  end
								if(x==89)  luchador2=1;  end
								if(x==109) luchador2=2;  end
								if(x==129) luchador2=3;  end
								if(x==149) luchador2=6;  end
								if(x==169) luchador2=7;  end
								if(x==189) luchador2=9;  end
								if(x==209) luchador2=10; end
								if(x==229) luchador2=11; end
							end
							bloker=10;
						end
					end
					if (control(retroceder) and not control(avanzar) and
						time>0 and game_mode<>MODE_ARCADE)
						if (luchador2 != FIGHTER_CRIMSON and 
							luchador2 != FIGHTER_KYO94 and 
							luchador2 != FIGHTER_TERRY94)
							play_snd (s_select,512,256); x-=20;
							if (x==69)  luchador2=0;  end
							if (x==89)  luchador2=1;  end
							if (x==109) luchador2=2;  end
							if (x==129) luchador2=3;  end
							if (x==149) luchador2=6;  end
							if (x==169) luchador2=7;  end
							if (x==189) luchador2=9;  end
							if (x==209) luchador2=10; end
							if (x==229) luchador2=11; end
							if (x<69)   luchador2=11; x=229; end
							bloker=20;
						end
					end
				end
				if (game_mode==MODE_ARCADE) 
					if (((paso>30 and rand(0,8)==0) or paso>250) and bloker==0)
						play_snd(s_selectdo,512,255);
						choose2=2; colorp2=0;
					end
				end
				
				if ((control(l_punch) and bloker==0) or time==0)
					play_snd (s_selectdo,512,256);
					choose2=2; colorp2=0;
				end
				if (control(l_kick) and bloker==0)
					play_snd (s_selectdo,512,256);
					choose2=2;
					if (cleared_games>0) colorp2=1;
					else colorp2=0; end
				end
				if (control(s_punch) and bloker==0)
					play_snd (s_selectdo,512,256);
					choose2=2; colorp2=2;
				end
				if (control(s_kick) and bloker==0)
					play_snd (s_selectdo,512,256);
					choose2=2;
					if (cleared_games>1) colorp2=3;
					else colorp2=2; end
				end
			else
				graph=22;
			end
			if (game_mode==MODE_TRAINING)
				if (choose1==1) bloker=1; end
				if (not control(l_punch) and not control(l_kick) and
					not control(s_punch) and not control(s_kick) and
					choose1==0 and bloker==1) bloker=0;
				end
			end
			if (game_mode==MODE_ARCADE and bloker==1) bloker=0; end
			
		end
		
		///caras p1
		if (tipo==2)
			if (luchador1==FIGHTER_KYO or 
				luchador1==FIGHTER_KYO94) 
				graph=24;
				if (choose1==1 and time>0 and cleared_games>2)
					if (not control(saltar)) luchador1=FIGHTER_KYO; end
					if (control(saltar)) luchador1=FIGHTER_KYO94; end
				end
				if (choose1==1 and luchador1==FIGHTER_KYO94)
					write (font_p1,100,220,4,"KOF94 Type");
				end	
			end
			
			if (luchador1==FIGHTER_IORI or 
				luchador1==FIGHTER_CRIMSON)
				if (choose1==1 and time>0 and cleared_games>4)
					if (not control(saltar)) luchador1=FIGHTER_IORI; end
					if (control(saltar)) luchador1=FIGHTER_CRIMSON; end
				end
				
				if (luchador1==FIGHTER_IORI) 
					graph=26;
				else//if (luchador1==FIGHTER_CRIMSON) 
					graph=28;
					if (choose1==1) write (font_p1,100,220,4,"Crimson Flames"); end
				end
			end
			
			if (luchador1==FIGHTER_TERRY or 
				luchador1==FIGHTER_TERRY94) 
				graph=27;
				if (choose1==1 and time>0 and cleared_games>3)
					if (not control(saltar)) luchador1=FIGHTER_TERRY; end
					if (control(saltar)) luchador1=FIGHTER_TERRY94; end
				end
				if (choose1==1 and luchador1==FIGHTER_TERRY94)
					write (font_p1,100,220,4,"Garou Type");
				end
			end
			
			if (luchador1==FIGHTER_ATHENA)	graph=25; end
			if (luchador1==FIGHTER_KASUMI)	graph=29; end
			if (luchador1==FIGHTER_TAKUMA)	graph=30; end
			if (luchador1==FIGHTER_K)		graph=118; end
			if (luchador1==FIGHTER_KULA)	graph=119; end
			if (luchador1==FIGHTER_K9999)	graph=120; end
		end
		
		// caras p2
		if (tipo==3)
			if (luchador2==FIGHTER_KYO or 
				luchador2==FIGHTER_KYO94) 
				graph=24;
				if (choose2==1 and time>0 and cleared_games>2)
					if (not control(saltar)) luchador2=FIGHTER_KYO; end
					if (control(saltar)) luchador2=FIGHTER_KYO94; end
				end
				if (choose2==1 and luchador2==FIGHTER_KYO94)
					write (font_p2,220,220,4,"KOF94 Type");
				end
			end
			
			if (luchador2==FIGHTER_IORI or 
				luchador2==FIGHTER_CRIMSON)
				if (choose2==1 and time>0 and cleared_games>4)
					if (not control(saltar)) luchador2=FIGHTER_IORI; end
					if (control(saltar)) luchador2=FIGHTER_CRIMSON; end
				end
				
				if (luchador2==FIGHTER_IORI) 
					graph=26;
				else//if (luchador2==FIGHTER_CRIMSON) 
					graph=28;
					if (choose2==1) write (font_p2,220,220,4,"Crimson Flames"); end
				end
			end
			
			if (luchador2==FIGHTER_TERRY or 
				luchador2==FIGHTER_TERRY94) 
				graph=27;
				if (choose2==1 and time>0 and cleared_games>3)
					if (not control(saltar)) luchador2=FIGHTER_TERRY; end
					if (control(saltar)) luchador2=FIGHTER_TERRY94; end
				end
				if (choose2==1 and luchador2==FIGHTER_TERRY94)
					write (font_p2,220,220,4,"Garou Type");
				end
			end
			
			if (luchador2==FIGHTER_ATHENA)	graph=25; end
			if (luchador2==FIGHTER_KASUMI)	graph=29; end
			if (luchador2==FIGHTER_TAKUMA)	graph=30; end
			if (luchador2==FIGHTER_K)		graph=118; end
			if (luchador2==FIGHTER_KULA)	graph=119; end
			if (luchador2==FIGHTER_K9999)	graph=120; end
		end
		
		//nombres
		if (tipo==4)
			if (luchador1==0 or luchador1==5) graph=31; end
			if (luchador1==1)  graph=32; end
			if (luchador1==2 or luchador1==4) graph=33; end
			if (luchador1==3 or luchador1==8) graph=34; end
			if (luchador1==6)  graph=35; end
			if (luchador1==7)  graph=36; end
			if (luchador1==9)  graph=37; end
			if (luchador1==10) graph=38; end
			if (luchador1==11) graph=39; end
		end
		if (tipo==5)
			if (luchador2==0 or luchador2==5) graph=31; end
			if (luchador2==1)  graph=32; end
			if (luchador2==2 or luchador2==4) graph=33; end
			if (luchador2==3 or luchador2==8) graph=34; end
			if (luchador2==6)  graph=35; end
			if (luchador2==7)  graph=36; end
			if (luchador2==9)  graph=37; end
			if (luchador2==10) graph=38; end
			if (luchador2==11) graph=39; end
		end
		
		//personajes p1
		if (tipo==6)
			if (game_mode==MODE_ARCADE and wins1>1)
				paso=30; x = -100;
			end
			if (choose1!=2)
				if (x==100) z=0;           hit_x=-8; inc_x=9; end
				if (x==84)  size=90; z=2;  hit_x=-7; inc_x=8; end
				if (x==70)  size=80; z=4;  hit_x=-6; inc_x=7; end
				if (x==58)  size=70; z=6;  hit_x=-5; inc_x=6; end
				if (x==48)  size=60; z=8;  hit_x=-4; inc_x=5; end
				if (x==40)  size=50; z=10; hit_x=-3; inc_x=4; end
				if (x==34)  size=40; z=12; hit_x=-2; inc_x=3; end
				if (x==30)  size=30; z=14; hit_x=-1; inc_x=2; end
				if (x==28)  size=20; z=16; hit_x=-9; inc_x=1; end
			end	
			if (choose1==1)
				if (father.bloker==10) 
					paso++;
					if (paso==4 or paso==6) x+=inc_x; size+=5; z--; end
					if (paso==6)
						if (x>100) size=20; x=28; z=18; end
					end
					if (paso==10)
						father.hit_combo=0;
						father.bloker=0; paso=0;
					end
				end
				if (father.bloker==20) paso++;
					if (paso==2)
						if (x==28) size=110; x=118; z=-2; end
					end
					if (paso==4 or paso==6) x+=hit_x; size-=5; z++; end
					if (paso==10) father.bloker=0; paso=0; end
				end
				if (father.bloker==0) paso=0; end
			end
			if (choose1==2) 
				father.bloker=0; paso++;
				if (x==100)
					if (paso==2 or paso==6 or paso==10) graph++; end
					if (paso==4 or paso==8 or paso==12) graph--; end
				end
				if (paso>(18*fps_target)/FPS_BASE) 
					x-=((10*FPS_BASE)/fps_target); 
				end
				if (paso==(36*fps_target)/FPS_BASE)
					choose1=3; 
					cursor (-50,210,8);
					cursor (-25,207,8);
					cursor (-73,207,8);
				end
			end
			if (choose1==3) return; end
		end
		
		// personajes 2
		if (tipo==7)
			if (game_mode==MODE_ARCADE and wins1=>MAX_FASES)
				luchador2 = iSelect_jefe[cleared_games-2];
				if (luchador2 == FIGHTER_KYO94)   graph=iSelect_gfx[1]; end
				if (luchador2 == FIGHTER_CRIMSON) graph=iSelect_gfx[3]; end
				if (luchador2 == FIGHTER_TERRY94) graph=iSelect_gfx[4]; end
			end
			
			if (choose2!=2)
				if (x==220)  z=0;           hit_x=8; inc_x=-9; end
				if (x==236)  size=90; z=2;  hit_x=7; inc_x=-8; end
				if (x==250)  size=80; z=4;  hit_x=6; inc_x=-7; end
				if (x==262)  size=70; z=6;  hit_x=5; inc_x=-6; end
				if (x==272)  size=60; z=8;  hit_x=4; inc_x=-5; end
				if (x==280)  size=50; z=10; hit_x=3; inc_x=-4; end
				if (x==286)  size=40; z=12; hit_x=2; inc_x=-3; end
				if (x==290)  size=30; z=14; hit_x=1; inc_x=-2; end
				if (x==292)  size=20; z=16; hit_x=9; inc_x=-1; end
				
			end
			if (father.bloker==0 and choose2!=2)
				
				counter = ((father.x-69+1)/20);
				if (z==0)  graph=iSelect_gfx[(counter+10)%9]; end
				if (z==2)  graph=iSelect_gfx[(counter+11)%9]; end
				if (z==4)  graph=iSelect_gfx[(counter+12)%9]; end
				if (z==6)  graph=iSelect_gfx[(counter+13)%9]; end
				if (z==8)  graph=iSelect_gfx[(counter+14)%9]; end
				if (z==10) graph=iSelect_gfx[(counter+15)%9]; end
				if (z==12) graph=iSelect_gfx[(counter+16)%9]; end
				if (z==14) graph=iSelect_gfx[(counter+17)%9]; end
				if (z==16) graph=iSelect_gfx[(counter+18)%9]; end
				
				if (game_mode==MODE_ARCADE and wins1=>MAX_FASES)
					if (luchador2==FIGHTER_KYO94) 	graph=iSelect_gfx[0]; end
					if (luchador2==FIGHTER_TERRY94) graph=iSelect_gfx[3]; end
					if (luchador2==FIGHTER_CRIMSON) graph=iSelect_gfx[2]; end
				end
			end
			
			if ((game_mode!=MODE_TRAINING or 
				(game_mode==MODE_TRAINING and choose1==0)) and choose2==1)
				if (father.bloker==10) 
					paso++;
					
					if (paso==4 or paso==6) x+=inc_x; size+=4; z--; end
					if (paso==6)
						if (x<220) size=20; x=292; z=18; end
					end
					if (paso==10)
						father.bloker=0; paso=0;
					end
				end
				if (father.bloker==20) paso++;
					if (paso==2)
						if (x==292) size=110; x=202; z=-2; end
					end
					if (paso==4 or paso==6) x+=hit_x; size-=4; z++; end
					if (paso==10) father.bloker=0; paso=0; end
				end
				if (father.bloker==0) paso=0; end
			end
			if (choose2==2) 
				father.bloker=0; paso++;
				if (paso==1)
					counter = ((father.x-69+1)/20);
					if (z==0)  graph=iSelect_gfx[(counter+10)%9]; end
					if (z==2)  graph=iSelect_gfx[(counter+11)%9]; end
					if (z==4)  graph=iSelect_gfx[(counter+12)%9]; end
					if (z==6)  graph=iSelect_gfx[(counter+13)%9]; end
					if (z==8)  graph=iSelect_gfx[(counter+14)%9]; end
					if (z==10)  graph=iSelect_gfx[(counter+15)%9]; end
					if (z==12)  graph=iSelect_gfx[(counter+16)%9]; end
					if (z==14)  graph=iSelect_gfx[(counter+17)%9]; end
					if (z==16)  graph=iSelect_gfx[(counter+18)%9]; end
				end
				if (x==220)
					if (paso==2 or paso==6 or paso==10) graph++; end
					if (paso==4 or paso==8 or paso==12) graph--; end
				end
				
				if (paso>(18*fps_target)/FPS_BASE) 
					x+=((10*FPS_BASE)/fps_target); 
				end
				if (paso==(36*fps_target)/FPS_BASE) 
					choose2=3; cursor (370,210,9);
					cursor (395,207,9); cursor (347,207,9);
				end
			end
			if (choose2==3) return; end
		end
		
		//strikers
		if (tipo==8)//strikers p1
			if (game_mode==MODE_ARCADE and wins1>1)
				estado=10; paso=30;
			end
			if (estado==0)
				paso++;
				if (paso<((14*fps_target)/FPS_BASE))
					x+=((10*FPS_BASE)/fps_target); 
				else
					paso=0; estado=1; 
				end
			end
			if (estado==1)
				if (control(saltar) and (luchador1==2 or luchador1==11) and
					x1==0 and id_select.x1==4 and time>0)
					if (y>209) graph=9; else graph=0; end
					if (y>209) play_snd (s_indi3,512,256); end
					striker1=3; x1=1;
				end
				if (control(saltar) and (luchador1==0 or luchador1==1 or
					luchador1==5) and y1==0 and id_select.y1==3 and time>0)
					if (y>209) graph=82; else graph=0; end
					if (y>209) play_snd (s_select,512,256); end
					striker1=3; y1=1;
				end
				if (control(avanzar) and not control(retroceder) and not
					control(saltar) and time>0 and striker1<3)
					if (y==210) striker1++;
						play_snd (s_select,512,256);
						if (striker1>2) striker1=0; end
					end
					hit_y=1; estado=2;
				end
				if (control(retroceder) and not control(avanzar) and not
					control(saltar) and time>0 and striker1<3)
					if (y==210) striker1--;
						play_snd (s_select,512,256);
						if (striker1<0) striker1=2; end
					end
					hit_y=-1; estado=2;
				end
				if (not control(avanzar) and not control(retroceder))
					if (control(l_punch) or control(l_kick) or
						control(s_punch) or control(s_kick) or time==0)
						if (y==210) play_snd (s_selectdo,512,256); end
						datos_arcade[2] = striker1;
						estado=10; paso=0;
					end
				end
				if (luchador1==0 or luchador1==5)
					write (fontstriker1,78,220,4,strikerkyo[striker1]);
				end
				if (luchador1==1)
					write (fontstriker1,78,220,4,strikerathena[striker1]);
				end
				if (luchador1==2)
					write (fontstriker1,78,220,4,strikeriori[striker1]);
				end
				if (luchador1==3 or luchador1==8)
					write (fontstriker1,78,220,4,strikerterry[striker1]);
				end
				if (luchador1==4)
					write (fontstriker1,78,220,4,strikercrimson[striker1]);
				end
				if (luchador1==6)
					write (fontstriker1,78,220,4,strikertodo[striker1]);
				end
				if (luchador1==7)
					write (fontstriker1,78,220,4,strikertakuma[striker1]);
				end
				if (luchador1==9)
					write (fontstriker1,78,220,4,strikerk[striker1]);
				end
				if (luchador1==10)
					write (fontstriker1,78,220,4,strikerkura[striker1]);
				end
				if (luchador1==11)
					write (fontstriker1,78,220,4,strikertetsuo[striker1]);
				end
			end
			if (estado==2)
				if (hit_y==1)  hit_x++;  end
				if (hit_y==-1) hit_x--;  end
				if (hit_x==0)  hit_x=30; end
				if (hit_x==31) hit_x=1;  end
				if (hit_x==1)  x=78; y=210; z=-13; end
				if (hit_x==2)  x=85; y=210; z=-11; end
				if (hit_x==3)  x=91; y=210; z=-9;  end
				if (hit_x==4)  x=96; y=209; z=-7;  end
				if (hit_x==5)  x=100; y=209; z=-5;  end
				if (hit_x==6)  x=103; y=209; z=-3;  end
				if (hit_x==7)  x=105; y=208; z=-1;  end
				if (hit_x==8)  x=106; y=208; z=1;   end
				if (hit_x==9)  x=105; y=208; z=3;   end
				if (hit_x==10) x=103; y=207; z=5;   end
				if (hit_x==11) x=100; y=207; z=7;   end
				if (hit_x==12) x=96; y=207; z=9;   end
				if (hit_x==13) x=91; y=206; z=11;  end
				if (hit_x==14) x=85; y=206; z=13;  end
				if (hit_x==15) x=80; y=206; z=15;  end
				if (hit_x==16) x=75; y=206; z=13;  end
				if (hit_x==17) x=71; y=206; z=11;  end
				if (hit_x==18) x=64;  y=206; z=9;   end
				if (hit_x==19) x=59;  y=207; z=7;   end
				if (hit_x==20) x=55;  y=207; z=5;   end
				if (hit_x==21) x=53;  y=207; z=3;   end
				if (hit_x==22) x=51;  y=208; z=1;   end
				if (hit_x==23) x=50;  y=208; z=-1;  end
				if (hit_x==24) x=51;  y=208; z=-3;  end
				if (hit_x==25) x=53;  y=209; z=-5;  end
				if (hit_x==26) x=55;  y=209; z=-7;  end
				if (hit_x==27) x=59;  y=209; z=-9;  end
				if (hit_x==28) x=64;  y=210; z=-11; end
				if (hit_x==29) x=71; y=210; z=-13; end
				if (hit_x==30) x=78; y=210; z=-15; end
				if (hit_x==10 or hit_x==20 or hit_x==30) estado=1; end
			end
			if (estado==10)
				paso++;
				if (y==210)
					if (paso==2 or paso==6 or paso==10) graph++; end
					if (paso==4 or paso==8 or paso==12) graph--; end
				end
				if (paso>((18*fps_target)/FPS_BASE)) 
					x-=((10*FPS_BASE)/fps_target); 
				end
				if (paso>((36*fps_target)/FPS_BASE)) 
					choose1=0; 
				end
				write (fontstriker1,78,220,4,"");
			end
		end
		
		if (tipo==9)//strikers p2
			flags=1;
			if (estado==0)
				paso++;
				if (paso<((14*fps_target)/FPS_BASE)) 
					x-=((10*FPS_BASE)/fps_target); 
				else
					paso=0; estado=1;
				end
			end
			if (estado==1)
				paso++;
				if (game_mode!=MODE_ARCADE)
					if (control(saltar) and (luchador2==2 or luchador2==11) and
						x1==0 and id_select.x1==4 and time>0)
						if (y>209) graph=9; else graph=0; end
						if (y>209) play_snd (s_indi3,512,256); end
						striker2=3; x1=1;
					end
					if (control(saltar) and (luchador2==0 or luchador2==1 or
						luchador2==5) and y1==0 and id_select.y1==3 and time>0)
						if (y>209) graph=82; else graph=0; end
						if (y>209) play_snd (s_select,512,256); end
						striker2=3; y1=1;
					end
					if (control(avanzar) and not control(retroceder) and not
						control(saltar) and time>0 and striker2<3)
						if (y==210) striker2++;
							play_snd (s_select,512,256);
							if (striker2>2) striker2=0; end
						end
						hit_y=1; estado=2;
					end
					if (control(retroceder) and not control(avanzar) and not
						control(saltar) and time>0 and striker2<3)
						if (y==210) striker2--;
							play_snd (s_select,512,256);
							if (striker2<0) striker2=2; end
						end
						hit_y=-1; estado=2;
					end
					if (not control(avanzar) and not control(retroceder))
						if (control(l_punch) or control(l_kick) or
							control(s_punch) or control(s_kick) or time==0)
							if (y==210) play_snd (s_selectdo,512,256); end
							estado=10; paso=0;
						end
					end
				elseif (game_mode==MODE_ARCADE)
					if (paso==3)
						id_rand = rand(0,3);
					end
					if (paso==5)
						
						if (id_rand==1)
							if(y==210) play_snd (s_selectdo,512,255); end
							estado=10;
						else
							if (y==210) striker2++;
								play_snd (s_select,512,256);
								if (striker2>2) striker2=0; end
							end
							hit_y=1; estado=2;
						end
					end
				end
				
				if (luchador2==0 or luchador2==5)
					write (fontstriker2,242,220,4,strikerkyo[striker2]);
				end
				if (luchador2==1)
					write (fontstriker2,242,220,4,strikerathena[striker2]);
				end
				if (luchador2==2)
					write (fontstriker2,242,220,4,strikeriori[striker2]);
				end
				if (luchador2==3 or luchador2==8)
					write (fontstriker2,242,220,4,strikerterry[striker2]);
				end
				if (luchador2==4)
					write (fontstriker2,242,220,4,strikercrimson[striker2]);
				end
				if (luchador2==6)
					write (fontstriker2,242,220,4,strikertodo[striker2]);
				end
				if (luchador2==7)
					write (fontstriker2,242,220,4,strikertakuma[striker2]);
				end
				if (luchador2==9)
					write (fontstriker2,242,220,4,strikerk[striker2]);
				end
				if (luchador2==10)
					write (fontstriker2,242,220,4,strikerkura[striker2]);
				end
				if (luchador2==11)
					write (fontstriker2,242,220,4,strikertetsuo[striker2]);
				end
			end
			if (estado==2)
				if (hit_y==1)  hit_x++;  end
				if (hit_y==-1) hit_x--;  end
				if (hit_x==0)  hit_x=30; end
				if (hit_x==31) hit_x=1;  end
				if (hit_x==1)  x=242; y=210; z=-13; end
				if (hit_x==2)  x=249; y=210; z=-11; end
				if (hit_x==3)  x=255; y=210; z=-9;  end
				if (hit_x==4)  x=260; y=209; z=-7;  end
				if (hit_x==5)  x=264; y=209; z=-5;  end
				if (hit_x==6)  x=267; y=209; z=-3;  end
				if (hit_x==7)  x=269; y=208; z=-1;  end
				if (hit_x==8)  x=270; y=208; z=1;   end
				if (hit_x==9)  x=269; y=208; z=3;   end
				if (hit_x==10) x=267; y=207; z=5;   end
				if (hit_x==11) x=264; y=207; z=7;   end
				if (hit_x==12) x=260; y=207; z=9;   end
				if (hit_x==13) x=255; y=206; z=11;  end
				if (hit_x==14) x=249; y=206; z=13;  end
				if (hit_x==15) x=244; y=206; z=15;  end
				if (hit_x==16) x=240; y=206; z=13;  end
				if (hit_x==17) x=235; y=206; z=11;  end
				if (hit_x==18) x=228; y=206; z=9;   end
				if (hit_x==19) x=223; y=207; z=7;   end
				if (hit_x==20) x=219; y=207; z=5;   end
				if (hit_x==21) x=217; y=207; z=3;   end
				if (hit_x==22) x=215; y=208; z=1;   end
				if (hit_x==23) x=214; y=208; z=-1;  end
				if (hit_x==24) x=215; y=208; z=-3;  end
				if (hit_x==25) x=217; y=209; z=-5;  end
				if (hit_x==26) x=219; y=209; z=-7;  end
				if (hit_x==27) x=223; y=209; z=-9;  end
				if (hit_x==28) x=228; y=210; z=-11; end
				if (hit_x==29) x=235; y=210; z=-13; end
				if (hit_x==30) x=242; y=210; z=-15; end
				if (hit_x==10 or hit_x==20 or hit_x==30) estado=1; paso=0; end
			end
			if (estado==10)
				paso++;
				if (y==210)
					if (paso==2 or paso==6 or paso==10) graph++; end
					if (paso==4 or paso==8 or paso==12) graph--; end
				end
				if (paso>((18*fps_target)/FPS_BASE)) 
					x+=((10*FPS_BASE)/fps_target); 
				end
				if (paso>((36*fps_target)/FPS_BASE)) 
					choose2=0;
				end
				write (fontstriker2,242,220,4,"");
			end
		end
		if (time<0) time=0; end
		
		// sale a la partida
		if (tipo==1)
			if ((choose1==0 and choose2==0) or 
				(wins1>1 and choose2==0 and game_mode==MODE_ARCADE))
				
				estado_juego=0;
				fade(200,200,200,8);
				frame(3000);
				unload_musica (s_select_music);				
				game_frame = 0;
				game_state = ST_PLAYING;
				
			end
		end
	end
end

process golpe (x,y,tipo,efecto,graph,damage,itchy,pipiolos,duracion,grandfather);

private
    id_mueco;
    id_striker;
    counteratack;
	bKill;

begin

	z=father.z+1;
	flags=father.flags%2;
	file=father.file;
	ctype=father.ctype;

	id_mueco=collision(type prota);
	if (id_mueco)
		if (id_mueco==grandfather)
			id_mueco=collision(type prota);
		end
	end

	id_striker=collision(type straiker);	
	if (id_striker and exists(id_striker))
		if (id_striker==grandfather or
			id_striker.father==father or
			file==id_striker.file)
			id_striker=collision(type straiker);			
		end
	end
	
	
	if (damage>0)
		bKill = true;
	else
		bKill = false;
		damage = -damage;
	end
	
	damage = get_real_damage (damage);
	itchy = get_real_damage (itchy);
	
	if (father.power==74) damage+=damage/6; end
	if (father.m8_step==3) damage/=2; itchy/=2; end
	
	if (flags==4 or flags==5) flags-=4; end

	//LISTA DE TIPOS Y EFECTOS
	//tipo1 -fuerte suelo
	//tipo2 -flojos suelo
	//tipo3 -barrido fuerte
	//tipo4 -fuerte que arriona
	//tipo5 -fuerte aereo
	//tipo6 -barrido flojo
	//tipo7 -empujon
	//tipo8 -flojo aereo
	//tipo9 -corte que arriona
	//tipo10-launcher(que le puedes fostiar en la caida)
	//tipo11-caidas bocabajo
	//tipo12-flojos bozo
	//tipo13-golpe sin estrella ni sonido(special vd)
	//tipo14-golpe que arriona en el suelo y tira en el aire
	//tipo15-golpe que fostia en el suelo y tira en el aire
	//tipo16-golpe fuerte bajo que no tira
	//tipo17-cortes que arrionan en el suelo y tiran en el aire
	//tipo18-cortes que dan por abajo y hacen launcher
	//tipo19-cortes que provocan launcher
	//tipo20-levanta si esta agachado, recibir aereo si esta de pie y tira en el aire
	//tipo21-cortes q provocan fuerte suelo
	//tipo22-cortes aereos fuertes
	//tipo23-cortes aereos flojos
	//efecto00 -golpe normal
	//efecto10 -golpe magia
	//efecto20 -prende naranja
	//efecto30 -prende morado
	//efecto40 -electrocuta
	//efecto50 -snd superhostia
	//efecto60 -conjela
	//efecto01 -snd puo flojo
	//efecto02 -snd puo fuerte
	//efecto03 -snd patada floja
	//efecto04 -snd patada fuerte
	//efecto05 -snd empujon
	//efecto06 -snd arder1
	//efecto07 -snd corte
	//efecto08 -snd arder2
	//efecto09 -snd electricidad
	
	if (id_mueco and exists(id_mueco))
		if (game_mode==MODE_TRAINING and id_mueco.hit_combo==0)
			if (id_mueco==id_luchador1 and rojo==0)
				id_mueco.vida=MAX_LIFE;
				id_alive1.x=89;
			end
			if (id_mueco==id_luchador1 and rojo==1)
				id_mueco.vida=DANGER_LIFE-1;
				id_alive1.x=184;
			end
			if (id_mueco==id_luchador2 and (cputype<>3 or
				(cputype==3 and rojo==0)))
				id_mueco.vida=MAX_LIFE;
				id_alive2.x=231;
			end
			if (id_mueco==id_luchador2 and cputype==3 and rojo==1)
				id_mueco.vida=DANGER_LIFE-1;
				id_alive2.x=136;
			end
			if (id_mueco.flags==4 or id_mueco.flags==5) id_mueco.flags-=4; end
		end
		father.priority=9; //con esto se soluciona el tema
		id_mueco.priority=10; //de que no se inflaran igual
		id_mueco.z=1;
        
        ///////////////////////////////////////////////////////
        //////si el enemigo esta completamente vulnerable//////
        ///////////////////////////////////////////////////////
		if (id_mueco.estado==_normal or
			id_mueco.estado==_avanzar or
			id_mueco.estado==_agachar or
			id_mueco.estado==_lpunch1 or
			id_mueco.estado==_lpunch2 or
			id_mueco.estado==_spunch1 or
			id_mueco.estado==_spunch2 or
			id_mueco.estado==_lkick1 or
			id_mueco.estado==_lkick2 or
			id_mueco.estado==_skick1 or
			id_mueco.estado==_skick2 or
			id_mueco.estado==_toss1 or
			id_mueco.estado==_charge or
			id_mueco.estado==_burla or
			id_mueco.estado==_correr or
			id_mueco.estado==_pajaritos or
			id_mueco.estado==_recibir_flojos_suelo or
			id_mueco.estado==_recibir_FUERTES_BOZO or
			id_mueco.estado==_recibir_FLOJOS_BOZO or
			id_mueco.estado==_recibir_GENJURO or
			id_mueco.estado==_recibir_FUERTES_SUELO or
			id_mueco.estado==-1 or
			((id_mueco.estado==_ayuken or
			(id_mueco.estado==_shoryuken and
			id_mueco.vulnerable>0) or
			id_mueco.estado==_u_kick or
			id_mueco.estado==_uatras_punch or
			id_mueco.estado==_satras_kick or
			id_mueco.estado==_uatras_kick or
			id_mueco.estado==_extra_move or
			((id_mueco.estado==_special1 or
			id_mueco.estado==_special2) and
			id_mueco.vulnerable>0) or
			id_mueco.estado==200) and//el cojer de la u de vd
			id_mueco.y==220))
			
			if (id_mueco.vida<=itchy) 
                he_dado=0; id_mueco.inc_y=-8;
			else 
                he_dado=id_mueco.guardia; 
            end
            
			//con tetsuo no caera esa breba
			if (father<>id_luchador1 and father<>id_luchador2) he_dado=0; end
			if (id_mueco.vida<=damage and bKill) id_mueco.seconds=0; end
			
			//relacion de guardias
			//guardia==0; sin efecto,recibe sin mas
			//guardia==3; se cubre de los golpes suelo,  prosigue en su estado
			//guardia==4; se cubre de los golpes aereos, prosigue en su estado
			//guardia==5; se cubre de todos los golpes,  prosigue en su estado
			//guardia==6; se cubre de los golpes suelo,  ejecuta un golpe
			//guardia==7; se cubre de los golpes aereos, ejecuta un golpe
			//guardia==8; se cubre de todos los golpes,  ejecuta un golpe
			/////////////////////////////////////////////////
			////////parte que controla si es counter/////////
			/////////////////////////////////////////////////
			if (((id_mueco.estado>47 and id_mueco.estado<57) or
				(id_mueco.estado>9 and id_mueco.estado<23) or
				(id_mueco.estado>24 and id_mueco.estado<30)) and
				(id_mueco.ive_hit>-2 and id_mueco.ive_hit<2))
				counteratack=1; signal(type texto_inflar,s_kill);
				if (id_mueco==id_luchador1) texto_inflar(35,1); end
				if (id_mueco==id_luchador2) texto_inflar(35,2); end
			end
			/////////////////////////////////////////////////
			//parte que controla como ha de caer el enemigo//
			/////////////////////////////////////////////////
			//tipo fuertes_suelo//
			if (tipo==1 or tipo==15 or tipo==21)
				if (he_dado==0 or he_dado==4 or he_dado==7)
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_fuertes_suelo;
						id_mueco.inc_x=10;
					end
					he_dado=0;
				end
			end
			//tipo flojos normales//
			if (tipo==2)
				if (he_dado==0 or he_dado==4 or he_dado==7)
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_flojos_suelo;
						id_mueco.inc_x = INCX_W;
					end
					he_dado=0;
				end
			end
			//tipo barridos fuertes//
			if (tipo==3)
				if (he_dado<>5 and he_dado<>8)
					id_mueco.estado=_recibir_barridos_fuertes;
					id_mueco.inc_x=2; he_dado=0;
				end
			end
			//tipo fuertes que arrionan//
			if (tipo==4 or tipo==14 or tipo==16)
				if (he_dado==0 or he_dado==4 or he_dado==7)
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_fuertes_bozo;
						id_mueco.inc_x=10;
					end
					he_dado=0;
				end
			end
			//tipo fuertes aereos//
			if (tipo==5 or tipo==20 or tipo==22)
				if (he_dado==0 or he_dado==3 or he_dado==6)
					if (id_mueco.seconds==0)
						if (father.y>160 or tipo==20)
							id_mueco.estado=_recibir_genjuro; id_mueco.inc_x=6;
						else
							id_mueco.estado=_recibir_fuertes_suelo; id_mueco.inc_x=10;
						end
					end
					he_dado=0;
				end
			end
			//tipo barridos flojos//
			if (tipo==6)
				if (he_dado<>5 and he_dado<>8 and he_dado<>9)
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_flojos_bozo;
						id_mueco.inc_x = INCX_W;
					end
					he_dado=0;
				end
			end
			//tipo recibir empujones//
			if (tipo==7 or tipo==-7)
				if (he_dado<>5 and he_dado<>8)
					id_mueco.estado=_recibir_toss;
					id_mueco.nuevo_estado=_recibir_toss;
					if (tipo==7) id_mueco.intensidad=0;
					else id_mueco.intensidad=3; end
					id_mueco.inc_x=3; he_dado=0;
				end
				if (counteratack==1) id_mueco.vulnerable=1; end
			end
			//recibir flojos aereos//
			if (tipo==8 or tipo==23)
				if (he_dado==0 or he_dado==3 or he_dado==6)
					if (id_mueco.seconds==0)
						if (father.y>160)
							id_mueco.estado=_recibir_flojos_bozo; 
							id_mueco.inc_x = INCX_W>>1;
						else
							id_mueco.estado=_recibir_flojos_suelo; 
							id_mueco.inc_x = INCX_W;
						end
					end
					he_dado=0;
				end
			end
			if (tipo==9 or tipo==17) //cortes usted que arrionan//
				if (he_dado==0 or he_dado==4 or he_dado==7)
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_FUERTES_BOZO;
						id_mueco.inc_x=10;
					end
					he_dado=0;
				end
			end
			if (tipo==10) //provoca caidas en la que le puedes fostiar
				if (he_dado==0 or he_dado==4 or he_dado==7)
					id_mueco.nuevo_estado=_recibir_toss;
					id_mueco.estado=_recibir_toss;
					id_mueco.intensidad=0;
					id_mueco.inc_x=3; 
					id_mueco.vulnerable=1;
					he_dado=0;
				end
			end
			if (tipo==11) //provoca caidas bocabajo
				if (he_dado==0 or he_dado==3 or he_dado==6 or he_dado==9)
					id_mueco.estado=_recibir_colleja;
					he_dado=0;
				end
			end
			if (tipo==12) //tipo puos flojos agachado//
				if (he_dado==0 or he_dado==4 or he_dado==7)
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_FLOJOS_BOZO;
						id_mueco.inc_x = INCX_W;
					end
					he_dado=0;
				end
			end
			if (tipo==13) //tipo golpes sin estrella
				if (he_dado<>5 and he_dado<>8)
					id_mueco.estado=_recibir_FUERTES_bozo;
					id_mueco.y=220; id_mueco.inc_x=10;
					he_dado=0;
				end
			end
			if (tipo==18 or tipo==19) //cortes que hacen launcher//
				if (he_dado==0 or he_dado==4 or he_dado==7)
					id_mueco.nuevo_estado=_recibir_toss;
					id_mueco.estado=_recibir_toss;
					id_mueco.intensidad=0;
					id_mueco.vulnerable=1; 
					id_mueco.inc_x=3;
					he_dado=0;
				end
			end
			if (id_mueco.seconds==1 and id_mueco.estado<>38 and
				id_mueco.estado<>46 and id_mueco.estado<>47)
				if (father.x>id_mueco.x) id_mueco.x-=5;
				else id_mueco.x+=5; end
				if (id_mueco.seconds==1 and duracion>0)
					conjelador (id_mueco, duracion);
				end
			else
				if ((flags==1 and id_mueco.inc_x>0) or
					(flags==0 and id_mueco.inc_x<0))
					id_mueco.inc_x=id_mueco.inc_x*-1;
				end
			end
			if (he_dado==0 and duracion>0)
				conjelador (father, duracion);
			end
		end
		
		/////////////////////////////////////////////////////
		///////////cuando esta en el aire saltando///////////
		/////////////////////////////////////////////////////
		if (id_mueco.estado==_saltar or
			id_mueco.estado==_lkickair or
			id_mueco.estado==_skickair or
			id_mueco.estado==_spunchair or
			id_mueco.estado==_lpunchair or
			id_mueco.estado==_tossair or
			id_mueco.estado==_saltar_atras or
			id_mueco.estado==-3 or
			id_mueco.estado==300 or
			((id_mueco.estado==_ayuken or
			(id_mueco.estado==_shoryuken AND
			id_mueco.vulnerable>0) or
			id_mueco.estado==_uatras_punch or
			id_mueco.estado==_uatras_kick or
			id_mueco.estado==_satras_kick or
			id_mueco.estado==_u_kick or
			id_mueco.estado==_extra_move or
			((id_mueco.estado==_special1 or
			id_mueco.estado==_special2) and
			id_mueco.vulnerable>0)) and id_mueco.y<220) or
			(id_mueco.estado==_recibir_toss and
			id_mueco.vulnerable>0 and id_mueco.paso>1) and
			id_mueco.vulnerable<4)
			
			//le frena los incrementos
			if (id_mueco.seconds==0)
				id_mueco.inc_y=0; id_mueco.inc_x=0;
			end
			
			if (id_mueco.vida<=itchy) 
                he_dado=0; id_mueco.inc_y=-8;
			else 
                he_dado=id_mueco.guardia; 
            end
			
			if (id_mueco.vida<=damage and bKill) id_mueco.seconds=0; end
			/////////////////////////////////////////////////
			////////parte que controla si es counter/////////
			/////////////////////////////////////////////////
			if (((id_mueco.estado>47 and id_mueco.estado<57) or
				(id_mueco.estado>9 and id_mueco.estado<23) or
				(id_mueco.estado>24 and id_mueco.estado<30)) and
				(id_mueco.ive_hit>-2 and id_mueco.ive_hit<2))
				counteratack=1; signal(type texto_inflar,s_kill);
				if (id_mueco==id_luchador1) texto_inflar(35,1); end
				if (id_mueco==id_luchador2) texto_inflar(35,2); end
			end
			/////////////////////////////////////////////////
			//parte que controla como ha de caer el enemigo//
			/////////////////////////////////////////////////
			if (id_mueco.seconds==0)
				if (tipo==1 or tipo==4 or tipo==5 or tipo==21)
					id_mueco.estado=_recibir_fuertes_aire;
				end
				if (tipo==2 or tipo==6 or tipo==8 or tipo==12 or tipo==23)
					id_mueco.estado=_recibir_fuertes_aire;
				end
				if (tipo==9 or tipo==22) //cortes que arrionan//
					id_mueco.estado=_recibir_fuertes_aire;
				end
			end
			
			//tipo golpes sin estrella
			if (tipo==13) 
				id_mueco.estado=_recibir_fuertes_bozo;
				id_mueco.y=220;
			end
			
			//tipo barridos fuertes//
			if (tipo==3 or tipo==16)  
				id_mueco.estado=_recibir_barridos_fuertes;
			end
			
			//tipo recibir empujones//
			if (tipo==7 or tipo==10 or tipo==11 or tipo==-7 or
				tipo==14 or tipo==15 or tipo==20)  
				id_mueco.nuevo_estado=_recibir_toss;
				id_mueco.estado=_recibir_toss;
				if (tipo==-7) id_mueco.intensidad=3;
				else id_mueco.intensidad=0; end
				id_mueco.intensidad=0;
			end
			
			//cortes que tiran
			if (tipo==17 or tipo==18 or tipo==19) 
				id_mueco.nuevo_estado=_recibir_toss;
				id_mueco.estado=_recibir_toss;
				id_mueco.intensidad=0;
			end
			if (id_mueco.seconds==1 and id_mueco.estado<>38 and
				id_mueco.estado<>46 and id_mueco.estado<>47)
				if (father.x>id_mueco.x) id_mueco.x-=5;
				else id_mueco.x+=5; end
				if (id_mueco.seconds==1 and duracion>0)
					conjelador (id_mueco, duracion);
				end
			else
				id_mueco.inc_x=3;
				if ((flags==1 and id_mueco.inc_x>0) or
					(flags==0 and id_mueco.inc_x<0))
					id_mueco.inc_x=id_mueco.inc_x*-1;
				end
			end
			if (tipo==10 or tipo==15 or tipo==14 or
				tipo==17 or tipo==18 or tipo==19 or
				((tipo==7 or tipo==11 or tipo==20) and
				counteratack==1))//golpe launcher o counter
				id_mueco.vulnerable++;
			else
				id_mueco.vulnerable=0;
			end
			if (duracion>0)
				conjelador (father, duracion);
			end
			he_dado=0;
		end
		
		//////////////////////////////////////////////////////
		//////////cuando esta agachado sin cubrirse///////////
		//////////////////////////////////////////////////////
		if (id_mueco.estado==_agachado or
			id_mueco.estado==_lpunchaga or
			id_mueco.estado==_lkickaga or
			id_mueco.estado==_spunchaga or
			id_mueco.estado==_skickaga or
			id_mueco.estado==_recibir_flojos_agachado or
			id_mueco.estado==_recibir_fuertes_agachado or
			id_mueco.estado==-2)
			if (id_mueco.vida<=damage and bKill) id_mueco.seconds=0; end
			he_dado=0;
			/////////////////////////////////////////////////
			////////parte que controla si es counter/////////
			/////////////////////////////////////////////////
			if (((id_mueco.estado>47 and id_mueco.estado<57) or
				(id_mueco.estado>9 and id_mueco.estado<23) or
				(id_mueco.estado>24 and id_mueco.estado<30)) and
				(id_mueco.ive_hit>-2 and id_mueco.ive_hit<2))
				counteratack=1; signal(type texto_inflar,s_kill);
				if (id_mueco==id_luchador1) texto_inflar(35,1); end
				if (id_mueco==id_luchador2) texto_inflar(35,2); end
			end
			
			/////////////////////////////////////////////////
			//parte que controla como ha de caer el enemigo//
			/////////////////////////////////////////////////
			if (id_mueco.seconds==0)
				if (tipo==1 or tipo==15 or tipo==16)  //tipo fuertes normales//
					id_mueco.estado=_recibir_fuertes_agachado;
					id_mueco.inc_x=10;
				end
				if (tipo==2)  //tipo flojos normales//
					id_mueco.estado=_recibir_flojos_agachado;
					id_mueco.inc_x = INCX_W;
				end
				if (tipo==4 or tipo==14 or tipo==21) //tipo fuertes que arrionan//
					id_mueco.estado=_recibir_fuertes_agachado;
					id_mueco.inc_x=10;
				end
				if (tipo==5 or tipo==22)  //tipo fuertes aereos//
					id_mueco.estado=_recibir_fuertes_agachado;
					if (father.y>170) id_mueco.inc_x=6;
					else id_mueco.inc_x=10; end
				end
				if (tipo==6)  //tipo barridos flojos//
					id_mueco.estado=_recibir_flojos_agachado;
					id_mueco.inc_x = INCX_W;
				end
				if (tipo==8 or tipo==23)  //recibir flojos aereos//
					id_mueco.estado=_recibir_flojos_agachado;
					if (father.y>170) id_mueco.inc_x=INCX_W>>1;
					else id_mueco.inc_x=INCX_W; end
				end
				if (tipo==9 or tipo==17)  //cortes
					id_mueco.estado=_recibir_fuertes_agachado;
					id_mueco.inc_x=10;
				end
				if (tipo==12)  //tipo puos flojos agachado//
					id_mueco.estado=_recibir_flojos_agachado;
					id_mueco.inc_x=INCX_W;
				end
				if (tipo==20)//levanta a placer
					id_mueco.estado=_recibir_fuertes_bozo;
					id_mueco.inc_x=4;
				end
			end
			if (tipo==3)  //tipo barridos fuertes//
				id_mueco.estado=_recibir_barridos_fuertes;
				id_mueco.inc_x=3;
			end
			if (tipo==7 or tipo==-7)  //tipo recibir empujones//
				id_mueco.nuevo_estado=_recibir_toss;
				id_mueco.estado=_recibir_toss;
				id_mueco.inc_x=3;
				if (tipo==7) id_mueco.intensidad=0;
				else id_mueco.intensidad=3; end
				if (counteratack==1) id_mueco.vulnerable=1; end
			end
			if (tipo==10) //provoca caidas en la que le puedes fostiar
				id_mueco.estado=_recibir_toss;
				id_mueco.inc_x=3; id_mueco.intensidad=0;
				id_mueco.vulnerable=1;
			end
			if (tipo==11) //provoca caidas bocabajo
				id_mueco.estado=_recibir_colleja;
			end
			if (tipo==13) //tipo golpes sin estrella
				id_mueco.estado=_recibir_fuertes_bozo;
				id_mueco.y=220;
				id_mueco.inc_x=10;
			end
			if (tipo==18 or tipo==19) //cortes que hacen launcher//
				id_mueco.nuevo_estado=_recibir_toss;
				id_mueco.estado=_recibir_toss;
				id_mueco.vulnerable=1; id_mueco.inc_x=3;
				id_mueco.intensidad=0;
			end
			if (id_mueco.seconds==1 and id_mueco.estado<>38 and
				id_mueco.estado<>46 and id_mueco.estado<>47)
				if (father.x>id_mueco.x) id_mueco.x-=5;
				else id_mueco.x+=5; end
				if (duracion>0) conjelador (id_mueco, duracion); end
			else
				if ((flags==1 and id_mueco.inc_x>0) or
					(flags==0 and id_mueco.inc_x<0))
					id_mueco.inc_x=id_mueco.inc_x*-1;
				end
			end
			if (duracion>0) conjelador (father, duracion); end
		end
		
		////////////////////////////////////////////////////////////
		//////////////////GUARDIA en posicion///////////////////////
		////////////////////////////////////////////////////////////
		if (id_mueco.estado==_retroceder or
			id_mueco.estado==_guardiaaltafloja or
			id_mueco.estado==_guardiaalta)
			if (id_mueco.vida<=damage and bKill) id_mueco.seconds=0; end
			he_dado=-1;
			/////////////////////////////////////////////////
			//parte que controla lo que le quita al enemigo//
			//parte que controla si es just guard y//
			//que tipo de estrella tiene que salir //
			/////////////////////////////////////////
			if (tipo==1 or tipo==2 or tipo==4 or tipo==5 or
				tipo==7 or tipo==-7 or tipo==8 or tipo==9 or tipo==10 or
				tipo==11 or tipo==12 or tipo==14 or 
				tipo==20 or tipo==22 or tipo==23 or
				tipo==15 or tipo==17 or tipo==19 or tipo==21)
				
				id_mueco.vida-=itchy;
				if (id_mueco.file==fich1) damegi1-=itchy; end
				if (id_mueco.file==fich2) damegi2-=itchy; end
				
				if (is_playing_snd(channel[30]))
					stop_snd(channel[30]);
				end
				
				channel[30]=0; hit_x=x-((x-id_mueco.x)/3);
				if (id_mueco.just_guard>0 and
					id_mueco.just_guard<4) //si el enemigo acaba de pulsar atras...
					id_mueco.super_guard=1;//...le hace cubrirse menos tiempo
					if (id_mueco.vida>0)
						channel[30]=play_snd (s_hit5,512,320);
					end
					signal(type texto_inflar,s_kill);
					if (id_mueco==id_luchador1)
						texto_inflar(36,2);
					end
					if (id_mueco==id_luchador2)
						texto_inflar(36,1);
					end
					if (efecto<10)
						if (tipo==2 or tipo==6 or tipo==12)//golp flojo
							hit_stars(8,hit_x,y);//estrella del super_guard floja
						else//si era un golpe fuerte
							hit_stars(7,hit_x,y);//estrella del super_guard fuerte
						end
					else
						hit_stars(14,hit_x,y);//estrella de la magia s_guard
					end
					super_guard=2;
				else                       //sino...
					if (id_mueco.vida>0)
						channel[30]=play_snd (s_guard,512,256);
					end
					id_mueco.super_guard=0;//...se cubre normalmente
					if (efecto<10)
						if (tipo==2 or tipo==6 or tipo==12)//golp flojo
							hit_stars(4,hit_x,y);//estrella normal floja
						else//si era un golpe fuerte
							hit_stars(3,hit_x,y);//estrella normal fuerte
						end
					else
						hit_stars(13,hit_x,y);//estrella de la magia
					end
					super_guard=1;
				end
				id_mueco.paso=7;
			else
				if (tipo==13) id_mueco.paso=7;
				else he_dado=0; end
			end
			
			/////////////////////////////////////////////////////
			//parte que controla como ha de cubrirse el enemigo//
			/////////////////////////////////////////////////////
			if (id_mueco.vida<=0)
				id_mueco.estado=_recibir_toss; 
				id_mueco.nuevo_estado=_recibir_toss;
				id_mueco.intensidad=id_mueco.paso=0;
				id_mueco.vida=0; he_dado=0;
				if (father.x>id_mueco.x) id_mueco.inc_x=-3; end
				if (father.x<id_mueco.x) id_mueco.inc_x=3;  end
				if (father.x==id_mueco.x)
					if (father.flags) id_mueco.inc_x=-3;
					else id_mueco.inc_x=3; end
				end
				if (duracion>0) conjelador (father, duracion); end
			else
				if (duracion>0)
					if (super_guard==2) duracion=14; end
					if (super_guard==1)
						if (duracion<7) duracion=4; end
						if (duracion>6 and duracion<12) duracion=7; end
						if (duracion>11) duracion=11; end
					end
				end
				//tipo fuertes normales//
				if (tipo==1 or tipo==15 or tipo==20 or tipo==21)
					id_mueco.estado=_guardiaalta;
					id_mueco.inc_x=INCX_GUARD_S;//10;
				end
				//tipo flojos normales//
				if (tipo==2)
					id_mueco.estado=_guardiaaltafloja;
					id_mueco.inc_x=INCX_GUARD_S;//8;
				end
				//tipo barridos fuertes//
				if (tipo==3)
					id_mueco.estado=_recibir_barridos_fuertes;
					id_mueco.inc_x=3;
				end
				//tipo fuertes que arrionan//
				if (tipo==4 or tipo==14)
					id_mueco.estado=_guardiaalta;
					id_mueco.inc_x=INCX_GUARD_S;//10;
				end
				//tipo fuertes aereos//
				if (tipo==5 or tipo==22)
					id_mueco.estado=_guardiaalta;
					id_mueco.inc_x=INCX_GUARD_W;//7;
					id_mueco.darmagia=1;
				end
				//tipo barridos flojos//
				if (tipo==6)
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_flojos_bozo;
						id_mueco.inc_x=INCX_W;
					end
				end
				if (tipo==7 or tipo==-7)  //tipo recibir empujones//
					id_mueco.estado=_guardiaalta;
					id_mueco.inc_x=INCX_GUARD_X;//12;
					if (father.estado==_tossair)
						id_mueco.darmagia=1;
					end
				end
				if (tipo==8 or tipo==23)  //recibir flojos aereos//
					id_mueco.estado=_guardiaalta;
					id_mueco.inc_x=INCX_GUARD_W;//7; 
					id_mueco.darmagia=1;
				end
				if (tipo==9 or tipo==17 or tipo==19) //cortes que arrionan//
					id_mueco.estado=_guardiaalta;
					id_mueco.inc_x=INCX_GUARD_S;//10;
				end
				if (tipo==10)  //provoca caida en la que puedes fostiar
					id_mueco.estado=_guardiaalta;
					id_mueco.inc_x=INCX_GUARD_X;//12;
				end
				if (tipo==11) //provoca caidas bocabajo
					id_mueco.estado=_guardiaalta;
					id_mueco.darmagia=1;
				end
				if (tipo==12) //puos flojos
					id_mueco.estado=_guardiaaltafloja;
					id_mueco.inc_x=INCX_GUARD_W;//8;
				end
				if (tipo==13)//sin estrella
					id_mueco.estado=_guardiaalta;
					id_mueco.inc_x=INCX_GUARD_S;//7;
				end
				if (tipo==16)  //tipo barridos fuertes que no tiran//
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_FUERTES_BOZO;
						id_mueco.inc_x=10;
					end
				end
				if (tipo==18) //cortes que hacen launcher//
					id_mueco.nuevo_estado=_recibir_toss;
					id_mueco.estado=_recibir_toss;
					id_mueco.vulnerable=1; 
					id_mueco.inc_x=5;
					id_mueco.intensidad=0;
				end
				
				if (he_dado==-1 and duracion>0) duracion = (duracion*8)/10; end				
				conjelador (father, duracion);
				
				if (id_mueco.seconds==1 and id_mueco.estado<>38 and
					id_mueco.estado<>46 and id_mueco.estado<>47 and
					id_mueco.estado<>39 and id_mueco.estado<>41)
					if (father.x>id_mueco.x) id_mueco.x-=5;
					else id_mueco.x+=5; end
					if (duracion>0) conjelador (id_mueco, duracion); end
				else
					if ((flags==1 and id_mueco.inc_x>0) or
						(flags==0 and id_mueco.inc_x<0))
						id_mueco.inc_x=id_mueco.inc_x*-1;
					end
				end
			end
		end
		/////////////////////////////////////////////////////////////
		////////////////////GUARDIA agachado/////////////////////////
		/////////////////////////////////////////////////////////////
		if (id_mueco.estado==_agachadoguardia or
			id_mueco.estado==_guardiabajafloja or
			id_mueco.estado==_guardiabaja)
			if (id_mueco.vida<=damage and bKill) id_mueco.seconds=0; end
			he_dado=-1;
			/////////////////////////////////////////////////
			//parte que controla lo que le quita al enemigo//
			//parte que controla si es just guard y//
			//que tipo de estrella tiene que salir //
			/////////////////////////////////////////
			if (tipo==1 or tipo==2 or tipo==3 or tipo==4 or
				tipo==6 or tipo==7 or tipo==9 or tipo==10 or tipo==-7 or
				tipo==12 or tipo==14 or tipo==15 or tipo==16 or
				tipo==17 or tipo==18 or tipo==19 or tipo==20 or tipo==21)
				
				//tipos de los se podia cubrir
				id_mueco.vida-=itchy;
				if (id_mueco.file==fich1) damegi1-=itchy; end
				if (id_mueco.file==fich2) damegi2-=itchy; end
				
				if (is_playing_snd(channel[30]))
					stop_snd(channel[30]);
				end
				channel[30]=0; hit_x=x-((x-id_mueco.x)/3);
				if (id_mueco.just_guard>0 and
					id_mueco.just_guard<4) //si el enemigo acaba de pulsar atras...
					id_mueco.super_guard=1;//...le hace cubrirse menos tiempo
					if (id_mueco.vida>0)
						channel[30]=play_snd (s_hit5,512,320);
					end
					signal(type texto_inflar,s_kill);
					if (id_mueco==id_luchador1) texto_inflar(36,2); end
					if (id_mueco==id_luchador2) texto_inflar(36,1); end
					if (efecto<10)
						if (tipo==2 or tipo==6 or tipo==12)//si era un golpe flojo
							hit_stars(8,hit_x,y);//estrella del super_guard floja
						else//si era un golpe fuerte
							hit_stars(7,hit_x,y);//estrella del super_guard fuerte
						end
					else
						hit_stars(14,hit_x,y);//estrella de la magia s_guard
					end
					super_guard=2;
				else                       //sino...
					if (id_mueco.vida>0)
						channel[30]=play_snd (s_guard,512,256);
					end
					id_mueco.super_guard=0;//...se cubre normalmente
					if (efecto<10)
						if (tipo==2 or tipo==6 or tipo==12)//si era un golpe flojo
							hit_stars(4,hit_x,y);//estrella normal floja
						else//si era un golpe fuerte
							hit_stars(3,hit_x,y);//estrella normal fuerte
						end
					else
						hit_stars(13,hit_x,y);//estrella de la magia
					end
					super_guard=1;
				end
				id_mueco.paso=7;
			else//si es un golpe alto del que no puede cubrirse
				if (tipo==13) id_mueco.paso=7;
				else he_dado=0; end
			end
			/////////////////////////////////////////////////////
			//parte que controla como ha de cubrirse el enemigo//
			/////////////////////////////////////////////////////
			if (id_mueco.vida<=0)
				id_mueco.estado=_recibir_toss;
				id_mueco.nuevo_estado=_recibir_toss;
				id_mueco.intensidad=id_mueco.paso=0;
				id_mueco.vida=0; he_dado=0; 
				if (father.x>id_mueco.x) id_mueco.inc_x=-3; end
				if (father.x<id_mueco.x) id_mueco.inc_x=3;  end
				if (father.x==id_mueco.x)
					if (father.flags) id_mueco.inc_x=-3;
					else id_mueco.inc_x=3; end
				end
				if (duracion>0) conjelador (father, duracion); end
			else
				if (duracion>0)
					if (super_guard==2) duracion=14; end
					if (super_guard==1)
						if (duracion<7) duracion=4; end
						if (duracion>6 and duracion<12) duracion=7; end
						if (duracion>11) duracion=11; end
					end
				end
				//tipo fuertes normales//
				if (tipo==1 or tipo==15 or tipo==16 or
					tipo==17 or tipo==18 or tipo==20 or tipo==21)
					id_mueco.estado=_guardiabaja;
					id_mueco.inc_x=INCX_GUARD_S;//10;
				end
				//tipo flojos normales//
				if (tipo==2)  
					id_mueco.estado=_guardiabajafloja;
					id_mueco.inc_x=INCX_GUARD_W;//8;
				end
				//tipo barridos fuertes//
				if (tipo==3)  
					id_mueco.estado=_guardiabaja;
					id_mueco.inc_x=INCX_GUARD_S;//10;
				end
				//tipo fuertes que arrionan//
				if (tipo==4 or tipo==14)  
					id_mueco.estado=_guardiabaja;
					id_mueco.inc_x=INCX_GUARD_S;//10;
				end
				//tipo fuertes aereos//
				if (tipo==5 or tipo==22)  
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_fuertes_agachado;
						id_mueco.inc_x=6;
					end
				end
				//tipo barridos flojos//
				if (tipo==6)  
					id_mueco.estado=_guardiabajafloja;
					id_mueco.inc_x=INCX_GUARD_W;//8;
				end
				//tipo recibir empujones//
				if (tipo==7 or tipo==-7)  
					id_mueco.estado=_guardiabaja;
					id_mueco.inc_x=INCX_GUARD_X;//12;
				end
				//recibir flojos aereos//
				if (tipo==8 or tipo==23)  
					if (id_mueco.seconds==0)
						id_mueco.estado=_recibir_flojos_agachado;
						id_mueco.inc_x=INCX_W>>1;
					end
				end
				//cortes que arrionan//
				if (tipo==9 or tipo==17 or tipo==19) 
					id_mueco.estado=_guardiabaja;
					id_mueco.inc_x=INCX_GUARD_W;//10;
				end
				//provoca caidas en la que puedes fostiar//
				if (tipo==10)  
					id_mueco.estado=_guardiabaja;
					id_mueco.inc_x=INCX_GUARD_X;//12;
				end
				//provoca caidas bocabajo
				if (tipo==11) 
					id_mueco.estado=_recibir_colleja;
				end
				//provoca caidas bocabajo
				if (tipo==12) 
					id_mueco.estado=_guardiabajafloja;
					id_mueco.inc_x=INCX_GUARD_W;//8;
				end
				if (tipo==13)
					id_mueco.estado=_guardiabaja;
					id_mueco.inc_x=INCX_GUARD_W;//7;
				end
				
				if (he_dado==-1 and duracion>0) duracion = (duracion*8)/10; end				
				conjelador (father, duracion);
				
				if (id_mueco.seconds==1 and id_mueco.estado<>38 and
					id_mueco.estado<>46 and id_mueco.estado<>47 and
					id_mueco.estado<>40 and id_mueco.estado<>42)
					if (father.x>id_mueco.x) id_mueco.x-=5;
					else id_mueco.x+=5; end
					if (duracion>0) conjelador (id_mueco, duracion); end
				else
					if ((flags==1 and id_mueco.inc_x>0) or
						(flags==0 and id_mueco.inc_x<0))
						id_mueco.inc_x=id_mueco.inc_x*-1;
					end
				end
			end
		end
		
		///////////////////parte general////////////////////
		if (he_dado==0 or he_dado==-1)
			id_mueco.darmagia=0;
			id_mueco.estatico=0;
			id_mueco.angle=0;
			if (id_mueco.vida<=0 and game_mode!=MODE_TRAINING)
				id_mueco.vida=0;
			end
		end
		if (he_dado==0)
			/////////////////////////////////////////////////
			/////parte que controla la estrella del golpe////
			/////////////////////////////////////////////////
			hit_x=x-((x-id_mueco.x)/3);
			if (tipo==1 or tipo==3 or tipo==4 or tipo==5 or
				tipo==7 or tipo==10 or tipo==11 or tipo==14 or
				tipo==15 or tipo==16 or tipo==20 or tipo==-7)
				if (itchy>0 or tipo==7 or tipo==10 or tipo==11 or tipo==-7)
					hit_stars(18,hit_x,y);//estrella special
				else
					hit_stars(1,hit_x,y);//estrella fuerte
				end
			end
			if (tipo==2 or tipo==6 or tipo==8 or tipo==12)
				if (itchy>0)
					hit_stars(-18,hit_x,y);//estrella special
				else
					hit_stars(2,hit_x,y);//estrella flojos
				end
			end
			
			// gore
			if (tipo==9 or tipo==17 or tipo==18 or
				tipo==19 or tipo==21 or tipo==22 or tipo==23)
				hit_stars(5,hit_x,y);//crea el corte
				hit_stars(6,hit_x,y);//crea la sangre,eso es la sangre
			end
			
			/////////////////////////////////////////////////
			//parte que controla lo que le quita al enemigo//
			/////////////////////////////////////////////////
			father.he_dado=0;
			if (id_mueco.seconds==1 and id_mueco.estado<>38 and
				id_mueco.estado<>46 and id_mueco.estado<>47)
			else
				id_mueco.hit_combo++;
				id_mueco.paso=0;
				if ((efecto>19 and efecto<50) or efecto>59)
					if (efecto>19 and efecto<30)
						id_mueco.blend_fx=2;
					end
					if (efecto>29 and efecto<40)
						id_mueco.blend_fx=3;
					end
					if (efecto>39 and efecto<50)
						id_mueco.electrocutado=1;
					end
					if (efecto>59)
						id_mueco.blend_fx=4;
					end
					id_mueco.blend_frame=0;
				else
					id_mueco.blend_fx=id_mueco.blend_fx*10;
				end
			end
			
			id_mueco.guardia=0;
			id_mueco.pipiolos-=pipiolos;
			id_mueco.vida-=damage;
			if (id_mueco.file==fich1)
				if (id_mueco.hit_combo==1) damegi1=0; end
				damegi1-=damage;
			end
			if (id_mueco.file==fich2)
				if (id_mueco.hit_combo==1) damegi2=0; end
				damegi2-=damage;
			end
			if (id_mueco.vida<=0 and !bKill)
				id_mueco.vida = 1;
			end
			
			/////////////////////////////////////////////////
			///////parte que controla si son pajaritos///////
			/////////////////////////////////////////////////
			if (id_mueco.pipiolos<1 and id_mueco.vida>0 and
				id_mueco.pipiolos+pipiolos>0)
				if (id_mueco==id_luchador1)
					texto_inflar(37,2);
				end
				if (id_mueco==id_luchador2)
					texto_inflar(37,1);
				end
			end
			
			/////////////////////////////////////////////////
			//parte que controla el pow que llena la hostia//
			/////////////////////////////////////////////////
			if (father.estado<>_special1 and father.estado<>_special2 and
				father.estado<>-5)
				if ((father.luchador==FIGHTER_ATHENA and father.estado==_extra_move and
					(tipo==5 or tipo==10)) or (father.luchador==FIGHTER_TERRY or
					father.luchador==FIGHTER_TERRY94 or father.estado==_shoryuken))
					father.power+=2;
				else
					if (tipo==1 or tipo==3 or tipo==4 or tipo==5 or tipo==20 or
						tipo==7 or tipo==9 or tipo==10 or tipo==11 or tipo==14 or
						tipo==15 or tipo==16 or tipo==17 or tipo==18 or tipo==19 or
						tipo==-7)
						father.power+=6;
					end
				end
				if (tipo==2 or tipo==6 or tipo==8 or 
					tipo==12 or tipo==22 or tipo==23)
					father.power+=3;
				end
			end
			
			/////////////////////////////////////////////////
			//parte que controla como ha de sonar la hostia//
			/////////////////////////////////////////////////
			if (is_playing_snd(channel[30]))
				stop_snd(channel[30]);
			end
			channel[30]=0;
			if (efecto==1 or efecto==11 or efecto==21 or efecto==31 or efecto==41)
				channel[30]=play_snd (s_hit1,380,256);
			end
			if (efecto==2 or efecto==12 or efecto==22 or efecto==32 or efecto==42)
				channel[30]=play_snd (s_hit2,512,256);
			end
			if (efecto==3 or efecto==13 or efecto==23 or efecto==33 or efecto==43)
				channel[30]=play_snd (s_hit3,480,256);
			end
			if (efecto==4 or efecto==14 or efecto==24 or efecto==34 or efecto==44)
				channel[30]=play_snd (s_hit4,480,256);
			end
			if (efecto==5 or efecto==15 or efecto==25 or efecto==35 or efecto==45)
				channel[30]=play_snd (s_hit5,512,256);
			end
			if (efecto==6 or efecto==16 or efecto==26 or efecto==36 or efecto==46)
				channel[30]=play_snd (s_burn1,512,256);
			end
			if (efecto==7 or efecto==17 or efecto==27 or efecto==37 or efecto==47)
				channel[30]=play_snd (s_cut,450,256);
			end
			if (efecto==8 or efecto==18 or efecto==28 or efecto==38 or efecto==48)
				channel[30]=play_snd (s_burn2,512,256);
			end
			if (efecto==9 or efecto==19 or efecto==29 or efecto==39 or efecto==49)
				channel[30]=play_snd (s_shock1,452,256);
			end
			if (efecto==50) channel[30]=play_snd (s_megahit,512,256);
				if (father.luchador==FIGHTER_K and (father.paso<100 or
					father.super_sp==1))
					id_mueco.blend_fx=2; id_mueco.blend_frame=0;
				end
			end
			if (efecto==60)
				channel[30]=play_snd (s_kura1,512,256);
			end
			if (id_mueco.vida<=0 and 
				game_mode!=MODE_TRAINING and 
				parpadeo_final==0)
				channel[30]=play_snd (s_fhit,512,256);
			end
			
			//////////// vibracion ////////////////////////
			id_mueco.vibracion = damage>>PRECISION_BITS;
			
			////////////si tiembla la pantalla/////////////
			if (father.luchador==FIGHTER_TAKUMA and (father.estado==-4 or
				(father.estado==-5 and father.intensidad==0)))
				tembleque(5+id_mueco.flags,0);
			end
		  
			/////////////contador de combos////////////////
			if (id_mueco.hit_combo==2) combos(id_mueco,1); end
			if (id_mueco.hit_combo==10) combos(id_mueco,2); end
		  
			//////efectos extra///////
			if (id_mueco.vida<=0 and 
				game_mode!=MODE_TRAINING and 
				parpadeo_final==0)
				if (efecto>9) pantallazo(10);
				else pantallazo(0); end
				ralenti(1); id_mueco.vida=0; parpadeo_final=1;
			else
				if (efecto>9) pantallazo(0); end
			end
		end
		
		if (he_dado==-1)
			//parte que controla el pow que llena la hostia//
			if (father.estado<>_special1 and father.estado<>_special2 and
				father.estado<>-5)
				if (tipo==1 or tipo==3 or tipo==4 or tipo==7 or
					tipo==9 or tipo==10 or tipo==15 or tipo==16 or tipo==21 or
					tipo==17 or tipo==18 or tipo==19 or tipo==20 or tipo==-7)
					father.power+=2;
				end
				if (tipo==5 or tipo==11)
					father.power+=6;
				end
				if (tipo==2 or tipo==6 or tipo==12 or 
					tipo==22 or tipo==23)
					father.power+=1;
				end
				if (tipo==8)
					father.power+=3;
				end
			end
			father.he_dado=-1; id_mueco.paso=7;  
	  
		end
		if (he_dado>2)
			
			id_mueco.vida-=itchy;
			if (id_mueco.file==fich1) damegi1-=itchy; end
			if (id_mueco.file==fich2) damegi2-=itchy; end
			if (id_mueco.vida<=0 and !bKill)
				id_mueco.vida = 1;
			end
			
			hit_x=x-((x-id_mueco.x)/3);
			if (efecto<10)
				if (tipo==2 or tipo==6 or tipo==12)//si era un golpe flojo
					hit_stars(8,hit_x,y);//estrella del super_guard floja
				else//si era un golpe fuerte
					hit_stars(7,hit_x,y);//estrella del super_guard fuerte
				end
			else
				hit_stars(14,hit_x,y);//estrella de la magia s_guard
			end
			
			conjelador (id_mueco, 8);
			conjelador (father, 8);
			
			//////////// vibracion ////////////////////////
			id_mueco.vibracion = damage>>PRECISION_BITS;
			
			if (he_dado>5)
				if (id_mueco.luchador==FIGHTER_KASUMI) 
					play_snd (s_catch,512,256); 
				end
				id_mueco.intensidad+=2;
				if (id_mueco.estado==_special1 or 
					id_mueco.estado==_special2 or
					id_mueco.estado==-5)
					id_mueco.paso=1;
				else
					id_mueco.paso=0;
				end
			else
				play_snd (s_guard,512,256);
			end
			father.he_dado=-1;
		end////////////fin parte generica//////////////
	end
	
	if (id_striker and exists(id_striker))
		id_striker.z=1;
		if (id_striker.estado==_avanzar or
			id_striker.estado==_toss1)
			hit_x=x-((x-id_striker.x)/3);
			if (tipo==1 or tipo==3 or tipo==4 or tipo==5 or
				tipo==7 or tipo==10 or tipo==11 or tipo==14 or
				tipo==15 or tipo==16 or tipo==20 or tipo==-7)
				if (itchy>0 or tipo==7 or tipo==10 or tipo==11 or tipo==-7)
					hit_stars(18,hit_x,y);//estrella special
				else
					hit_stars(1,hit_x,y);//estrella fuerte
				end
			end
			if (tipo==2 or tipo==6 or tipo==8 or tipo==12)
				if (itchy>0)
					hit_stars(-18,hit_x,y);//estrella special
				else
					hit_stars(2,hit_x,y);//estrella flojos
				end
			end
			
			// gore
			if (tipo==9 or tipo==17 or tipo==18 or
				tipo==19 or tipo==21 or tipo==22 or tipo==23)
				hit_stars(5,hit_x,y);//crea el corte
				hit_stars(6,hit_x,y);//crea la sangre,eso es la sangre
			end
			id_striker.paso=0; 
			id_striker.estado=_recibir_toss;
			
			// efectos fx, paletas
			if (efecto>19 and efecto<30)
				id_striker.blend_fx=2;
				id_striker.blend_frame=0;
			end
			if (efecto>29 and efecto<40)
				id_striker.blend_fx=3;
				id_striker.blend_frame=0;
			end
			if (efecto>39 and efecto<50)
				id_striker.electrocutado=1;
				id_striker.blend_frame=0;
			end
			if (efecto>59)
				id_striker.blend_fx=4;
				id_striker.blend_frame=0;
			end
			
			if (efecto==1 or efecto==11 or efecto==21 or efecto==31 or efecto==41)
				play_snd (s_hit1,380,256);
			end
			if (efecto==2 or efecto==12 or efecto==22 or efecto==32 or efecto==42)
				play_snd (s_hit2,512,256);
			end
			if (efecto==3 or efecto==13 or efecto==23 or efecto==33 or efecto==43)
				play_snd (s_hit3,480,256);
			end
			if (efecto==4 or efecto==14 or efecto==24 or efecto==34 or efecto==44)
				play_snd (s_hit4,480,256);
			end
			if (efecto==5 or efecto==15 or efecto==25 or efecto==35 or efecto==45)
				play_snd (s_hit5,512,256);
			end
			if (efecto==6 or efecto==16 or efecto==26 or efecto==36 or efecto==46)
				play_snd (s_burn1,512,256);
			end
			if (efecto==7 or efecto==17 or efecto==27 or efecto==37 or efecto==47)
				play_snd (s_cut,450,256);
			end
			if (efecto==8 or efecto==18 or efecto==28 or efecto==38 or efecto==48)
				play_snd (s_burn2,512,256);
			end
			if (efecto==9 or efecto==19 or efecto==29 or efecto==39 or efecto==49)
				play_snd (s_shock1,452,256);
			end
			if (efecto==50) channel[30]=play_snd (s_megahit,512,256); end
			if (efecto==60) play_snd (s_kura1,512,256); end
		end
	end
	//frame;
end

process hit_stars(tipo,x,y);

begin
	flags=father.flags;
	z=father.z-9;//sale por encima de los kekos(creo)
	ctype=c_scroll;
	
	if (tipo==12 or tipo==15 or tipo==-15 or tipo==16 or
		tipo==17 or tipo==20 or tipo==50)
		file=father.file;
	else
		file=fichad;//fichero estrellas
	end
	
	if (flags==4 or flags==5) flags-=4; end
	if (tipo==21) angle=90000; end
	
	// aditivo
	if (!SLOW_MACHINE)
		if (tipo==15 or tipo==20 or tipo==50)
			flags=father.flags+16; 
		end
	end
	
	loop
		if (tipo==1)
			graph=stars[paso++];
			if (paso==sizeof(stars)/DIV) return; end
		end
		if (tipo==2)
			size=70;//estrella flojos
			graph=stars[paso++];
			if (paso==sizeof(stars)/DIV) return; end
		end
		if (tipo==3)
			graph=stars[paso++]+7;
			if (paso==sizeof(stars)/DIV) return; end
		end
		if (tipo==4)
			size=70;
			graph=stars[paso++]+7;
			if (paso==sizeof(stars)/DIV) return; end
		end
		if (tipo==5)
			graph=cut[paso++];
			if (paso==sizeof(cut)/DIV) return; end
		end
		if (tipo==6)
			graph=blood[paso++];
			if (paso==sizeof(blood)/DIV) return; end
		end
		if (tipo==7 or tipo==-7) //estrella super_guard fuerte
			graph=s_guardia[paso++];
			if (paso==sizeof(s_guardia)/DIV) return; end
		end
		if (tipo==8) //estrella super_guard floja
			size=70;
			graph=s_guardia[paso++];
			if (paso==sizeof(s_guardia)/DIV) return; end
		end
		if (tipo==9) //estrella estampar
			z=father.z+5; graph=caer[paso++];
			if (paso==sizeof(caer)/DIV) return; end
		end
		if (tipo==10)
			z=father.z+1; flags=4;
			graph=pawa[paso++];
			if (paso==sizeof(pawa)/DIV) return; end
		end
		if (tipo==11)
			if (paso==0) play_snd (s_catch,300,256); end
			graph=catched[paso++]; z=father.z+1;
			if (paso==sizeof(catched)/DIV) return; end
		end
		if (tipo==12)
			z=father.z-1;
			graph=ath_catch[paso++]+300;
			if (paso==sizeof(ath_catch)/DIV or (father.estado<>_ayuken and
				father.estado<>_voltear)) return;
			end
		end
		if (tipo==13)//estrella cubrirse magias
			graph=m_guardia[paso++];
			if (paso==sizeof(m_guardia)/DIV) return; end
		end
		if (tipo==14)//estrella cubrirse magias s_guard
			graph=m_guardia[paso++]+67;
			if (paso==sizeof(m_guardia)/DIV) return; end
		end
		if (tipo==15 or tipo==50)//sicobol reventando
			graph=sicobol[paso++]+300;
			if (paso==sizeof(sicobol)/DIV)
				if (tipo==50)
					from blend_fx=522 to 533;
						convert_palette (file,blend_fx,&rojoxazul);
					end
				end
				return;
			end
		end
		if (tipo==17)//hadouken de ryu reventando
			paso++;
			if (paso==1) graph=102; end
			if (paso==3) graph=103; end
			if (paso==5) graph=104; end
			if (paso==7) return;    end
		end
		if (tipo==18 or tipo==-18)//estrella golpes gochos
			if (tipo==-18) size=70; end
			if (paso==0) graph=141; end paso++; graph++;
			if (graph>152) return; end
		end
		if (tipo==19 or tipo==-19 or tipo==21)//magia reventando
			if (tipo==19 or tipo==21) size=75; end
			if (paso==0) graph=153; end paso++; graph++;
			if (graph>160) return; end
		end
		if (tipo==20) //power wave reventando
			
			if (paso==0) graph=567; end
			
			paso++;
			if (paso%2==0)
				graph++;
			end
			if (graph>573) return;    end
		end
		frame;
	end
end

process special_star(tipo,x,y);

private
	special1[]=0,0,0,0,117,117,118,118,119,119,120,120,121,121,122,122,
	123,123,124,124,125,125,126,126,127,127,128,128,129,129,130,130,131,131;
	
begin
	ctype = c_scroll;
	loop
		frame;
		if (tipo==1 or tipo==-1 or tipo==10)//special
			file = fichad;
			z = father.z-5;
			inc_x = 0;
			
			if (father.estado<>_special1 and father.estado<>_special2)
				if (paso>0)
					paso=33;
				else
					signal (type special_star,s_kill); return;
				end
			end
			
			if (paso==0)
				if (!SLOW_MACHINE)
					flags = 16; size=150;
				end
				play_snd (s_special,512,256);
				special_star (3,scroll.x0+160,scroll.y0+120);
				
				//delete_draw (all_drawing);
				
				if (father.super_sp==1)
					from counter=117 to 131;
						convert_palette (fichad,counter,&special);
					end
					convert_palette (fichad,61,&special);
				end
			end
			
			if (exists(father.enemigo)) signal (father.enemigo,s_freeze_tree); end
			if (tipo<>-1 and exists(father)) signal(father,s_freeze); end
			if (tipo<>10) signal(type orlas,s_freeze); end
			signal (type hadoken,s_freeze);
			signal (type hit_stars,s_freeze);
			signal (type hielo,s_freeze);
			signal (type crimsom,s_freeze);
			signal (type conjelador,s_freeze);
			signal (type straiker,s_freeze);
			signal (type substrk,s_freeze);
			
			if (paso==1 and !SLOW_MACHINE) signal (type stage_obj,s_sleep);  end
			if (paso==1 and SLOW_MACHINE)  signal (type stage_obj,s_freeze); end
			if (paso==5 and !SLOW_MACHINE) special_star (2,x,y); end
			
			graph=special1[paso++];
			if (paso==sizeof(special1)/DIV)
				if (tipo<>-1 and exists(father)) signal (father,s_wakeup); end
				if (exists(father.enemigo)) signal(father.enemigo,s_wakeup_tree); end
				if (tipo<>10) signal (type orlas,s_wakeup); end
				signal (type hadoken,s_wakeup);
				signal (type hit_stars,s_wakeup);
				signal (type hielo,s_wakeup);
				signal (type crimsom,s_wakeup);
				signal (type conjelador,s_wakeup);
				signal (type straiker,s_wakeup);
				signal (type substrk,s_wakeup);
				signal (type stage_obj,s_wakeup);
				
				if (father.super_sp==1)
					from counter=117 to 131;
						convert_palette (fichad,counter,&special);
					end
					convert_palette (fichad,61,&special);
				end
				signal (id,s_kill_tree);
				//return;
			end
		end
		
		if (tipo==2)
			if (paso == 0) size=200; paso++; end
			flags = 16;
			file = fichad; 
			z = father.z+10; 
			graph = 61;
			size -= 10;
			if (size=<0) return; end
		end
		
		if (tipo==3)//pantalla negra
			ctype=c_scroll; 
			if (!SLOW_MACHINE) alpha = 180; end
			from nuevo_estado=0 to 255;
				pintura[nuevo_estado]=1 mod 256;
			end
			convert_palette (fich_game,999,&pintura);
			file=fich_game; graph=999;
			x=scroll.x0+160; y=scroll.y0+120;
			z=father.z+11;
		end
	end
end

process orlas (x,y,z,flags,tipo,launcher,grandfather);

private
	letal;
	flag;
	//letal es para indicar cuando la orla ha de golpear
	//(cuando es mayor que cero) y como ha de
	//reacionar el enemigo(dependiendo de la cifra)
	//letal=1;  prender naranja y arriona al enemigo
	//letal=2;  prende naranja y fostia al enemigo
	//letal=3;  prende naranja y tira al enemigo
	//letal=4;  prende morado y arriona al enemigo
	//letal=5;  prende morado y fostia al enemigo
	//letal=6;  prende morado y tira al enemigo
	//letal=7;  arriona al enemigo
	//letal=8;  fostia al enemigo
	//letal=9;  tira al enemigo
	//letal=10; arriona al enemigo y devueve magias
	//letal=11; fostia al enemigo y devuelve magias
	//letal=12; tira al enemigo y devuelve magias
	//letal=13; electrocuta y arriona al enemigo
	//letal=14; electrocuta y fostia al enemigo
	//letal=15; electrocuta y tira al enemigo
	//letal=16; electrocuta y tira bocabajo al enemigo
	//letal=17; conjela y fostia al enemigo
	//letal=18; conjela y tira al enemigo;
	//letal=20; corta y hace girar al enemigo
	
	pica; id_mueco; id_striker; id_magia;
	orla1[]=209,209,210,210,211,211,212,212,213,213,214,214,215,
	215,215,215,216,216,216,216,217,217,217,217;//shoryuken kyo
	orla2[]=200,200,201,201,202,202,203,203,204,204,205,205,206,
	206,207,207,208,208,208,208,209,209,209,209;//shoryuken iori
	ryueijin[]=200,0,200,0,200,0,200,0,200,0,200,0,200,0;
	reflect[]=117,117,117,117,148,148,149,149,150,150,151,151,148,148,149,149,150,
	150,151,151,152,152,153,153,154,154,155,155,156,156,157,157,158,158,159,159,159,159;
	power_g[]=140,140,141,141,142,142,143,143,144,144,145,145,146,146,147,147,
	148,148,149,149,150,150,151,151,151,158,158,158,159,159,159,160,160,160,160;
	shinning[]=188,188,188,188,184,184,185,185,186,186,187,187,188,188;
	kyo_gosht2[]=179,179,180,180,181,181,182,182,183,183,184,184,185,185,185,185;
	kyo_gosht3[]=186,186,187,187,188,188,189,189,190,190,190,190,190,190;
	kyo_gosht4[]=191,191,192,192,193,193,193,193,194,194,194,194,194,194;
	kyored[]=214,214,214,214,215,215,215,215,216,216,216,216,217,217,217,217,
	218,218,218,218,219,219,219,219,220,220,220,220,221,221,221,221,214,214,
	214,214,215,215,215,215,216,216,216,216,217,217,217,217,218,218,218,218,
	219,219,219,219,220,220,220,220,221,221,221,221;
	raiko[]=100,100,101,101,102,102,103,103,104,104;
	hurricane[]=105,105,106,106,107,107,108,108,109,109,110,110,111,111,
	112,112,105,105,106,106,107,107,113,113,114,114,115,115,116,116,117,
	117,118,118,119,119,120,120;
	elect[]=101,101,100,100,101,101,102,102,103,103,104,104,0;
	crimson_f[]=587,587,588,588,588,589,589,589,590,590,590,
	591,591,591,592,592,592,593,593,594,594,594;
	
	
begin
	ctype=c_scroll;
	file=father.file;
	flag=flags%2;
	
	if (tipo<>4 and tipo<>18 and tipo<>23 and
		tipo<>27 and tipo<>16 and tipo<>-16 and
		tipo<>28 and tipo<>29 and tipo<>-3 and
		tipo<>-36 and tipo<>37 and tipo<>38)
		father=grandfather;
	end
	if (tipo==5 or tipo==6) size=60; end
	if (tipo==7 or tipo==-7 or tipo==-1) 
		size=125;
	end
	if (tipo==11)
		play_snd (s_boom,512,256);
		graph=582;  size=115;
	end
	if (tipo==13 or tipo==14 or tipo==18)
		play_snd (s_flame3,512,256);
		graph=561; size=110; y=215;
	end
	if (tipo==18) graph=100; y=155; end
	if (tipo==24 or tipo==25 or tipo==26 or
		tipo==28 or tipo==29) size=110;
	end
	if (tipo==23 or (tipo==17 and father.estado<>_uatras_punch))
		vulnerable=1;
	end
	if (tipo==32) graph=597; intensidad=father.intensidad; end
	if (tipo==33) graph=595; end
	if (tipo==34) graph=607; end
	if (tipo==35) 
		graph=621; size=110;
		play_snd (s_flame5,512,256);
		hit_y = y - 20;
	end
	if (tipo==33 or tipo==34)
		play_snd (s_flame1,512,256);
		hit_y = y - 20;
	end
	if (tipo==36 or tipo==-36) graph=616;
		play_snd (s_kura6,425,256);
		if (tipo==-36) file=grandfather.file; end
	end
	if (tipo==37) graph=505;
		if (father.power==74) size=110; end
		if (father.power<100) father=grandfather; end
		if (father.power==100) 
			file=grandfather.file;
			size=160-(z*8);
		end
	end
	
	if (tipo==38) 
		graph=25; 
		play_snd (s_tetsuo3,512,256); 
	end

	// temas de flags
	if (tipo==16 or tipo==-16 or // electricidad blanka
		tipo==23) // orla galdford
		alpha = 128;
	end
	if (!SLOW_MACHINE)
		if (tipo==5 or tipo==6 or // psyco reflector
			tipo==7 or tipo==-7 or //power geiser
			tipo==8 or tipo==9 or // especial athena
			tipo==18 or // orla hotaru
			tipo==28 or // tornado joe
			tipo==32) // u alante kula 
			flags+=16;
			//fxmode = fx_additiveblend;
		end
	end	
	
	// aadir aqui los que apagan fuegos
	if (tipo==5 or tipo==6 or tipo==7 or tipo==-7 or tipo==18 or 
		tipo==28 or tipo==30 or tipo==31 or tipo==37 or tipo==38)
		blend_fx = -1;
	end
	
	// aadir aqui los que queman
	if (tipo==0 or tipo==1 or tipo==-1 or tipo==10 or tipo==-10 or
		tipo==11 or tipo==13 or tipo==15 or tipo==17 or tipo==19 or
		tipo==20 or  tipo==21 or  tipo==22 or tipo==-20 or tipo==-21 or 
		tipo==-22 or tipo==24 or tipo==25 or tipo==26)
		blend_fx = 2;	
	end
	
	// aadir aqui los que queman morado
	if (tipo==2 or tipo==3 or tipo==-3 or tipo==12 or tipo==33 or 
		tipo==34 or tipo==35)
		blend_fx = 3;
	end
		
	// aadir aqui los que conjelan
	if (tipo==32 or tipo==36 or tipo==-36)
		blend_fx = 4;
	end
	
	// aadir aqui los que electrocutan
	if (tipo==8 or tipo==9 or tipo==16 or tipo==-16 or tipo==23 or 
		tipo==27 or tipo==29)
	end
	
	loop
				
		frame;
		
		//shoryu flojo/fuerte de Kyo
		if (tipo==0 or tipo==1 or tipo==-1)
			graph=orla1[paso++]+300;
			if (paso==sizeof(orla1)/DIV)
				return;
			end
			if ((paso==1 and father.he_dado==1) or
				(paso==2 and father.he_dado==1) or
				(paso==3 and father.he_dado==1))
				letal=3; pica=1; power=3; blend_fx=2;
				if (father.estado==_special1)
					if (father.super_sp==0) damage=15; end
					if (father.super_sp==1) damage=19; end
				end
				if (father.estado<>_special1)
					if (father.power==74 or tipo==-1)
						damage=15+(tipo*5);
					else
						damage=5+(tipo*5);
					end
				end
			else
				letal=0;
			end
			if (paso<6)
				y-=1;
			else
				y-=1+abs(tipo);//si es tipo1(fuerte)subira dos y en vez de una
			end
		end
		
		//shoryu flojo/fuerte de Iori
		if (tipo==2 or tipo==3 or tipo==-3)
			if (tipo==-3) file=grandfather.file; end
			graph=orla2[paso++]+300;
			if (paso==sizeof(orla2)/DIV)
				return;
			end
			letal=0; y-=2;
		end
		
		//ryueijin
		if (tipo==4) 
			graph=200; paso++;
			if (paso==23) return; end
			
			flags = flags%2;
			if (paso%4==0 or paso%4==1)
				flags+=4;
			end
			
			if (he_dado==1) letal=12; damage=12; pica=1; else letal=0; end
			if (father.estado<>_toss1) graph=0; return; end
		end
		
		//sico reflector
		if (tipo==5 or tipo==6)
			graph=reflect[paso++]+400;
			if (paso==sizeof(reflect)/DIV)
				return;
			end
			if (size<100) size+=10; end
			
			letal=0; damage=0; pica=0;
			if (paso==16)
				letal=12; damage=8; pica=2;
				
			elseif (paso==6 or paso==8 or paso==10 or paso==12 or paso==14 or paso==16)
				
				if (father.power==74)
					letal=11; damage=4; pica=1;
				else
					letal=11; damage=3; pica=1;
				end
			end
			
			if (paso==5) play_snd (s_ath3,512,256); end
			if (father.graph<>121 and paso==2) paso--; end
			if (paso<5 and father.estado<>_uatras_kick) return; end
			if (tipo==5 and paso==5) paso=11; end
			if (paso==35)
				pegata (x,y,559,c_scroll,flags,100,z,33,father.file);
			end
			x=father.hit_x;
			y=father.hit_y;
			pipiolos=6; power=2;
		end
		
		//power geiser
		if (tipo==7 or tipo==-7) 
			graph=power_g[paso++]+400;
         
			if (paso==(sizeof(power_g)/DIV)-3)
				y-=125;
			end
			if (paso==sizeof(power_g)/DIV)
				return;
			end
					 
			if (x<0) x=0; end
			if (x>754) x=754; end
			if ((paso>=5 and paso<=11) and he_dado==1)
				letal=9;
				if (father.super_sp==0)
					damage=41; pica=4;
				else
					damage=21; pica=3;
				end
			else
				letal=0;
			end
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia)) id_magia.vida--; end
		end
		
		//bola que gira especial athena
		if (tipo==8) 
			if (estado==0)
				super_sp=father.super_sp;
				graph=shinning[paso++]+400;
				if (paso==sizeof(shinning)/DIV)
					paso=4;
				end
				y+=inc_y;
				x+=inc_x;
				
				if (x0==0)
					if (paso==1)
						inc_y=-6; inc_x=-6;
					end
					inc_y+=1; inc_x+=1;
					if (inc_y>6) x0=1;
						inc_x=10; inc_y=10;
					end
				end
				if (x0==1)
					inc_y-=1; inc_x-=1;
					if (inc_y<-10) x0=2;
						inc_x+=1; inc_y+=1;
					end
					if (father.intensidad>0)
						inc_x=(father.x-x)/8;
						inc_y=((father.y-120)-y)/8;
						x0=3;
					end
				end
				if (x0==2)
					inc_y+=1; inc_x+=1;
					if (inc_y=>10) x0=1; end
					if (father.intensidad>0)
						inc_x=(father.x-x)/8;
						inc_y=((father.y-120)-y)/8;
						x0=3;
					end
				end
				if (x0==3)
					if (inc_y==0 and y>father.y) inc_y=-1; end
					if (inc_y==0 and y<father.y) inc_y=1;  end
					if (inc_x==0 and x>father.x) inc_x=-1; end
					if (inc_x==0 and x<father.x) inc_x=1;  end
					if (y<110 and abs(father.x-x)<40)
						return;
					end
				end
				
				if (father.he_dado==1)
					letal=15; 
					damage=8+(father.super_sp*3); 
					pica=1+father.super_sp; 
					pipiolos=12; 
				else
					letal=0; 
				end
				
				if (father.intensidad>0) letal=0; end
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia))
					if (father.super_sp==0) id_magia.vida--;
					else id_magia.vida=0; end
				end
				if (inc_y<0) z=father.z-3; end
				if (inc_y>0) z=father.z+3; end
				if (father.paso>159 or (father.estado<>_special2 and
					father.estado>-1)) 
					estado=1; paso=0; x0=0; letal=0;
					x1=father.x; y1=father.y-75;
				end
				size=120-inc_y;
			end
			
			if (estado==1)
				
				paso++;
				graph=586;
				z=father.z-5; 
				
				x = x1+(((40+paso)*cos(180000 + (paso*20000)))/DIV_SINCOS);
				y = y1+(((40+paso)*sin(180000 + (paso*20000)))/DIV_SINCOS);
				
				size-=2;
				if (size<10) return; end
			end
		end
		
		//bola que gira especial athena
		if (tipo==9) 
			if (estado==0)
				super_sp=father.super_sp;
				graph=shinning[paso++]+400;
				if (paso==sizeof(shinning)/DIV)
					paso=4;
				end
				y+=inc_y;
				x+=inc_x;
				if (x0==0)
					if (paso==1) z=father.z+3;
						frame(200); inc_y=-6; inc_x=6;
					end
					inc_y+=1; inc_x-=1;
					if (inc_y>6) x0=1;
						inc_x=-10; inc_y=10;
					end
				end
				if (x0==1)
					inc_y-=1; inc_x+=1;
					if (inc_y<-10) x0=2;
						inc_x-=1; inc_y+=1;
					end
					if (father.intensidad>0)
						inc_x=(father.x-x)/8;
						inc_y=((father.y-120)-y)/8;
						x0=3;
					end
				end
				if (x0==2)
					inc_y+=1; inc_x-=1;
					if (inc_y=>10) x0=1; end
					if (father.intensidad>0)
						inc_x=(father.x-x)/8;
						inc_y=((father.y-120)-y)/8;
						x0=3;
					end
				end
				if (x0==3)
					if (inc_y==0 and y>father.y) inc_y=-1; end
					if (inc_y==0 and y<father.y) inc_y=1;  end
					if (inc_x==0 and x>father.x) inc_x=-1; end
					if (inc_x==0 and x<father.x) inc_x=1;  end
					if (y<110 and abs(father.x-x)<40)
						return;
					end
				end
				if (father.he_dado==1 and father.intensidad==0)
					letal=15; 
					damage=8+(father.super_sp*3); 
					pica=1+father.super_sp; 
					pipiolos=12; 
				else
					letal=0;
				end
				
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia))
					if (father.super_sp==0) id_magia.vida--;
					else id_magia.vida=0; end
				end
				
				if (inc_y<0) z=father.z-3; end
				if (inc_y>0) z=father.z+3; end
				if (father.paso>159 or (father.estado<>_special2 and
					father.estado>-1))
					estado=1; paso=0; x0=0; letal=0;
					x1=father.x; y1=father.y-75;
				end
				size=120-inc_y;

				if (father.enemigo.x>father.x) flag=0; else flag=1; end
				
			end
			
			if (estado==1)
				
				paso++;
				graph=586;
				z=father.z-5; 
				
				x = x1+(((40+paso)*cos(paso*20000))/DIV_SINCOS);
				y = y1+(((40+paso)*sin(paso*20000))/DIV_SINCOS);
				
				size-=2;
				if (size<10) return; end
				
			end
		end
		
		//pudrete
		if (tipo==10 or tipo==-10)
			paso++;
			if (paso==1) graph=572;
				if (flag) x=father.x-78;
				else x=father.x+78; end
				y=father.y-55;
			end
			if (paso%4==0)
				graph++;
			end
			if (father.estado==_special2)
				if (flag) x=father.x-78;
				else x=father.x+78; end
				y=father.y-55;
			else
				if (flag) x--; else x++; end
				if (graph<577) graph=577; end
			end
			if (graph>582)
				return;
			end
			if (graph==573 or graph==574 or graph==575 or
				graph==576 or graph==577 or graph==578)
				if (grandfather.he_dado==1) letal=3;
				else letal=0; end
				
				if (graph==573 or graph==574) damage=20; pica=3; end
				if (graph==575 or graph==576) damage=15; pica=2; end
				if (graph==577 or graph==578) damage=10; pica=1; end
				if (father.enemigo.hit_combo==0) 
					damage+=8; pica++; 
				end
			else
				letal=0;
			end
			if (paso<24)
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia))
					id_magia.vida--;
				end
			end
		end
		
		//explosion especial kyo
		if (tipo==11)
			paso++;
			if ((paso%2==0) and (paso<>12 and paso<>16)) 
				graph++; 
			end
			if (graph>599)
				return;
			end
			if (grandfather.he_dado==1 and (graph==585 or
				graph==586 or graph==587))
				if (father.enemigo.y<220) letal=3;
				else letal=1; end
				damage=20; pica=2;
			else
				letal=0;
			end
			if (paso<10)
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia))
					if (father.super_sp==0) id_magia.vida--;
					else id_magia.vida=0; end
				end
			end
			//para que no se salga de la pantalla...
			if (x<37)  x=37;  end
			if (x>715) x=715; end
		end
		
		//shoryu flojo/fuerte de Iori
		if (tipo==12)
			if (paso==0)
				if (father.he_dado==0)
					father.enemigo.paso=7;
				end
				if (father.he_dado==0)
					father.enemigo.blend_fx=20;
					father.enemigo.blend_frame=0;
				end
			end
			if (paso==1)
				from counter=500 to 509;
					convert_palette (file,counter,&naranxlila);
				end
			end
			graph=orla2[paso++]+300;
			if (paso==sizeof(orla2)/DIV)
				from counter=500 to 509;
					convert_palette (file,counter,&naranxlila);
				end
				return;
			end
			if (paso==2) letal=6;
			else letal=0; end
			pica=1;
			damage=8;
			y-=2;
		end
		
		//3 u alante de crimson
		if (tipo==13)
			if (game_frame%2==0) 
				paso++; 
				power=4;
				
				if (paso<16 and paso<>2 and paso<>4) graph++;
				else if (paso>15) y=-320; end end
				if (paso>17) return; end
				
				if (paso<6)
					id_magia=collision(type hadoken);
					if (id_magia and exists(id_magia))
						id_magia.vida--;
					end
				end
			end
			
			if ((graph==563 or graph==564) and 
				grandfather.he_dado==1)
				letal=3;
			else
				letal=0;
			end
			
			if (father.intensidad==1)
				if (father.power==74) damage=20-father.enemigo.hit_combo; pica=2;
				else damage=14-father.enemigo.hit_combo; pica=1; end
				if (damage<8) damage=8; end
			else
				if (father.power==74) damage=24-father.enemigo.hit_combo; pica=3;
				else damage=18-father.enemigo.hit_combo; pica=2; end
				if (damage<10) damage=10; end
			end
		end
		
		//especial doshita usted
		if (tipo==14)
			paso++;
			if (paso<14) graph++;
			else y=-320; end
			if (paso>15) return; end
			if (paso<4)
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia))
					id_magia.vida--;
				end
			end
		end
		
		//chosca del k
		if (tipo==15)
			if (paso==0) 
				graph=510;
				play_snd (s_k2,400,256); 
			end
			if (paso==6) 
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia)) id_magia.vida--; end
			end
			paso++; 
			if (paso%2==0) graph++; end
			
			if (paso<15 and he_dado==1) 
				damage=14; pica=1;
				if (father.intensidad==1) letal=2; else letal=3; end
			end
			if (he_dado!=1 or paso==15) letal=0; end
			
			if (father.power==74) prota_shadow(x,y,0); end
			if (father.intensidad>2 and father.paso==13 and
				father.estado==_ayuken)
				father.magia = 0;
				return;
			end
			if (graph>524) 
				father.magia = 0;
				return; 
			end
		end
		
		//electricidad blanka
		if (tipo==16 or tipo==-16)
			paso++;
			if (tipo==16) graph=2; end
			if (tipo==-16) graph=4; end
			if (paso==1) letal=14; damage=4; pica=1;
			else letal=0; end
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia))
				if (id_magia.grandfather<>grandfather)
					id_magia.vida--;
				end
			end
			if (paso>1) return; end
		end
		
		//orla shoryuken patada crimson en pow
		if (tipo==17)
			graph=crimson_f[paso++];
			if (paso==sizeof(crimson_f)/DIV)
				return;
			end
         
			power=4; enemigo=grandfather.enemigo;
			if (paso==3)
				if (grandfather.estado==_uatras_punch)
					letal=3;
					if (enemigo.vulnerable>0)
						damage=10/enemigo.vulnerable;
					else damage=10; end
				else
					letal=2; damage=12;
				end
				pica=1; pipiolos=12;
			else
				letal=0;
			end
		end
		
		//orla de hotaru
		if (tipo==18)
			paso++; y=155;
			if (paso%3==0) graph++; end
			if (graph>110) return; end
			
			if (graph<104 and he_dado==1) letal=12; damage=24; pica=1;
			else letal=0; end
		end
		
		//kyo ardiendo(super)
		if (tipo==19)
			graph=kyored[paso++]+400;
			if (paso==sizeof(kyored)/DIV)
				paso=32;
			end
			if (father.paso>92 or father.intensidad==-1 or
				(father.estado<>_special2 and father.estado>-1))
				father.he_dado=1;
				return;
			end
			if (paso>4)
				if (father.he_dado==1)
					letal=3; damage=14-father.enemigo.hit_combo*2; pica=1;
					if (damage<4) damage=4; end
				else
					if (grandfather.he_dado==0)
						father.enemigo.vulnerable=1; grandfather.he_dado=2;
					end
					if (grandfather.he_dado==-1)
						father.enemigo.vulnerable=1; grandfather.he_dado=4;
					end
					letal=0;
					if (grandfather.he_dado>1) father.he_dado++;
						if (father.he_dado>18)
							father.he_dado=1;
						end
					end
				end
				he_dado=father.he_dado;
			end
			x=father.x;
		end
		
		//kyo fantasma
		if (tipo==20 or tipo==-20)
			graph=kyo_gosht2[paso++]; letal=0;
			if (paso==sizeof(kyo_gosht2)/DIV)
				paso--;
			end
			if (grandfather.paso>54 and tipo==20)
				return;
			end
			if (grandfather.paso>56 and tipo==-20)
				return;
			end
			if (grandfather.estado<>_special1)
				return;
			end
			if (paso<12)
				if (flag)
					if (x>17) x-=14; end
				else
					if (x<735) x+=14; end
				end
			end
			if (paso==10 and tipo==20)
				if (flag) hit_x=x-25; else hit_x=x+25; end
				if (hit_x>720) hit_x=720; end
				if (hit_x<40)  hit_x=40;  end
				golpe(hit_x,y-65,4,24,519,1,1,1,0,grandfather);
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia)) id_magia.vida--; end
				play_snd (s_kyo1,512,256);
			end
			if (paso==6 and he_dado==0) pantallazo(0); father.he_dado=0; end
		end
		
		//kyo fantasma
		if (tipo==21 or tipo==-21)
			graph=kyo_gosht3[paso++]; letal=0;
			if (paso==sizeof(kyo_gosht3)/DIV)
				paso--;
			end
			if (paso==6)
				if (flag) x-=1; else x+=1; end
			end
			if (paso==8)
				if (flag) x-=32; else x+=32; end
			end
			if (grandfather.paso>98 and tipo==21)
				return;
			end
			if (grandfather.paso>100 and tipo==-21)
				return;
			end
			if (grandfather.estado<>_special1 or father.intensidad==4)
				return;
			end
			if (paso==8 and tipo==21)
				if (flag) hit_x=x-25; else hit_x=x+25; end
				if (hit_x>720) hit_x=720; end
				if (hit_x<40)  hit_x=40;  end
				golpe(hit_x,y-65,4,24,613,2,1,2,0,grandfather);
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia))
					id_magia.vida--;
				end
				play_snd (s_kyo1,512,256);
			end
			if (paso==10 and he_dado==0) pantallazo(0); father.he_dado=0; end
		end
		
		//kyo fantasma
		if (tipo==22 or tipo==-22)
			graph=kyo_gosht4[paso++];
			if (paso==sizeof(kyo_gosht4)/DIV)
				paso--;
			end
			if (paso==6) inc_y=-6; end
			if (grandfather.paso>114 or (grandfather.estado<>_special1 and
				grandfather.estado>-1))
				return;
			end
			if (inc_y<0)
				y+=inc_y; 
				if (game_frame%2==0) inc_y++; end
			end
			if (paso==1 or paso==4)
				if (flag) x-=10; else x+=10; end
			end
			if (paso==6)
				if (flag) x-=5; else x+=5; end
			end
			if (paso==8)
				if (flag) x-=2; else x+=2; end
			end
			if (paso==4 and tipo==22)
				if (flag)
					golpe(x-25,y-45,4,25,613,3,1,3,0,grandfather);
				else
					golpe(x+25,y-45,4,25,613,3,1,3,0,grandfather);
				end
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia)) id_magia.vida--; end
				play_snd (s_kyo1,512,256);
			else
				letal=0;
			end
			if (paso==6 and he_dado==0) pantallazo(0); end
		end
		if (tipo==20 or  tipo==21 or  tipo==22 or
			tipo==-20 or tipo==-21 or tipo==-22)
			if (id_magia and exists(id_magia)) id_magia.vida=0; end
		end
		
		//orla galford
		if (tipo==23)
			priority=25;
			x=father.hit_x;
			y=father.hit_y+father.inc_y;
			if (paso==1 and father.he_dado==0 and father.x0==0)
				angle=father.angle; father.x0=1;
				father.y=father.y-father.inc_y;
			end
			paso++;
			if (paso==2 or father.graph<>1) return; end
			angle=father.angle;
			graph=100;
			if (father.he_dado==1)
				damage=15; letal=16;
				pica=1; pipiolos=20;
			end
		end
		if (tipo==24 or tipo==25 or tipo==26)
			if (paso==0) he_dado=1; end
			graph=orla1[paso++]+300;
			if (paso==sizeof(orla1)/DIV)
				return;
			end
			if (tipo==24)
				if (flag) x=father.x-50;
				else x=father.x+50; end
			end
			if (tipo==25)
				if (flag) x=father.x-60;
				else x=father.x+60; end
			end
			if (tipo==26)
				if (flag) x=father.x-70;
				else x=father.x+70; end
			end
			x+=father.inc_x;
			y=father.y-80;
			if (graph>508 and graph<513)
				if (he_dado==0)
					letal=0;
				else
					if (grandfather.super_sp==1)
						if (tipo==24) letal=1; end
						if (tipo==25) letal=2; end
						if (tipo==26) letal=3; end
					else
						letal=3;
					end
				end
				if (grandfather.super_sp==0)//special kyo94
					if (graph==509) damage=40; pica=2; end
					if (graph==510 or graph==511) damage=35; pica=2; end
					if (graph==512 or graph==513) damage=30; pica=1; end
				else
					if (graph==509) damage=20; pica=2; end
					if (graph==510 or graph==511) damage=15; pica=1; end
					if (graph==512 or graph==513) damage=10; pica=1; end
				end
				if (father.enemigo.hit_combo<5)
					damage-=father.enemigo.hit_combo*2;
				end
			else
				letal=0;
			end
			if (paso<8)
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia))
					if (father.super_sp==0) id_magia.vida--;
					else id_magia.vida-=2; end
				end
			end
		end
		
		//raikoken del marica
		if (tipo==27)
			graph=raiko[paso++];
			if (paso==sizeof(raiko)/DIV)
				paso=0;
			end
			x=father.hit_x+father.inc_x;
			y=father.hit_y+father.inc_y;
			
			if (paso%2==0)
				letal=13; damage=4; pica=1;
			else
				letal=0;
			end
			if (father.estado<>_avanzar) return; end
		end
		
		//tornado panza
		if (tipo==28)
			
			if (estado==0)
				graph=hurricane[paso++];
				if (paso==sizeof(hurricane)/DIV)
					paso=23;
				end
				if (paso<23)
					if (paso%2==0)
						if (flag) x-=1; else x+=1; end
					end	
					if (father.he_dado==1) 
						letal=9; damage=5; pica=1; pipiolos=5;
					else 
						letal=0; 
					end
					if (father.estado<>_toss1 and father.estado<>_voltear)
						estado=1; graph=121;
					end
				else
					if (flag) x-=9;
					else x+=9; end
					if (paso%2==0)
						letal=9; damage=4; pica=1; pipiolos=4;
					else
						letal=0;
					end	
				end
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia)) id_magia.vida-=2; end
			end
			if (estado==1)
				graph++;
				if (graph>125) return; end
			end
			if (out_region(id,0)) return; end//si sale de la pantalla, a la mierda
		end
		
		//especial kaede
		if (tipo==29) 
			if (paso==0) father.he_dado=1;
				play_snd (s_kaede2,350,256);
			end
			graph=elect[paso++];
			if (paso==sizeof(elect)/DIV)
				father.he_dado=1; vida++;
				if (flag==0) x+=32; end
				if (flag==1) x-=32; end
				if (flags==0 or flags==1 and paso>0) flags+=2; paso=0; end
				if (flags==2 or flags==3 and paso>0) flags-=2; paso=0; end
			end
			if (paso==1)
				if (flags==0 or flags==1) y=20; end
				if (flags==2 or flags==3) y=180; end
				he_dado=1;
			end
			if (paso==3) y=120; end
			if (he_dado==1)
				letal=15; damage=7; pica=2; pipiolos=10;
			else
				letal=0; father.enemigo.vulnerable=1;
			end
			
			if (paso==1)
				if (out_region(id,0) or vida>5) return;
				end//si sale de la pantalla, a la mierda
			end
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia)) id_magia.vida--; end
		end
		
		//orla kasumi
		if (tipo==30)
			if (paso==0) graph=510; play_snd (s_kasumi22,512,256);
				if (father.power==74) super_sp=1;
					from estado=510 TO 520;
						convert_palette (father.file,estado,&rojoxazul2);
					end
				end
			end
			
			paso++; 
			if (paso%2==0) graph++; end
			
			if (flag) x-=3;
			else x+=3; end
			
			if (graph>510 and graph<518 and he_dado==1)
				
				letal=9;
				if (father.power==74) 
					damage=12+(father.intensidad*4); pica=2; pipiolos=15;
				else 
					damage=7+(father.intensidad*4); pica=1; pipiolos=5; 
				end
				
				id_magia=collision(type hadoken);
				if (id_magia and exists(id_magia))
					if (father.power==74) id_magia.vida-=2;
					else id_magia.vida--; end
				end
			else
				letal=0;
			end
			if (graph>520)
				if (super_sp==1)
					from estado=510 TO 520;
						convert_palette (father.file,estado,&rojoxazul2);
					end
				end
				return;
			end
		end
	  
		//orla especial de kasumi
		if (tipo==31)
			if (paso==0) 
				graph=521; 
				father = grandfather;
			end
			
			paso++; 
			if (paso%2==0) graph++; end
			
			if (graph>523 and graph<528 and he_dado==1)
				if (father.super_sp==0)
					letal=8; damage=pipiolos=5; pica=1;
				else
					letal=8; damage=pipiolos=8; pica=2;
				end
			else
				letal=0;
			end
			if (graph==525 and he_dado==0) he_dado=1; end
			
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia))
				if (father.super_sp==0) id_magia.vida-=2;
				else id_magia.vida=0; end
			end
			if (graph>535) return; end
		end
		
		//soplido kula
		if (tipo==32)
			
			enemigo=father.enemigo;
			if (paso==0) play_snd (s_kura2,512,256); end
			
			paso++; 
			if (paso%2==0) graph++; end
			
			if (graph<610) y+=2;
				if (flag) x-=3+(intensidad*2);
				else x+=3+(intensidad*2); end
			end
			
			if (graph<605)
				if (father.power==74)
					if (game_frame%2==0) 
						letal=19-intensidad; damage=3; 
						pica=1; pipiolos=5;
					else
						letal=0;
					end
				else
					if (he_dado==1)
						letal=19-intensidad; damage=12; pica=1; pipiolos=21;
					else
						letal=0;
					end
				end
				if (enemigo.y<220 and enemigo.estado==_recibir_toss)
					letal=0;
				end
			else
				letal=0;
				if (graph>615) graph=0; return; end
			end
			if (enemigo.paso==7 and he_dado==0 and enemigo.y==220)
				if ((enemigo.estado==_recibir_toss and paso<15) or
					(enemigo.estado<>_recibir_toss and paso<27))
					enemigo.paso-=3;
				end
			end
		end
		
		//nuevo_especial usted
		if (tipo==33)
			if (game_frame%2==0) graph++; end 
			enemigo=father.enemigo;
			if (he_dado==1 and graph<603)
				letal=5; damage=6; pica=1; pipiolos=6;
			else
				letal=0;
				if (enemigo.y==220 and enemigo.vida>0 and he_dado<>1)
					enemigo.inc_x=0;
				end
			end
			if (graph>606) graph=0; return; end
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia)) id_magia.vida--; end
			if (enemigo.paso==7 and he_dado==0 and enemigo.y==220 and
				enemigo.estado<>_recibir_toss and graph<603)
				enemigo.paso-=4;
			end
		end
		
		//nuevo_especial usted 2
		if (tipo==34)
			if (game_frame%2==0) graph++; end 
			enemigo=father.enemigo;
			if (he_dado==1 and graph<613)
				letal=6; damage=6; pica=1; pipiolos=6;
			else
				if (he_dado<>1)
					letal=0; enemigo.inc_x=0;
				end
			end
			if (graph>620) graph=0; return; end
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia)) id_magia.vida--; end
			if (enemigo.paso==7 and he_dado==0 and enemigo.y==220 and
				enemigo.estado==_recibir_toss and graph<615)
				enemigo.paso-=4; enemigo.inc_y=-14; enemigo.vulnerable=1;
			end
		end
		
		//nuevo_especial usted 3
		if (tipo==35)
			if (game_frame%2==0) graph++; end 
			enemigo=father.enemigo;
			if (he_dado==1 and graph<633)
				letal=6; damage=10; pica=1; pipiolos=10;
				if (father.super_sp==0) damage=20; else damage=12; end
			else
				letal=0;
			end
			if (graph>640) graph=0; return; end
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia)) id_magia.vida=0; end
		end
		
		//especial kula
		if (tipo==36 or tipo==-36)
			paso++;
			if (paso%2==0) graph++; end
			
			enemigo = grandfather.enemigo;
			if (he_dado==1 and graph<622)
				letal=18; pica=1; 
				pipiolos=10; damage=10;
				if (tipo==36)
					if (father.super_sp==0) damage=30; 
					else damage=17; end
				end
			else
				letal=0;
			end
			
			if (x<32) x=32; end
			if (x>722) x=722; end
			if (graph>624) graph=0; return; end
			
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia)) id_magia.vida=0; end
		end
		
		//peillo del tetsuo
		if (tipo==37)
			paso++;
			if (paso%2==0) graph++; end
			if (he_dado==1 and graph<509)
				letal=7; damage=3; pica=1; pipiolos=10;
				if (father.power==74) damage+=1; end
			else
				letal=0;
			end
			//if (father.power==100 and graph==509) flags+=4; end
			if (graph>520) graph=0; return; end
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia)) id_magia.vida--; he_dado=1; end
		end
		
		//tornado krisalid
		if (tipo==38)
			if (game_frame%2==0) graph++; end
			enemigo=father.enemigo;
			if ((flag and enemigo.x-25<x) or (flag==0 and enemigo.x+25>x))
				if (enemigo.y>160 and abs(enemigo.x-x)<70 and he_dado==1)
					letal=9; damage=10; pica=1; pipiolos=10;
				else
					letal=0;
				end
			else
				letal=0;
			end
			if (flag) x-=5; else x+=5; end
			if (graph>38) return; end
			id_magia=collision(type hadoken);
			if (id_magia and exists(id_magia)) id_magia.vida--; end
		end
		
		damage = get_real_damage (damage);
		pica = get_real_damage (pica);
		
		if (father.m8_step==3) damage/=2; pica/=2; end
		if (time==0 and estado_juego==0) damage=0; pica=0; end
		
		////////////////////////////////////
		////////parte del fostie////////////
		////////////////////////////////////
		id_mueco=collision(type prota);
		if (id_mueco and exists(id_mueco))
			if (id_mueco==grandfather)
				id_mueco=collision(type prota);
			end
		end
		
		if (id_mueco and exists(id_mueco))
			if (letal>0)
				if (game_mode==MODE_TRAINING and id_mueco.hit_combo==0)
					if (id_mueco==id_luchador1 and rojo==0)
						id_mueco.vida=MAX_LIFE;
						id_alive1.x=89;
					end
					if (id_mueco==id_luchador1 and rojo==1)
						id_mueco.vida=DANGER_LIFE-1;
						id_alive1.x=184;
					end
					if (id_mueco==id_luchador2 and (cputype<>3 or
						(cputype==3 and rojo==0)))
						id_mueco.vida=MAX_LIFE;
						id_alive2.x=231;
					end
					if (id_mueco==id_luchador2 and cputype==3 and rojo==1)
						id_mueco.vida=DANGER_LIFE-1;
						id_alive2.x=136;
					end
				end
				if (id_mueco.estado==_normal or
					id_mueco.estado==_avanzar or
					id_mueco.estado==_agachar or
					id_mueco.estado==_lpunch1 or
					id_mueco.estado==_lpunch2 or
					id_mueco.estado==_lkick1 or
					id_mueco.estado==_lkick2 or
					id_mueco.estado==_spunch1 or
					id_mueco.estado==_skick1 or
					id_mueco.estado==_spunch2 or
					id_mueco.estado==_skick2 or
					id_mueco.estado==_toss1 or
					id_mueco.estado==_charge or
					id_mueco.estado==_burla or
					id_mueco.estado==_correr or
					id_mueco.estado==_pajaritos or
					id_mueco.estado==-1 or
					id_mueco.estado==_recibir_flojos_suelo or
					id_mueco.estado==_recibir_fuertes_bozo or
					id_mueco.estado==_recibir_flojos_bozo or
					id_mueco.estado==_recibir_genjuro or
					id_mueco.estado==_recibir_fuertes_suelo or
					id_mueco.estado==200 or//el cojer de la u de vd
					((id_mueco.estado==_ayuken or
					id_mueco.estado==_shoryuken or
					id_mueco.estado==_uatras_punch or
					id_mueco.estado==_uatras_kick or
					id_mueco.estado==_satras_kick or
					id_mueco.estado==_u_kick or
					id_mueco.estado==_extra_move or
					id_mueco.estado==_special1 or
					id_mueco.estado==_special2) and
					id_mueco.y==220))
					father.he_dado=0; he_dado=0;
					
					/////////////como tiene que recibir//////////////
					if (letal==1 or letal==4 or letal==7 or
						letal==10 or letal==13 or letal==17)
						id_mueco.estado=_recibir_fuertes_suelo;
						if (flag) id_mueco.inc_x=-10;
						else id_mueco.inc_x=10; end
					end
					if (letal==2 or letal==5 or letal==8 or letal==11 or letal==14)
						id_mueco.estado=_recibir_fuertes_bozo;
						if (flag) id_mueco.inc_x=-10;
						else id_mueco.inc_x=10; end
					end
					if (letal==3 or letal==6 or letal==9 or
						letal==12 or letal==15 or letal==18)
						if (tipo==-7 or tipo==-10 or tipo==38)
							id_mueco.intensidad=3;
						else id_mueco.intensidad=0; end
						id_mueco.estado=_recibir_toss;
						if (flag) id_mueco.inc_x=-4;
						else id_mueco.inc_x=4; end
					end
					if (letal==16)
						id_mueco.estado=_recibir_colleja;
					end
					
					if (tipo==7)
						if (flag) id_mueco.inc_x=-6;
						else id_mueco.inc_x=6; end
					end
					if (tipo==19)//excepcion del kyo ardiendo
						if (flag) id_mueco.inc_x=-2;
						else id_mueco.inc_x=2; end
						id_mueco.inc_y=16;
					end
					
					if (launcher==1)  id_mueco.vulnerable=1; end
					if (launcher==-1) id_mueco.vulnerable=0; end
					
					/////si conjela al que ha fostiado////////
					if (tipo==2 or tipo==3) conjelador (father,10); end
					if (tipo==13 or tipo==17 or tipo==19 or tipo==12 or
						tipo==0 or tipo==1 or tipo==-1)
						conjelador (father, 8);
					end
				end
				if (id_mueco.estado==_saltar or
					id_mueco.estado==_lkickair or
					id_mueco.estado==_skickair or
					id_mueco.estado==_spunchair or
					id_mueco.estado==_lpunchair or
					id_mueco.estado==_tossair or
					id_mueco.estado==_saltar_atras or
					id_mueco.estado==300 or
					((id_mueco.estado==_ayuken or
					id_mueco.estado==_shoryuken or
					id_mueco.estado==_uatras_punch or
					id_mueco.estado==_uatras_kick or
					id_mueco.estado==_satras_kick or
					id_mueco.estado==_u_kick or
					id_mueco.estado==_extra_move or
					id_mueco.estado==_special1 or
					id_mueco.estado==-3 or
					id_mueco.estado==_special2) and id_mueco.y<220) or
					(id_mueco.estado==_recibir_toss and id_mueco.paso>0 and
					id_mueco.vulnerable>0 and id_mueco.vulnerable<4))
					if (he_dado!=0) id_mueco.vulnerable++; end
					father.he_dado=0;  he_dado=0;
					id_mueco.inc_y=0; id_mueco.inc_x=0;
					
					//////////como tiene que recibir//////////
					if (flag) id_mueco.inc_x=-4;
					else id_mueco.inc_x=4; end
					if (tipo==7)
						if (flag) id_mueco.inc_x=-6;
						else id_mueco.inc_x=6; end
					end
					if (tipo==19)//excepcion del kyo ardiendo
						if (flag) id_mueco.inc_x=-2;
						else id_mueco.inc_x=2; end
						id_mueco.inc_y=16;
					end
					id_mueco.estado=_recibir_toss;
					if (tipo==-7 or tipo==-10 or tipo==38)
						id_mueco.intensidad=3;
					else id_mueco.intensidad=0; end
					
					/////si conjela al que ha fostiado////////
					if (tipo==2 or tipo==3 or tipo==13 or
						tipo==17 or tipo==19 or
						tipo==0 or tipo==1 or tipo==-1)
						conjelador (father, 6);
					end
					if (tipo==12) conjelador (father, 8); end
					if (tipo==30) id_mueco.vulnerable=0; end
				end
				
				if (id_mueco.estado==_agachado or
					id_mueco.estado==_lpunchaga or
					id_mueco.estado==_lkickaga or
					id_mueco.estado==_spunchaga or
					id_mueco.estado==_skickaga or
					id_mueco.estado==-2 or
					id_mueco.estado==_recibir_flojos_agachado or
					id_mueco.estado==_recibir_fuertes_agachado)
					father.he_dado=0; he_dado=0;
					/////////////como tiene que recibir//////////////
					if (letal==1 or letal==2 or letal==4 or
						letal==5 or letal==7 or letal==8 or
						letal==10 or letal==11 or letal==13 or
						letal==14 or letal==17)
						id_mueco.estado=_recibir_fuertes_agachado;
						if (flag) id_mueco.inc_x=-10;
						else id_mueco.inc_x=10; end
					end
					if (letal==3 or letal==6 or letal==9 or
						letal==12 or letal==15 or letal==18)
						id_mueco.estado=_recibir_toss;
						if (tipo==-7 or tipo==-10 or tipo==38)
							id_mueco.intensidad=3;
						else id_mueco.intensidad=0; end
						if (flag) id_mueco.inc_x=-4;
						else id_mueco.inc_x=4; end
					end
					if (letal==16)
						id_mueco.estado=_recibir_colleja;
					end
					if (tipo==7)
						if (flag) id_mueco.inc_x=-6;
						else id_mueco.inc_x=6; end
					end
					if (tipo==19)//excepcion del kyo ardiendo
						if (flag) id_mueco.inc_x=-2;
						else id_mueco.inc_x=2; end
						id_mueco.inc_y=16;
					end
					if (launcher==1)  id_mueco.vulnerable=1; end
					if (launcher==-1) id_mueco.vulnerable=0; end
					
					/////si conjela al que ha fostiado////////
					if (tipo==2 or tipo==3 or tipo==13 or
						tipo==17 or tipo==19 or tipo==12 or
						tipo==0 or tipo==1 or tipo==-1)
						conjelador (father, 8);
					end
				end
				////////////////////////////////////////////
				// GUARDIA 
				////////////////////////////////////////////
				if (id_mueco.estado==_retroceder or
					id_mueco.estado==_guardiaaltafloja or
					id_mueco.estado==_guardiaalta)
					
					id_mueco.estado=_guardiaalta;
					id_mueco.vida-=pica;
				   
					if (id_mueco.file==fich1) damegi1-=pica; end
					if (id_mueco.file==fich2) damegi2-=pica; end
					
					father.he_dado=-1; he_dado=-1;
					if (id_mueco.flags) 
						id_mueco.inc_x=INCX_GUARD_X;//12;
					else 
						id_mueco.inc_x=-INCX_GUARD_X;//12; 
					end
					
					/////si conjela al que ha fostiado////////
					if (id_mueco.vida<=0)
						father.he_dado=0; he_dado=0;
						if (letal==16)
							id_mueco.estado=_recibir_colleja;
						else
							id_mueco.paso=0;
							id_mueco.estado=_recibir_toss;
							id_mueco.inc_y=-8;
							if (flag) id_mueco.inc_x=-4;
							else id_mueco.inc_x=4; end
							if (tipo==-7 or tipo==-10 or tipo==38)
								id_mueco.intensidad=3;
							else id_mueco.intensidad=0; end
						end
					end
				end
				if (id_mueco.estado==_agachadoguardia or
					id_mueco.estado==_guardiabajafloja or
					id_mueco.estado==_guardiabaja)
					id_mueco.estado=_guardiabaja;
					if (vulnerable==0) 
						id_mueco.vida-=pica;
						father.he_dado=-1; he_dado=-1;
						if (id_mueco.file==fich1) damegi1-=pica; end
						if (id_mueco.file==fich2) damegi2-=pica; end
						if (id_mueco.flags) 
							id_mueco.inc_x=INCX_GUARD_X;//12;
						else 
							id_mueco.inc_x=-INCX_GUARD_X;//12; 
						end
					end
					if (id_mueco.vida<=0 or vulnerable==1)
						father.he_dado=0; he_dado=0;
						if (tipo==23 and id_mueco.vida>0)
							id_mueco.estado=_recibir_colleja;
							damage = get_real_damage (15);
						end
						if (tipo==17 and id_mueco.vida>0)
							if (flag) id_mueco.inc_x=-10;
							else id_mueco.inc_x=10; end
							
							if (letal==2) id_mueco.estado=_recibir_fuertes_agachado; end
							if (letal==3) 
								id_mueco.paso=0;
								id_mueco.estado=_recibir_toss;
								id_mueco.inc_y=-8;
								if (flag) id_mueco.inc_x=-4;
								else id_mueco.inc_x=4; end
								id_mueco.intensidad=0;
							end
						end
						if (id_mueco.vida<=0)
							id_mueco.paso=0;
							id_mueco.estado=_recibir_toss;
							id_mueco.inc_y=-8;
							if (flag) id_mueco.inc_x=-4;
							else id_mueco.inc_x=4; end
							if (tipo==-7 or tipo==-10 or tipo==38)
								id_mueco.intensidad=3;
							else id_mueco.intensidad=0; end
						end
					end
				end
				
				///////////////////parte general///////////////////
				if (he_dado==0)//de cuando infla
					father.he_dado = 0;
					id_mueco.paso=0;
					id_mueco.vida-=damage;
					id_mueco.angle=0;
					id_mueco.pipiolos-=pipiolos;
					id_mueco.darmagia=0;
					id_mueco.estatico=0;
					id_mueco.hit_combo++;
					id_mueco.guardia=0;
					
					if (id_mueco.vida<=0 and 
						game_mode!=MODE_TRAINING)
						if (parpadeo_final==0)
							ralenti(1); pantallazo(10);
							parpadeo_final=1;
						end
						id_mueco.vida=0;
					end
					if (id_mueco.file==fich1)
						if (id_mueco.hit_combo==1) damegi1=0; end
						damegi1-=damage;
					end
					if (id_mueco.file==fich2)
						if (id_mueco.hit_combo==1) damegi2=0; end
						damegi2-=damage;
					end
					if (id_mueco.vida<0) id_mueco.vida=0; end
					
					///////////si pone counter///////////
					if ((id_mueco.estado==_ayuken or
						id_mueco.estado==_shoryuken or
						id_mueco.estado==_uatras_punch or
						id_mueco.estado==_uatras_kick or
						id_mueco.estado==_satras_kick or
						id_mueco.estado==_u_kick) and
						id_mueco.paso<15)
						signal(type texto_inflar,s_kill);
						if (id_mueco==id_luchador1)
							texto_inflar(35,1);
						end
						if (id_mueco==id_luchador2)
							texto_inflar(35,2);
						end
					end
					
					/////////estrella del golpe//////////
					get_real_point(1,&hit_x,&hit_y);
					if (tipo==8 or tipo==9 or tipo==15 or 
						tipo==23 or tipo==27 or tipo==32 or 
						tipo==36 or tipo==-36) hit_y=y; 
					end
					
					if (tipo==29) hit_y=id_mueco.y-40; end
					
					hit_x=((x+id_mueco.x)/2)+rand(-5,5);
					if (tipo==38)
						if (enemigo.y>200) hit_y=160; else hit_y=110; end
					end
					
					if (tipo==23 or tipo==38)
						hit_stars(5,hit_x,hit_y);//crea el corte
						hit_stars(6,hit_x,hit_y);//crea la sangre
					else
						hit_stars(18,hit_x,hit_y);//crea la estrella
					end
					
					////si se tiene que quemar,etc...////
					if (letal==1 or letal==2 or letal==3)
						id_mueco.blend_frame=0;
						id_mueco.blend_fx=2; //naranja
					end
					if (letal==4 or letal==5 or letal==6)
						id_mueco.blend_frame=0;
						id_mueco.blend_fx=3; //morado
					end
					if (letal==13 or letal==14 or letal==15 or letal==16)
						id_mueco.electrocutado=1; //electrocutado
					end
					if (letal==17 or letal==18)
						id_mueco.blend_frame=0;
						id_mueco.blend_fx=4; //azul
					end
					if (letal>6 and letal<13)
						id_mueco.blend_frame=0;
						id_mueco.blend_fx=id_mueco.blend_fx*10; //normal
					end
					if (tipo==18) father.he_dado=0; end
					
					//////como suena la hostia//////
					if (is_playing_snd(channel[30]))
						stop_snd(channel[30]);
					end
					channel[30]=0;
					if (tipo==10 or tipo==-1 or tipo==12 or tipo==-10 or
						tipo==24 or tipo==25 or tipo==26 or tipo==34)
						channel[30]=play_snd (s_burn2,512,256);
					end
					if (tipo==8 or tipo==9 or tipo==23 or tipo==27 or tipo==29)
						channel[30]=play_snd (s_shock1,452,256);
					end
					if (tipo==23 or tipo==38) play_snd (s_cut,512,256); end
					if (tipo==32 or tipo==36 or tipo==-36)
						channel[30]=play_snd (s_kura1,512,256);
					end
					if (tipo==0 or tipo==1 or tipo==2 or tipo==3 or tipo==13 or
						tipo==15 or tipo==16 or tipo==17 or tipo==19)
						channel[30]=play_snd (s_burn1,512,256);
					end
					if (tipo==4 or tipo==5 or tipo==6 or tipo==7 or
						tipo==11 or tipo==18 or tipo==28 or tipo==30 or
						tipo==31 or tipo==32 or tipo==-7 or tipo==37)
						channel[30]=play_snd (s_hit4,512,256);
					end
					if (tipo==31) channel[30]=play_snd (s_hit5,512,256); end
					if (tipo==30) channel[30]=play_snd (s_hit2,512,256); end
					
					if (id_mueco.vida<=0 and game_mode!=MODE_TRAINING)
						if (is_playing_snd(channel[30]))
							stop_snd(channel[30]);
						end
						channel[30]=0;
						if (tipo==0 or tipo==1 or tipo==2 or tipo==3 or
							tipo==13 or tipo==15 or tipo==16 or tipo==17 or
							tipo==19)
							channel[30]=play_snd (s_burn2,512,256);
						end
						if (tipo==4 or tipo==5 or tipo==6 or tipo==7 or
							tipo==11 or tipo==18 or tipo==28 or tipo==30 or
							tipo==31 or tipo==32 or tipo==-7 or tipo==37)
							channel[30]=play_snd (s_fhit,512,256);
						end
					end
					
					////si pone stun///////
					if (id_mueco.pipiolos<1 and id_mueco.vida>0 and
						id_mueco.pipiolos+pipiolos>0)
						if (id_mueco==id_luchador1)
							texto_inflar(37,2);
						end
						if (id_mueco==id_luchador2)
							texto_inflar(37,1);
						end
					end
					
					////////contador de combos/////////
					if (id_mueco==id_luchador1)
						if (id_mueco.hit_combo==2)
							combos(id_luchador1,1);
						end
						if (id_mueco.hit_combo==10)
							combos(id_luchador1,2);
						end
					end
					if (id_mueco==id_luchador2)
						if (id_mueco.hit_combo==2)
							combos(id_luchador2,1);
						end
						if (id_mueco.hit_combo==10)
							combos(id_luchador2,2);
						end
					end
					
					///////el pow que llena//////////
					if (father.estado<>_special1 and father.estado<>_special2 and
						father.estado<>-5)
						father.power+=power;
					end
					
					///si ralentiza el tema ///
					if (id_mueco.vida>0)
						if (tipo==10 or tipo==15 or tipo==24 or tipo==25 or
							tipo==26 or tipo==29 or tipo==-1 or tipo==32 or
							tipo==33 or tipo==37 or tipo==-10 or tipo==38)
							if (!SLOW_MACHINE) ralenti(0); end
						end
					end
					
					//////////// vibracion ////////////////////////
					id_mueco.vibracion = damage>>PRECISION_BITS;
					
					/////si crea un parpadeo///////
					if (tipo==7 or tipo==8 or tipo==9 or tipo==10 or
						tipo==11 or tipo==14 or tipo==12 or tipo==-7 or
						tipo==18 or tipo==19 or tipo==-1 or tipo==33 or
						tipo==23 or tipo==27 or tipo==28 or tipo==29 or
						tipo==34 or tipo==35 or tipo==37 or tipo==-10 or
						tipo==38)
						pantallazo(0);
					end
				end
				if (he_dado==-1)//si el enemigo se ha cubiertos
					if (id_mueco.vida<=0 and game_mode!=MODE_TRAINING)
						if (parpadeo_final==0)
							ralenti(1); pantallazo(10);
							parpadeo_final=1;
						end
						id_mueco.vibracion = damage>>PRECISION_BITS;
						id_mueco.vida=0;
					end
					id_mueco.inc_y=-8;
					id_mueco.paso=7; 
                    id_mueco.darmagia=0;
					id_mueco.estatico=0;
					if (is_playing_snd(channel[30]))
						stop_snd(channel[30]);
					end
					channel[30]=0;
					
					get_real_point(1,&hit_x,&hit_y);
					hit_x=((x+id_mueco.x)/2)+rand(-5,5);
					if (tipo==8 or tipo==9 or tipo==23 or 
						tipo==27 or tipo==32 or tipo==36 or 
						tipo==-36 or tipo==15) hit_y=y; 
						hit_y=y; 
					end
					if (tipo==29) hit_y=id_mueco.y-40; end
					if (tipo==38) hit_y=160; end
				   
					if (id_mueco.just_guard>0 and id_mueco.just_guard<4)
						id_mueco.super_guard=1; 
						hit_stars(14,hit_x,hit_y);
						if (id_mueco.vida>0)
							channel[30]=play_snd (s_hit5,512,320);
						end
						signal(type texto_inflar,s_kill);
						if (id_mueco==id_luchador1)
							texto_inflar(36,2);
						end
						if (id_mueco==id_luchador2)
							texto_inflar(36,1);
						end
						super_guard=2;
					else
						channel[30]=play_snd (s_guard,512,256);
						id_mueco.super_guard=0;
						hit_stars(13,hit_x,hit_y);
						super_guard=1;
					end
					if (tipo==2 or tipo==3 or tipo==13 or
						tipo==17 or tipo==19 or
						tipo==0 or tipo==1 or tipo==-1)
						conjelador (father,7*super_guard);
					end
				end
			end
		end
		
		id_striker=collision(type straiker);
		if (id_striker and exists(id_striker))
			if (id_striker==grandfather or
				id_striker.father==grandfather or
				file==id_striker.file)
				id_striker=collision(type straiker);
			end
		end
		if (id_striker and exists(id_striker))
			if ((id_striker.estado==_avanzar or
				id_striker.estado==_toss1 or
				id_striker.estado==_voltear) and
				id_striker.vulnerable==0)
				id_striker.paso=0;
				id_striker.estado=_recibir_toss;
				
				////si se tiene que quemar,etc...////
				id_striker.blend_fx=blend_fx; //naranja
				id_striker.electrocutado=electrocutado;
				id_striker.blend_frame=0;
				
				if (tipo==0 or tipo==1 or tipo==2 or tipo==3 or tipo==-10 or
					tipo==10 or tipo==15 or tipo==17 or tipo==34)
					play_snd (s_burn1,512,256);
				end
				if (tipo==4 or tipo==5 or tipo==6 or tipo==7 or tipo==37 or
				   tipo==11 or tipo==13 or tipo==18 or tipo==-7)
					play_snd (s_hit4,512,256);
				end
				if (tipo==8 or tipo==9 or tipo==23)
					play_snd (s_shock1,452,256);
				end
				if (tipo==23 or tipo==38) play_snd (s_cut,512,256); end
				if (tipo==32 or tipo==36 or tipo==-36)
					play_snd (s_kura1,512,256);
				end
				
				get_real_point(1,&hit_x,&hit_y);
				if (tipo==8 or tipo==9 or tipo==15 or 
					tipo==23 or tipo==27 or tipo==32 or 
					tipo==36 or tipo==-36) 
					hit_y=y; 
				end
				
				if (tipo==29) hit_y=id_striker.y-40; end
				hit_x=((x+id_striker.x)/2)+rand(-5,5);
				if (tipo==38)
					if (id_striker.y>200) hit_y=160; else hit_y=110; end
				end
				
				if (tipo==23 or tipo==38)
					hit_stars(5,hit_x,hit_y);//crea el corte
					hit_stars(6,hit_x,hit_y);//crea la sangre
				else
					hit_stars(18,hit_x,hit_y);//crea la estrella
				end
			end
		end
		
		id_magia=collision(type hadoken);
		if (id_magia and exists(id_magia))
			if (id_magia.grandfather==grandfather)
				id_magia=collision(type hadoken);
			end
		end
		if (id_magia and exists(id_magia))
			if (tipo==4 or tipo==5 or tipo==6)
				id_magia.grandfather=grandfather;
				grandfather.enemigo.magia=0;
				if (id_magia.flags%2==1)
					id_magia.flags=0;
				else
					id_magia.flags=1;
				end
			end
		end
	end
end

process hadoken (tipo,x,y,grandfather);

private
	pica;id_mueco;id_striker;id_magia;
	pawaueib[]=161,161,162,162,163,163,164,164,165,165,166,166;
	yamibara[]=219,219,220,220,221,221,222,222,223,223,224,224;
	psico_ball[]=214,214,215,215,216,216,217,217,218,218,219,219,220,220,221,221;
	psico_special[]=187,188,189,190,191,192;
	kruee[]=249,249,250,250,251,251,252,252,253,253;
	hadouken[]=100,100,101,101,100,100,101,101,100,100,101,101;
	flag;
	
begin
	
	file=father.file;
	ctype=c_scroll; 
	flags=father.flags;
	inc_x=father.inc_x; 
	z=father.z-5;
	flag = flags%2;
	
	//power wave
	if (tipo==0)
		vida=1; damage=10; pica=1; pipiolos=14;
		enemigo=father.enemigo;
	end
	
	//doshita o druee
	if (tipo==1 or tipo==3)
		if (father.power==74) power=74;
			if (tipo==3) damage=20; pica=2; vida=1;
			else vida=2; damage=8; pica=1; end
		else
			vida=1; damage=12; pica=1;
		end
		pipiolos=8;
	end
	
	//doshita o druee
	if (tipo==2)
		vida=1; //n de toques
		if (father.power==74)
			damage=18;
		else
			damage=15;
		end
		pica=2;
		pipiolos=20;
	end
	
	//hielo rimururu
	if (tipo==4)
		vida=1; damage=5; pica=1;
		graph=100; inc_y=-5;
		inc_x=abs(get_dist(grandfather.enemigo)/36);
		father = grandfather;
	end
	
	//doshita especial crimsom
	if (tipo==5 or tipo==-5)
		//father = grandfather;
		vida=3; damage=10; pica=1; 
		super_sp = father.super_sp;
		if (tipo==-5) estado=1; graph=562; tipo=5; size=120; y=215; end
		
	end
	
	//cristal bit
	if (tipo==6)
		vida=3; damage=4;
		pica=3; inc_x=0; size=120;
		grandfather.magia=id;
		intensidad=grandfather.intensidad;
		pipiolos=12;
		if (father.super_sp==1)
			super_sp=1; vida=6;
			from blend_fx=587 to 592;
				convert_palette (file,blend_fx,&rojoxazul);
			end
		end
	end
	
	//proyectil de contra de kula
	if (tipo==7)
		father = grandfather;
		vida=1; damage=10; pica=1; pipiolos=18;
		file=grandfather.file;
	end
	
	//sonic boom gulle
	if (tipo==8)
		father = grandfather;
		vida=1; damage=5; pica=1; pipiolos=6;
	end
	
	//hadoken (si, el de ryu)
	if (tipo==9)
		father = grandfather;
		vida=3; damage=3; pica=1; pipiolos=20;
	end
	
	//kohken
	if (tipo==10)
		vida=1; pica=1; pipiolos=10; graph=505;
		if (father.power==74) damage=16;
		else damage=12; end
		if (father.inc_x==18) damage+=3; end
		play_snd (s_takuma1,512,256);
	end
	
	//shokohken
	if (tipo==11)
		pica=4; pipiolos=30; graph=510; damage=24; vida=3;
		if (inc_x>20) damage+=6; end
		play_snd (s_takuma2,512,256);
	end
	
	//super shokohken
	if (tipo==12)
		pica=3; pipiolos=15; graph=511; damage=10; vida=5;
		if (inc_x>10) damage+=3; end
		if (father.estado==_special2) vida=1; end
		play_snd (s_takuma2,512,256);
	end
	
	//kohken ryo
	if (tipo==13)
		father = grandfather;
		vida=1; pica=1; pipiolos=10; graph=20; damage=12;
		play_snd (s_takuma1,512,256);
	end
	
	//bola del k
	if (tipo==14)
		vida=1; pica=1; pipiolos=10; graph=533; damage=8;
		if (father.power==74) power=74; damage=12; end
		play_snd (s_flame4,350,256);
	end
	
	
	if (fuerza==1)
		damage=(damage*6)/10;
		pica=(pica*6)/10;
	end
	if (fuerza==3)
		damage=(damage*10)/6;
		pica=(pica*10)/6;
	end

	damage = get_real_damage (damage);	
	pica = get_real_damage (pica);
	if (father.m8_step==3) damage/=2; pica/=2; end
	
	loop
		// si se quiere alpha+16 ir aadiendo aqui
		if (!SLOW_MACHINE)
			if (tipo==0 or tipo==2 or tipo==6)
				flags=flags+16;
			end
		end	
		
		frame;
		if (tipo==0)
			graph=pawaueib[paso++]+400;//grafico
			if (paso==sizeof(pawaueib)/DIV)
				paso=0;
			end
			if (vida>0)
				if (enemigo.y<180) he_dado=10;
				else
					if (abs(enemigo.x-x)<60) he_dado=1; else he_dado=10; end
				end
			end
		end
		
		if (tipo==1)
			graph=yamibara[paso++]+300;//grafico
			if (paso==sizeof(yamibara)/DIV)
				paso=0;
			end
			if (he_dado==-1 and vida==1) he_dado=1; end
		end
		
		if (tipo==2)
			graph=psico_ball[paso++]+300;
			if (paso==sizeof(psico_ball)/DIV)
				paso=0;
			end
			if (damage==get_real_damage(18)) prota_shadow(x,y,0); end
		end
		
		if (tipo==3)
			graph=kruee[paso++]+300;//drueeee!!!
			if (paso==sizeof(kruee)/DIV)
				paso=0;
			end
		end
		
		if (tipo==4)
			paso++; graph++;
			if (graph>107) graph=100; end
			if (y<180)
				y+=inc_y; 
				if (game_frame%2==0) inc_y++; end
			else
				pegata (x,220,107,c_scroll,flags,100,z,57,file);
				play_snd (s_kura1,412,256);
				return;
			end
		end
		
		//special crimsom
		if (tipo==5)
			if (estado==0)
				graph = yamibara[paso++]+300;
				if (paso==sizeof(yamibara)/DIV)
					paso=0;
				end
				if (abs(x-grandfather.x)>120 or
					abs(x-grandfather.enemigo.x)<10)
					estado=1; graph=562; paso=0;
					inc_x=0; size=120; y=215;
					pegata (x,y,575,c_scroll,flags,100,z-1,68,file);
				end
			end
			if (estado==1)
				if (paso==0)
					play_snd (s_flame3,512,256);
				end
				if (paso%2==0) graph++; end 
				paso++; inc_x=0;
				
				if (graph>575)
					if (grandfather.super_sp==0) 
						grandfather.poison=0; 
					end
					return;
				end
				if (paso>6) he_dado=10; end
				if (paso>12) y=120; end
			end
		end
		
		//cristalbit
		if (tipo==6)
			graph=psico_special[paso++]+400;
			if (paso==sizeof(psico_special)/DIV)
				paso=0;
			end
			if (estado==0 and he_dado<1)
				he_dado--; if (he_dado<-6) he_dado=1; end
			end
			if (grandfather.paso>80)
				if (estado==0 or grandfather.y==220)
					if (grandfather.y==220)
						if (grandfather.paso==85) y=150; inc_x=12; end
						if (intensidad==2 and (game_frame%2==0)) inc_y-=1; end
					else
						if (grandfather.paso==81) y=grandfather.y-115; inc_x=10; end
						if (intensidad==1) inc_y=10; inc_x=11; end
						if (intensidad==2) inc_y=10; inc_x=10; end
					end
				end
				if (inc_x<>0)
					he_dado=1;
					damage = get_real_damage (20);
				end
				estado=1; y+=inc_y;
			else
				if (grandfather.estado==_special2) vida=1; 
					if (father.flags) x=father.x+10; else x=father.x-10; end
				end
			end
			if (estado==1 and grandfather.y<220)
				if (intensidad==2) inc_y-=1; end
				if (intensidad==1)
					if (y>140 and inc_y<>0) inc_y-=2; end
					if (y>160 and inc_y<>0) inc_y=0;  end
				end
			end
		end
		
		if (tipo==7)
			paso++;
			if (paso==1) graph=648; end
			if (paso==3) graph=649; paso=0; end
		end
		
		if (tipo==8)
			paso++;
			if (paso==1) graph=23; end
			if (paso%2==0) graph++; end
			if (graph>26) graph=23; end
		end
		if (tipo==9) he_dado=1;
			graph=hadouken[paso++];
			if (paso==sizeof(hadouken)/DIV)
				paso=0;
			end
		end
		
		if (tipo==10)
			if (vida>0) 
				graph=506+(game_frame%4);
				pegata (x,y,graph,c_scroll,flags,100,z-1,54,file);
				prota_shadow(x,y,0);
			end
			graph=506;
		end
		
		if (tipo==11)
			if (vida>1) 
				graph=511+(game_frame%4);
				pegata (x,y,graph,c_scroll,flags,100,z-1,54,file); 
				prota_shadow(x,y,0);
			end
			graph=511;
		end
		
		if (tipo==12)
			paso++;
			if (paso>4) paso=1; end
			if (vida>0) 
				graph=515+(game_frame%4);
				pegata (x,y,graph,c_scroll,flags,100,z-1,54,file); 
				prota_shadow(x,y,0);
			end
			graph=511;
		end
		
		if (tipo==13) 
			paso++; graph=19+(paso/2);
			if (paso>10) paso=0; end
			if (y<210) 
				y+=5;
			else
				play_snd (s_takuma1,420,360); hit_stars(21,x,y); return;
			end
		end
		
		if (tipo==14) paso++; 
			if (game_frame%2==0) graph++; end
			if (graph>541) graph=533; paso=0;   end
			if (power==74) prota_shadow(x,y,0); end
		end
		
		// ifs genericos
		if (time==0 and estado_juego==0) 
			damage=0; pica=0; 
		end
		
		flags=flags%2;
		if (flags) x-=inc_x;
		else x+=inc_x; end
		
		// polvo
		if (tipo==0 or tipo==1 or tipo==3 or tipo==5 or tipo==7)
			if (game_frame%6==1)
				pegata (x,220,132,c_scroll,flags,90,z-4,44,fichad);
			end
		end
		
		// colision con otras magias
		id_magia=collision(type hadoken);
		if (id_magia and exists(id_magia))
			if (id_magia.grandfather==grandfather)
				id_magia=collision(type hadoken);
			end
			if (abs(id_magia.x-x)<=40)
				if (tipo==5 or tipo==6 or tipo==12)
					if (id_magia.tipo==5 or id_magia.tipo==6 or
						id_magia.tipo==12)
						id_magia.vida=0; vida=0;
					else
						if (tipo<>12) id_magia.vida=0; end
					end
				end
				if (tipo==5 or tipo==6) vida=1; end
				if (vida>0 and id_magia.vida>0 and exists(father) and father==id_luchador1)
					if (id_magia.vida==vida) vida=0; id_magia.vida=0; end
					if (id_magia.vida>vida) id_magia.vida-=vida; vida=0; end
					if (id_magia.vida<vida) vida-=id_magia.vida; id_magia.vida=0; end
				end
			end
		end
		if (x<=scroll[0].x0-30 or x>=scroll[0].x0+350 or vida<=0)
			if (vida<=0)
				if (tipo==0) hit_stars (20,x,y);  end
				if (tipo==1)
				   if (id_mueco and exists(id_mueco))   x=id_mueco.x;  end
				   if (id_striker and exists(id_striker)) x=id_striker.x; end
				   pegata (x,220,575,c_scroll,flags,100,z-1,68,file);
				end
				if (tipo==7)
				   pegata (x,y,640,c_scroll,flags,100,-16,133,file);
				end
				if (tipo==9) hit_stars(17,x,y); end
				if (tipo==2) hit_stars(15,x,y); end
				if (tipo==10 or tipo==13) hit_stars(19,x,y);  end
				if (tipo==11 or tipo==12) hit_stars(-19,x,y); end
				if (tipo==6)
					if (super_sp==0)
						FROM blend_fx=522 TO 533;
							convert_palette (grandfather.file,blend_fx,&rojoxazul);
						END
						hit_stars(50,x,y);
					end
					if (super_sp==1) hit_stars(15,x,y); end
				end
			end
			if (tipo==6)
				if (super_sp==1)
					FROM blend_fx=587 TO 592;
						convert_palette (grandfather.file,blend_fx,&rojoxazul);
					end
				end
			end
			if (tipo<>5)
				grandfather.magia=0; return;
			end
		end
		
		id_mueco=collision(type prota);
		if (id_mueco and exists(id_mueco))
			if (id_mueco==grandfather)
				id_mueco=collision(type prota);
			end
		end
		if (id_mueco and exists(id_mueco))
			if (game_mode==MODE_TRAINING and id_mueco.hit_combo==0)
				if (id_mueco==id_luchador1 and rojo==0)
					id_mueco.vida=MAX_LIFE;
					id_alive1.x=89;
				end
				if (id_mueco==id_luchador1 and rojo==1)
					id_mueco.vida=DANGER_LIFE-1;
					id_alive1.x=184;
				end
				if (id_mueco==id_luchador2 and (cputype<>3 or
					(cputype==3 and rojo==0)))
					id_mueco.vida=MAX_LIFE;
					id_alive2.x=231;
				end
				if (id_mueco==id_luchador2 and cputype==3 and rojo==1)
					id_mueco.vida=DANGER_LIFE-1;
					id_alive2.x=136;
				end
			end
			if ((id_mueco.estado==_normal or
				id_mueco.estado==_avanzar or
				id_mueco.estado==_agachar or
				id_mueco.estado==_lpunch1 or
				id_mueco.estado==_lpunch2 or
				id_mueco.estado==_lkick1 or
				id_mueco.estado==_lkick2 or
				id_mueco.estado==_spunch1 or
				id_mueco.estado==_skick1 or
				id_mueco.estado==_spunch2 or
				id_mueco.estado==_skick2 or
				id_mueco.estado==_toss1 or
				id_mueco.estado==_charge or
				id_mueco.estado==_burla or
				id_mueco.estado==_correr or
				id_mueco.estado==_pajaritos or
				id_mueco.estado==_recibir_flojos_suelo or
				id_mueco.estado==_recibir_FUERTES_BOZO or
				id_mueco.estado==_recibir_FLOJOS_BOZO or
				id_mueco.estado==200 or//el cojer de la u de vd
				(id_mueco.estado==_recibir_GENJURO and
				id_mueco.paso>1) or
				id_mueco.estado==_recibir_FUERTES_SUELO or
				((id_mueco.estado==_ayuken or
				id_mueco.estado==-1 or
				id_mueco.estado==_shoryuken or
				id_mueco.estado==_uatras_punch or
				id_mueco.estado==_uatras_kick or
				id_mueco.estado==_satras_kick or
				id_mueco.estado==_u_kick or
				id_mueco.estado==_extra_move or
				id_mueco.estado==_special1 or
				(id_mueco.estado==_special2 and not
				(id_mueco.luchador==FIGHTER_CRIMSON and ((id_mueco.intensidad==0 and
				id_mueco.paso>1 and id_mueco.paso<10) or
				id_mueco.intensidad>0) and (tipo==0 or
				tipo==1 or tipo==3 or tipo==5 or tipo==-5 or tipo==7)) and not
				(id_mueco.luchador==FIGHTER_IORI and ((id_mueco.intensidad==0 and
				id_mueco.paso>5 and id_mueco.paso<10) or
				id_mueco.intensidad>0) and (tipo==2 or
				tipo==6 or tipo==8 or tipo==9)))) and
				id_mueco.y==220)) and he_dado==1)
				
				//recibir//
				if (id_mueco.seconds==0)
					if (tipo==2 or tipo==8 or tipo==9 or tipo==10 or tipo==13)
						id_mueco.estado=_recibir_fuertes_suelo;
					end
					if (tipo==0 or tipo==1 or tipo==3 or tipo==14)
						id_mueco.estado=_recibir_fuertes_bozo;
					end
				end
				if (tipo==5 or (tipo==4 and y<180))
					id_mueco.estado=_recibir_fuertes_bozo;
				end
				if (tipo==6 or tipo==11 or tipo==12 or tipo==7)
					id_mueco.intensidad=3; id_mueco.inc_y=-12;
					id_mueco.estado=_recibir_toss;
				end
				if (power==74 and (tipo==3 or tipo==14 or
					(tipo==1 and vida==1 and id_mueco.hit_combo>3)))
					id_mueco.estado=_recibir_toss; id_mueco.intensidad=3;
					id_mueco.inc_y=-9;
					if (tipo==14) id_mueco.vulnerable=1; end
				end
				if (exists(father) and 
					father.estado==_special2 and
					father.paso<147 and tipo==12)
					id_mueco.estado=_recibir_fuertes_suelo;
				end
				//paso//
				if (id_mueco.seconds==1 and id_mueco.estado<>38 and
					id_mueco.estado<>46 and id_mueco.estado<>47)
					if (tipo==5 or (tipo==4 and y<180))
						id_mueco.paso=3;
					end
				else
					id_mueco.paso=0;
					if (tipo==6 or tipo==11 or tipo==12 or tipo==7)
						id_mueco.paso=6;
					end
					if (tipo==5 or (tipo==4 and y<180) or tipo==9)
						id_mueco.paso=3;
					end
					if (exists(father) and 
						father.estado==_special2 and
						father.paso<147 and tipo==12)
						id_mueco.paso=0;
					end
				end
				
				//inc_x//
				if (exists(father) and 
					id_mueco.seconds==1 and id_mueco.estado<>38 and
					id_mueco.estado<>46 and id_mueco.estado<>47)
					if (father.x>id_mueco.x) id_mueco.x-=5;
					else id_mueco.x+=5; end
				else
					if (tipo==0 or tipo==1 or tipo==2 or tipo==3 or
						tipo==6 or tipo==7 or tipo==8 or tipo==9 or
						tipo==10 or tipo==11 or tipo==12 or tipo==13 or
						tipo==14)
						if (flag) id_mueco.inc_x=-5;
						else id_mueco.inc_x=5; end
					end
				end
				
				//posicion estrella golpe//
				if (tipo==0 or tipo==1 or tipo==3)  hit_y=y-45; end
				if (tipo==8 or tipo==14 or tipo==7) hit_y=y;    end
				//etc//
				if (tipo==4 and y<180)
					play_snd (s_kura1,450,256); father.he_dado=0;
					hielo(id_mueco,id_mueco.x,220);
				end
				if (tipo==5)//especial crimsom
					id_mueco.y=220; id_mueco.graph=407;
				end
				if (tipo==6 or tipo==11 or tipo==12)
					if (tipo==6 or tipo==11) vida=1;
					else vida--; id_mueco.vulnerable++; end
				end
				he_dado=0;
			end
			if ((id_mueco.estado==_saltar or
				id_mueco.estado==_lkickair or
				id_mueco.estado==_skickair or
				id_mueco.estado==_spunchair or
				id_mueco.estado==_lpunchair or
				id_mueco.estado==_tossair or
				id_mueco.estado==_saltar_atras or
				id_mueco.estado==-3 or
				id_mueco.estado==300 or
				((id_mueco.estado==_ayuken or
				id_mueco.estado==_shoryuken or
				id_mueco.estado==_uatras_punch or
				id_mueco.estado==_uatras_kick or
				id_mueco.estado==_satras_kick or
				id_mueco.estado==_u_kick or
				id_mueco.estado==_extra_move or
				id_mueco.estado==_special1 or
				id_mueco.estado==_special2) and
				id_mueco.y<220) or
				(id_mueco.estado==_recibir_toss and
				id_mueco.paso>1 and id_mueco.vulnerable>0)) and
				he_dado==1)
				
				//estado//
				id_mueco.estado=_recibir_toss; 
				id_mueco.intensidad=0;
				if (tipo==5 and id_mueco.y>189)
					id_mueco.y=220; 
					id_mueco.estado=_recibir_fuertes_bozo;
				end
				if (tipo==6 or tipo==11 or tipo==12)
					id_mueco.intensidad=3;
				end
				
				//paso//
				id_mueco.paso=0;
				if (tipo==0 or tipo==1 or tipo==2 or tipo==3 or
					tipo==8 or tipo==10 or tipo==13 or tipo==14)
					id_mueco.paso=2;
				end
				if ((tipo==5 and id_mueco.y>189) or tipo==9)
					id_mueco.paso=3;
				end
				if (tipo==6 or tipo==11 or tipo==12 or tipo==7)
					id_mueco.paso=6;
				end
				if ((tipo==4 and y<180) or (tipo==5 and id_mueco.y<190))
					id_mueco.paso=15;
				end
				
				//inc//
				if (tipo==0 or tipo==1 or tipo==2 or tipo==3 or
					tipo==8 or tipo==9 or tipo==10 or tipo==11 or
					tipo==12 or tipo==13 or tipo==14 or tipo==7)
					id_mueco.inc_y=-9;
					if (flag) id_mueco.inc_x=-5;
					else id_mueco.inc_x=5; end
				end
				if (tipo==6 or tipo==11 or tipo==12)
					id_mueco.inc_y=-12;
				end
				//posicion estrella golpe//
				if (tipo==0 or tipo==1 or tipo==3)
					hit_y=id_mueco.y-18;
				end
				if (tipo==8 or tipo==14 or tipo==7) hit_y=y; end
				//etc//
				if (tipo==1 or tipo==2 or tipo==3 or tipo==14)//doshita o sicoball
					if (vida>1 or (tipo==14 and power==14))
						id_mueco.vulnerable++;
					end
				end
				if (tipo==4 and y<180)//hielo rimururu
					id_mueco.vulnerable=1;
					play_snd (s_kura1,450,256); father.he_dado=0;
					hielo(id_mueco,id_mueco.x,id_mueco.y);
				end
				if (tipo==6 or tipo==11 or tipo==12)
					if (tipo==6 or tipo==11) 
						vida=1; id_mueco.vulnerable+=2;
					else 
						vida--;
						if (id_mueco.vulnerable==0) id_mueco.vulnerable=1; end
					end
				end
				if (tipo==9) id_mueco.vulnerable=3; end
				he_dado=0;
			end
			if ((id_mueco.estado==_agachado or
				id_mueco.estado==_lpunchaga or
				id_mueco.estado==_lkickaga or
				id_mueco.estado==_spunchaga or
				id_mueco.estado==_skickaga or
				id_mueco.estado==-2 or
				id_mueco.estado==_recibir_flojos_agachado or
				id_mueco.estado==_recibir_fuertes_agachado) and
				he_dado==1)
				if (tipo<>4)
					if (is_playing_snd(channel[30]))
						stop_snd(channel[30]);
					end
					channel[30]=0;
				end
				//recibir//
				if (id_mueco.seconds==0)
					if (tipo==0 or tipo==1 or tipo==2 or tipo==3 or
						tipo==8 or tipo==9 or tipo==10 or tipo==11 or tipo==14)
						id_mueco.estado=_recibir_fuertes_agachado;
					end
				end
				if (tipo==5 or (tipo==4 and y<180))
					id_mueco.estado=_recibir_fuertes_agachado;
				end
				if (tipo==6 or tipo==11 or tipo==12 or tipo==7)
					id_mueco.intensidad=3; id_mueco.inc_y=-12;
					id_mueco.estado=_recibir_toss;
				end
				if (power==74 and (tipo==3 or tipo==14 or
					(tipo==1 and vida==1 and id_mueco.hit_combo>3)))
					id_mueco.estado=_recibir_toss; id_mueco.intensidad=3;
					id_mueco.inc_y=-9;
					if (tipo==14) id_mueco.vulnerable=1; end
				end
				if (exists(father) and 
					father.estado==_special2 and
					father.paso<147 and tipo==12)
					id_mueco.estado=_recibir_fuertes_agachado;
				end
				
				//paso//
				if (id_mueco.seconds==1 and id_mueco.estado<>38 and
					id_mueco.estado<>46 and id_mueco.estado<>47)
					if (tipo==5 or (tipo==4 and y<180))
						id_mueco.paso=3;
					end
				else
					id_mueco.paso=0;
					if (tipo==6 or tipo==11 or tipo==12 or tipo==7)
						id_mueco.paso=6;
					end
					if (tipo==5 or (tipo==4 and y<180) or tipo==9)
						id_mueco.paso=3;
					end
					if (exists(father) and 
						father.estado==_special2 and
						father.paso<147 and tipo==12)
						id_mueco.paso=0;
					end
				end
				
				//inc_x//
				if (exists(father) and 
					id_mueco.seconds==1 and id_mueco.estado<>38 and
					id_mueco.estado<>46 and id_mueco.estado<>47)
					if (father.x>id_mueco.x) id_mueco.x-=5;
					else id_mueco.x+=5; end
				else
				   if (tipo==0 or tipo==1 or tipo==2 or tipo==3 or
						tipo==6 or tipo==7 or tipo==8 or tipo==9 or
						tipo==10 or tipo==11 or tipo==12 or tipo==13 or
						tipo==14)
						if (flag) id_mueco.inc_x=-5;
						else id_mueco.inc_x=5; end
					end
				end
				
				//posicion estrella golpe//
				if (tipo==0 or tipo==1 or tipo==3)  hit_y=y-25; end
				if (tipo==8 or tipo==14 or tipo==7) hit_y=y;    end
				
				//etc//
				if (tipo==4 and y<180)//hielo rimururu
					play_snd (s_kura1,450,256); father.he_dado=0;
					hielo(id_mueco,id_mueco.x,220);
				end
				if (tipo==5)//especial crimson
					id_mueco.y=220; id_mueco.graph=412;
				end
				if (tipo==6 or tipo==11 or tipo==12)//cristal bit/shokohken
					if (tipo==6 or tipo==11) vida=1;
					else vida--; id_mueco.vulnerable++; end
				end
				he_dado=0;
			end
			
			if ((id_mueco.estado==_retroceder or
				id_mueco.estado==_guardiaaltafloja or
				id_mueco.estado==_guardiaalta) and he_dado==1)
				id_mueco.estado=_guardiaalta;
				id_mueco.paso=7;
				id_mueco.vida-=pica;
				hit_x=abs(x+id_mueco.x)/2;
				if (id_mueco.file==fich1) damegi1-=pica; end
				if (id_mueco.file==fich2) damegi2-=pica; end
				
				if (flag) 
					id_mueco.inc_x=-INCX_GUARD_X;//12;
				else 
					id_mueco.inc_x=INCX_GUARD_X;//12; 
				end
				
				if (tipo==0 or tipo==1 or tipo==3 or tipo==5)
					hit_y=y-45;
				end
				if (tipo==1) hit_stars(16,x,y); end
				if (tipo==2 or tipo==4 or tipo==6 or tipo==12 or
					tipo==8 or tipo==9 or tipo==10 or tipo==11 or
					tipo==13 or tipo==14 or tipo==7)
					hit_y=y;
				end
				if (tipo==5 or tipo==6 or tipo==11) vida=1; end
				if (tipo==12) vida--; end
				if (id_mueco.just_guard>0 and
					id_mueco.just_guard<4) //si el enemigo acaba de pulsar atras...
					id_mueco.super_guard=1;//...le hace cubrirse menos tiempo
					hit_stars(14,hit_x,hit_y);//tipo 7 es la nueva estrella para super_guard
					signal(type texto_inflar,s_kill);
					if (id_mueco.vida>0)
						channel[30]=play_snd (s_hit5,512,320);
					end
					if (id_mueco==id_luchador1)
						texto_inflar(36,2);
					end
					if (id_mueco==id_luchador2)
						texto_inflar(36,1);
					end
				else
					if (id_mueco.vida>0)
						channel[30]=play_snd (s_guard,512,256);
					end
					id_mueco.super_guard=0;//...se cubre normalmente
					hit_stars(13,hit_x,hit_y);
				end
				
				vida--;he_dado=-1;
				if (vida>0 and tipo<>12) frame(600);
				else paso=0; end
				
				if (id_mueco.vida<=0)
					id_mueco.estado=_recibir_toss; 
					id_mueco.intensidad=id_mueco.paso=0;
					id_mueco.vida=0; 
					id_mueco.seconds=0;
					if (tipo==4)
						id_mueco.paso=4; play_snd (s_kura1,450,256);
						hielo(id_mueco,id_mueco.x,220);
					end
					if (tipo==5)
						id_mueco.paso=0;
						pegata (x,y,575,c_scroll,flags,100,z-1,68,file);
						graph=562; estado=1; size=120;
					end
					if (tipo==6 or tipo==11 or tipo==12 or tipo==7)
						id_mueco.inc_y=-12;
						if (flag) id_mueco.inc_x=-5;
						else id_mueco.inc_x=5; end
					end
					if (tipo==9)
						id_mueco.paso=4; id_mueco.vulnerable=3;
					end
					if (tipo==11 or tipo==12) id_mueco.vulnerable=1; end
					he_dado=0;
				end
			end
			if ((id_mueco.estado==_agachadoguardia or
				id_mueco.estado==_guardiabajafloja or
				id_mueco.estado==_guardiabaja) and he_dado==1)
				id_mueco.estado=_guardiabaja;
				id_mueco.paso=7;
				id_mueco.vida-=pica;
				hit_x=abs(x+id_mueco.x)/2;
				if (id_mueco.file==fich1) damegi1-=pica; end
				if (id_mueco.file==fich2) damegi2-=pica; end
				
				if (flag) 
					id_mueco.inc_x=-INCX_GUARD_X;//12;
				else 
					id_mueco.inc_x=INCX_GUARD_X;//12; 
				end
				
				if (tipo==0 or tipo==1 or tipo==3 or
					tipo==5)
					hit_y=y-25;
				end
				
				if (tipo==1) hit_stars(16,x,y); end
				if (tipo==2 or tipo==4 or tipo==6 or tipo==12 or
					tipo==8 or tipo==9 or tipo==10 or tipo==11 or
					tipo==13 or tipo==14 or tipo==7)
					hit_y=y;
				end
				if (tipo==5 or tipo==6 or tipo==11) vida=1; end
				if (tipo==12) vida--; end
				if (tipo<>4)
					if (is_playing_snd(channel[30]))
						stop_snd(channel[30]);
					end
					channel[30]=0;
				end
				if (id_mueco.just_guard>0 and
					id_mueco.just_guard<4)
					id_mueco.super_guard=1;
					hit_stars(14,hit_x,hit_y);//tipo 7 es la nueva estrella para super_guard
					signal(type texto_inflar,s_kill);
					if (id_mueco.vida>0)
						channel[30]=play_snd (s_hit5,512,320);
					end
					if (id_mueco==id_luchador1)
						texto_inflar(36,2);
					end
					if (id_mueco==id_luchador2)
						texto_inflar(36,1);
					end
				else
					if (id_mueco.vida>0)
						channel[30]=play_snd (s_guard,512,256);
					end
					id_mueco.super_guard=0;
					hit_stars(13,hit_x,hit_y);//tipo 3 es la normal
				end
				
				vida--;he_dado=-1;
				if (vida>0 and tipo<>12) frame(600);
				else paso=0; end
				if (id_mueco.vida<=0)
					id_mueco.estado=_recibir_toss; id_mueco.intensidad=0;
					id_mueco.paso=0; id_mueco.vida=0; id_mueco.seconds=0;
					if (tipo==4)
						id_mueco.paso=4;
						id_mueco.estado=_recibir_fuertes_agachado;
						play_snd (s_kura1,450,256);
						hielo(id_mueco,id_mueco.x,220);
					end
					if (tipo==5)
						id_mueco.paso=3;
						id_mueco.estado=_recibir_fuertes_agachado;
						pegata (x,y,575,c_scroll,flags,100,z-1,68,file);
						graph=562; estado=1; size=120;
					end
					if (tipo==6 or tipo==11 or tipo==12)
						id_mueco.inc_y=-12;
						if (flag) id_mueco.inc_x=-5;
						else id_mueco.inc_x=5; end
					end
					if (tipo==9)
						id_mueco.paso=4; id_mueco.vulnerable=3;
					end
					if (tipo==11 or tipo==12) id_mueco.vulnerable=1; end
					he_dado=0;
				end
			end
			if (he_dado==0)
				id_mueco.vida-=damage;
				id_mueco.pipiolos-=pipiolos;
				id_mueco.guardia=0;
				id_mueco.angle=0;
				id_mueco.hit_combo++;
				
				if (id_mueco.vida<=0)
					id_mueco.estado=_recibir_toss; id_mueco.seconds=0;
					id_mueco.paso=0; id_mueco.vida=0; 
					if (id_mueco.inc_y==0) id_mueco.inc_y=-8; end
					if (game_mode!=MODE_TRAINING and parpadeo_final==0)
						ralenti(1); pantallazo(10); parpadeo_final=1;
					end
				end
				if (id_mueco.file==fich1)
					if (id_mueco.hit_combo==1) damegi1=0; end
					damegi1-=damage;
				end
				if (id_mueco.file==fich2)
					if (id_mueco.hit_combo==1) damegi2=0; end
					damegi2-=damage;
				end
				
				////si tiene que poner stun///////
				if (id_mueco.pipiolos<1 and id_mueco.vida>0 and
					id_mueco.pipiolos+pipiolos>0)
					if (id_mueco==id_luchador1)
						texto_inflar(37,2);
					end
					if (id_mueco==id_luchador2)
						texto_inflar(37,1);
					end
				end
				
				//efecto extra//
				if (id_mueco.seconds==1 and id_mueco.estado<>38 and
					id_mueco.estado<>46 and id_mueco.estado<>47)
					if (tipo==5 or (tipo==4 and y<180))
						id_mueco.blend_fx=id_mueco.blend_fx*10;
						id_mueco.blend_frame=0;
					end
				else
					if (tipo==0 or tipo==2 or (tipo==4 and y<180) or
						tipo==8 or tipo==10 or tipo==11 or tipo==12 or tipo==13)
						id_mueco.blend_fx=id_mueco.blend_fx*10;
						id_mueco.blend_frame=0;
					end
					if (tipo==1)
						id_mueco.blend_fx=3; id_mueco.blend_frame=0;
					end
					if (tipo==3 or tipo==5 or tipo==14)
						id_mueco.blend_fx=2; id_mueco.blend_frame=0;
					end
					if (tipo==7)
						id_mueco.blend_fx=4; id_mueco.blend_frame=0;
					end
					if (tipo==6 or tipo==9)
						id_mueco.electrocutado=1;
					end
				end
				
				//sonido//
				if (tipo<>4)
					if (is_playing_snd(channel[30]))
						stop_snd(channel[30]);
					end
					channel[30]=0;
				end
				if (id_mueco.vida<=0 and game_mode!=MODE_TRAINING)
					if (tipo==0 or tipo==2 or tipo==8 or tipo==10 or tipo==13)
						channel[30]=play_snd (s_fhit,512,256);
					end
					if (tipo==1 or tipo==3 or tipo==14)
						channel[30]=play_snd (s_burn2,512,256);
					end
				else
					if (tipo==0 or tipo==2 or tipo==8 or tipo==10 or tipo==13)
						channel[30]=play_snd (s_hit2,512,256);
					end
					if (tipo==1 or tipo==3 or tipo==14)
						channel[30]=play_snd (s_burn1,512,256);
					end
				end
				if (tipo==5)
					channel[30]=play_snd (s_burn2,512,256);
				end
				if (tipo==11 or tipo==12)
					channel[30]=play_snd (s_hit5,512,256);
				end
				if (tipo==7)
					channel[30]=play_snd (s_kura1,512,256);
				end
				if (tipo==6 or tipo==9)
					channel[30]=play_snd (s_shock1,452,256);
				end
				
				pantallazo(0);
				
				if (id_mueco.seconds==1 and id_mueco.estado<>38 and
					id_mueco.estado<>46 and id_mueco.estado<>47)
					if (tipo<>4 or tipo<>5)
						conjelador (id_mueco, 5);
					end
				end
				
				////////contador de combos/////////
				if (id_mueco==id_luchador1)
					if (id_mueco.hit_combo==2) combos(id_luchador1,1); end
					if (id_mueco.hit_combo==10) combos(id_luchador1,2); end
				end
				if (id_mueco==id_luchador2)
					if (id_mueco.hit_combo==2) combos(id_luchador2,1); end
					if (id_mueco.hit_combo==10) combos(id_luchador2,2); end
				end
				if (tipo<>2 and tipo<>4 and tipo<>5 and tipo<>6 and
					tipo<>9 and tipo<>10 and tipo<>11 and tipo<>12 and
					tipo<>13)
					hit_x=abs(x+id_mueco.x)/2;
					hit_stars(18,hit_x,hit_y);
				end
				if (exists(father) and father.estado<>_special1 and 
					father.estado<>_special2 and father.estado<>-5)
					father.power+=4;
				end
				
				//////////// vibracion ////////////////////////
				id_mueco.vibracion = damage>>PRECISION_BITS;
				
				//etc//
				if (tipo==5)//especial crimsom
					if (id_mueco.vida>0)
						if (id_mueco.poison!=10)
							id_mueco.poison = 10;
							grandfather.poison = crimsom (father, id_mueco);
						else
							if (!super_sp) 
								id_mueco.paso=0; id_mueco.poison=0; 
							end
						end
					end
					pegata (x,y,575,c_scroll,flags,100,z-1,68,file);
					if (estado==0) graph=562; estado=1; size=120; end
					vida=1;
				end
				
				vida--; //n de toques
				if (vida>0) 
					if (tipo<>12) frame(600); end
				else 
					paso=0; id_mueco.vulnerable=0; 
				end
			end
			if (he_dado==-1)
				id_mueco.power+=4;
				if (father.estado<>_special1 and father.estado<>_special2 and
					father.estado<>-5)
					father.power+=2;
				end
			end
			if (he_dado==0 or he_dado==-1)
				id_mueco.darmagia=1; id_mueco.estatico=0;
				if (tipo==12) he_dado=1;
					if (flag) x+=inc_x; else x-=inc_x; end
				end
				if (tipo==5) he_dado=2; end
			end
		end
		
		id_striker=collision(type straiker);
		if (id_striker and exists(id_striker))
			if (id_striker==grandfather.son or
				id_striker.father==grandfather)
				id_striker=collision(type straiker);
			end
		end
		
		if (id_striker and exists(id_striker))
			if ((id_striker.estado==_avanzar or
				id_striker.estado==_toss1 or
				id_striker.estado==_voltear) and
				id_striker.vulnerable==0)
				hit_stars(18,x,y); id_striker.paso=0;
				id_striker.estado=_recibir_toss;
				
				vida--; 
				if (tipo==11) vida=0; end
				if (tipo==12) vida--; end
				
				if (tipo==1)
					id_striker.blend_fx=3; 
					id_striker.blend_frame=0;
					play_snd (s_burn1,512,256);
				end
				if (tipo==3 or tipo==5 or tipo==14)
					id_striker.blend_fx=2; 
					id_striker.blend_frame=0;
					play_snd (s_burn1,512,256);
				end
				if (tipo==7)
					id_striker.blend_fx=4; 
					id_striker.blend_frame=0;
					play_snd (s_kura1,512,256);
				end
				if (tipo==6 or tipo==9)
					id_striker.electrocutado=1;
					id_striker.blend_frame=0;
					play_snd (s_shock1,512,256);
				end
				
				if (tipo==0 or tipo==2 or tipo==8 or
					tipo==10 or tipo==13 or tipo==15)
					play_snd (s_hit2,512,256);
				end
				if (tipo==11 or tipo==12)
					play_snd (s_hit3,512,256);
				end
				
				if (vida>0 and tipo<>12) frame(600);
				else paso=0; end
			end
		end
	end
end

process sombra();

begin
	loop
		if (exists(father)) 
			graph=3;file=fich_game;
			ctype=c_scroll;
			x=father.x;y=220;
			flags=father.flags+4;
			z=father.z+2;
			size=(father.y/2)-10;
			if (size<=70) size=70; end
			frame; 
		end	
	end
end

process tembleque(potencia,sitio);//(0/2, 0/-1);

begin
	//potencia==1-tembor pequeo
	//potencia==2-temblor grande
	//sitio==1-cuando los dos personajes estan en el suelo
	//sitio==-1-cuando uno o los dos personajes estan en el aire
	if (potencia==5 or potencia==6)
		if (scroll.x0>216) sitio=-1; if (potencia==5) frame; end
		else sitio=1; if (potencia==6) frame; end end
	end
	loop
		frame;
		paso++;
		if (potencia==1)//media
			if (paso==1)  camara_y+=-5*sitio; end
			if (paso==2)  camara_y+=+5*sitio; end
			if (paso==3)  camara_y+=-4*sitio; end
			if (paso==4)  camara_y+=+4*sitio; end
			if (paso==5)  camara_y+=-3*sitio; end
			if (paso==6)  camara_y+=+3*sitio; end
			if (paso==7)  camara_y+=-1*sitio; end
			if (paso==8)  camara_y+=+1*sitio; end
			if (paso==9)  return;       end
		end
		if (potencia==2)//fuerte
			if (paso==1)  camara_y+=-6*sitio; end
			if (paso==2)  camara_y+=+6*sitio; end
			if (paso==3)  camara_y+=-5*sitio; end
			if (paso==4)  camara_y+=+5*sitio; end
			if (paso==5)  camara_y+=-5*sitio; end
			if (paso==6)  camara_y+=+5*sitio; end
			if (paso==7)  camara_y+=-4*sitio; end
			if (paso==8)  camara_y+=+4*sitio; end
			if (paso==9)  camara_y+=-3*sitio; end
			if (paso==10)  camara_y+=+3*sitio; end
			if (paso==11)  camara_y+=-2*sitio; end
			if (paso==12)  camara_y+=+2*sitio; end
			if (paso==13)  camara_y+=-1*sitio; end
			if (paso==14) camara_y+=+1*sitio; end
			if (paso==15) return;       end
		end
		if (potencia==5 or potencia==6)//lateral
			if (paso==1)  scroll.x0+=+7*sitio; end
			if (paso==2)  scroll.x0+=-7*sitio; end
			if (paso==3)  scroll.x0+=+5*sitio; end
			if (paso==4)  scroll.x0+=-5*sitio; end
			if (paso==5)  scroll.x0+=+3*sitio; end
			if (paso==6)  scroll.x0+=-3*sitio; end
			if (paso==7)  scroll.x0+=+2*sitio; end
			if (paso==8)  scroll.x0+=-2*sitio; end
			if (paso==9)  scroll.x0+=+1*sitio; end
			if (paso==10) scroll.x0+=-1*sitio; end
			if (paso==11) return;              end
		end
	end
end

process prota_shadow(x,y,tipo);

private
	fagra1; fagra2; fagra3;
	faexs1; faexs2; faexs3;
	faygr1; faygr2; faygr3;
	fafla1; fafla2; fafla3;
	fangl1; fangl2; fangl3;
	
begin
	file = father.file;
	ctype = c_scroll;
	
	if (tipo==0)
		
		if (SLOW_MACHINE) return; end
		
		z=father.z+1;
		graph=father.graph; 
		flags=father.flags;
		alpha = 160;
    	/* GEMIX /*
		flags=father.flags+4;
	    /**/	
		
	end
	
	loop
		if (tipo==0)
			paso++; alpha-=20;
			if (alpha==0) return; end
		end
		
		if (tipo==1 or tipo==2)
			
			/* BENNU /*
			if (fagra1 != 0)
				blendop_assign (father.file,fagra1,NULL);
			end
			
			if (father.power<74) return; end
			
			if (//father.estado!=_special1 and
				//father.estado!=_special2 and
				//father.estado!=-5 and 
				father.blend_fx==0 and
				father.electrocutado==0 and
				father.m8_step==0)
				fagra1 = father.graph;
				paso++;
				
				if (paso==1) estado=0; end
				if (paso==3) estado=1; end
				if (paso==5) estado=2; end
				if (paso==7) estado=3; end
				if (paso==9) estado=2; end
				if (paso==11) estado=1; end
				if (paso==13) paso=0; end
				
				blendop_assign (father.file, fagra1, blend_pow[estado]);
			end	
			
			/* BENNU_WII /*
			if (fagra1 != 0)
				blendop_assign (father.file,fagra1,NULL);
			end
			
			if (father.power<74) return; end
			
			if (//father.estado!=_special1 and
				//father.estado!=_special2 and
				//father.estado!=-5 and 
				father.blend_fx==0 and
				father.electrocutado==0 and
				father.m8_step==0)
				fagra1 = father.graph;
				paso++;
				
				if (paso==1) estado=0; end
				if (paso==3) estado=1; end
				if (paso==5) estado=2; end
				if (paso==7) estado=3; end
				if (paso==9) estado=2; end
				if (paso==11) estado=1; end
				if (paso==13) paso=0; end
				
				blendop_assign (father.file, fagra1, blend_pow[estado]);
			end	
			
			/* BENNU_WIZ /*
			if (fagra1 != 0)
				blendop_assign (father.file,fagra1,NULL);
			end
			
			if (father.power<74) return; end
			
			if (//father.estado!=_special1 and
				//father.estado!=_special2 and
				//father.estado!=-5 and 
				father.blend_fx==0 and
				father.electrocutado==0 and
				father.m8_step==0)
				fagra1 = father.graph;
				paso++;
				
				if (paso==1) estado=0; end
				if (paso==3) estado=1; end
				if (paso==5) estado=2; end
				if (paso==7) estado=3; end
				if (paso==9) estado=2; end
				if (paso==11) estado=1; end
				if (paso==13) paso=0; end
				
				blendop_assign (father.file, fagra1, blend_pow[estado]);
			end

			/* BENNU_GCW0 /**/
			if (fagra1 != 0)
				blendop_assign (father.file,fagra1,NULL);
			end
			
			if (father.power<74) return; end
			
			if (//father.estado!=_special1 and
				//father.estado!=_special2 and
				//father.estado!=-5 and 
				father.blend_fx==0 and
				father.electrocutado==0 and
				father.m8_step==0)
				fagra1 = father.graph;
				paso++;
				
				if (paso==1) estado=0; end
				if (paso==3) estado=1; end
				if (paso==5) estado=2; end
				if (paso==7) estado=3; end
				if (paso==9) estado=2; end
				if (paso==11) estado=1; end
				if (paso==13) paso=0; end
				
				blendop_assign (father.file, fagra1, blend_pow[estado]);
			end	
			
			/* GEMIX /*
			paso++;
			z=father.z+1;
			power=father.power;
			if (paso==1)
				if (tipo==1 and SLOW_MACHINE==false) prota_shadow(x,y,2); end
				fagra2=father.graph; faexs2=father.x;
				faygr2=father.y; fafla2=father.flags;
				fangl2=father.angle;
			end
			if (paso==2)
				fagra3=father.graph; faexs3=father.x;
				faygr3=father.y; fafla3=father.flags;
				fangl3=father.angle;
			end
			if (paso==5 or paso==8 or paso==11 or paso==14 or
				paso==17 or paso==20 or paso==23 or paso==26)
				graph=fagra2; x=faexs2; y=faygr2;
				flags=fafla2; angle=fangl2; fagra1=father.graph;
				faexs1=father.x; faygr1=father.y;
				fafla1=father.flags; fangl1=father.angle;
			end
			if (paso==6 or paso==9 or paso==12 or paso==15 or
				paso==18 or paso==21 or paso==24 or paso==27)
				graph=fagra3; x=faexs3; y=faygr3;
				flags=fafla3; angle=fangl3; fagra2=father.graph;
				faexs2=father.x; faygr2=father.y;
				fafla2=father.flags; fangl2=father.angle;
			end
			if (paso==7 or paso==10 or paso==13 or paso==16 or
				paso==19 or paso==22 or paso==25 or paso==28)
				graph=fagra1; x=faexs1; y=faygr1;
				flags=fafla1; angle=fangl1; fagra3=father.graph;
				faexs3=father.x; faygr3=father.y;
				fafla3=father.flags; fangl3=father.angle;
			end
			if (paso==28) paso=4; end
			if (father==id_luchador1 or father==id_luchador2)
				flags=flags+4;
			end
			if (father.power<74 or father.estado==_special1 or
				father.estado==_special2)
				if (father.infinitypow==0) 
					signal (id, s_kill_tree); 
				else graph=0; end
			end
			/**/
		end
		frame;
	end
end

process extra_scroll(tipo); //para hacer escroles artificiales

begin
	
	ctype=c_scroll;
	if (tipo==1) //scroll enmedio de usted
		file=fichstg; graph=1; z=500;
		stage_obj(600,120,505,0,9);
		stage_obj(100,70,499,0,12);
		stage_obj(0,50,499,0,13);
		stage_obj(0,50,499,0,14);
		stage_obj(0,50,499,0,15);
		stage_obj(0,50,506,0,16);
		stage_obj(0,50,506,0,17);
		stage_obj(0,50,506,0,18);
		stage_obj(0,50,499,0,19);
		
		loop
			if (scroll.x0=>0 and scroll.x0=<432)
				x=((scroll.x0*5)/9)+250;
			end
			y=((scroll.y0+240+camara_y2)/2);
			if (rand(0,500)==0)
				if (rand(0,1)==0)
					stage_obj(-40,rand(10,100),rand(-200,200),0,20);
				else
					stage_obj(700,rand(10,100),rand(-200,200),1,20);
				end
			end
			frame;
		end
	end
	
	if (tipo==2) //barco de usted
		file=fichstg;
		graph=2;
		z=490; y=197; x=376;
		
		loop
			paso++;
			if (paso==15 or paso==30 or paso==42 or
				paso==52 or paso==60 or paso==68 or
				paso==78 or paso==90 or paso==115)
				camara_y2--;
			end
			if (paso==145  or paso==160  or paso==172 or
				paso==182 or paso==190 or paso==198 or
				paso==208 or paso==220 or paso==235)
				camara_y2++;
			end
			if (paso==250) paso=1; end
			frame;
		end
	end
	
	if (tipo==3) //ciudad de kyo
		file=fichstg; graph=2;
		z=500; y=198; x=376;
		stage_obj(231,170,490,0,27);
		stage_obj(231,170,490,0,28);
		stage_obj(231,170,490,0,29);
		stage_obj(231,170,490,0,30);
		stage_obj(231,170,490,0,31);
		stage_obj(90,170,491,0,32);
		stage_obj(91,170,491,0,32);
		stage_obj(98,170,493,0,32);
		stage_obj(99,170,493,0,32);
		loop
			if (scroll.x0=>0 and scroll.x0=<432)
				x=((scroll.x0*5)/9)+250;
			end
			y=120+(scroll.y0/2);
			if (rand(0,100)==0)
				stage_obj(x+58,y+16,492,0,33);
			end
			if (rand(0,25)==0)
				stage_obj(x+58,y+16,495,rand(0,1),35);
			end
			if (paso==0 and round==1) paso++;
				stage_obj(x-65,y+120,491,0,34);
			end
			if (paso==1 and round==3) paso++;
				stage_obj(x-65,y+120,491,0,34);
			end
			frame;
		end
	end
	if (tipo==4) //puente de kyo
		file=fichstg; graph=1;
		stage_obj(231,170,489,0,21);
		stage_obj(231,170,489,0,22);
		stage_obj(231,170,489,0,23);
		stage_obj(231,170,489,0,24);
		stage_obj(231,170,489,0,25);
		stage_obj(231,170,489,0,26);
		z=490; y=188; x=376;
		loop
			frame;
		end
	end
end

process stage_obj(x,y,z,flags,tipo);

private

	// terry stg
	gallofa[]=37,37,37,37,37,37,37,37,37,37,38,38,38,38,38,38,38,38,39,39,39,39,39,39,
	40,40,40,40,41,41,41,41,40,40,40,40,39,39,39,39,39,39,38,38,38,38,38,38,38,38,37,37,37,37,37,37;
	barbas[]=2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0;
	jubei_yamada[]=5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,
	9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,
	12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,
	15,15,15,15,15,15,15,15,15,15;
	barbas_borracho[]=16,16,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,17,17,
	18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,
	21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22;
	mendas[]=45,45,45,45,45,45,45,45,45,45,46,46,46,46,46,46,46,46,46,46,47,47,47,47,47,47,47,
	47,47,47,48,48,48,48,48,48,48,48,48,48,49,49,49,49,49,49,49,49,49,49,50,50,50,50,50,50,50,
	50,50,50,51,51,51,51,51,51,51,51,51,51,52,52,52,52,52,52,52,52,52,52;
	rail_crossed[]=42,42,42,42,42,42,42,42,42,42,42,42,43,43,43,43,43,43,43,43,43,43,43,43,
	44,44,44,44,44,44,44,44,44,44,44,44,43,43,43,43,43,43,43,43,43,43,43,43;
	bote[]=23,23,23,23,23,23,24,24,24,24,24,24,25,25,25,25,25,25,26,26,26,26,26,26,
	27,27,27,27,27,27,28,28,28,28,28,28,29,29,29,29,29,29,30,30,30,30,30,30;
	blue_animar[]=32,32,32,32,32,32,32,32,32,32,33,33,33,33,33,33,33,33,33,33;
	blue_animar2[]=34,34,34,34,34,34,34,34,34,34,35,35,35,35,35,35,35,35,35,35,
	36,36,36,36,36,36,36,36,36,36,35,35,35,35,35,35,35,35,35,35;

	// iori stg
	pato[]=3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5;
	fumata[]=14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,16,16,16,16,16,16,16,16,
	17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,0,0,0,0,0,0,0,0,13,13,13,13,13,
	13,1313,13,13,13,13,13,13;
	masmendas[]=20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,
	23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25;
	mar[]=10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,
	0,0,0,0,0,0,0,0;
	murcielago[]=26,26,26,26,26,26,27,27,27,27,27,27,28,28,28,28,28,28,29,29,29,29,29,29,
	26,26,26,26,26,26,30,30,30,30,30,30,28,28,28,28,28,28,29,29,29,29,29,29;
	otrosmendas[]=31,31,31,31,31,31,31,31,32,32,32,32,32,32,32,32,
	33,33,33,33,33,33,33,33,34,34,34,34,34,34,34,34,33,33,33,33,33,33,33,33,
	32,32,32,32,32,32,32,32,31,31,31,31,31,31,31,31,35,35,35,35,35,35,35,35,
	31,31,31,31,31,31,31,31,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35;
	luces[]=36,36,36,36,36,36,36,36,37,37,37,37,37,37,37,37,38,38,38,38,38,38,38,38,
	39,39,39,39,39,39,39,39,41,41,41,41,41,41,41,41,42,42,42,42,42,42,42,42,43,43,
	43,43,43,43,43,43;
	masmar[]=52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,53,53,53,53,53,
	53,53,53,53,53,53,53,53,53,53,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
	54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54;
	masluces[]=55,55,55,55,55,55,55,55,55,55,56,56,56,56,56,56,56,56,56,56,
	57,57,57,57,57,57,57,57,57,57,0,0,0,0,0,0,0,0,0,0;

	// kyo stg
	luismi[]=3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7;
	juventudv[]=8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,
	11,11,11,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,
	15,15,15,15,15,15,15,15;
	osami[]=16,16,16,16,16,16,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,17,17,
	18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19;
	jeims[]=20,20,20,20,20,20,21,21,21,21,21,21,20,20,20,20,20,20,21,21,21,21,21,21,
	22,22,22,22,22,22,23,23,23,23,23,23,22,22,22,22,22,22,23,23,23,23,23,23;
	robert[]=24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27;
	luismiguel[]=28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,30,30,30,30,30,30,30,30,
	31,31,31,31,31,31,31,31,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,33,33,33,33,33,33,33,33;

	kof[]=83,83,83,83,83,83,83,83,84,84,84,84,84,84,84,84,0,0,0,0,0,0,0,0,84,84,84,84,84,84,84,84;
	nagumetes[]=85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,86,86,86,86,86,86,86,86,86,86,87,87,87,87,87,87,87,87,87,87;
	semaforo[]=88,88,88,88,88,88,88,88,0,0,0,0,0,0,0,0,89,89,89,89,89,89,89,89,0,0,0,0,0,0,0,0;
	pantalla1[]=56,56,56,56,56,56,56,56,56,56,56,56,56,56,56,56,57,57,57,58,
	58,58,59,59,59,59,0,59,0,59,60,60,60,61,61,61,62,62,62,62,62,62,62,62,62,
	62,0,62,0,62,63,63,63,64,64,64,65,65,65,66,66,66,67,67,67,68,68,68,69,69,
	69,69,69,70,70,70,70,70,69,69,69,69,69,70,70,70,70,70,69,69,69,69,69,70,
	70,70,70,70,69,69,69,69,69,70,70,70,70,70,69,69,69,69,70,70,70,70,70,69,69,
	69,69,69,70,70,70,70,70,71,71,71,72,72,72,73,73,73,74,74,74,75,75,75,75,
	75,75,75,75,75,75,75,75,75,75,75,76,76,76,77,77,77,78,78,78,79,79,79,80,
	80,80,80,80,81,81,81,81,81,80,80,80,80,80,81,81,81,81,81,80,80,80,80,80,
	81,81,81,81,81,80,80,80,80,80,81,81,81,81,81,80,80,80,80,80,81,81,81,81,
	81,80,80,80,80,80,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,
	82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82,82;
	pantalla2[]=34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,34,0,34,0,0,
	35,35,35,35,35,36,36,36,36,36,37,37,37,37,37,38,38,38,38,38,0,38,0,38,39,
	39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,40,
	40,40,40,0,41,41,41,41,0,42,42,42,42,0,43,43,43,44,44,44,45,45,45,45,45,
	46,46,46,46,46,47,47,47,48,48,48,49,49,49,50,50,50,51,51,51,52,52,52,52,
	52,53,53,53,53,53,51,51,51,51,51,53,53,53,53,53,51,51,51,51,51,53,53,53,
	53,53,51,51,51,51,51,53,53,53,53,53,51,51,51,51,51,53,53,53,53,53,51,51,
	0,51,0,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,0,54,0,55,
	55,55,34,34,34,34,34,34,34;

	// athena stg
	bengoshi[]=13,13,13,13,13,13,14,14,14,14,14,14,15,15,15,15,15,15,16,
	16,16,16,16,16,17,17,17,17,17,17,18,18,18,18,18,18,19,19,19,19,19,19,
	12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13;
	mizu[]=7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,10,10,10,10,10,10,10,10,
	9,9,9,9,9,9,9,9,8,8,8,8,8,8,8,8,7,7,7,7,7,7,7,7,7,7,7,7;
	masayo[]=21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,
	24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,27,27,27,
	27,27,27,27,27,28,28,28,28,28,28,28,28;
	trupe1[]=48,48,48,48,48,48,48,48,49,49,49,49,49,49,49,49,50,50,50,50,50,50,50,50,
	51,51,51,51,51,51,51,51,52,52,52,52,52,52,52,52,53,53,53,53,53,53,53,53,54,54,54,
	54,54,54,54,54,55,55,55,55,55,55,55,55;
	trupe2[]=57,57,57,57,57,57,57,57,58,58,58,58,58,58,58,58,59,59,59,59,59,59,59,59,
	60,60,60,60,60,60,60,60,61,61,61,61,61,61,61,61,62,62,62,62,62,62,62,62,63,63,63,
	63,63,63,63,63,64,64,64,64,64,64,64,64;

	// crimson stg
	engranajes[]=1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,
	4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,
	0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,
	3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,
	0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,
	3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,
	0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1;
	humo1[]=6,6,7,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16;
	humo2[]=17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,27,27,28,28,29,
	29,29,29,30,30,30,30,31,31,31,31,32,32,32,32,33,33,33,33;
	lucecitas[]=37,37,37,37,37,37,37,37,38,38,38,38,38,38,38,38,39,39,39,39,39,39,
	40,40,40,40,40,40,38,38,38,38,38,38,0,0,0,0,0,0;
	perro2[]=63,63,63,63,63,63,63,63,64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,
	64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,67,67,67,
	67,67,67,67,67,63,63,63,63,63,63,63,63;

	perro1[]=47,47,47,47,48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51,
	52,52,52,52,53,53,53,53,54,54,54,54,47,47,47,47,48,48,48,48,49,49,49,49,
	50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,54,54,54,54,47,47,47,47,
	48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,
	54,54,54,54,47,47,47,47,48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51,
	52,52,52,52,53,53,53,53,54,54,54,54,47,47,47,47,48,48,48,48,49,49,49,49,
	50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,54,54,54,54,47,47,47,47,
	48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,
	54,54,54,56,56,56,57,57,57,58,58,58,59,59,59,60,60,60,61,61,61,62,62,62;
	lumin[]=1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,
	0,0,2,2,2,0,0,0,3,3,3,0,0,0,2,2,2,0,0,0,3,3,3,0,0,0,2,2,2,0,0,0,3,3,3,0,
	0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,0,0,0,0,0,0,0,4,4,4,4,4,4,4,0,0,0,0,
	0,0,0,4,4,4,4,4,4,4,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1;
	marciano[]=0,0,0,0,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,
	8,8,8,8,9,9,9,9,10,10,10,10;
	verjas[]=22,22,22,22,23,23,23,23,24,24,24,24,25,25,25,25,26,26,26,26,
	27,27,27,27,28,28,28,28,29,29,29,29;

begin
    loop
    ctype=c_scroll;
    file=fichstg;

	// terry stg
	if (tipo==1)//veleta en forma de gallo
		graph=gallofa[paso++];
		if (paso==sizeof(gallofa)/DIV)
			paso=0;
		end
	end
	if (tipo==2)//barbas que masca chicle
		graph=barbas[paso++];
		if (paso==sizeof(barbas)/DIV)
			paso=0;
		end
	end
	if (tipo==3)//jubei yamada
		graph=jubei_yamada[paso++];
		if (paso==sizeof(jubei_yamada)/DIV)
			paso=0;
		end
	end
	if (tipo==4)//barbas enano con botella
		graph=barbas_borracho[paso++];
		if (paso==sizeof(barbas_borracho)/DIV)
			paso=0;
		end
	end
	if (tipo==5)//mendas de la izquierda
		graph=mendas[paso++];
		if (paso==sizeof(mendas)/DIV)
			paso=0;
		end
	end
	if (tipo==6)//cartel
		graph=rail_crossed[paso++];
		if (paso==sizeof(rail_crossed)/DIV)
			paso=0;
		end
	end
	if (tipo==7)//bote del pibe de la derecha
		graph=bote[paso++];
		if (paso==sizeof(bote)/DIV)
			paso=0;
		end
	end
	if (tipo==8)//blue mary que anima
		if (estado==0)//si la vida es mayor que la mitad
			graph=31;//se mantiene
			if (id_luchador1.vida<=(DANGER_LIFE/2) or//sino
				id_luchador2.vida<=(DANGER_LIFE/2))
				estado=1;//pasa al estado 1
			end
		end
		if (estado==1)//anima al personal
			graph=blue_animar[paso++];
			if (paso==sizeof(blue_animar)/DIV)
				paso=0;
				estado=2;
			end
		end
		if (estado==2)
			graph=blue_animar2[paso++];
			if (paso==sizeof(blue_animar2)/DIV)
				paso=0;
			end
		end
	end

	// iori stage
	if (tipo==9) //barco con forma de pato en stage de vd
		if (scroll[0].x0=>0 and scroll[0].x0=<432)
			x=((scroll.x0*2)/3)+inc_x;
		else
			if (paso==0 or paso==6)
				x=x-1;
			end
		end
		y=father.y+12;
		if (x<-20) inc_x=450; end
		if (paso==0 or paso==6)
			inc_x+=-1;
		end
		graph=pato[paso++];
		if (paso==sizeof(pato)/DIV)
			paso=0;
		end
	end
	if (tipo==10)//cangrejo de usted
		paso++; graph=6;
		if (paso>14 and paso<24) x++; end
		if (paso>36 and paso<46) x--; end
		if (paso==16 or paso==20) graph=7; end
		if (paso==38 or paso==42) graph=8; end
		if (paso==60) paso=1; end
	end
	if (tipo==11)//parte delantera del barco de usted
		graph=9;
		y=(scroll.y0+(camara_y2*2))+240;
	end
	if (tipo==12)//fumador y prosti del escenario de usted
		graph=fumata[paso++];
		if (paso==sizeof(fumata)/DIV)
			paso=0;
		end
		x=father.x-106; y=father.y+28;
	end
	if (tipo==13)//mendas del stage de usted
		graph=masmendas[paso++];
		if (paso==sizeof(masmendas)/DIV) paso=0; end
		x=father.x+36; y=father.y+38;
	end
	if (tipo==14) //mar escenario usted
		graph=mar[paso++];
		if (paso==sizeof(mar)/DIV) paso=0; end
		x=father.x-222; y=father.y+45;
	end
	if (tipo==15) //mas mendas stage usted
		graph=otrosmendas[paso++];
		if (paso==sizeof(otrosmendas)/DIV) paso=0; end
		x=father.x+111; y=father.y+42;
	end
	if (tipo==16) //focos de luz de usted
		graph=luces[paso++];
		if (paso==sizeof(luces)/DIV) paso=0; end
		x=((scroll.x0*2)/3)+261; y=scroll.y0+46;
	end
	if (tipo==17) //focos de luz de usted
		graph=luces[paso++]+8;
		if (paso==sizeof(luces)/DIV) paso=0; end
		x=((scroll.x0*2)/3)+85; y=scroll.y0+56;
	end
	if (tipo==18) //mar en el horizonte de usted
		graph=masmar[paso++];
		if (paso==sizeof(masmar)/DIV) paso=0; end
		x=((scroll.x0*2)/3)+125; y=scroll.y0+126;
	end
	if (tipo==19) //luces del barco de usted
		graph=masluces[paso++];
		if (paso==sizeof(masluces)/DIV) paso=0; end
		x=father.x-89; y=father.y-51;
	end
	if (tipo==20)
		graph=murcielago[paso++];
		if (paso==sizeof(murcielago)/DIV)
			paso=0;
			if (flags) x+=7;
			else x-=7; end
		end
		if (flags)
			x-=3;
			if (x<-40) return; end
		else
			x+=3;
			if (x>700) return; end
		end
		if (paso==2 or paso==14 or paso==26 or paso==38)
			y+=9+rand(1,4);
		end
		if (paso==8 or paso==20 or paso==32 or paso==42)
			y-=9+rand(1,4);
		end
	end

	// kyo stage
	if (tipo==21)//tios del stage de kyo
		graph=luismi[paso++];
		if (paso==sizeof(luismi)/DIV)
			paso=0;
		end
		x=father.x-128; y=157;
	end
	if (tipo==22)//mas tios del stage de kyo
		graph=juventudv[paso++];
		if (paso==sizeof(juventudv)/DIV)
			paso=0;
		end
		x=father.x-316; y=169;
	end
	if (tipo==23)//osami y seora
		graph=osami[paso++];
		if (paso==sizeof(osami)/DIV)
			paso=0;
		end
		x=father.x+81; y=156;
	end
	if (tipo==24)//jeims
		graph=jeims[paso++];
		if (paso==sizeof(jeims)/DIV)
			paso=0;
		end
		x=father.x-5; y=131;
	end
	if (tipo==25)//robert
		graph=robert[paso++];
		if (paso==sizeof(robert)/DIV)
			paso=0;
		end
		x=father.x+246; y=188;
	end
	if (tipo==26)//luismi
		graph=luismiguel[paso++];
		if (paso==sizeof(luismiguel)/DIV)
			paso=0;
		end
		x=father.x+354; y=168;
	end
	if (tipo==27)//pantalla gigante stg kyo
		graph=pantalla1[paso];
		if (game_frame%2==0) paso++; end
		if (paso==sizeof(pantalla1)/DIV)
			paso=0;
		end
		x=father.x-234; y=father.y-20;
		if (game_frame%4<2) flags=4;
		else flags=0; end
	end
	if (tipo==28)//pantalla gigante stg kyo
		graph=pantalla2[paso];
		if (game_frame%2==0) paso++; end
		if (paso==sizeof(pantalla2)/DIV)
			paso=0;
		end
		x=father.x+39; y=father.y-14;
		if (game_frame%4<2) flags=4;
		else flags=0; end
	end
	if (tipo==29)//letras kof pantalla gigante stg kyo
		graph=kof[paso++];
		if (paso==sizeof(kof)/DIV)
			paso=0;
		end
		x=father.x+60; y=father.y-37;
	end
	if (tipo==30)//nagumos y vipers del insti del stage de kyo
		graph=nagumetes[paso++];
		if (paso==sizeof(nagumetes)/DIV)
			paso=0;
		end
		x=father.x+228; y=father.y-17;
	end
	if (tipo==31) //semaforo stg kyo
		graph=semaforo[paso++];
		if (paso==sizeof(semaforo)/DIV)
			paso=0;
		end
		x=father.x-93; y=father.y+18;
	end
	if (tipo==32)//procesos camelo para los coches que pasan al fondo del stg kyo
		if (paso==0) graph=x; end
		paso++;
		if (paso>25) paso=1; end
		if (graph==90) x=father.x+16; y=father.y+58; end
		if (graph==91) x=father.x-130; y=father.y+57; end
		if (graph==98) x=father.x-34; y=father.y+50; end
		if (graph==99) x=father.x-105; y=father.y+50; end
	end
	if (tipo==33)//coches stg kyo
		if (paso==0) graph=rand(92,95); x=father.x+16; end
		paso++; x-=3; y=father.y+58;
		if (x<father.x-135) return; end
	end
	if (tipo==34)//otro coche
		if (paso==0) size=125; inc_y=-4; y=father.y+140; graph=96; end
	   
		if (game_frame%2==0)
			paso++; x=father.x-65;
			if (paso>20) y+=inc_y/2; end
			if (paso==48 or paso==52 or
				paso==58 or paso==64)
				inc_y++;
			end
			if (paso==48 or paso==52 or
				paso==56 or paso==60 or paso==55)
				size-=5;
			end
			if (paso>65) y=father.y+71; end
			if (paso==84) graph=97; end
			if (paso==92) graph=96; end
			if (paso==100) paso=82; end
		end
		if (round==2 or round==4) return; end
	end
	if (tipo==35)//coches de fondo
		if (paso==0)
			if (flags==0)
				graph=rand(100,101); x=father.x-100;
			else
				graph=rand(102,103); x=father.x-30;
			end
		end
		paso++;
		y=father.y+50+flags;
		if (flags==0) x+=2; else x-=2; end
		if (paso==34) return; end
		
	end
	if (tipo==37)//engranajes tren crimson
		graph=engranajes[paso++];
		if (paso==sizeof(engranajes)/DIV)
			paso=0;
		end
		if (round<>3)
			if (paso==19 or paso==59 or paso==119)
				stage_obj(x-10,y+29,z-1,0,39);
			end
			if (paso==79 or paso==139)
				stage_obj(x-33,y+29,z-1,0,38);
			end
		end
	end
	if (tipo==38)//humo del tren stg crimson
		graph=humo1[paso++];
		if (paso==sizeof(humo1)/DIV)
			return;
		end
		if (paso==1) play_snd (s_stage2,200,360); end
	end
	if (tipo==39)//humo del tren stg crimson
		graph=humo2[paso++];
		if (paso==sizeof(humo2)/DIV)
			return;
		end
		if (paso==1) play_snd (s_stage2,200,256); end
	end
	if (tipo==40)//luces intermitentes stage crimson
		if (paso==0)
			if (x==312 or x==465) graph=34; end
			if (x==337 or x==429) graph=35; end
			if (x==357 or x==406) graph=36; end
		end
		if (paso==0)  x0=196; x1=155; y0=3; y1=3; end
		if (paso==5)  x0=196; x1=196; y0=103; y1=103; end
		if (paso==11)  x0=103; x1=103; y0=155; y1=155; end
		if (paso==17)  x0=3;   x1=3;   y0=196; y1=155; end
		if (paso==23)  x0=103; x1=103; y0=196; y1=196; end
		if (paso==29) x0=155; x1=155; y0=103; y1=103; end
		paso++;
		if (paso==1 or paso==7 or paso==13 or
			paso==19 or paso==25 or paso==31)
			draw_alpha (255);
			
			if (graph==34)
				from estado=0 to 2;
					map_put_pixel(fichstg,34,0,estado,x0);//amarillo mohino
					map_put_pixel(fichstg,34,1,estado,x0);//amarillo mohino
					map_put_pixel(fichstg,34,2,estado,x0);//amarillo mohino
					map_put_pixel(fichstg,34,6,estado,y0);//negro
					map_put_pixel(fichstg,34,7,estado,y0);//negro
					map_put_pixel(fichstg,34,8,estado,y0);//negro
				end
				map_put_pixel(fichstg,34,2,2,x1);//amarillo claro
				map_put_pixel(fichstg,34,8,2,y1);//amarillo claro
			end
			if (graph==35)
				from estado=0 to 1;
					map_put_pixel(fichstg,35,0,estado,x0);//amarillo mohino
					map_put_pixel(fichstg,35,3,estado,y0);//negro
					map_put_pixel(fichstg,35,4,estado,y0);//negro
				end
				map_put_pixel(fichstg,35,0,1,x1);//amarillo claro
				map_put_pixel(fichstg,35,4,1,y1);//amarillo claro
			end
			if (graph==36)
				map_put_pixel(fichstg,36,0,0,x0);//amarillo mohino
				map_put_pixel(fichstg,36,3,0,y0);//amarillo mohino
			end
		end
		if (paso==33) paso=0; end
	end
	if (tipo==41) //luces stg crimson
		if (x==291 and paso==0) paso=17; end
		graph=lucecitas[paso++];
		if (paso==sizeof(lucecitas)/DIV)
			paso=1;
		end
	end
	if (tipo==42) //mas lucecitas stg crimson
		paso++; graph=41;
		if (paso==1)
			draw_alpha (255);
			map_put_pixel(fichstg,41,0,0,26);//amarillo mohino
			map_put_pixel(fichstg,41,4,0,190);//amarillo mohino
		end
		if (paso==5)
			draw_alpha (255);
			map_put_pixel(fichstg,41,0,0,196);//amarillo mohino
		end
		if (paso==11)
			draw_alpha (255);
			map_put_pixel(fichstg,41,0,0,188);//amarillo mohino
			map_put_pixel(fichstg,41,4,0,26);//amarillo mohino
		end
		if (paso==17)
			draw_alpha (255);
			map_put_pixel(fichstg,41,0,0,4);//amarillo mohino
			map_put_pixel(fichstg,41,4,0,196);//amarillo mohino
		end
		if (paso==23)
			draw_alpha (255);
			map_put_pixel(fichstg,41,4,0,188);//amarillo mohino
		end
		if (paso==29)
			draw_alpha (255);
			map_put_pixel(fichstg,41,0,0,245);//amarillo mohino
			map_put_pixel(fichstg,41,4,0,245);//amarillo mohino
		end
		if (paso==33) paso=0; end
	end
	if (tipo==43)//basura stg crimson
		if (round==1 or round==2)
			paso++;
			if (paso==0)  graph=43; end
			if (paso==7)  graph=0;  end
			if (paso==15) graph=42; end
			if (paso==23) graph=0;  end
			if (paso==31) graph=43; end
			if (paso==43) graph=0;  end
			if (paso==47) graph=42; end
			if (paso==55) graph=0;  end
			if (paso==63) graph=42; end
			if (paso==71) graph=0;  end
			if (paso==79) graph=43; end
			if (paso==89)  paso=0;  end
			if (round==2 and not magia)
				magia=stage_obj(100,165,z-1,0,45);
				stage_obj(380,141,z-1,0,46);
			end
		end
		if (round>2)
			if (paso>=sizeof(perro2)/DIV)
				paso=0;
			end
			x=71; y=180;
			if (magia) signal(magia,s_kill); magia=0; end
			graph=perro2[paso++];
		end
	end
	if (tipo==44)//bar de las luces
		paso++;
		if (paso==0)  graph=44; end
		if (paso==3)  graph=45; end
		if (paso==11)  graph=46; end
		if (paso==17)  graph=0;  end
		if (paso==23) graph=46; end
		if (paso==29) graph=45; end
		if (paso==35) graph=44; end
		if (paso==41) graph=45; end
		if (paso==47) graph=44; end
		if (paso==51) graph=45; end
		if (paso==53) paso=-1;  end
	end
	if (tipo==45)//perro andrajoso
		if (game_frame%2==0)
			if (paso==0)
				if (flags) flags=0;
				else flags=1; end
			end
			graph=perro1[paso++];
			if (paso==sizeof(perro1)/DIV)
				paso=0;
			end
			if (paso>1 and paso<189)
				blend_frame++;
				if (blend_frame==3)
					if (flags) x+=3; else x-=3; end
					blend_frame=-1;
				end
			end
		end
	end
	if (tipo==46)//tren stg crimson
		if (paso==0) graph=68; size=35; paso++; end
		if (round==3)
			if (paso==3) play_snd (s_stage1,512,256); end
			if (paso<399) paso++; end
			if (paso==19 or paso==29 or paso==37 or paso==45 or paso==53 or
				paso==59 or paso==65 or paso==71 or paso==77 or paso==83)
				size++;
			end
			if (paso>86 and paso<269) 
				blend_frame++;
				if (blend_frame==4) blend_frame=0; size++; end
			end
			if (paso==271 or paso==277 or paso==283 or paso==291 or paso==299 or
				paso==309 or paso==321 or paso==335 or paso==355 or paso==395)
				size++;
			end
			if (paso==19 or paso==43 or paso==63 or
				paso==79 or paso==99 or paso==119 or
				paso==139 or paso==159 or paso==179 or
				paso==199 or paso==239 or paso==299 or
				paso==355)
				y--;
				if (paso==99) x++; end
			end
		end
		if (round==4) return; end
	end
	if (tipo==47)//letrero luminoso stg ath
		graph=lumin[paso++];
		if (paso==sizeof(lumin)/DIV)
			paso=0;
		end
		if (paso==35) flags=4; end
		if (paso==37) flags=0; end
		if (paso==181) flags=4; end
		if (paso==183) flags=0; end
	end
	if (tipo==48)//the killer stg ath
		if (round==1)
			paso++;
			if (paso==1)  graph=5; end
			if (paso==27) graph=6; end
			if (paso==35) paso=0;  end
		else
			x=94; y=106;
			graph=trupe2[paso++];
			if (paso==sizeof(trupe2)/DIV)
				paso=0;
			end
		end
	end
	if (tipo==49)//pibe stg ath
		if (round==1)
			graph=bengoshi[paso++];
			if (paso==sizeof(bengoshi)/DIV)
				paso=0;
			end
		else
			x=530; y=190; graph=56;
		end
	end
	if (tipo==50)//pive stg ath
		if (round==1)
			graph=mizu[paso++];
			if (paso==sizeof(mizu)/DIV)
				paso=0;
			end
		else
			x=553; y=170;
			graph=trupe1[paso++];
			if (paso==sizeof(trupe1)/DIV)
				paso=0;
			end
		end
	end
	if (tipo==51)//coches parados stg ath
		if (x==327)
			graph=masayo[paso++];
			if (paso==sizeof(masayo)/DIV)
				paso=0;
			end
		else
			graph=20;
		end
		if (round==2) return; end
	end
	if (tipo==52)//pordioseros stg ath
		paso++;
		if (paso==5) graph=29; end
		if (paso==13) graph=30; end
		if (paso==21) graph=31; end
		if (paso==31) graph=0; paso=0; end
	end
	if (tipo==53)//enanillos stg ath
		paso++;
		if (paso==5) graph=32; end
		if (paso==13) graph=33; end
		if (paso==21) graph=34; end
		if (paso==31) graph=0; paso=0; end
	end
	if (tipo==54)//letrero luminos stg ath
		paso++;
		if (paso==2) graph=35; end
		if (paso==7) graph=36; end
		if (paso==13) graph=37; end
		if (paso==19) graph=38; end
		if (paso==25) graph=35; paso=1; end
	end
	if (tipo==55)//letrero luminoso club lumis 36
		paso++;
		if (paso==2) graph=39; end
		if (paso==7) graph=40; end
		if (paso==13) graph=41; end
		if (paso==19) graph=42; end
		if (paso==25) graph=43; end
		if (paso==31) graph=44; end
		if (paso==37) graph=45; end
		if (paso==41) graph=39; paso=1; end
	end
	if (tipo==56)//faros coche
		paso++;
		if (x==479)
			if (paso==20) graph=46; end
			if (paso==40) graph=0; paso=0; end
		end
		if (x==410)
			if (paso==20) graph=47; end
			if (paso==40) graph=0; paso=0; end
		end
	end
	if (tipo==57)//coches que pasan
		paso++;
		if (round==1)
		else
			if (estado==0)
				if (paso==rand(30,120))
					estado=1; paso=0;
				end
				if (paso>120) paso=30; end
			end
			if (estado==1)
				if (paso==1)
					x=800;
					graph=rand(65,67);
					y=rand(189,194);
					if (graph==65) play_snd (s_stage2,512,256); end
					if (graph==66) play_snd (s_stage1,512,256); end
					if (graph==67) play_snd (s_stage1,512,256); end
				end
				if (paso>1)
					if (graph==65) x-=7; end
					if (graph==66) x-=9; end
					if (graph==67) x-=9; end
					if (paso%8==0) y--; end
					if (x<-120)
					   estado=0; paso=0;
					end
				end
			end
			if (round==4) return; end
		end
	end
	if (tipo==58)//niebla stage kasumi
		paso++; size=120;
		if (paso==7) graph++; paso=0; end
		if (graph>8) graph=1; end
		x=scroll.x0;
	end
	if (tipo==59 or tipo==60 or tipo==61)//arbustos stage de takuma
		if (paso==0)
			if (tipo==59) graph=9;  end
			if (tipo==60) graph=17; end
			if (tipo==61) graph=25; end
		end
		paso++;
		if (escenario==STG_TAKUMA)
			if (paso%5==0) graph++;
			end
			if (paso==32) paso=0; end
		end
	end
	
	if (tipo==62) //coches que pasan stg ath
		if (estado==0) graph=0;
			if (rand(0,75)==1 and round<>2 and round<>3)
				estado=1; inc_x=0; x0=0; paso=0;
			end
		end
		if (estado==1)
			estado=rand(2,5);
		end
		if (estado==2 or estado==3)
			if (paso==0) 
				size=120; y=175; 
				play_snd (s_stage1,512,256);
				
				x0=-(120<<16); 
				inc_x=5<<16;
			end
		  
			inc_x -= inc_x/130;
		  
			x0 += inc_x;
			x = (x0>>16);
		  
			graph=68+estado; paso++; 
			y=175-(x/10);
			size=((-124+y)*3)/2;
		  
			if (x>490) estado=0; end
		end
		if (estado==4 or estado==5)
			if (paso==0) 
				size=0; x=500; y=126; 
				
				x0=(500<<16); 
				inc_x=1000; 
			end
			
			inc_x += inc_x/80;
			x0 -= inc_x;
			x = (x0>>16);
		  
			graph=64+estado; paso++; 
			y=200-((x*100)/666);
			size=((-126+y)*3)/2;
		  
			if (paso==420) play_snd (s_stage1,512,256); end
			if (x<=-120) estado=0; end
		end
		if (round==2 or round==3) estado=0; end
	end

	if (tipo==63)//luminoso stg kyo94
		paso++;
		if (paso==4) graph++; paso=0; end
		if (graph>3) graph=0; end
	end
	if (tipo==64)//luces marcianas stg k
		graph=marciano[paso++];
		if (paso==sizeof(marciano)/DIV) paso=0; end
	end
	if (tipo==66)//luzes lapoli stag k
		if (paso==0)  graph=12; end
		paso++;
		if (paso==5)  graph++; paso=1; end
		if (graph>15) graph=12; end
	end
	if (tipo==67)//pantalla del neogeo land
		paso++;
		if (paso==3) graph=16; end
		if (paso=>6) graph=0; paso=0; end
	end
	if (tipo==68)//pantallas del neogeo land
		paso++;
		if (paso==3) graph=21; end
		if (paso=>6) graph=20; paso=0; end
	end
	if (tipo==69)//pive viciado
		paso++;
		if (paso==6)  graph=17; end
		if (paso==12) graph=18; end
		if (paso=>18) graph=19; paso=0; end
		if (paso<9)
			pegata (719,125,11,c_scroll,0,100,250,200,file);
		end
	end
	if (tipo==70)//verjas stg k
		graph=verjas[paso++];
		if (paso==sizeof(verjas)/DIV) paso=0; end
		x=750-(((scroll.x0*4)/3)+770);
	end
	if (tipo==71)//verjas stg k
		graph=verjas[paso++]+8;
		if (paso==sizeof(verjas)/DIV) paso=0; end
		x=750-(((scroll.x0*4)/3)+590);
	end
	if (tipo==72)//verjas stg k
		graph=verjas[paso++]+16;
		if (paso==sizeof(verjas)/DIV) paso=0; end
		x=750-(((scroll.x0*4)/3));
	end
	if (tipo==73)//verjas stg k
		graph=verjas[paso++]+24;
		if (paso==sizeof(verjas)/DIV) paso=0; end
		x=750-(((scroll.x0*4)/3)-270);
	end
	if (tipo==74)//verjas stg k
		graph=verjas[paso++]+32;
		if (paso==sizeof(verjas)/DIV) paso=0; end
		x=750-(((scroll.x0*4)/3)-577);
	end
	if (tipo==75)//verjas stg k
		graph=verjas[paso++]+8; flags=1;
		if (paso==sizeof(verjas)/DIV) paso=0; end
		x=750-(((scroll.x0*4)/3)-397);
	end
	if (tipo==76)//verjas stg k
		graph=verjas[paso++]+8;
		if (paso==sizeof(verjas)/DIV) paso=0; end
		x=750-(((scroll.x0*4)/3)+494);
	end
	if (tipo==77)//verjas stg k
		graph=verjas[paso++]+8;
		if (paso==sizeof(verjas)/DIV) paso=0; end
		x=750-(((scroll.x0*4)/3)-199);
	end
	
	if (tipo==78)//helices
		paso++;
		if (paso==2) graph++; end
		if (paso=>4) graph++; paso=0; end
		if (graph>7) graph=0; end
		x=560+(abs(scroll.x0-scroll.x1));
		y=104+(abs(scroll[0].y0-scroll[0].y1));
	end
	if (tipo==79) graph=8; end
	if (tipo==80) graph=9; end
	
	if (tipo==81)//metal incandescente
		paso++;
		if (paso=>2) graph++; paso=0; end
		if (graph>21) graph=10; end
		x=77+(abs(scroll.x0-scroll.x1));
		y=158+(abs(scroll[0].y0-scroll[0].y1));
	end
	if (tipo==82) graph=22; end
	frame;
	end
end

process straiker (x,y,tipo);//proceso straiker

private
	contador;
	id_sombra;
	magias;
	id_recibir;
	
	STK_KAZ = 0;
	STK_EIJ = 1;
	STK_LEN = 2;
	STK_SOG = 3;
	STK_RIM = 4;
	STK_GLL = 5;
	STK_HOT = 6;
	STK_GEN = 7;
	STK_GAL = 8;
	STK_RYU = 9;
	STK_JIN = 10;
	STK_BEN = 11;
	STK_BLN = 12;
	STK_JOE = 13;
	STK_IND = 14;
	STK_KAE = 15;
	STK_XIA = 16;
	STK_NKR = 17;
	STK_RYK = 18;
	STK_TNG = 19;
	STR_YUB = 20;
	STR_RYO = 21;
	STR_SET = 22;
	STK_HNZ = 23;
	STK_MAX = 24;
	STK_AKA = 25;
	STK_YUK = 26;
	STK_CAN = 27;
	STK_KRI = 28;
	STK_TSO = 29;
	STK_BAS = 30;
	STK_NEW = 31;
	STK_MOE = 32;

begin
	father.striks--;
	flags=father.flags;
	id_sombra=sombra();
	estado=_avanzar;
	if (tipo==STK_HOT) size=100; he_dado=1; end
	if (tipo==STK_KAZ or tipo==STK_HNZ)	id_recibir=29; end
	if (tipo==STK_EIJ or tipo==STK_MAX)	id_recibir=14; end
	if (tipo==STK_LEN or tipo==STK_BEN)	id_recibir=7;  end
	if (tipo==STK_SOG or tipo==STK_HOT)	id_recibir=20; end
	if (tipo==STK_RIM or tipo==STK_NKR)	id_recibir=9;  end
	if (tipo==STK_GLL)					id_recibir=19; end
	if (tipo==STK_GEN or tipo==STK_RYU)	id_recibir=8;  end
	if (tipo==STK_GAL or tipo==STK_XIA)	id_recibir=13; end
	if (tipo==STK_JIN or tipo==STK_BLN)	id_recibir=6;  end
	if (tipo==STK_JOE or tipo==STR_SET)	id_recibir=25; end
	if (tipo==STK_IND or tipo==STK_NEW)	id_recibir=24; end
	if (tipo==STK_KAE)					id_recibir=16; end
	if (tipo==STK_RYK or tipo==STR_YUB) id_recibir=12; end
	if (tipo==STK_TNG)					id_recibir=10; end
	if (tipo==STR_RYO)					id_recibir=11; end
	if (tipo==STK_AKA)					id_recibir=36; end
	if (tipo==STK_YUK)					id_recibir=34; end
	if (tipo==STK_CAN)					id_recibir=26; end
	if (tipo==STK_KRI)					id_recibir=15; end
	
	loop
		
		enemigo=father.enemigo;
		if (father.file==fich1) file=fichstr1;
		else file=fichstr2;end
		ctype=c_scroll;
		nuevo_estado=estado;
		switch(estado);
			case _avanzar:
				
				//kazuki
				if (tipo==STK_KAZ)
					paso++;
					if (graph==0) graph=25; end
					if (paso==3) graph++; paso=0; end
					if (graph>28) graph=25; end
					if (flags) x-=7; else x+=7; end
					if (graph==25 and paso==0)
						play_snd (s_run1,512,256);
					end
					if (graph==27 and paso==0)
						play_snd (s_run2,512,256);
					end
					if (abs(enemigo.x-x)<=70)
					    play_snd (s_kazuki1,512,256);
						nuevo_estado=_toss1;
					end
				end
				
				//eiji bunzo
				if (tipo==STK_EIJ)
					graph=11; paso++;
					if (flags) x-=8; else x+=8; end
					if (flags)
						if (x<=father.x-50)
							nuevo_estado=_toss1; vulnerable=1;
						end
					else
						if (x>=father.x+50)
							nuevo_estado=_toss1; vulnerable=1;
						end
					end
				end
				
				//lien
				if (tipo==STK_LEN)
					paso++;
					if (paso==1 or paso==5) graph=1; end
					if (paso==3 or paso==7) graph=2; end
					if (paso==9) paso=0; end
					if (abs(enemigo.x-x)<=65)
						nuevo_estado=_toss1;
					end
					if (flags) x-=10; else x+=10; end
					if (paso==5)
						if (flags)
							pegata (x+50,220,132,c_scroll,flags,100,z-4,44,fichad);
						else
							pegata (x-50,220,132,c_scroll,flags,100,z-4,44,fichad);
						end
					end
				end
				
				//sogetsu
				if (tipo==STK_SOG)
					paso++;
					if (paso==1) graph=1; end
					if (paso==3) graph=2; end
					if (paso==5) graph=3; end
					if (paso==7) play_snd (s_sjump,550,300); end
					if (paso==7 or paso==13 or paso==15 or paso==17 or
						paso==19 or paso==23 or paso==25 or paso==27 or
						paso==29 or paso==31) graph++;
					end
					if (paso==35) nuevo_estado=_retroceder; end
					if (paso==5 and abs(father.enemigo.x-x)>=160)
						paso--;
					end
					if (paso<5 and abs(father.enemigo.x-x)<=160)
						paso=7;
					end
					if (graph==3)
						if (get_real_point(1,&hit_x,&hit_y))
							pegata (hit_x+inc_x,hit_y,100,c_scroll,flags+4,100,z-1,54,file);
							pegata (hit_x+inc_x,hit_y,100,c_scroll,flags+4,100,z-1,54,file);
						end
					end
					if (graph==4)
						if (get_real_point(1,&hit_x,&hit_y))
							if (flags)
								golpe(hit_x-15,hit_y,17,17,101,3,1,10,0,father);
							else
								golpe(hit_x+15,hit_y,17,17,101,3,1,10,0,father);
							end
						end
					end
					if (graph==4 or graph==5 or graph==6 or graph==7)
						if (get_real_point(1,&hit_x,&hit_y))
							pegata (hit_x,hit_y,97+graph,
							c_scroll,flags+4,100,z-1,54,file);
							pegata (hit_x,hit_y,97+graph,
							c_scroll,flags+4,100,z-1,54,file);
						end
					end
					if (paso<19) x+=inc_x;
						if (flags) inc_x=-abs(father.enemigo.x-x)/16;
						else inc_x=+abs(father.enemigo.x-x)/16; end
					end
				end
				
				//rimururu // nakoruru
				if (tipo==STK_RIM or tipo==STK_NKR)
					if (paso==0) 
						graph=14;
						if (tipo==STK_RIM)
							if (father.enemigo.x<scroll.x0+160) flags=1; x=scroll.x0+320;
							else flags=0; x=scroll.x0; end
						end
					end
					paso++;
					if (y<220) y+=12;
						if (flags) x-=6; else x+=6; end
						if (graph<16 and paso%2==0) graph++; end
					else
						if (graph==16)
							play_snd (s_floor,400,250);
							if (tipo==STK_NKR)//invoca al halcon
								if (flags) hit_x=enemigo.x+240;
								else hit_x=enemigo.x-240; end
								substrk(hit_x,-25,2,father);
							end
						end
						y=220; graph++;
						if (graph==18) nuevo_estado=_toss1; end
					end
				end
				
				//gulle
				if (tipo==STK_GLL)
					paso++;
					if (y<220) y+=12;
						if (flags) x-=6; else x+=6; end
						graph=10;
					else
						play_snd (s_floor,400,250); y=220;
						nuevo_estado=_toss1; graph=1;
					end
				end
				
				//hotaru
				if (tipo==STK_HOT)
					if (paso==0)
						if (flags) inc_x=-abs(x-enemigo.x)/21;
						else inc_x=abs(x-enemigo.x)/21; end
					end
					
					paso++;
					if (y<220)
						graph=18; 
						x+=inc_x;
						y+=inc_y;
						if (game_frame%2==0) inc_y++; end
					else
						y=220; graph=19; power=74;
						play_snd (s_floor,400,250);
						nuevo_estado=_toss1;
					end
				end
				
				//genjuro
				if (tipo==STK_GEN)
					graph=1; inc_x=12; z=father.z-3;
					if (flags) x-=inc_x; else x+=inc_x; end
					if (flags)
						if (x=<father.enemigo.x)
							nuevo_estado=_toss1;
						end
					else
						if (x=>father.enemigo.x)
							nuevo_estado=_toss1;
						end
					end
				end
				
				//garufodo ofs chapo!
				if (tipo==STK_GAL)
					if (graph==0) inc_y=4;
						play_snd (s_galford1,500,256);
					end
					if (paso==0 and y<170 and y0==0) angle-=90000; graph=1;
						get_real_point (1,&hit_x,&hit_y);
						orlas (hit_x,hit_y,z-1,flags,23,0,father);
					end
					if (paso<33 and y0==0) y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
					end	
					if (y>175 and paso==0)
						he_dado=0; angle=0; graph=9; y=220; paso=33;
					end
					if (paso>32) angle=0; y=220; end
					if (he_dado==0 and paso==0)
						y0++; paso=0;
					end
					if (y0>7) paso++; y0=0; he_dado=1;
						inc_y=-5; angle=0; graph=2; y+=30;
					end
					if (paso>0)  paso++;  end
					if (paso==1) graph=2; end
					if (paso==3) play_snd (s_galford2,500,256); end
					if (paso==7 or paso==11 or paso==15 or paso==19 or 
						paso==23 or paso==27 or paso==35 or paso==37 or 
						paso==43)
						graph++;
					end
					if (paso==31)
						if (y<200) paso--; end
					end
					if (paso>0 and paso<33)
						if (flags) x+=4; else x-=4; end
					end
					if (paso==33)
						y=220; graph=9; angle=0;
						play_snd (s_floor,400,250);
					end
					if (paso==49) nuevo_estado=_retroceder; end
					if (y>220) y=220; end
				end
				
				//ryu hoshi
				if (tipo==STK_RYU)
					paso++;
					if (paso==1) play_snd (s_ryu1,512,256); end
					if (y<220) y+=12; graph=14;
						if (flags) x-=6; else x+=6; end
					else
						play_snd (s_floor,400,250); y=220;
						nuevo_estado=_toss1; graph=15;
					end
				end
				
				//jin chon rei
				if (tipo==STK_JIN)
					paso++; graph=1;
					if (paso==1)
						inc_x=12; play_snd (s_ath4,500,256);
					end
					if (paso>2)
						if (flags) x-=inc_x; else x+=inc_x; end
						if (inc_x>0)
							inc_x--;
						else
							nuevo_estado=_toss1; graph=2;
						end
					end
				end
				
				//benimaru
				if (tipo==STK_BEN)
					if (paso==0)
						if (flags) x=enemigo.x+160;
						else x=enemigo.x-160; end
					end
					paso++;
					get_real_point(1,&hit_x,&hit_y);
					if (paso==1) graph=1; inc_y=1;
						play_snd (s_beni1,512,256);
						if (flags) inc_x=-4; else inc_x=4; end
					end
					
					x+=inc_x; y+=inc_y;
					if (y<220 and (paso%3==0)) inc_y++; end
						
					if (paso>12 and (paso%2==0) and graph<4) 
						graph++; 
					end
					if (paso==21)
						orlas (hit_x,hit_y,z-1,flags,27,0,father);
					end
					if (y>220)
						y=220; inc_y=0; graph=5;
						play_snd (s_floor,400,250);
						nuevo_estado=_retroceder;
					end
				end
				
				//blanka
				if (tipo==STK_BLN)
					if (paso==0)
						if (flags) inc_x=-abs(x-enemigo.x)/32;
						else inc_x=abs(x-enemigo.x)/32; end
					end
					
					paso++;
					if (y<220)
						graph=13;
						x+=inc_x;
						y+=inc_y;
						if (game_frame%2==0) inc_y++; end
					else
						y=220; graph=1; 
						play_snd (s_floor,400,250); 
						nuevo_estado=_toss1;
					end
				end
				
				//joe
				if (tipo==STK_JOE)
					if (paso==0) inc_x=8; he_dado=1; end
					paso++;
					if (paso==1) play_snd (s_dash,420,210); end
					if (inc_x>0)
						
						graph=26; 
						if (flags) x-=inc_x; else x+=inc_x; end
						if (game_frame%2==0) inc_x--; end
						
						if (get_real_point(1,&hit_x,&hit_y) and he_dado==1)
							golpe(hit_x,hit_y,6,4,99,10,0,5,4,father);
						else
							inc_x--;
						end
					else
						nuevo_estado=_toss1; he_dado=1;
					end
				end
				
				if (tipo==STK_IND)//indi tarar el juego
					graph=10; paso++;
					if (flags) x-=5; else x+=5; end
					if (abs(x-enemigo.x<80 or paso==11))
						play_snd (s_indi1,512,306); nuevo_estado=_toss1;
					end
				end
				
				//kaede
				if (tipo==STK_KAE)
					if (paso==0) he_dado=1;
						if (flags) inc_x=-8; else inc_x=+8; end
					end
					paso++;
					if (paso==1) graph=10; end
					if (paso>2 and paso<11) graph++; end
					if (paso==11) graph=1;
						play_snd (s_kaede1,500,256);
					end
					if (paso>12 and paso<19 and paso%2==0) graph++; end
					if (paso==5)
						play_snd (s_run1,512,256);
					end
					if (paso==11)
						play_snd (s_run2,512,256);
						play_snd (s_dash,512,256);
					end
					x+=inc_x;
					if (paso>10)
						if (inc_x>0) inc_x-=2; end
						if (inc_x<0) inc_x+=2; end
					end
					if (paso==23)
						nuevo_estado=_toss1;
					end
				end
				
				//xianfei
				if (tipo==STK_XIA)
					paso++;
					if (paso==1) graph=8; end
					if (paso==5 or paso==7) graph++; end
					if (y<220) y+=12;
						if (flags) x-=8; else x+=8; end
					else
						play_snd (s_floor,400,250); y=220;
						nuevo_estado=_burla; graph=11;
					end
				end
				
				//ryoko
				if (tipo==STK_RYK)
					if (paso==0) inc_x=7; graph=15;
						play_snd (s_sjump,512,320);
					end
					paso++;
					if (flags) x-=inc_x; else x+=inc_x; end
					if (paso<23)
						if (abs(enemigo.x-x)<=120 and enemigo.y>200)
							if (enemigo.estado==8 or enemigo.estado==45 or
								((enemigo.estado==46 or enemigo.estado==47 or
								enemigo.estado==38) and (enemigo.vulnerable>3 or
								enemigo.vulnerable==0)))
							else
								power=enemigo.graph;
								enemigo.paso=0; 
								enemigo.estado=enemigo.nuevo_estado=320;
								camara_x=0;camara_y=0;
								if (flags==1) enemigo.flags=0; end
								if (flags==0) enemigo.flags=1; end
								enemigo.graph=power;
								voltear=true;
								nuevo_estado=_voltear;
							end
						end
					else
						if (paso==23) play_snd (s_dash,512,256); graph=27; end
						if (inc_x>0)  inc_x--; end
						if (inc_x<0)  inc_x++; end
						if (paso==31) graph=22; end
						if (paso==47) nuevo_estado=_retroceder; end
					end
				end
				
				//tung
				if (tipo==STK_TNG)
					if (paso==0)
						if (flags) inc_x=-(abs(x-((father.x+father.enemigo.x)/2))/16);
						else inc_x=(abs(x-((father.x+father.enemigo.x)/2))/16); end
					end
					paso++;
					if (y<220)
						y+=15; x+=inc_x; graph=11;
					else
						y=220; graph=12; play_snd (s_floor,400,250); nuevo_estado=_toss1;
					end
				end
				
				//jubei
				if (tipo==STR_YUB)
					if (paso==0) play_snd (s_jubei1,500,256); end
					paso++; x+=inc_x;
					if (paso==1)
						if (flags) inc_x=-7; else inc_x=7; end
					end
					if (paso==1 or paso==7 or paso==13 or paso==19 or
						paso==25 or paso==31) 
						graph=1;
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,1,14,27,3,1,10,6,father);
					end
					if (paso==3 or paso==9 or paso==15 or paso==21 or
						paso==27 or paso==33) graph=2;
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,1,14,27,3,1,10,6,father);
					end
					if (paso==5 or paso==11 or paso==17 or paso==23 or
						paso==29 or paso==35) 
						graph=3; play_snd (s_run1,512,256);
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,1,14,27,3,1,10,6,father);
					end
					if (paso>36) graph=4;
						if (inc_x>0) inc_x-=2; end
						if (inc_x<0) inc_x+=2; end
					end
					if (he_dado<>1) nuevo_estado=_voltear; end
					if (paso==47 and he_dado==1) 
						nuevo_estado=_retroceder; 
					end
					if (paso==1 or paso==5 or paso==9 or paso==13 or 
						paso==17 or paso==21 or paso==25 or paso==27)
						if (flags) pegata (x+35,y,21,c_scroll,5,100,z-1,101,file);
						else pegata (x-35,y,21,c_scroll,4,100,z-1,101,file); end
					end
					if (paso==3 or paso==7 or paso==11 or paso==15 or 
						paso==19 or paso==23 or paso==27 or paso==31)
						if (flags) pegata (x+35,y,20,c_scroll,5,100,z-1,101,file);
						else pegata (x-35,y,20,c_scroll,4,100,z-1,101,file); end
					end
				end
				
				//ryo
				if (tipo==STR_RYO)
					if (paso==0) inc_y=-10; end
					graph=1; paso++; y+=inc_y; inc_y++;
					if (flags) x-=4; else x+=4; end
					if (paso==15) nuevo_estado=_toss1; end
				end
				
				//setsuna
				if (tipo==STR_SET)
					paso++; x+=inc_x;
					if (paso==1) graph=1;
					   if (flags) inc_x=-6; else inc_x=6; end
					end
					if (paso==5 or paso==9 or paso==13 or paso==17 or
						paso==21 or paso==25 or paso==31 or paso==33 or
						paso==37 or paso==43 or paso==51 or paso==59)
						graph++;
					end
					if (paso==9)  play_snd (s_run1,512,256); end
					if (paso==21) play_snd (s_run2,512,256); end
					if (paso>28)
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
					end
					if (paso==29) 
						graph=7;
						play_snd (s_dash,425,256);
					end
					if (paso==63)
						nuevo_estado=_toss1;
					end
				end
				
				//hanzo
				if (tipo==STK_HNZ)
					paso++;
					if (paso<9)
						if (graph==0) graph=1; z=enemigo.z-2; end
						if (paso==3) graph++; paso=0; end
						if (graph>4) graph=1; end
						if (flags) x-=7;
						else x+=7; end
						if (graph==1 and paso==0)
							play_snd (s_run1,512,256);
						end
						if (graph==3 and paso==0)
							play_snd (s_run2,512,256);
						end
						if (abs(enemigo.x-x)<=50)
							if (abs(enemigo.x-x)<=120 and enemigo.y>200)
								if (enemigo.estado==8 or enemigo.estado==45 or
									((enemigo.estado==46 or enemigo.estado==47 or
									enemigo.estado==38) and (enemigo.vulnerable>3 or
									enemigo.vulnerable==0)))
								else
									vulnerable=1; 
									enemigo.paso=0;
									enemigo.estado=enemigo.nuevo_estado=320;
									camara_x=0; camara_y=0;
									enemigo.flags=1-flags;
									enemigo.graph=410; enemigo.y=220;
									nuevo_estado=_voltear;
									voltear=true; 
									play_snd (s_catch,512,256);
									play_snd (s_hanzo1,512,220);
								end
							end
							if (vulnerable==0) paso=9; end
						end
					end
					if (paso==9)  graph=5; end
					if (paso==23) nuevo_estado=_retroceder; end
				end
				
				// maxima
				if (tipo==STK_MAX)
					paso++; graph=1;
					if (paso==1)
						if (flags) inc_x=-abs(enemigo.x-x)/22;
						else inc_x=abs(enemigo.x-x)/22; end
					end
					x+=inc_x; y+=inc_y; 
					if (game_frame%2==0) inc_y++; end
					if (y=>220)
						y=220; play_snd (s_floor,512,256);
						nuevo_estado=_toss1;
					end
				end
				
				//akari
				if (tipo==STK_AKA)
					paso++; x+=inc_x; he_dado=1;
					if (paso==3) graph++; paso=0; end
					if (graph>8) graph=1; end
					if (flags) inc_x=-7;
					else inc_x=7; end
					if (graph==2 and paso==0)
						play_snd (s_run1,512,256);
					end
					if (graph==6 and paso==0)
						play_snd (s_run2,512,256);
					end
					if (abs(enemigo.x-x)<=100)
						play_snd (s_dash,412,256);
						nuevo_estado=_toss1;
					end
				end
				
				//yuki
				if (tipo==STK_YUK)
					paso++;
					if (y<220) y+=12; graph=2;
						if (flags) x-=6; else x+=6; end
					else
						y=220; 
						if (graph==2) play_snd (s_floor,400,250); end
						if (game_frame%2==0) graph++; end
						if (graph==4)
							if (abs(enemigo.x-x)<120)
								nuevo_estado=_burla;
							else
								nuevo_estado=_toss1;
							end
						end
					end
				end
				
				//candy
				if (tipo==STK_CAN)
					paso++;
					if (paso==1)
						if (flags) inc_x=-4; else inc_x=4; end
					end
					x+=inc_x;
					if (paso>49 and paso%2==0)
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
					else
						if (is_playing_snd(id.blend_frame)==0)
							id.blend_frame=play_snd (s_kura5,512,256);
						end
					end
					if (paso==1 or paso==13 or paso==25)
						graph=1;
					end
					if (paso==45 or paso==59)
						graph=9;
					end
					if (paso==3 or paso==5 or paso==7 or paso==9 or
						paso==11 or paso==15 or paso==17 or paso==19 or
						paso==21 or paso==23 or paso==29 or paso==31 or
						paso==33 or paso==35 or paso==37 or paso==39 or
						paso==41 or paso==43 or paso==47 or paso==49 or
						paso==51 or paso==53 or paso==55 or paso==57 or
						paso==61 or paso==71)
						graph++;
					end
					if (paso==27) graph=8;  end
					if (paso==65) graph=17; end
					if (paso==79) nuevo_estado=_burla; end
					if (get_real_point(1,&hit_x,&hit_y) and he_dado==1)
						if (paso<29)
							golpe(hit_x,hit_y,18,7,30,8,0,0,6,father);
						end
						if (paso>28 and paso<65)
							golpe(hit_x,hit_y,19,7,31,8,0,0,6,father);
						end
					end
				end
				
				//krisalid, tetsuo, basara
				if (tipo==STK_KRI or 
					tipo==STK_TSO or 
					tipo==STK_BAS)
					nuevo_estado=_burla;
				end
				
				//new indi
				if (tipo==STK_NEW)
					
					paso++; x+=inc_x; y+=inc_y;
					if (game_frame%3==0) inc_y++; end
					if (flags) inc_x=-1; else inc_x=1; end
					
					if (paso==1) graph=28; end
					if (paso==4) graph=29; paso=0; end
					if ((flags==0 and x+20<enemigo.x) or
						(flags==1 and enemigo.x+20<x))
						x+=inc_x;
					end
					if (abs(enemigo.x-x)<60 and abs(enemigo.y-y)<120 and y<210)
						nuevo_estado=_toss1;
					end
					if (y>220) y=220; nuevo_estado=_burla; end
				end
				
				//por que la he colado aqui...
				if (tipo==STK_MOE)
					paso++;
					if (y<220) y+=12;
						if (flags) x-=6; else x+=6; end
						graph=13;
					else
						play_snd (s_floor,400,250); y=220;
						nuevo_estado=_toss1; graph=14;
					end
				end
			end
			case _toss1:
				
				//kazuki
				if (tipo==STK_KAZ)
					paso++;
					if (paso==1) graph=1; end
					if (paso==3 or paso==5 or paso==7 or
						paso==11 or paso==13 or paso==15)
						graph++;
					end
					if (paso==25)
						if (enemigo.estado==320)
							nuevo_estado=_voltear;
							stop_voice (enemigo);
						else
							nuevo_estado=_retroceder;
							play_snd (s_kazuki4,512,256);
						end
					end
					if (paso>2)
						get_real_point(1,&hit_x,&hit_y);
					end
					if (paso==1)
						if (get_real_point(1,&hit_x,&hit_y))
							son=pegata (hit_x,hit_y,199,c_scroll,flags,100,-3,24,file);
							play_snd (s_flame1,500,256);
						end
					end
					if (paso==3) //si esta cerca,le coge
						if (abs(enemigo.x-x)<=120 and enemigo.y>180)
							if (enemigo.estado==8 or enemigo.estado==45 or
								((enemigo.estado==46 or enemigo.estado==47 or
								enemigo.estado==38) and (enemigo.vulnerable>3 or
								enemigo.vulnerable==0)))
							else
								vulnerable=1; enemigo.paso=0; 
								enemigo.estado=enemigo.nuevo_estado=320;
								play_snd (s_catch,512,256); 
								camara_x=0; camara_y=0;
								enemigo.flags=1-flags;
								enemigo.graph=410; 
								voltear=true;
							end
						end
					end
					if (enemigo.estado==320)
						enemigo.z=z+1;
						if (paso>2)
							if (enemigo.luchador==FIGHTER_IORI or 
								enemigo.luchador==FIGHTER_TERRY or
								enemigo.luchador==FIGHTER_TERRY94 or 
								enemigo.luchador==FIGHTER_CRIMSON)
								if (flags) hit_x=hit_x+15;
								else hit_x=hit_x-15; end
							end
							if (enemigo.luchador==FIGHTER_TERRY or 
								enemigo.luchador==FIGHTER_TERRY94)
								hit_y=hit_y+10;
							end
							if (enemigo.luchador<>FIGHTER_ATHENA or 
								(enemigo.luchador==FIGHTER_ATHENA and paso<7)) 
								enemigo.y=hit_y+53; enemigo.x=hit_x;
							end
						end
						if (paso==5)
							enemigo.graph=409;
						end
						if (paso==7)
							if (enemigo.luchador==FIGHTER_ATHENA) enemigo.y=185;
								if (flags) enemigo.x=x-40;
								else enemigo.x=x+40; end
							end
							if (enemigo.luchador==FIGHTER_KYO or
								enemigo.luchador==FIGHTER_KYO94 or
								enemigo.luchador==FIGHTER_TAKUMA)
								enemigo.graph=450;
								enemigo.z=z-1;
							end
							if (enemigo.luchador==FIGHTER_IORI or
								enemigo.luchador==FIGHTER_CRIMSON or
								enemigo.luchador==FIGHTER_KASUMI)
								enemigo.graph=409;
							end
							if (enemigo.luchador==FIGHTER_ATHENA)
								enemigo.graph=404;
							end
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
								enemigo.graph=410;
							end
							graph=10;
							nuevo_estado=_voltear;
						end
					end
				end
				
				//eiji
				if (tipo==STK_EIJ)
					paso++;
					if (paso==1) graph=12; end
					if (paso==3) graph=2;  end
					if (paso==5 or paso==7 or paso==9 or paso==11 or
						paso==33 or paso==37 or paso==41)
						graph++;
					end
					if (paso==45 or paso==47) graph=2; end
					if (paso==49) nuevo_estado=_retroceder;  end
					if (paso==9)
						get_real_point (1,&hit_x,&hit_y);
						orlas (hit_x,hit_y,z-5,flags,4,0,father);
						play_snd (s_eiji1,512,256);
					end
				end
				
				//leng
				if (tipo==STK_LEN)
					paso++;
					if (paso==1) graph=3;
						play_snd (s_airp,412,256);
					end
					if (paso==3) graph=5; end
					if (paso==5 or paso==7 or paso==9 or paso==11 or
						paso==13 or paso==15) graph=4;
					end
					if (paso==23 or paso==25 or paso==27 or
						paso==17 or paso==19 or paso==21)
						graph=6;
					end
					if (paso==29) nuevo_estado=_retroceder; end
					if (graph==5 and he_dado==1)
						if (get_real_point(1,&hit_x,&hit_y))
							golpe(hit_x,hit_y,10,12,9,8,0,24,6,father);
						end
					end
					if (graph==5 and he_dado==1)
						if (get_real_point(1,&hit_x,&hit_y))
							golpe(hit_x,hit_y,10,12,9,8,0,24,6,father);
						end
					end
				end
				
				//rimururu
				if (tipo==STK_RIM)
					paso++;
					if (paso<11) graph=paso/2; end
					if (paso==9)
						play_snd (s_kura2,425,256);
						if (flags) hadoken(4,x-46,y-110,father);
						else hadoken(4,x+46,y-110,father); end
					end
					if (paso==13 or paso==19 or paso==25) graph++; end
					if (paso==31) graph=1; end
					if (paso==63) nuevo_estado=_retroceder;  end
				end
				
				//gille
				if (tipo==STK_GLL)
					paso++;
					if (paso==5 or paso==17 or paso==21 or paso==23 or
						paso==25 or paso==27 or paso==31 or paso==33 or
						paso==39 or paso==41 or paso==43 or paso==45)
						graph++;
					end
					if (paso==1)  graph=2;  end
					if (paso==3)  graph=3;
						play_snd (s_terry1,256,256);
					end
					if (paso==9)  graph=1;  end
					if (paso==13) graph=5;  end
					if (paso==15) graph=6;
						play_snd (s_terry1,256,256);
					end
					if (paso==29) graph=12;
						play_snd (s_terry1,256,256);
					end
					if (paso==47) graph=10; end
					if (paso==49) graph=1;  end
					if (paso==65) nuevo_estado=_retroceder; end
					if (paso==3 or paso==17) inc_x=8;
						if (flags) hadoken(8,x-50,160,father);
						else hadoken(8,x+50,160,father); end
					end
					if (paso==31)
						if (flags) hadoken(8,x-60,160,father);
						else hadoken(8,x+60,160,father); end
					end
				end
				
				//hotaru
				if (tipo==STK_HOT) 
					paso++;
					if (paso==1)
						play_snd (s_hotaru1,512,256);
					end
					if (paso==1) graph=1; end
					if (paso==3 or paso==6 or paso==9 or paso==14 or
						paso==19 or paso==24 or paso==27 or paso==30 or
						paso==33 or paso==36 or paso==39 or paso==44)
						graph++;
					end
					if (paso==1) inc_y=-6; end
					if (paso==7)
						if (flags) orlas (x-50,150,z-1,flags,18,1,father);
						else orlas (x+50,150,z-1,flags,18,1,father); end
					end
					
					if (paso=>8 and paso<47)
						y+=inc_y;
						if (game_frame%3==0) inc_y++; end
						if (flags) x--; else x++; end
						if (paso==46 and y<220) paso--; end
						if (y=>220) paso=46; y=220; end
					end
					if (paso==42) graph=15; end
					if (paso==46) play_snd (s_floor,500,256); graph=19; end
					if (paso==54) graph=21; end
					if (paso>61 and he_dado==0)
						nuevo_estado=_burla; nuevo_paso=91; graph=42;
					end
					if (paso>75)
						nuevo_estado=_retroceder;
					end
					if (paso<70) prota_shadow(x,y,0); end
				end
				
				//kibagami
				if (tipo==STK_GEN)
					paso++; z=enemigo.z-10;
					if (paso==1) graph=2; end
					if (flags) x-=inc_x; else x+=inc_x; end
					if (inc_x>0) inc_x-=2; end
					if (inc_x<0) inc_x+=2; end
					if (paso==3) 
						graph=3;
						get_real_point(1,&hit_x,&hit_y);
						play_snd (s_sjump,500,300); play_snd (s_gen1,500,256);
						if (enemigo.y==220 and enemigo.vulnerable==0)
							if ((enemigo.estado<>47 and enemigo.estado<>46 and
								enemigo.estado<>45 and enemigo.estado<>43 and
								enemigo.estado<>40 and enemigo.estado<>41 and
								enemigo.estado<>39 and enemigo.estado<>42 and
								enemigo.estado<>38 and enemigo.estado<>1 and
								enemigo.estado<>8) or ((enemigo.estado==42 or
								enemigo.estado==41 or enemigo.estado==40 or
								enemigo.estado==39) and enemigo.paso<4))
								play_snd (s_cut,452,256); pantallazo(0);
								hit_stars(5,enemigo.x,hit_y);//crea el corte
								hit_stars(6,enemigo.x,hit_y);//crea la sangre,eso es la sangre
								
								enemigo.paso=0; enemigo.estado=_recibir_fuertes_bozo;
								enemigo.vida-=get_real_damage(12);
								enemigo.angle=0;
								enemigo.hit_combo++;
								
								pegata ((enemigo.x+x)/2,hit_y,102,c_scroll,flags,100,z+1,69,file);
								if (enemigo.vida<=0 and game_mode!=MODE_TRAINING)
									channel[30]=play_snd (s_cut,80,256); 
									ralenti(1);
									enemigo.estado=_recibir_toss;
									enemigo.intensidad=0;
									enemigo.inc_y=-8;
									if (flags) enemigo.inc_x=-3; else enemigo.inc_x=3; end
								else
									enemigo.inc_x=0;
								end
								if (enemigo.hit_combo==2)
									combos(enemigo,1);
								end
								if (enemigo.hit_combo==10)
									combos(enemigo,2);
								end
							end
							if (enemigo.estado==1 or ((enemigo.estado==39 or
								enemigo.estado==40 or enemigo.estado==41 or
								enemigo.estado==42) and enemigo.paso>3))
								enemigo.paso=7; 
								enemigo.vida-=get_real_damage(1);
								
								if (enemigo.vida>0)
									if (enemigo.estado==1 or enemigo.estado==39 or
										enemigo.estado==41) enemigo.estado=39;
									end
									if (enemigo.estado==40 or enemigo.estado==42)
										enemigo.estado=40;
									end
									play_snd (s_guard,512,256);
									enemigo.super_guard=0;
									hit_stars(13,enemigo.x,hit_y);//tipo 3 es la normal
									enemigo.inc_x=0;
								else
									channel[30]=play_snd (s_cut,500,256);
									pantallazo(0);
									enemigo.estado=_recibir_toss;
									enemigo.nuevo_paso=0; 
									enemigo.nuevo_estado=_recibir_toss;
									enemigo.inc_y=-8;
									if (flags) enemigo.inc_x=-3; else enemigo.inc_x=3; end
									
									hit_stars(5,enemigo.x,hit_y);//crea el corte
									hit_stars(6,enemigo.x,hit_y);//crea la sangre,eso es la sangre
									enemigo.hit_combo++;
									if (enemigo.hit_combo==2)
										combos(enemigo,1);
									end
									if (enemigo.hit_combo==10)
										combos(enemigo,2);
									end
								end
							end
						end
					end
					if (paso>4 and paso<16)
						get_real_point (1,&hit_x,&hit_y);
					end
					if (paso==16) graph=4; end
					if (paso==17) graph=5; end
					if (paso==19) graph=6; end
					if (paso==23) graph=7; end
					if (paso==31) nuevo_estado=_retroceder; end
				end
				
				//ryu kayusa
				if (tipo==STK_RYU)
					paso++;
					if (paso==1) graph=2; end
					if (paso==5 or paso==7 or paso==11 or paso==13 or
						paso==15) graph++;
					end
					if (paso==3) play_snd (s_ryu2,512,256); end
					if (paso==33) graph=1; end
					if (paso==49) nuevo_estado=_retroceder; end
					if (paso==3 or paso==5 or paso==7 or paso==9)
						if (flags) x-=5; else x+=5; end
					end
					if (paso==33)
						if (flags) x+=20; else x-=20; end
					end
					if (paso==11) inc_x=6;
						if (get_real_point(1,&hit_x,&hit_y))
							hadoken(9,hit_x,hit_y,father);
						end
					end
				end
				
				//jin chon rei
				if (tipo==STK_JIN)
					paso++;
					if (father.power<74 and intensidad==0)
						if (paso==1)
							play_snd (s_jin1,500,256);
							get_real_point(1,&hit_x,&hit_y);
							pegata (hit_x,hit_y,100,c_scroll,flags,100,z+1,91,file);
						end
						if (paso==1) graph=3; end
						if (paso==3) graph=4; end
						if (paso==5) graph=3; paso=1; end
						father.power++;
						if (game_frame%2==0) father.power++; end
					else
						if (intensidad==0)
							intensidad=1; paso=0;
							if (father.estado<>_charge)
								play_snd (s_charged,512,256);
							else
								father.nuevo_estado=_normal;
							end
						end
						if (paso==0) graph=4; end
						if (paso==9) graph=5; end
						father.power=74;
						if (paso==32)
							nuevo_estado=_retroceder;
						end
					end
				end
				
				//uuuoo!!!
				if (tipo==STK_BLN)
					paso++;
					if (paso==1 or paso==5 or paso==17 or paso==21 or
						paso==33 or paso==37 or paso==49) graph=2;
					end
					if (paso==3 or paso==7 or paso==19 or paso==23 or
						paso==35 or paso==39) graph=3;
					end
					if (paso==9 or paso==13 or paso==25 or paso==29 or
						paso==41 or paso==45) graph=4;
					end
					if (paso==11 or paso==15 or paso==27 or paso==31 or
						paso==43 or paso==47) graph=5;
					end
					if (paso==51) graph=1; end
					if (paso==1 or paso==17 or paso==33)
						orlas (x,y,z,flags,16,0,father);
						play_snd (s_blanka1,500,256);
					end
					if (paso==9 or paso==25)
						orlas (x,y,z,flags,-16,0,father);
						play_snd (s_blanka1,400,325);
					end
					if (paso==71)
						nuevo_estado=_retroceder;
					end
				end
				
				//joe hisashi
				if (tipo==STK_JOE)
					paso++;
					if (paso<17) graph=paso/2; end
					if (paso==11)
						play_snd (s_joe1,512,256);
						if (flags)
							pegata (x-70,y-100,100,c_scroll,flags,100,z-3,94,file);
							orlas (x-40,y-14,z-2,flags,28,1,father);
						else
							pegata (x+70,y-100,100,c_scroll,flags,100,z-3,94,file);
							orlas (x+40,y-14,z-2,flags,28,1,father);
						end
					end
					if (paso==19 or paso==25 or paso==27 or
						paso==31 or paso==33) graph++;
					end
					if (paso==21) graph=1; end
					if (paso==23) graph=10; end
					if (paso==33)
						if (flags)
							pegata (x-60,y-100,100,c_scroll,flags,100,z-3,94,file);
						else
							pegata (x+60,y-100,100,c_scroll,flags,100,z-3,94,file);
						end
						play_snd (s_joe2,512,256);
						nuevo_estado=_voltear;
						nuevo_paso=31;
					end
				end
				
				//indi iiiiia
				if (tipo==STK_IND)
					paso++;
					if (paso==1) graph=1;
						if (flags) inc_x=-12; else inc_x=12; end
					end
					if (paso==10) graph=2; end
					if (paso>18)
						if (paso<35)
							get_real_point(1,&hit_x,&hit_y);
							if (flags)
								golpe(hit_x-25,hit_y,13,2,27,0,0,0,0,father);
							else
								golpe(hit_x+25,hit_y,13,2,27,0,0,0,0,father);
							end
						end
						prota_shadow(x,y,0);
						x+=inc_x;
						if (paso>34 and inc_x<>0)
							if (flags) inc_x+=2;
							else inc_x-=2; end
							graph=3;
						end
						if (inc_x==0) graph=3; end
						if (paso>56) nuevo_estado=_retroceder; end
					end
					if (he_dado==0)
						nuevo_estado=_voltear;
					end
					if (he_dado==2)
						nuevo_estado=_recibir_toss;
					end
				end
				
				//yahiko
				if (tipo==STK_KAE)
					paso++;
					if (paso==1) graph=5; end
					if (paso==3 or paso==5) graph++; end
					if (paso==7) graph=8;
						get_real_point(1,&hit_x,&hit_y);
						orlas (hit_x,120,z-10,flags,29,1,father);
					end
					if (paso==9) graph=9;
						play_snd (s_kaede4,500,256);
					end
					if (paso==83) graph=15; end
					if (paso==91) nuevo_estado=_retroceder; end
				end
				
				//nakoruru
				if (tipo==STK_NKR)
					paso++; x+=inc_x;
					if (paso==1) graph=1; end
					if (paso==5 or paso==9 or paso==13 or paso==17 or
						paso==19 or paso==27 or paso==29 or paso==49 or
						paso==53 or paso==55 or paso==57 or paso==85 or
						paso==91)
						graph++;
					end
					if (paso==29)
						if (flags) hit_x=x+70;
						else hit_x=x-70;  end
						//substrk(hit_x,y,1,father);
						play_snd (s_nakoruru1,500,256);
						play_snd (s_sjump,500,320);
					end
					if (paso==47) graph=19; end
					if (paso==59) play_snd (s_nakoruru2,500,256);
						play_snd (s_kasumi22,360,360);
					end
					if (paso>60 and paso<75 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						if (father.estado==_special2 and father.intensidad>0)
							golpe(hit_x,hit_y,9,17,30,12,1,10,4,father);
						else
							golpe(hit_x,hit_y,18,17,30,12,1,10,4,father);
						end
						if (flags) inc_x=-14; else inc_x=14; end
						if (he_dado<>1 and paso<61) paso=61; end
					end
					if (paso==59 or paso==63 or paso==67 or
						paso==71 or paso==75) graph=24;
					end
					if (paso==61 or paso==65 or paso==69 or
						paso==73 or paso==77) graph=25;
					end
					if (paso>77)
						if (inc_x>0) inc_x-=2; end
						if (inc_x<0) inc_x+=2; end
						if (father.estado==_special2 and
							father.intensidad>0 and he_dado==0)
							if (enemigo.vida>0) enemigo.inc_x=0; end
						end
					end
					if (paso==79) graph=26;
						play_snd (s_dash,412,256);
					end
					if (paso==81) graph=27; end
					if (paso==99) graph=21; end
					if (paso==103) graph=20; end
					if (paso==113) nuevo_estado=_retroceder; end
				end
				
				//tung
				if (tipo==STK_TNG)
					paso++;
					if (paso==1) graph=1; end
					if (paso==5 or paso==7) graph++; end
					if (paso==9) graph=4; nuevo_estado=_voltear; end
				end
				
				//el ultimo de la fila
				if (tipo==STR_RYO)
					paso++;
					if (paso==1)  graph=2; end
					if (paso==11 or paso==15 or paso==19) graph++; end
					if (paso==19) 
						inc_x=4; play_snd (s_ryo1,500,280);
						get_real_point (1,&hit_x,&hit_y);
						hadoken (13,hit_x,hit_y,father);
					end
					if (paso==35) nuevo_estado=_burla; end
				end
				
				//aoshi shinomori
				if (tipo==STR_SET)
					paso++;
					if (paso==1) graph=13; end
					if (paso==7 or paso==33 or paso==19 or paso==29 or
						paso==39 or paso==45 or paso==53 or paso==61 or
						paso==71 or paso==79) graph++;
					end
					if (paso==35) graph=18;
						play_snd (s_setsuna1,450,256);
						get_real_point(1,&hit_x,&hit_y);
						pegata (hit_x,hit_y,30,c_scroll,flags,100,-5,115,file);
						pegata (x+50,220,132,c_scroll,0,100,z-4,44,fichad);
						pegata (x-50,220,132,c_scroll,1,100,z-4,44,fichad);
						intensidad=1000;
					end
					if (paso==99)  graph=13; end
					if (paso==107) graph=12; end
					if (paso==115) graph=26; end
					if (paso==123) graph=27;
						nuevo_estado=_retroceder;
					end
				end
				
				//maximun
				if (tipo==STK_MAX)
					paso++;
					if (paso==1) graph=2; end
					if (paso==7 or paso==11) graph++; end
					if (paso==15) graph=5;
						play_snd (s_airp,512,256);
						if (abs(enemigo.x-x)<=80)
							if (enemigo.y>200)
								if (enemigo.estado==8 or enemigo.estado==45 or
									((enemigo.estado==46 or enemigo.estado==47 or
									enemigo.estado==38) and (enemigo.vulnerable>3 or
									enemigo.vulnerable==0)))
								else
									play_snd (s_hit4,512,256);
									hit_stars(1,enemigo.x,175);
									enemigo.paso=0; 
									enemigo.estado=enemigo.nuevo_estado=320;
									camara_y=0; camara_x=0; 
									enemigo.flags=1-flags;
									enemigo.graph=410; 
									enemigo.y=220;
									voltear=true;
									z=enemigo.z+3; 
									nuevo_estado=_voltear;
								end
							end
						end
					end
					if (paso==39) graph=6; end
					if (paso==41) nuevo_estado=_retroceder; end
				end
				
				//akari
				if (tipo==STK_AKA)
					paso++; x+=inc_x;
					if (inc_x>0)  inc_x-=1; end
					if (inc_x<0)  inc_x+=1; end
					if (paso==1)  graph=9;  end
					if (paso==5 or paso==9 or paso==13 or paso==15 or
						paso==19 or paso==23 or paso==27 or paso==29 or
						paso==49 or paso==61 or paso==81 or paso==87 or
						paso==93) graph++;
					end
					if (paso==27)
						play_snd (s_akari1,430,256);
					end
					if (paso==27 or (paso==29 and he_dado==1))
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,10,12,98,12,1,10,4,father);
					end
					if (he_dado==0 and magia==0)
						magia=pegata (x,215,0,c_screen,0,100,-524,137,fichtxt);
						pegata ((x+enemigo.x)/2,170,99,c_scroll,0,100,z+3,138,file);
					end
					if (paso==31 and he_dado<>0) nuevo_estado=_burla; end
					if (paso==55) graph=20; end
					if (paso==101) graph=11; end
					if (paso==121) nuevo_estado=_retroceder; end
				end
				
				if (tipo==STK_YUK)//yuki
					paso++;
					if (paso==5)  graph=3; end
					if (paso==9)  graph=5; end
					if (paso==31) graph=8; end
					if (paso==35) graph=7; end
					if (paso==39) 
						graph=10; inc_x=7; play_snd (s_yuki1,452,256);
						if (flags) hit_x=x-36; else hit_x=x+36; end
						hadoken(7,hit_x,160,father); 
						play_snd (s_kura3,412,256);
					end
					if (paso==13 or paso==15 or paso==19 or paso==23 or
						paso==41 or paso==45 or paso==49 or paso==59 or
						paso==67 or paso==73 or paso==79 or paso==87)
						graph++;
					end
					if (paso==99) nuevo_estado=_retroceder; end
				end
				if (tipo==STK_KRI)//krisalid
					paso++;
					if (paso==3 or paso==7 or paso==13 or paso==19) graph++; end
					if (paso==23) graph=14; end
					if (paso==29) graph=1;  end
					if (paso==33 or paso==37 or paso==39 or paso==41 or
						paso==45 or paso==49 or paso==55 or paso==59 or
						paso==63 or paso==69 or paso==75 or paso==79 or
						paso==83) graph++;
					end
					if (paso==33 or paso==37)
						if (flags) x-=10; else x+=10; end
					end
					if (paso==69 or paso==75)
						if (flags) x+=10; else x-=10; end
					end
					if (paso==33) play_snd (s_krisad1,400,256); end
					if (paso==41)
						if (flags) hit_x=x-20; else hit_x=x+20; end
						orlas (hit_x,hit_y,z-1,flags,38,1,father);
					end
					if (paso==90) nuevo_estado=_retroceder; end
				end
			 
				if (tipo==STK_NEW)//the last indi 2
				
					paso++; graph=30; 
					x+=inc_x; y+=inc_y; 
					if (game_frame%3==0) inc_y++; end
					
					get_real_point(1,&hit_x,&hit_y);
					if (enemigo.y==220)
					   golpe (hit_x,hit_y,22,7,39,2,0,5,6,father);
					else
					   golpe (hit_x,hit_y,19,7,39,2,0,5,6,father);
					end
					if (y>220) y=220; nuevo_estado=_burla; end
				end
			 
				if (tipo==STK_MOE) //moe(taro)
					paso++;
					if (paso==3) graph=14; end
					if (paso==13) graph=15; end
					if (paso==19) graph=2; end
					if (paso>28 and paso<41) 
						y+=inc_y; 
						if (game_frame%3==0) inc_y++; end
						if (paso==29) graph=3; play_snd (s_sjump,512,256); end
						if (flags)
							inc_x=-8;
							if (enemigo.x<x and abs(enemigo.x-x)<76 and enemigo.y==220)
								x+=inc_x/3;
							else x+=inc_x; end
						else
							inc_x=8;
							if (enemigo.x>x and abs(enemigo.x-x)<76 and enemigo.y==220)
								x+=inc_x/3;
							else x+=inc_x; end
						end
						if (paso>38)
							if (y<210 and he_dado==1)
								get_real_point(1,&hit_x,&hit_y);
								golpe(hit_x,hit_y,4,14,19,6,0,6,6,father);
							end
						end
						if (paso==33) graph=4; end
						if (paso==37) graph=5; y=170; end
						if (paso==39 and y<220) paso--; end
						if (he_dado==0 and paso<39)
							if (enemigo.y==220 and enemigo.estado==34)
								nuevo_estado=_burla;
							else
								paso=39;
							end
						end
						if (he_dado==-1 and paso<39) paso=39; end
					end
					if (paso>39 and paso<79) 
						graph=15; y=220; x+=inc_x;
						if (inc_x>0) inc_x--; end
						if (inc_x<0) inc_x++; end
						if (game_frame%2==0)
							if (inc_x>0) inc_x--; end
							if (inc_x<0) inc_x++; end						
						end
						if (paso==41) play_snd (s_dash,412,256);
							pegata (x,220,132,c_scroll,flags,100,z-4,44,fichad);
						end
						if (inc_x==0) paso=79; graph=14; end
					end
					if (paso==85) graph=1; end
					if (paso==99) nuevo_estado=_retroceder; end
				end
			end
			case _burla:
				
				//hotaru
				if (tipo==STK_HOT)
					paso++;
					if (paso==1)  graph=21; end
					if (paso==9 or paso==13 or paso==15 or 
						paso==17 or paso==21)
						graph++;
					end
					if (paso==23) graph=27;
						play_snd (s_hotaru2,512,256);
					end
					if (paso==25 or paso==27 or paso==29 or paso==31 or
						paso==33 or paso==37 or paso==41 or paso==47 or
						paso==51 or paso==55 or paso==59 or paso==63 or
						paso==65 or paso==69) graph++;
					end
					if (paso==73) graph=37; end
					if (paso==75 or paso==79 or paso==83 or paso==87 or
						paso==91 or paso==95 or paso==99 or paso==103 or
						paso==107) graph++;
					end
					if (paso==111) graph=42; end
					if (paso==119) graph=22; end
					if (paso==127) graph=21; end
					if (paso==143) nuevo_estado=_retroceder; end
					if (paso==1 or paso==3)
						if (flags) x-=2; else x+=2; end
					end
					if (paso==119 or paso==127)
						if (flags) x+=2; else x-=2; end
					end
				end
				
				//xianfei
				if (tipo==STK_XIA)
					paso++;
					if (paso==1) graph=12; end
					if (paso==7) graph=2;  end
					if (paso==9) graph=3;  end
					if (paso==11) graph=4;
						play_snd (s_xianfei1,512,256);
					end
					if (paso==15) graph=5;
						if (game_mode!=MODE_TRAINING) enemigo.power=0; end
					end
					if (paso==59) graph=6;  end
					if (paso==65) graph=7;  end
					if (paso==69) graph=1;  end
					if (paso==83) nuevo_estado=_retroceder; end
				end
				
				//tung
				if (tipo==STK_TNG)
					paso++;
					if (paso==1) graph=4;  end
					if (paso==3) graph=3;  end
					if (paso==5) graph=2;  end
					if (paso==7) graph=1;  end
					if (paso==15) graph=13; end
					if (paso==19) nuevo_estado=_retroceder; end
				end
				
				//ryo
				if (tipo==STR_RYO)
					if (paso==0) inc_y=-4; graph=6; end
					paso++;
					if (paso==5) graph=7; end
					if (paso==11) graph=8; end
					if (paso==17) graph=9; end
					if (paso==23) graph=10; end
					if (paso==29 and y<215) paso--; end
					if (paso<31) 
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
						if (flags) x+=2; else x-=2; end
					end
					if (paso==29) 
						y=220; graph=12; 
						play_snd (s_floor,350,256); 
					end
					if (paso==47)
						if (x>=scroll[0].x0+370 or x<=scroll[0].x0-50)
							father.strike=0; signal(id_sombra,s_kill); return;
						else
							nuevo_estado=_retroceder;
						end
					end
				end
				
				//hanzo bunzo
				if (tipo==STK_HNZ)
					paso++;
					if (paso==17) z=enemigo.z-3;
						if (flags) x=enemigo.x+60;
						else x=enemigo.x-60; end
					end
					if (paso==19) graph=30; end
					if (paso==21) graph=31; end
					if (paso==23) graph=32;
						get_real_point(1,&hit_x,&hit_y);
						pegata (hit_x,hit_y,50,c_scroll,flags+4,100,-8,54,file);
						pegata (hit_x,hit_y,50,c_scroll,flags+4,100,-8,54,file);
					end
					if (paso==25)
						get_real_point(1,&hit_x,&hit_y);
						pegata (hit_x,hit_y,51,c_scroll,flags+4,100,-8,54,file);
						pegata (hit_x,hit_y,51,c_scroll,flags+4,100,-8,54,file);
					end
					if (paso==27) z=enemigo.z+2; graph=33;
						play_snd (s_airp,412,256); play_snd (s_hanzo4,512,220);
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,18,17,52,12,1,10,6,father);
					end
					if (paso>26 and paso<37)
						get_real_point(1,&hit_x,&hit_y);
						pegata (hit_x,hit_y,52,c_scroll,flags+4,100,-8,54,file);
						pegata (hit_x,hit_y,52,c_scroll,flags+4,100,-8,54,file);
					end
					if (paso==59 or paso==67 or paso==55) graph++; end
					if (paso==89) nuevo_estado=_retroceder; end
				end
				
				//akari
				if (tipo==STK_AKA)
					paso++;
					if (paso==1) graph=25; end
					if (paso==5) graph=26;
						play_snd (s_akari2,430,256);
					end
					if (paso==7) graph=27; end
					if (paso==9) graph=28;
						play_snd (s_fall,300,256); hit_stars(9,x,220);
						if (flags) hit_x=x+35; else hit_x=x-35; end
						pegata (hit_x,220,132,c_scroll,flags,100,z-4,44,fichad);
					end
					if (paso==11 or paso==15 or paso==17 or paso==41 or
						paso==45 or paso==49 or paso==55) graph++;
					end
					if (paso==61) graph=11; end
					if (paso==71) nuevo_estado=_retroceder; end
				end
				
				//yuki
				if (tipo==STK_YUK)
					paso++;
					if (paso==1) graph=19; end
					if (paso==5 or paso==11 or paso==15 or paso==17 or
						paso==19 or paso==21 or paso==23 or paso==27 or
						paso==35 or paso==43 or paso==51 or paso==59 or
						paso==67 or paso==75) graph++;
					end
					if (paso==21)
						if (flags) hit_x=x-18; else hit_x=x+18; end
						orlas (hit_x,220,z-3,flags,-36,1,father);
						play_snd (s_yuki2,452,256);
					end
					if (paso==89) nuevo_estado=_retroceder; end
				end
				
				//candy
				if (tipo==STK_CAN)
					paso++;
					if (paso==1) graph=20; end
					if (paso==7 or paso==17 or paso==39 or paso==43) graph++; end
					if (paso==51) nuevo_estado=_retroceder; end
				end
				
				//krisalid
				if (tipo==STK_KRI)
					paso++;
					if (paso==1) graph=16; play_snd (s_sjump,512,256); end
					if (flags) x-=12; else x+=12; end
					y+=6;
					if (y>200 and graph==16) graph=17; end
					if (y=>220) nuevo_estado=_toss1;
						play_snd (s_floor,512,256); graph=18;
						if (he_dado==0) nuevo_paso=2; end
					end
					if (graph==16 and he_dado==1)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,10,15,24,10,0,10,4,father);
					end
					if (he_dado==0 and enemigo.paso==5)
						enemigo.inc_y=-12;
					end
				end
				
				//tetsuo (y no es broma)
				if (tipo==STK_TSO)
					if (paso==0) inc_y=10;
						if (flags) inc_x=-9; else inc_x=9; end
						play_snd (s_sjump,512,256);
					end
					paso++; power=100;
					if (paso==53) 
						play_snd (s_boom,512,256); tembleque(1,1);
						if (flags) hit_x=-1; else hit_x=1; end
						orlas (x+(50*hit_x),185,father.z-6,flags,37,0,father);
					end
					if (paso==57)
						orlas (x+(100*hit_x),186,father.z-4,flags,37,0,father);
					end
					if (paso==61)
						orlas (x+(130*hit_x),183,father.z-2,flags,37,0,father);
					end
					if (paso==65)
						orlas (x+(150*hit_x),179,father.z-1,flags,37,0,father);
					end
					if (paso==69)
						orlas (x+(145*hit_x),171,father.z+1,flags,37,0,father);
					end
					if (paso==71)
						orlas (x+(125*hit_x),167,father.z+2,flags,37,0,father);
					end
					if (paso==73)
						orlas (x+(95*hit_x),165,father.z+4,flags,37,0,father);
					end
					if (paso==75)
						orlas (x+(45*hit_x),164,father.z+6,flags,37,0,father);
					end
					if (paso<49) graph++; x+=inc_x; y+=inc_y;
						if (graph>4)  graph=1; end
						if (paso%3==0)
							if (inc_y>1)  inc_y--; end
							if (inc_x>1)  inc_x--; end
							if (inc_x<-1) inc_x++; end
						end	
					end
					if (paso==49) graph=5; end
					if (paso==125) graph=13; end
					if (paso==53 or paso==57 or paso==65 or paso==71 or
						paso==73 or paso==77 or paso==131 or paso==139 or
						paso==145 or paso==151 or paso==157 or paso==161)
						graph++;
					end
					if (paso==79 or paso==83 or paso==87 or paso==95 or
						paso==103 or paso==111 or paso==119) graph=11;
					end
					if (paso==81 or paso==85 or paso==91 or paso==99 or
						paso==107 or paso==115) graph=12;
					end
					if (paso>162) 
						y-=16; alpha-=25;
						if (flags) x-=12; else x+=12; end
					end
					if (paso==163) play_snd (s_sjump,512,256); end
					if (alpha=<0)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
					if (paso<139)
						golpe(x,y-24,10,49,graph,5,1,5,0,father);
					end
				end
				
				//kurt kobain, marilin manson
				if (tipo==STK_BAS)
					paso++;
					if (paso==1) inc_y=-9;
						if (flags) x=enemigo.x+24; else x=enemigo.x-24; end
						pegata (x,y,1,c_scroll,0,0,z+3,144,file);
					end
					if (paso==29 or paso==95) play_snd (s_sjump,512,256); end
					if (paso==29) graph=2; end
					if (paso==33 or paso==37) graph++; end
					if (paso>37 and paso<49) y+=inc_y; 
						if(game_frame%2==0) inc_y++; end
						if (inc_y==-3) graph=5; end
						if (inc_y==-1) graph=6; end
						if (inc_y==1)  graph=7; end
						if (inc_y==2)  graph=8; end
						if (inc_y==3)  graph=9; end
						if (paso==48 and y<220) paso--; end
						if (y>220) paso=49; graph=9; end
					end
					if (paso==35 or (graph==4 and game_frame%2==0))
						get_real_point(1,&hit_x,&hit_y);
						if (he_dado==0) hit_x=enemigo.x; end
						golpe(hit_x,hit_y,19,17,16,3,1,3,5,father);
					end
					if (paso==51) play_snd (s_floor,512,256); y=220; end
					if (paso==51 or paso==55 or paso==67 or
						paso==79 or paso==83) graph++;
					end
					if (paso>94) y-=8; graph=15;
						if (flags) x+=10; else x-=10; end
						/* BENNU /*
						alpha-=25;
						/* BENNU_WII /*
						alpha-=25;
						/* BENNU_WIZ /*
						alpha-=25;
						/* BENNU_GCW0 /**/
						alpha-=25;
						/* GEMIX /*
						if (paso==99) flags+=4; end
						/**/
					end
					if (paso==104)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
				end
				
				//atarashii indi
				if (tipo==STK_NEW)
					paso++; z=enemigo.z-9;
					if (paso==1) graph=31; play_snd (s_floor,512,256); end
					if (paso==5 or paso==9 or paso==13) graph++; end
					if (paso==19) graph=31; end
					if (paso==21 and he_dado<>0) paso=145; end
					if (paso==23)
						if (father.x>x) flags=1; else flags=0; end
						graph=35; play_snd (s_indi5,480,275);
					end
					if (paso==29 or paso==49 or paso==69 or
						paso==89 or paso==109) graph=36;
					end
					if (paso==39 or paso==59 or paso==79 or
						paso==99 or paso==119) graph=35;
					end
					if (paso==149) nuevo_estado=_retroceder; end
				end
				
				//esprubi
				if (tipo==STK_MOE)
					paso++;
					if (paso==7 or paso==23 or paso==39) graph=6; end
					if (paso==15 or paso==47)  graph=7; end
					if (paso==31) graph=5; end
					if (paso==15 or paso==31)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,4,14,19,6,0,6,0,father);
					end
					if (paso==47)
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,10,14,19,6,0,6,0,father);
					end
					if (paso<53)
						if (flags) x-=2;
						else x+=2; end
					end
					if (paso==53) y=220; graph=2; end
					if (paso==59) graph=8; inc_y=-7; end
					
					if (paso>60 and paso<81) 
						y+=inc_y;
						if (game_frame%2==0) inc_y++; end
						if (abs(father.x-x)<220 and x<666 and x>86) x+=inc_x; end
						if (paso==63) graph=9;  end
						if (paso==67) graph=10;
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,10,14,19,6,0,6,10,father);
						end
						if (paso==71) graph=11; end
						if (paso==75) graph=12; end
						if (paso==79) graph=13; end
						if (paso==79 and y<220) paso--; end
						if (paso>68)
							if (inc_x>0) inc_x--; end
							if (inc_x<0) inc_x++; end
						end
					end
					if (paso==81) play_snd (s_floor,512,256); y=220; graph=14; end
					if (paso==86) graph=15; end
					if (paso==89) graph=14; end
					if (paso==95) graph=1;  end
					if (paso==121) nuevo_estado=_retroceder; end
				end
			end
			case _retroceder:
				
				// kazuki
				if (tipo==STK_KAZ) paso++;
					if (paso==1) graph=14; end
					if (paso==5 or paso==9 or paso==13 or paso==17 or
						paso==21 or paso==41 or paso==43 or paso==45 or
						paso==47) graph++;
					end
					if (paso==39)
						play_snd (s_sjump,400,256); graph=20;
					end
					if (paso==49)
						father.strike=0; 
						signal(id_sombra,s_kill); 
						return;
					end
					if (paso==1 or paso==9)
						if (flags) x+=32; else x-=32; end
					end
					if (paso==41)
						if (flags) x-=30; else x+=30; end
					end
					if (graph=>20) y=150;
					else y=220; end
				end
				
				//eiji
				if (tipo==STK_EIJ)
					graph=13; paso++;
					if (flags) x+=12; else x-=12; end
					if (x>=scroll[0].x0+370 or x<=scroll[0].x0-50)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
				end
				
				//liu kang
				if (tipo==STK_LEN)
					if (paso==0)
						if (father.enemigo.x>x) flags=1; end
						if (father.enemigo.x<x) flags=0; end
					end
					paso++;
					if (paso==1 or paso==5) graph=1; end
					if (paso==3 or paso==7) graph=2; end
					if (paso==9) paso=0; end
					if (flags) x-=10; else x+=10; end
					if (x>=scroll[0].x0+350 or x<=scroll[0].x0-30)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
					if (paso==5 or paso==11)//levanta mas polvo
						if (flags)
							pegata (x+50,220,132,c_scroll,flags,100,z-4,44,fichad);
						else
							pegata (x-50,220,132,c_scroll,flags,100,z-4,44,fichad);
						end
					end
				end
				
				//sogetsu
				if (tipo==STK_SOG)
					paso++;
					if (paso==1) graph=14; play_snd (s_sjump,512,200); end
					if (paso>2 and graph>0)
						if (paso==3 or paso==7 or paso==11 or paso==15 or
							paso==19 or paso==23) graph++;
						end
					end
					if (graph>19) graph=0;
						father.strike=0; signal(id_sombra,s_kill); return;
					end
				end
				
				//rimururu/nakoruru
				if (tipo==STK_RIM or tipo==STK_NKR)
					if (paso==0) graph=10; play_snd (s_sjump,400,256); end
					paso++; y-=16;
					if (flags) x+=8; else x-=8; end
					if (graph<13 and paso%2==0) graph++; end
					if (x>=scroll[0].x0+370 or x<=scroll[0].x0-50 and y<80)
						if ((he_dado==0 and paso>30) or he_dado<>0)
							father.strike=0; signal(id_sombra,s_kill); return;
						end
					end
				end
				
				//jin chon rei
				if (tipo==STK_JIN)
					paso++;
					
					if (paso==1) graph=2;
						play_snd (s_ath4,500,256);
					end
					if (paso>1) inc_x++; graph=1;
						if (flags) x+=inc_x; else x-=inc_x; end
					end
					if (x<=scroll[0].x0+370 and x>=scroll[0].x0-50)
						if (paso>1) prota_shadow(x,y,0); end
					end
					if (x>=scroll[0].x0+440 or x<=scroll[0].x0-120)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
				end
				
				//el marica
				if (tipo==STK_BEN)
					paso++;
					if (paso==1) graph=5; end
					if (paso==21) graph=8;
						play_snd (s_sjump,400,256);
					end
					if (paso>20) y-=12;
						if (flags) x+=12; else x-=12; end
					end
					if (x>=scroll[0].x0+370 or x<=scroll[0].x0-50 and y<80)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
				end
				
				//indi/new indi
				if (tipo==STK_IND or tipo==STK_NEW)
					if (paso==0) graph=26; end
					if (flags) x+=10; else x-=10; end
					paso++;
					if (paso==3 or paso==11 or paso==19 or paso==27)
						pegata (x,220,132,c_scroll,flags,90,z-4,44,fichad);
					end
					if (x>=scroll[0].x0+370 or x<=scroll[0].x0-50)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
					prota_shadow(x,y,0);
				end
				
				//ryoko
				if (tipo==STK_RYK)
					if (paso==0) graph=23; end
					if (paso==15) graph=26; play_snd (s_sjump,400,256); end
					paso++;
					if (paso>15)
						if (flags) x+=16; else x-=16; end y-=12;
					end
					if (x>=scroll[0].x0+370 or x<=scroll[0].x0-50 and y<80)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
				end
				
				//krisalid
				if (tipo==STK_KRI) 
					graph=23; 
					if (flags) x+=12; else x-=12; end
					if (x>=scroll[0].x0+440 or x<=scroll[0].x0-120)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
					if (paso==0) play_snd (s_jump,412,256); paso++; end
				end
				
				if (tipo==STK_GLL or tipo==STK_HOT or 
					tipo==STK_GEN or tipo==STK_GAL or
					tipo==STK_RYU or tipo==STK_BLN or 
					tipo==STK_JOE or tipo==STK_KAE or
					tipo==STK_XIA or tipo==STK_TNG or 
					tipo==STR_YUB or tipo==STR_RYO or
					tipo==STR_SET or tipo==STK_HNZ or 
					tipo==STK_MAX or tipo==STK_AKA or
					tipo==STK_YUK or tipo==STK_CAN or 
					tipo==STK_MOE)//irse general
					if (paso==0) 
						play_snd (s_sjump,400,256);
						if (tipo==STK_GLL)  graph=10; end //gulle
						if (tipo==STK_HOT)  graph=13; end //hotaru
						if (tipo==STK_GEN)  graph=9;  end //gejuro
						if (tipo==STK_GAL)  graph=2;  end //galford
						if (tipo==STK_RYU)  graph=9;  end //ryu
						if (tipo==STK_BLN) graph=13; end //blanka
						if (tipo==STK_JOE) graph=24; end //panza
						if (tipo==STK_KAE) graph=17; end //yahic
						if (tipo==STK_XIA) graph=9;  end //xiangfei
						if (tipo==STK_TNG) graph=11; end //tung
						if (tipo==STR_YUB) graph=9;  end //jubei
						if (tipo==STR_RYO) graph=10; end //ryo
						if (tipo==STR_SET) graph=27; end //aoshi
						if (tipo==STK_HNZ) graph=12; end //hanzo
						if (tipo==STK_MAX) graph=1;  end //canadiense rudo
						if (tipo==STK_AKA) graph=43; end //akari
						if (tipo==STK_YUK) graph=1;  end //yuki
						if (tipo==STK_CAN) graph=25; end //yuki
						if (tipo==STK_MOE) graph=18; end //moe
					end
					paso++; y-=12;
					if (tipo==STK_GLL or tipo==STK_HOT or tipo==STK_CAN)
						if (flags) x-=16; else x+=16; end
					else
						if (flags) x+=16; else x-=16; end
					end
					if (x>=scroll[0].x0+370 or x<=scroll[0].x0-50 and y<80)
						father.strike=0; signal(id_sombra,s_kill); return;
					end
				end
			end
			case _voltear:
				
				// kazuki
				if (tipo==STK_KAZ)
					paso++; get_real_point(1,&hit_x,&hit_y);
					if (paso<49)
						if (enemigo.luchador==FIGHTER_IORI or 
							enemigo.luchador==FIGHTER_TERRY or
							enemigo.luchador==FIGHTER_TERRY94 or 
							enemigo.luchador==FIGHTER_CRIMSON or
							enemigo.luchador==FIGHTER_KULA)
							if (flags) hit_x=hit_x+15;
							else hit_x=hit_x-15; end
						end
						if (enemigo.luchador==FIGHTER_TERRY or 
							enemigo.luchador==FIGHTER_TERRY94)
							hit_y=hit_y+10;
						end
						if (enemigo.luchador==FIGHTER_ATHENA) 
							enemigo.y=185;
							if (flags) enemigo.x=x-40;
							else enemigo.x=x+40; end
						else
							enemigo.x=hit_x; enemigo.y=hit_y+53;
						end
					end
					if (paso==1)
						pegata (hit_x-10,hit_y,206,c_scroll,flags,100,-90,31,file);
					end
					if (paso==19 or paso==27)
						pegata (hit_x+rand(-32,32),hit_y+rand(-25,25),
						206,c_scroll,flags,100,-90,31,file);
					end
					if (paso==1 or paso==25 or paso==37)  graph=9;  end
					if (paso==17 or paso==31 or paso==39) graph=10; end
					if (paso==41)
						pegata (hit_x,hit_y,215,c_scroll,0,100,-60,31,file);
						graph=11;
					end
					if (paso==43)
						play_snd (s_boom,512,256); graph=12;
					end
					if (paso==45)
						draw_z=-1200; draw(3,26,15,0,0,0,320,240);
					end
					if (paso==47)
						graph=13; delete_draw(all_drawing);
						play_snd (s_kazuki2,512,256); he_dado=1;
					end
					if (paso==49)
						
						enemigo.vida-=get_real_damage(13);
						if (enemigo.vida<=0) enemigo.vida=0; ralenti(1); end
						
						enemigo.paso=14;
						if (enemigo.flags) enemigo.inc_x=4;
						else enemigo.inc_x=-4; end
						
						if (enemigo.luchador==FIGHTER_ATHENA) enemigo.y=170; end
						enemigo.inc_y=-10;
						enemigo.estado=_recibir_toss;
						enemigo.intensidad=0;
						enemigo.vulnerable=1;
						enemigo.hit_combo++;
						enemigo.blend_fx=2;
						enemigo.blend_frame=0;
						enemigo.atravesar=0;
						father.atravesar=0;
						if (enemigo==id_luchador1)
							if (enemigo.hit_combo==2)
								combos(id_luchador1,1);
							end
							if (enemigo.hit_combo==10)
								combos(id_luchador1,2);
							end
						end
						if (enemigo==id_luchador2)
							if (enemigo.hit_combo==2)
								combos(id_luchador2,1);
							end
							if (enemigo.hit_combo==10)
								combos(id_luchador2,2);
							end
						end
						inc_x=8;
					end
					if (paso>50)
						if (inc_x>0 and paso%2==0) inc_x--; end
						if (flags) x+=inc_x; else x-=inc_x; end
					end
					if (paso==51) graph=6; end
					if (paso==53 or paso==69) graph++; end
					if (paso==75)
						nuevo_estado=_retroceder;
					end
				end
				
				//torneo guarro
				if (tipo==STK_JOE)
					if (paso==31) graph=14; end
					if (paso==33) graph=15; inc_y=-8; y+=inc_y; end
					if (paso==45) graph=16; end
					if (paso==51) graph=17; end
					if (paso>34 and paso<61) 
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
						if (flags) x-=3;
						else x+=3; end
					end
					if (paso==57 and y<220) paso--; end
					if (paso>40 and paso<59 and y=>220) paso=59; end
					if (paso==59) y=220; graph=19;
						play_snd (s_floor,400,250);
					end
					if (paso==79) graph=18; end
					if (paso==81) graph=20; end
					if (paso==87 or paso==91 or paso==95) graph++; end
					if (paso==91 or paso==95)
						if (flags) x+=16; else x-=16; end
					end
					if (he_dado==0)
						if (enemigo.paso<19)
							enemigo.vulnerable=1;
						else
							he_dado=1;
						end
					end
					if (paso==109) nuevo_estado=_retroceder; end
					paso++;
				end
			 
				//indi
				if (tipo==STK_IND)
					paso++;
					if (father.he_dado==1) bloker=1; end
					if (paso==1) graph=3;
						play_snd (s_indi2,512,256);
					end
					if (paso==3) graph=4;
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,9,7,27,3,1,3,5,father);
					end
					if (paso==9) graph=5; end
					if (paso==11) graph=6;
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,1,4,27,3,1,3,5,father);
					end
					if (paso==17) graph=9; end
					if (paso==19) graph=7;
						get_real_point(1,&hit_x,&hit_y);
						if (flags)
							golpe(hit_x-25,hit_y,9,7,27,3,1,3,5,father);
						else
							golpe(hit_x+25,hit_y,9,7,27,3,1,3,5,father);
						end
					end
					if (paso==25) graph=9; end
					if (paso==27) graph=8;
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,1,7,27,3,1,3,5,father);
					end
					if (paso==33) graph=10; end
					if (paso==35) graph=11;
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,1,4,27,3,1,3,5,father);
					end
					if (paso==41) graph=12; end
					if (paso==43) graph=13;
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,1,4,27,3,1,3,5,father);
					end
					if (paso==49) graph=14; end
					if (paso==51) graph=15;
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,1,2,27,3,1,3,5,father);
					end
					if (paso==57) graph=16; end
					if (paso==59) graph=17;
						get_real_point(1,&hit_x,&hit_y);
						if (flags)
							golpe(hit_x-25,hit_y,1,2,27,3,1,3,5,father);
						else
							golpe(hit_x+25,hit_y,1,2,27,3,1,3,5,father);
						end
					end
					if (paso==65) graph=16; end
					if (paso==67) graph=17;
						get_real_point(1,&hit_x,&hit_y);
						if (flags)
							golpe(hit_x-25,hit_y,1,2,27,3,1,3,5,father);
						else
							golpe(hit_x+25,hit_y,1,2,27,3,1,3,5,father);
						end
					end
					if (paso==73) 
						graph=18; inc_y=-8;
						play_snd (s_indi3,512,256);
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,hit_y,10,35,27,3,1,3,5,father);
					end
					if (paso==79) graph=19;
						get_real_point(1,&hit_x,&hit_y);
						orlas (hit_x,hit_y,z+5,flags,-3,1,father);
					end
					if (paso>78 and paso<115) 
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
					end
					if (paso==85) graph=20; end
					if (paso==92) graph=21; end
					if (paso==97 or paso==101 or paso==105 or paso==109) graph=22; end
					if (paso==99 or paso==103 or paso==107 or paso==111) graph=23; end
					if (paso==113) graph=18; y=220; end
					if (paso==125) nuevo_estado=_retroceder; end
					if (paso<75 and father.estado<>_special2 and father.estado>-1)
						if (flags)
							if (x>61) x-=3; end
							enemigo.x=x-45;
						else
							if (x<691) x+=3; end
							enemigo.x=x+45;
						end
					end
					if (paso>70 and (father.estado==_special2 or father.estado<0))
						nuevo_estado=_retroceder;
					end
					if (father.enemigo.estado==100 or father.enemigo.estado==200 or
						(father.estado==_uatras_kick and father.he_dado==0))
						nuevo_estado=_retroceder;
					end
					if (father.he_dado==0 and bloker==1 and paso<73 and
						enemigo.estado==_recibir_toss)
						paso=37; inc_y=-8;
					end
				end
				
				//ryoko
				if (tipo==STK_RYK)
					paso++;
					if (paso==1) graph=13; end
					if (paso==3) graph=14; end
					if (paso<7 and abs(x-enemigo.x)>36)
						if (flags) x-=7; else x+=7; end
					end
					if (paso==3) graph=1; play_snd (s_catch,512,256);
						enemigo.graph=410; enemigo.y=220;
					end
					if (paso>4 and paso<19)
						if (flags) x=enemigo.x+36; else x=enemigo.x-36; end
					end
					if (paso==9) play_snd (s_ryoko1,512,256); end
					if (paso==13) graph=2;
						if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_KASUMI or 
							enemigo.luchador==FIGHTER_TERRY94)
							enemigo.graph=450;
						else
							enemigo.graph=407;
						end
					end
					if (paso==15) graph=3;
						if (enemigo.luchador==FIGHTER_KYO or 
							enemigo.luchador==FIGHTER_ATHENA or
							enemigo.luchador==FIGHTER_KYO94 or 
							enemigo.luchador==FIGHTER_TAKUMA)
							enemigo.graph=450;
						else
							enemigo.graph=452;
						end
						if (flags) inc_x=-5; else inc_x=5; end
					end
					if (paso==17) graph=4; enemigo.graph=453; inc_y=-16; y-=20;
						play_snd (s_sjump,512,200); play_snd (s_sjump,512,200);
					end
					if (paso>18) y+=inc_y;
						if (paso<71)
							if (abs(father.x-x)<240)
								if (x>16 and x<735) x+=inc_x; end
							end
						else x+=inc_x; end
					end
					if (paso>18 and paso<71) enemigo.y=y;
						if (flags) enemigo.x=x-36; else enemigo.x=x+36; end
					end
					if (paso==19 or paso==27) enemigo.graph=0; graph=5;
						if (flags) hit_x=x-42; else hit_x=x+42; end
						pegata (hit_x,y-44,403,c_scroll,enemigo.flags,100,z-1,61,enemigo.file);
					end
					if (paso==21 or paso==29) graph=6;
						if (flags) hit_x=x-44; else hit_x=x+44; end
						pegata (hit_x,y+42,403,c_scroll,enemigo.flags,100,z-1,61,enemigo.file);
					end
					if (paso==23 or paso==31) graph=7;
						if (flags) hit_x=x+42; else hit_x=x-42; end
						pegata (hit_x,y+44,403,c_scroll,enemigo.flags,100,z-1,61,enemigo.file);
					end
					if (paso==25) graph=4;
						if (flags) hit_x=x+44; else hit_x=x-44; end
						pegata (hit_x,y-42,403,c_scroll,enemigo.flags,100,z-1,61,enemigo.file);
					end
					if (paso==47) graph=4; inc_y=20; end
					if (paso>54 and paso<67) graph=8;
						if (flags) hit_x=x-24; else hit_x=x+24; end
						pegata (hit_x,y-50,423,c_scroll,enemigo.flags,100,z-1,61,enemigo.file);
					end
					if (paso==69) graph=9;
						pegata (hit_x,y-50,423,c_scroll,enemigo.flags,100,z-1,61,enemigo.file);
					end
					if (paso==71 or paso==73) graph=10;
						pegata (hit_x,y-50,423,c_scroll,enemigo.flags,100,z-1,61,enemigo.file);
						if (y<220 and paso==73) paso--; end
					end
					if (y>220) y=220; graph=11; inc_y=0; inc_x=0; end
					if (paso==75) hit_stars(9,enemigo.x,220); 
						enemigo.vida-=get_real_damage(25);
						enemigo.estado=101; play_snd (s_burn2,512,256);
						play_snd (s_fall,512,256); tembleque(2,1); enemigo.blend_fx=2;
						if (enemigo.vida<=0) enemigo.vida=0; ralenti(1); end
						play_snd (s_ryoko2,512,256);
					end
					if (paso>74 and paso<89) x1=407;
						if (enemigo.luchador==FIGHTER_IORI or 
							enemigo.luchador==FIGHTER_CRIMSON or
							enemigo.luchador==FIGHTER_KASUMI) 
							x1=409;
						end
						if (enemigo.luchador==FIGHTER_TERRY or 
							enemigo.luchador==FIGHTER_TERRY94)
							x1=410; y1=-10;
						end
						if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_KASUMI) y1=10; end
						if (flags) hit_x=x-24; else hit_x=x+24; end
						pegata (hit_x,142+y1,x1,c_scroll,flags,100,z-1,61,enemigo.file);
					end
					if (paso==87) 
						enemigo.estado=_recibir_toss; enemigo.paso=20;
						if (flags) hit_x=-12; else hit_x=12; end enemigo.inc_x=hit_x;
						enemigo.inc_y=-12; enemigo.blend_fx=2; enemigo.blend_frame=0;
						enemigo.flags=flags; inc_x=-hit_x/4; inc_y=-10; graph=16;
						enemigo.y=220; enemigo.intensidad=0;
					end
					if (paso==89)  graph=17; inc_y++; play_snd (s_jump,520,256); end
					if (paso==91)  graph=18; inc_y++; end
					if (paso==93)  graph=19; inc_y++; end
					if (paso==95)  graph=20; inc_y++; end
					if (paso==97)  graph=21; inc_y++; end
					if (paso==99)  graph=17; inc_y++; play_snd (s_jump,520,256); end
					if (paso==101) graph=18; inc_y++; end
					if (paso==103) graph=24; inc_y++; end
					if (paso==105) graph=25; inc_y++;
						if (y<220) paso--; else y=220; inc_y=0; inc_x=0; end
					end
					if (paso==107) graph=22; play_snd (s_floor,350,256); end
					if (paso==115) graph=23; end
					if (paso==119) nuevo_estado=_retroceder; end
				end
				
				//tung
				if (tipo==STK_TNG)
					paso++;
					if (paso==1) graph=5; end
					if (paso==3) graph=6; end
					if (paso==5) graph=7; 
						play_snd (s_boom,312,256);
						play_snd (s_boom,512,256); 
						play_snd (s_tung1,500,256);
					end
					if (paso==7 or paso==11 or paso==15 or paso==19) 
						graph=8;
						get_real_point(1,&hit_x,&hit_y);
						if (flags) golpe(hit_x-20,hit_y,1,5,25,5,1,3,4,father);
						else golpe(hit_x+20,hit_y,1,12,25,5,1,3,4,father); end
					end
					
					if (paso==9 or paso==13 or paso==17 or paso==21) 
						graph=9; 
					end
					if (paso==23) nuevo_estado=_burla; end
					magia=collision(type hadoken);
					if (magia)
						if (magia.father<>father)
							magia.vida=0;
						else
							magia=collision(type hadoken);
						end
					end
				end
				
				//jubei
				if (tipo==STR_YUB)
					paso++;
					if (paso<9) x+=inc_x;
						if (inc_x>0) inc_x-=2; end
						if (inc_x<0) inc_x+=2; end
					end
					if (paso==1) graph=4; end
					if (paso==3) graph=5; end
					if (paso==5) graph=6; inc_y=-8;
						golpe(enemigo.x,y-50,17,17,22,3,1,10,5,father);
					end
					if (paso==7) graph=7; 
						play_snd (s_sjump,512,256);
						play_snd (s_jubei2,500,256); 
						play_snd (s_sjump,512,256);
						get_real_point(1,&hit_x,&hit_y);
						golpe(hit_x,y-50,19,17,22,10,1,3,0,father);
					end
					if (paso>6 and paso<25) 
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
					end
					if (paso>6 and paso<19) get_real_point(1,&hit_x,&hit_y);
						pegata (hit_x,y-160,paso+18,c_scroll,flags+16,100,z-1,101,file);
					end
					if (paso==17) graph=8;  end
					if (paso==19) graph=9; end
					if (paso==24 and y<220) paso--; end
					if (y>220) y=220; paso=25; end
					
					if (paso==25) 
						graph=10; inc_x=0; play_snd (s_floor,350,256); 
					end
					if (paso==35) graph=11; end
					if (paso==39) nuevo_estado=_retroceder; end
				end
				
				//hanzo
				if (tipo==STK_HNZ)
					paso++;
					if (paso==1) z=enemigo.z-2;
						enemigo.graph=410; inc_y=-18; graph=5;
					end
					if (paso==11) graph=6; end
					if (paso==15) graph=7; end
					if (paso<17)
						if (flags) enemigo.x=x-50; else enemigo.x=x+50; end
					end
					if (paso==17) play_snd (s_xjump,512,256); end
					if (inc_y<0) hit_y=y-25; else hit_y=y+25; end
					if (paso==17 or paso==19 or paso==33 or paso==35 or
						paso==49 or paso==51 or paso==65 or paso==67 or paso==91)
						if (flags) hit_x=x-32; else hit_x=x+32; end
						graph=8; pegata (hit_x,hit_y,405,c_scroll,
						enemigo.flags,100,z+3,61,enemigo.file);
					end
					if (paso==21 or paso==23 or paso==37 or paso==39 or
						paso==53 or paso==55 or paso==69 or paso==71 or
						paso==79 or paso==81)
						graph=9; pegata (x,hit_y,410,c_scroll,
						enemigo.flags,100,z-3,61,enemigo.file);
					end
					if (paso==25 or paso==37 or paso==41 or paso==27 or
						paso==57 or paso==59 or paso==73 or paso==75 or
						paso==83 or paso==85)
						if (flags) hit_x=x+32; else hit_x=x-32; end
						graph=10; pegata (hit_x,hit_y,405,c_scroll,
						flags,100,z-3,61,enemigo.file);
					end
					if (paso==29 or paso==31 or paso==45 or paso==47 or
						paso==61 or paso==63 or paso==77 or paso==87 or paso==89)
						graph=11; pegata (x,hit_y,410,c_scroll,
						flags,100,z+3,61,enemigo.file);
					end
					if (paso>16 and paso<91) 
						enemigo.graph=0; 
						enemigo.y=y;
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
						if (flags%2==1) enemigo.x=x-50; 
						else enemigo.x=x+50; end
						
						if (inc_y==0 and flags<2)
							flags=flags+2; 
							enemigo.flags+=2; 
							y-=120; 
						end
					end
					if (paso==91)
						play_snd (s_hanzo2,512,220);
						play_snd (s_boom,512,256); 
						tembleque(2,-1); 
						enemigo.vida-=get_real_damage(25);
						if (enemigo.vida<=0) enemigo.vida=0; ralenti(1); end
					end
					if (paso>90 and paso<111) x1=407;
						if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON or
							enemigo.luchador==FIGHTER_KASUMI) x1=409;
						end
						if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_TERRY94)
							x1=410; y1=-10;
						end
						if (enemigo.luchador==FIGHTER_ATHENA or enemigo.luchador==FIGHTER_KASUMI) y1=10; end
						if (flags%2==1) hit_x=x-24; else hit_x=x+24; end
						pegata (hit_x,142+y1,x1,c_scroll,enemigo.flags,100,z-1,61,enemigo.file);
					end
					if (paso==111) 
						y=220;
						flags=flags%2; 
						inc_x=-hit_x/2;  
						inc_y=-10; graph=16;
						
						enemigo.y=220; 
						enemigo.intensidad=0;
						enemigo.graph=420;
						enemigo.flags=enemigo.flags%2; 
						enemigo.estado=_recibir_toss; 
						enemigo.paso=19;
						if (flags) hit_x=-6; else hit_x=6; end 
						enemigo.inc_x=hit_x;
						enemigo.inc_y=-10;
						enemigo.vulnerable=0;						
						
					end
					if (paso>110 and paso<153)
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
						if (flags) x+=4; else x-=4; end
						if (paso==111) graph=12; play_snd (s_jump,400,256); end
						if (paso==117 or paso==123 or paso==129 or
							paso==135 or paso==141 or paso==147)
							graph++;
						end
					end
					if (paso==153) graph=19; play_snd (s_floor,512,256); end
					if (paso==163) nuevo_estado=_retroceder; end
				end
			 
				//tom jones
				if (tipo==STK_MAX)
					paso++;
					if (paso==1)
						if (flags) enemigo.flags=0; else enemigo.flags=1; end
						enemigo.graph=410; vulnerable=1;
					end
					if (enemigo.estado<>320 and enemigo.estado<>300)
						vulnerable=0;
					end
					if (paso>6 and paso<15)
						if (paso==11)
							if (flags) flags=0; else flags=1; end
						end
						graph=6; enemigo.graph=405;
						if (flags) enemigo.x=x-24; else enemigo.x=x+24; end
					end
					if (paso==15)
						if (flags) flags=0; enemigo.x=x-50;
						else flags=1; enemigo.x=x+50; end
						graph=7; enemigo.y=186;
						enemigo.estado=300; 
						play_snd (s_max1,512,256);
					end
					if (paso==23 or paso==39 or paso==55 or paso==71)
						if (vulnerable==1) graph=8;
							enemigo.graph=406; hit_stars(1,enemigo.x,120);
							play_snd (s_hit2,512,256); 
							enemigo.vida-=get_real_damage(3);
							if (enemigo.vida<=0) enemigo.vida=0; ralenti(1); end
						end
					end
					if (paso==31 or paso==47 or paso==63 or paso==79)
						graph=7;
						if (vulnerable==1) enemigo.graph=405; end
					end
					if (paso==87 and vulnerable==1)
						if (enemigo.luchador==FIGHTER_IORI or enemigo.luchador==FIGHTER_CRIMSON)
							enemigo.graph=409;
						else
							if (enemigo.luchador==FIGHTER_TERRY or enemigo.luchador==FIGHTER_KASUMI)
								enemigo.graph=452;
							else
								enemigo.graph=450;
							end
						end
					end
					if (paso>88 and vulnerable==1)
						if (enemigo.y<210) enemigo.y+=inc_y; inc_y++;
						else
							enemigo.estado=_recibir_colleja;
							enemigo.paso=11; enemigo.y=220;
						end
					end
					if (paso==99) graph=9;  end
					if (paso==105) graph=10; end
					if (paso==111) graph=11; end
					if (paso==117) graph=13; end
					if (paso==125) graph=2;  end
					if (paso==135) nuevo_estado=_retroceder; end
				end
			end
			case _recibir_toss:
				paso++;
				if (magias) signal(magias,s_kill); end
				if (paso<13)
					if (paso%2==0) x+=5; end
					if (paso%2==1) x-=5; end
				end
				
				if (paso==1) signal(enemigo,s_freeze); end
				if (paso==9) signal(enemigo,s_wakeup); end
				
				if (paso==1)
					if (blend_fx==2 or blend_fx==3 or blend_fx==4)
						blend_gfx (file, id_recibir, -1, blend_fx);
					end
				end
				
				if (paso==13)
					if (blend_fx==2 or blend_fx==3 or blend_fx==4)
						blend_return (file, id_recibir, -1, 0);
					end
					if (electrocutado==1)
						if (blend_frame%2==1)
							convert_palette (file,id_recibir,&koreda);
						end
						electrocutado=0; blend_frame=0;
					end
				end
				
				// kazuki
				if (tipo==STK_KAZ)
					if (paso==1) 
						graph=29; 
					    play_snd (s_kazuki3,512,256);
					end
					if (paso==13) graph=31; end
					if (paso==17 or paso==21 or paso==23 or paso==25 or
						paso==27 or paso==29 or paso==37) graph++;
					end
					if (paso==31) graph=38;
						play_snd (s_floor,400,256);
					end
					if (paso==47)
						if (x>scroll.x0+340 or x<scroll.x0-20)
							father.strike=0;
							if (son) signal(son,s_kill); end
							return;
						else
							nuevo_estado=_retroceder;
							play_snd (s_kazuki4,512,256);
						end
					end
					if (paso>=13 and paso<31)
						if (flags) x+=6; else x-=6; end
					end
					if (paso>=15)
						if (x<=scroll[0].x0-30 or x>=scroll[0].x0+350)
							father.strike=0; signal(son,s_kill); return;
						end
					end
				end
				
				if (tipo==STK_EIJ)
					if (paso==1) graph=14; end
					if (paso==11) graph=16; end
					if (paso==15 or paso==19 or paso==25 or paso==31 or
						paso==37 or paso==43) graph++;
					end
					if (paso==49) paso--; end
					if (paso==11)
						if (flags) inc_x=4; else inc_x=-4; end
						inc_y=-10;
					end
					if (paso>=13)
						x+=inc_x; y+=inc_y; inc_y++;
					end
					if (paso>=17 and y>=220)
						y=220; inc_x=0; inc_y=0; 
						play_snd (s_floor,512,256);
						nuevo_estado=_retroceder;
					end
				end
				
				//kim len
				if (tipo==STK_LEN) 
					if (paso==1) graph=7; end
					if (paso>18) nuevo_estado=_retroceder; end
				end
				
				//sogetsu
				if (tipo==STK_SOG) 
					if (paso==1) graph=20; end
					if (paso==13) inc_y=-6; graph=21;
						if (flags) inc_x=4;
						else inc_x=-4; end
					end
					if (paso==19) graph=22; end
					if (paso==25) graph=21; end
					if (paso==31) graph=9;  play_snd (s_floor,400,256); end
					if (paso==35) graph=10; end
					if (paso==39) graph=11; end
					if (paso==47) graph=12; end
					if (paso==63) nuevo_estado=_retroceder; end
					if (paso>14 and paso<31)
						x+=inc_x; y+=inc_y; inc_y++;
					end
					if (paso==31) y=220; end
				end
				
				//rimururu or nakoruru
				if (tipo==STK_RIM or tipo==STK_NKR) 
					if (paso==1) graph=9;
					   if (tipo==33) play_snd (s_nakoruru3,500,256); end
					end
					if (paso==13)
					   graph=10; inc_y=-7;
					   if (flags) inc_x=4; else inc_x=-4; end
					end
					if (paso==15 or paso==17 or paso==19) graph++; end
					if (paso==21) graph=14; y-=60; end
					if (paso==23 or paso==27 or paso==31 or paso==35)
						if (flags) angle+=90000;
						else angle-=90000; end graph=14;
					end
					if (paso==37) graph=15; y+=60; end
					if (paso==41) graph=16; end
					if (paso==43 and y<215) paso--; end
					if (paso>14 and paso<43)
						x+=inc_x; y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
					end
					if (paso==43) y=220; graph=17;
						play_snd (s_floor,400,256);
					end
					if (paso==47) graph=18; end
					if (paso==71) nuevo_estado=_retroceder; end
				end
				
				//guile
				if (tipo==STK_GLL)
					if (paso==1) graph=19; end
					if (paso==21) graph=1; end
					if (paso==36)
						if (flags==0) flags=1;
						else flags=0; end graph=10;
						nuevo_estado=_retroceder;
					end
				end
				
				//hotaru
				if (tipo==STK_HOT)
					if (paso==1)
						play_snd (s_hotaru3,512,256); graph=20; inc_y=-6;
					end
					if (paso>12) y+=inc_y; inc_y++; end
					if (paso==14) graph=14; end
					if (paso>16 and paso<25) graph++; end
					if (y<220 and paso>12)
						if (flags) x+=4; else x-=4; end
					end
					if (y>220) y=220;
						if (graph<>19) play_snd (s_floor,512,256); graph=19; end
					end
					if (paso==47)
						if (y==220) nuevo_estado=_burla; else paso--; end
					end
				end
				
				//genjuro
				if (tipo==STK_GEN)
					if (magia)
						signal(magia,s_kill); magia=0;
					end
					if (paso==1)
						play_snd (s_gen2,512,256); graph=8;
					end
					if (paso==13) inc_y=-6; graph=9;
						if (flags) inc_x=8; else inc_x=-8; end
					end
					if (paso>19 and paso<31) graph=paso/2; end
					if (paso==35 or paso==39 or paso==41) graph++; end
					if (paso==43) graph=7;   end
					if (paso==51) nuevo_estado=_retroceder; end
					if (paso>14 and paso<31)
						x+=inc_x; y+=inc_y; inc_y++;
					end
					if (paso==31) y=220; graph=16; end
				end
				
				//galford
				if (tipo==STK_GAL)
					angle=0;
					if (paso==1)
						play_snd (s_galford3,500,256); graph=13; inc_y=-16;
					end
					if (paso==11) graph=2; play_snd (s_jump,400,256); end
					if (paso==17 or paso==21 or paso==25 or paso==29 or
						paso==37 or paso==45 or paso==47 or paso==53)
						graph++;
					end
					if (paso==41)
						if (y<200) paso--; end
					end
					if (paso>10 and paso<45)
						if (flags) x+=4; else x-=4; end
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
					end
					if (paso==45)
						y=220; graph=9; angle=0; 
						play_snd (s_floor,400,250);
					end
					if (paso==59) nuevo_estado=_retroceder; end
					if (y>220) y=220; end
				end
				
				//ryu
				if (tipo==STK_RYU)
					if (paso==1) play_snd (s_ryu3,512,256); graph=8; end
					if (paso==21) graph=1; end
					if (paso==36) graph=9; nuevo_estado=_retroceder; end
				end
				
				//jin chon rei
				if (tipo==STK_JIN)
					if (paso==1) play_snd (s_jin2,500,256); graph=6; end
					if (paso==13) graph=6; nuevo_estado=_retroceder; end
				end
				
				//el mariquilla
				if (tipo==STK_BEN)
					if (paso==1)
						play_snd (s_beni2,512,256); graph=7;
					end
					if (paso==9)
						if (y<220) graph=8; inc_y=-8;
							if (flags) inc_x=4; else inc_x=-4; end
						else
							graph=5; inc_y=0;
						end
					end
					if (paso>10)
						if (y<220) y+=inc_y; x+=inc_x; inc_y++;
						else
							y=220; graph=5; nuevo_estado=_retroceder;
							play_snd (s_floor,400,256);
						end
					end
				end
				
				//uuooo! uuooo! uuooo!
				if (tipo==STK_BLN)
					if (paso==1) graph=6; end
					if (paso==13) inc_y=-9; y-=57; graph=7;
						if (flags) inc_x=4; else inc_x=-4; end
					end
					if (paso<13 and y>220) y=220; end
					if (paso==17) graph=8; end
					if (paso==21 or paso==23 or paso==25 or
						paso==27 or paso==29 or paso==31)
						if (flags) angle-=45000;
						else angle+=45000; end
					end
					if (paso==33) angle=0; graph=9; end
					if (paso==35) graph=10;  end
					if (paso==37) play_snd (s_floor,400,256);
						if (y>150) y=167; graph=11;
						else paso--; end
					end
					if (paso==39) graph=12; end
					if (paso==41) y=220; graph=1; play_snd (s_floor,200,256); end
					if (paso==49) nuevo_estado=_retroceder; end
					if (paso>13 and paso<37)
						x+=inc_x; y+=inc_y; inc_y++;
					end
				end
				
				//panza
				if (tipo==STK_JOE)
					if (paso==1) play_snd (s_joe3,512,256); graph=25; end
					if (paso==13) graph=23; nuevo_estado=_retroceder; end
				end
				
				//indi jodido
				if (tipo==STK_IND)
					if (paso==1) play_snd (s_indi4,512,256); graph=24; end
					if (paso==14) graph=3; end
					if (paso==19) nuevo_estado=_retroceder; end
				end
				
				//kaede
				if (tipo==STK_KAE)
					if (paso==1)  play_snd (s_kaede3,512,256); graph=16; end
					if (paso==13) graph=15; end
					if (paso==33) nuevo_estado=_retroceder; end
				end
				
				//xianfei
				if (tipo==STK_XIA)
					if (paso==1) 
						play_snd (s_xianfei2,512,256); graph=13; 
					end
					if (paso==13)
						if (y<220) nuevo_estado=_retroceder;
						else graph=14; end
					end
					if (paso==15) graph=1; end
					if (paso==31) nuevo_estado=_retroceder; end
				end
				
				//ryoko
				if (tipo==STK_RYK)
					if (paso==1) play_snd (s_ryoko2,512,256); graph=12;  end
					if (paso==13) graph=23; nuevo_estado=_retroceder; end
				end
				
				//tung
				if (tipo==STK_TNG)
					if (paso==1) 
						play_snd (s_tung2,500,256); 
						graph=10; inc_y=-8;
						if (y>220) y=220; end
					end
					if (paso==13) graph=11; end
					if (paso>12 and paso<39) 
						y+=inc_y; inc_y++; 
					end
					if (y<220 and paso>12)
						if (flags) x+=5; else x-=5; end
					end
					if (paso==37 and y<220) paso--; end
					if (paso>12 and y>220) y=220; graph=12;
						paso=39; play_snd (s_floor,400,256);
					end
					if (paso==47) graph=13; end
					if (paso==63) nuevo_estado=_retroceder; end
				end
				
				//jubei
				if (tipo==STR_YUB)
					if (paso==1) graph=12; play_snd (s_jubei3,500,256); end
					if (paso==13) graph=9; nuevo_estado=_retroceder; end
				end
				
				//el ultimo de la fila (ya no)
				if (tipo==STR_RYO)
					if (paso==1) graph=11; play_snd (s_ryo2,500,260); end
					if (paso==13) graph=6; nuevo_estado=_burla; end
				end
				
				//manolo garcia
				if (tipo==STR_SET)
					if (paso==1) 
						graph=25; 
						play_snd (s_setsuna2,450,256); 
					end
					if (paso>14 and paso<23)
						if (flags) x+=13-(paso/2); 
						else x-=13-(paso/2); end
					end
					if (paso==27)  graph=13; end
					if (paso==35) graph=26; end
					if (paso==41) nuevo_estado=_retroceder; end
				end
				
				//bonzo
				if (tipo==STK_HNZ)
					if (paso==1) graph=29; play_snd (s_hanzo3,512,220); end
					if (paso==9)
						pegata (x,y,20,c_scroll,0,100,-5,117,file);
					end
					if (paso==13) graph=0; nuevo_estado=_burla; end
				end
				
				//tommy
				if (tipo==STK_MAX)
					if (paso==1)
						graph=14; inc_y=-6; play_snd (s_max2,512,256);
					end
					if (paso>12) 
						y+=inc_y; 
						if (paso%2==0) inc_y++; end
					end
					if (paso==13 or paso==17 or paso==19 or paso==21 or
						paso==23) graph++;
					end
					if (y<220 and paso>12)
						if (flags) x+=4; else x-=4; end
					end
					if (y>220) y=220;
						if (graph<>2) play_snd (s_floor,512,256); graph=2; end
					end
					if (paso==47)
						if (y==220) nuevo_estado=_retroceder; else paso--; end
					end
				end
				
				//akari
				if (tipo==STK_AKA)
					if (paso==1)
						play_snd (s_akari2,430,256); graph=36; inc_y=-7;
					end
					if (paso>14) 
						y+=inc_y; 
						if (game_frame%2==0) 
							inc_y++;
						end
						if (y<220)
							if (flags) x+=5; else x-=5; end
						end	
					end
					if (paso==15 or paso==19 or paso==23 or paso==27 or
						paso==31 or paso==35 or paso==39 or paso==43)
						graph++;
					end
					if (y>220) y=220;
						if (graph<>45) play_snd (s_floor,512,256); graph=45; end
					end
					if (paso==71)
						if (y==220) nuevo_estado=_retroceder; else paso--; end
					end
				end
				
				if (tipo==STK_YUK)
					if (paso==1)
						play_snd (s_yuki3,452,256); graph=35; inc_y=-8;
					end
					if (paso==11) graph=34;
						if (y<220) paso=26; graph=1; inc_y=-6; end
					end
					if (paso==17) graph=35; end
					if (paso==23) graph=5; end
					if (paso>14 and paso<23)
						if (flags) x+=(26-paso)/2; else x-=(26-paso)/2; end
					end
					if (paso==49) nuevo_estado=_retroceder; end
					if (paso>49)
						y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
						if (inc_y>0) graph=2; end
						if (y=>220) y=220; graph=5; paso=23;
							play_snd (s_floor,512,256);
						end
					end
				end
				
				//candy
				if (tipo==STK_CAN)
					if (paso==1) graph=26; inc_y=-6;
						if (enemigo.x>x) inc_x=-4; else inc_x=4; end
					end
					if (paso>12 and paso<19)
						x+=inc_x; y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
						if (paso==18 and y<220) paso--; end
						if (inc_y<0) graph=27; else graph=28; end
						if (y=>220) y=220; paso=19; graph=29; inc_y=-4; end
					end
					if (paso>20 and paso<29)
						x+=inc_x; y+=inc_y; 
						if (game_frame%2==0) inc_y++; end
						graph=27;
						if (paso==28 and y<220) paso--; end
						if (y=>220) y=220; paso=29; graph=29; end
					end
					if (paso==19 or paso==29)
						play_snd (s_fall,330-((paso*2)/2),256);
						if (paso==10) hit_stars(9,x,220); end
					end
					if (paso==47) graph=1;  end
					if (paso==53) graph=19; end
					if (paso==59) graph=23; end
					if (paso==79) graph=24; end
					if (paso==85) nuevo_estado=_retroceder; end
				end
				
				//krisalid
				if (tipo==STK_KRI)
					if (paso==1) graph=15; play_snd (s_krisad2,512,256); end
					if (paso>14 and paso<23)
						if (flags) x+=(26-paso)/2; else x-=(26-paso)/2; end
					end
					if (paso==27) graph=12; end
					if (paso==35) graph=14; end
					if (paso==41) nuevo_estado=_retroceder; end
				end
				
				//nuevo indi
				if (tipo==STK_NEW)
					if (paso==1) play_snd (s_indi4,512,256); graph=24; end
					if (paso==13) graph=3; inc_y=-8;
						if (flags) inc_x=4; else inc_x=-4; end
					end
					if (paso==17 or paso==25)  graph=37; end
					if (paso==21 or paso==29) graph=38; end
					if (paso==29 and y<220) paso=23; end
					if (paso>14) 
						y+=inc_y; x+=inc_x;
						if (game_frame%2==0) inc_y+=2; end
					end
					if (y>220) y=220; nuevo_estado=_burla; he_dado=1; end
				end
				
				//moe
				if (tipo==STK_MOE)
					if (paso==1)
						if (graph==5 or graph==6 or graph==7) y=220; end
						graph=17;
					end
					if (paso==13) graph=18; inc_y=-8;
						if (flags) inc_x=4; else inc_x=-4; end
					end
					if (paso==17)  graph=11; end
					if (paso==21) graph=12; end
					if (paso==25) graph=13; end
					if (paso>14 and paso<31) 
						y+=inc_y; x+=inc_x;
						if (game_frame%2==0) inc_y++; end
						if (paso==30 and y<220) paso--; end
					end
					if (paso==31) play_snd (s_floor,512,256); graph=15; y=220; end
					if (paso==41) graph=14; end
					if (paso==47) graph=1;  end
					if (paso==71) nuevo_estado=_retroceder; end
				end
			end
		end
	   
		//tema raro q solo concierne al seor manson
		if (estado==-1 or estado==-3)
			if (enemigo.paso==1 and he_dado==0 and enemigo.vida>0 and
				enemigo.estado==_recibir_toss and tipo==STK_BAS)
				enemigo.vulnerable=1; enemigo.y-=10;
			end
		end
		if (estado<>nuevo_estado)
			estado=nuevo_estado; paso=nuevo_paso; nuevo_paso=0;
		end
		if (electrocutado==1) blend_frame++;//electrocutado
			convert_palette (file,id_recibir,&koreda);
		end
		
		// hace recuperar a su partner si este estaba siendo volteado
		if (he_dado==0 or voltear)
			if (father.estado==100)
				father.angle=0;
				if (father.y==220)
					father.estado=_recibir_fuertes_bozo; 
					father.paso=10;
					father.inc_x=0;
				else
					father.estado=_recibir_barridos_fuertes; 
					father.paso=15;
					father.inc_y=-2; 
				end
			end
			// le quita el rival de las manos
			if (voltear and father.estado==_voltear)
				father.estado=_normal;
				father.paso=1; father.inc_y=0;
				father.y=220; father.inc_x=0;
			end
		end
		
		// deja caer al rival cojido en caso de que inflen al striker
		if (voltear and enemigo.estado==320 and estado==_recibir_toss)
			if (father.y==220)
				enemigo.estado=_recibir_fuertes_bozo; 
				enemigo.paso=10;
				enemigo.inc_x=0;
			else
				enemigo.estado=_recibir_barridos_fuertes; 
				enemigo.paso=15;
				enemigo.inc_y=-2; 
			end
		end
		
		frame;
	end
end		

process substrk(x,y,tipo,grandfather); //strikers invocados por strikers

begin //diferencias:no le puedes inflar, asi los procesos golpe no se lian

	flags=father.flags;
	magia=sombra();
	estado=_avanzar;
	enemigo=grandfather.enemigo;
	ctype=c_scroll;
	file=father.file;
	
	loop
		nuevo_estado=estado;
		switch(estado);
			case _avanzar:
				if (tipo==1)//zabaloa
					paso++; x+=inc_x;
					if (intensidad==0)
						if (paso==1) graph=100; end
						if (paso==3) graph=101; end
						if (paso==5) graph=102; end
						if (paso==7) graph=103; end
						if (paso==9) graph=104; end
						if (paso==11) paso=000; end
						if (abs(x-enemigo.x)<100)
							paso=0; intensidad=1;
						end
						if (flags) inc_x=-12;
						else inc_x=+12; end
					end
					if (intensidad==1)
						if (inc_x>0) inc_x-=3; end
						if (inc_x<0) inc_x+=3; end
						if (paso==1) graph=105; end
						if (paso==5) graph=106; end
						if (paso>4 and paso<11 and he_dado==1)
							get_real_point(1,&hit_x,&hit_y);
							golpe(hit_x,hit_y,1,14,30,10,1,10,4,grandfather);
						end
						if (grandfather.estado==_special2 and
							grandfather.intensidad>0 and he_dado==0)
							if (enemigo.vida>0) enemigo.inc_x=0; end
						end
						if (paso==11) graph=107; end
						if (paso==15) graph=108; end
						if (paso==23) nuevo_estado=_retroceder; end
					end
				end
				if (tipo==2)//pajarraco del demonio
					paso++; x+=inc_x; 
					if (paso%2==0) y+=inc_y; end
					if (intensidad==0)//viene
						if (paso==1) graph=112; inc_y=12;
							if (flags) inc_x=-5; else inc_x=5; end
						end
						if (paso>4 and paso<37) 
							if (paso%2==0) inc_y--; end
						end
						if (paso>12 and paso%3==0)
							if (inc_x<0) inc_x++; end
							if (inc_x>0) inc_x--; end
						end
						if (paso==5) graph=118; end
						if (paso==9) graph=111; end
						if (paso==13) graph=112; end
						if (paso==17) graph=113; end
						if (paso==21) graph=114; end
						if (paso==23) graph=115; end
						if (paso==25) graph=116; end
						if (paso==33) graph=117; end
						if (paso==37) graph=118; end
						if (paso==41) graph=111; end
						if (paso==43) graph=112; end
						if (paso==45) graph=119; end
						if (paso==47) graph=120; end
						if (paso>48)
							if (he_dado==1 and y<190)
								inc_y=22; 
								if (flags) inc_x=-15; 
								else inc_x=15; end
								graph++; 
								if (graph>122) graph=121; end
								
								get_real_point(1,&hit_x,&hit_y);
								golpe(x+inc_x,y+inc_y,5,14,30,10,1,10,4,grandfather);
								
							else
								nuevo_estado=_retroceder; inc_x=0; inc_y=-2;
							end
							if (grandfather.estado==_special2 and
								grandfather.intensidad>0 and he_dado==0)
								if (enemigo.vida>0) enemigo.inc_x=0; end
							end
						end
					end
				end
			end
			case _retroceder:
				if (tipo==1)//el lobo feroz
					if (paso==0)
						graph=109; play_snd (s_sjump,400,256);
					end
					paso++;
					if (paso==5) graph++; end
					if (flags) x+=20;
					else x-=20; end
					y-=15;
					if (x>=scroll[0].x0+370 or x<=scroll[0].x0-50 and y<80)
						signal(magia,s_kill);
						return;
					end
				end
				if (tipo==2)//pajarito pajares
					if (flags) inc_x=10;
					else inc_x=-10; end
					paso++; x+=inc_x; y+=inc_y;
					if (paso==1) graph=112; end
					if (paso==5) graph=113; end
					if (paso==9) graph=114; end
					if (paso==13) graph=115; end
					if (paso==17) graph=116; end
					if (paso==21) graph=117; end
					if (paso==25) graph=118; end
					if (paso==29) graph=111; end
					if (paso==31) paso=0; end
					inc_y--;
					if (out_region(id,0) and y<0)
						signal(magia,s_kill);
						return;
					end
				end
			end
		end
		if (estado<>nuevo_estado)
			estado=nuevo_estado;
			paso=nuevo_paso;
			nuevo_paso=0;
		end
		frame;
	end
end

process hielo(id_pelele,x,y);//hielo de rimururu

begin
   z=id_pelele.z-5;
   flags=father.flags+4;
   file=father.file;
   ctype=c_scroll;
   graph=116;
   father=id_pelele.enemigo;
   
   loop
      frame;
      x=id_pelele.x;
      if (id_pelele.x<16)  id_pelele.x=16;  end
      if (id_pelele.x>736) id_pelele.x=736; end
      if (paso==0)
         if (id_pelele.estado==_recibir_toss)
            id_pelele.paso=8;
         else
            id_pelele.paso=2;
         end
      end
      paso++;
      if (paso<6) graph++; end
      if (id_pelele.paso<>2 and id_pelele.paso<>8)
         paso=36;
      end
      if (paso>35)
         graph++;
      else
         signal(id_pelele,s_freeze);
         id_pelele.vulnerable=1;
      end
      if (paso==35 or paso==36)
         signal(id_pelele,s_wakeup);
         if (paso==35 and id_pelele.y<220)
            id_pelele.paso=12; id_pelele.inc_x=0; id_pelele.inc_y=0;
         end
      end
      if (graph>125) return; end
   end
end

process crimsom (id_father, id_pelele);//especial que conjela del crimson

begin
	priority=100;
	if (id_father==id_pelele)
		file=id_father.file;
		flags=id_father.flags;
		tipo=1; paso=3;
		enemigo=id_father.enemigo;
	else
		id_pelele.blend_fx=2;
		id_pelele.blend_frame=0;
		frame;
	end
	
	loop
		
		frame;
		if (tipo==0)
			if (id_pelele.x<16)  id_pelele.x=16;  end
			if (id_pelele.x>736) id_pelele.x=736; end
			if (id_pelele.y<220) id_pelele.vulnerable=2; end
			
			if (paso==0)
				id_pelele.poison=10;
				if (id_pelele.estado==_recibir_toss)
					id_pelele.paso=15;
				else
					id_pelele.paso=3;
				end
			end
         
			paso++;
			if (id_pelele.paso<>3 and id_pelele.paso<>15 and paso<100)
				signal(id_pelele,s_wakeup); paso=104;
			end
			if (paso<100)
				id_pelele.blend_fx=2;
				signal(id_pelele,s_freeze);
			end
			if (paso==100)
				signal(id_pelele,s_wakeup);
				if (id_pelele.y==220)
					id_pelele.inc_x=0; id_pelele.inc_y=0;
				end
				if (id_pelele.y<220)
					id_pelele.paso=12;
					if (id_pelele.flags)
						id_pelele.inc_x=4;
					else
						id_pelele.inc_x=-4;
					end
					id_pelele.inc_y=-10;
				end
			end
			if (paso==103 or paso>170)
				id_luchador1.poison=0;
				id_luchador2.poison=0;
				return;
			end
		end
		
		if (tipo==1)
			if (paso==0) id_father.he_dado=1; end
			paso++;
			if (flags) x-=6; else x+=6; end
			if (paso==10)
				hadoken (-5,x,210,id_father);
				pegata (x,220,575,c_scroll,flags,100,z-1,68,file);
				paso=1; id_father.he_dado=1;
			end
			if (x<=scroll[0].x0-30 or x>=scroll[0].x0+350)
				if (enemigo.poison<>10) id_father.poison=0; end return;
			end
		end
	end
end

process pantallazo(tipo);//parpadeos y demas

begin

	ctype=c_scroll;
	file=fich_game; 
	z=father.z+11;
	x=scroll.x0+160; 
	y=scroll.y0+120;
	graph=999;
	
	//parpadeo instantaneo en blanco
	if (tipo==0)
		from nuevo_estado=0 to 255;
			pintura[nuevo_estado]=15 mod 256;
		end
		convert_palette (fich_game,999,&pintura);
	end
	
	//parpadeo instantaneo en morado
	if (tipo==1)
		flags=4;
		from nuevo_estado=0 to 255;
			pintura[nuevo_estado]=45 mod 256;
		end
		convert_palette (fich_game,999,&pintura);
	end
	
	//pantalla especial kula
	if (tipo==2)
		file=father.file; graph=700; size=108;
		play_snd (s_kura7,512,256); flags=father.flags;
		loop
			x=scroll.x0+160; y=scroll.y0+120;
			if (paso==0) signal(type stage_obj,s_sleep); end
			signal(father,s_wakeup);
			if (paso==75 or (father.estado<>_special2 and
				father.estado>-1))
				signal(type stage_obj,s_wakeup); return;
			end
			convert_palette (file,700,&naranxlila2);
			frame; paso++;
		end
	end
	
	//parpadeo continuo en rojo y blanco indi
	if (tipo==10)
		loop
			frame;
			if (paso==0) signal(type stage_obj,s_sleep); end
			if (blanquear==1) signal(type stage_obj,s_wakeup); return; end
			x=scroll.x0+160; y=scroll.y0+120;
			if (paso%4==0)
				from nuevo_estado=0 to 255;
					pintura[nuevo_estado]=17 mod 256;
				end
				convert_palette (fich_game,999,&pintura);
			end
			if (paso%4==2)
				from nuevo_estado=0 to 255;
					pintura[nuevo_estado]=15 mod 256;
				end
				convert_palette (fich_game,999,&pintura);
			end
			if (paso==66) // tiene que ser multiplo de 4 +2
				signal(type stage_obj,s_wakeup);
				return;
			end
			paso++;
		end
	end
	frame;
end

process conjelador (id_parado, duracion);

begin
	
	priority=100;
	duracion = duracion*2;
	enemigo=id_parado.enemigo;
	
	if (duracion>0)
		estado=id_parado.estado;
		if ((id_parado.luchador==FIGHTER_KYO and id_parado.estado==49) or
			(id_parado.luchador==FIGHTER_IORI and id_parado.estado==51) or
			(id_parado.luchador==FIGHTER_CRIMSON and id_parado.estado==51) or
			(id_parado.luchador==FIGHTER_KASUMI and id_parado.estado==51) or
			(id_parado.luchador==FIGHTER_TAKUMA and id_parado.estado==51) or
			id_parado.estado==-4)
			id_parado.estado=-4;
		else
			if (id_parado.y<220)
				id_parado.estado=-3;
			else
				if (id_parado.estado>17 and id_parado.estado<22)
					id_parado.estado=-2;
				else
					if (id_parado.estado==_special1 or
						id_parado.estado==_special2)
						if (id_parado.luchador>9) return; end
						id_parado.estado=-5;
					else
						id_parado.estado=-1;
					end
				end
			end
		end
		id_parado.nuevo_estado=id_parado.estado;
	else 
		return; 
	end
	loop
		vida++; blend_frame++;
		if (vida==2)
			if (enemigo.vida<=0 and game_mode!=MODE_TRAINING) duracion+=7; end
		end
		if (id_parado.estado>-1) return; 
		end
		if (vida=>duracion)
			if (id_parado.nuevo_estado<0)
				id_parado.estado=estado;
				id_parado.nuevo_estado=estado;
			else
				id_parado.estado=id_parado.nuevo_estado;
				id_parado.paso=id_parado.nuevo_paso;
				id_parado.nuevo_paso=0; 
				id_parado.vulnerable=0;
				id_parado.he_dado=1; 
				id_parado.ive_hit=0;
				id_parado.guardia=0; 
				id_parado.x0=0;
			end
			return;
		end
		if (duracion>10 and enemigo.paso==9)
			if (id_parado.he_dado==0)
				enemigo.paso-=2;
			end
			if (id_parado.he_dado==-1 and enemigo.super_guard==0) 
				enemigo.paso--; 
			end
		end
		frame;
	end
end

process ralenti(intensidad);

begin
	loop
		if (intensidad==0)
			if (paso==0) set_fps(FPS_TARGET/2,SKIP); end
			if (paso==4) set_fps(FPS_TARGET-(FPS_TARGET/3),SKIP); end
			if (paso==8) set_fps(FPS_TARGET-(FPS_TARGET/4),SKIP); end
			if (paso==12) set_fps(FPS_TARGET,SKIP); return; end
		end
		if (intensidad==1)
			if (paso==0)  set_fps(FPS_TARGET/3,SKIP); end
			if (paso==16) set_fps(FPS_TARGET/2,SKIP); end
			if (paso==32) set_fps(FPS_TARGET-(FPS_TARGET/3),SKIP); end
			if (paso==48) set_fps(FPS_TARGET-(FPS_TARGET/4),SKIP); end
			if (paso==64) set_fps(FPS_TARGET,SKIP); return; end
		end
		paso++;
		frame;
	end
end

process texto_inflar(grafico,lado);

begin
	file=fichtxt;
	y=100;
	z=-250;
	if (lado==2) x=60; inc_x=-3; end
	if (lado==1) x=260; inc_x=3; end
	if (game_mode==MODE_TRAINING and display==1 and estado_juego==1) y=120; end
	
	loop
		paso++;
		frame;
		if (paso==1 and grafico==36)
			draw_z=-1200;
			draw(3,15,15,0,0,0,320,240);
		end
		if (paso==2 and grafico==36)
			delete_draw(all_drawing);
		end
		if (paso==3)
			graph=grafico;
		end
		if (paso>27)
			x+=inc_x;
			if (inc_x>0) inc_x+=3; end
			if (inc_x<0) inc_x-=3; end
		end
		if (x<-50 or x>370)
			return;
		end
	end
end

process crono(x,y,graph,size,tipo);

begin
	ctype=c_screen;
	file=fichtxt;
	if (tipo==1)
		estado_juego=0;
		loop
			frame;
			paso++;
			if (id_luchador1.estado==_normal and
				id_luchador2.estado==_normal)
				if (paso>20)
					x=90; y=80; size=150;
					if (id_luchador1.vida<id_luchador2.vida)
						id_luchador1.estado=_perder;
						id_luchador1.paso=0;
						id_luchador2.estado=_ganar;
						id_luchador2.paso=0;
						if (id_luchador2.setwin==1) id_luchador2.setwin=2; end
					end
					if (id_luchador1.vida>id_luchador2.vida)
						id_luchador2.estado=_perder;
						id_luchador2.paso=0;
						id_luchador1.estado=_ganar;
						id_luchador1.paso=0;
						if (id_luchador1.setwin==1) id_luchador1.setwin=2; end
					end
					if (id_luchador1.vida==id_luchador2.vida)
						id_luchador1.estado=_perder;
						id_luchador1.paso=0;
						id_luchador2.estado=_perder;
						id_luchador2.paso=0;
						crono(160,-20,34,100,2);
					end
				end
			else
				if (paso>18) paso=18; end
			end
		end
	end
	if (tipo==2)//letras draw game
		loop 
			frame;
			paso++;
			if (paso==(64*fps_target)/FPS_BASE) signal(father,s_kill); end
			if (paso==(72*fps_target)/FPS_BASE) play_snd (s_draw,512,256); end
			if (y<80 and paso>64) y+=10; end
			if (paso==(200*fps_target)/FPS_BASE)
				fade_off (); graph=0;
				pegata (x,y,graph,ctype,flags,size,z,53,file);
				return;
			end
		end
	end
end

process combos (luchador,tipo);

begin
	y=80; z=-250;
	file=fichtxt;
	hit_combo=father.hit_combo;
	ctype=c_screen;
	if (tipo==1) combos(luchador,3); end
	if (tipo==1) combos(luchador,4); end
	if (tipo==1 or tipo==2) size=180; end
	LOOP
		if (blanquear==1) return; end
		frame;
		if (tipo==1)
			if (size>100)
				if (size==160) y+=7; end
				if (size==150) y-=7; end
				if (size==140) y+=5; end
				if (size==130) y-=5; end
				if (size==120) y+=3; end
				if (size==110) y-=3; end
				size-=5;
			end
			if (luchador==id_luchador1 and luchador.hit_combo>1)
				if (luchador.hit_combo>9) x=285;
				else x=280; end
			end
			if (luchador==id_luchador2 and luchador.hit_combo>1)
				if (luchador.hit_combo>9) x=78;
				else x=70; end
			end
			if (luchador.hit_combo=>hit_combo)
				if (luchador.hit_combo<10)
					graph=luchador.hit_combo+100;
				end
				if (luchador.hit_combo>9 and luchador.hit_combo<20)
					graph=luchador.hit_combo+90;
				end
				if (luchador.hit_combo>19 and luchador.hit_combo<30)
					graph=luchador.hit_combo+80;
				end
				if (luchador.hit_combo>29 and luchador.hit_combo<40)
					graph=luchador.hit_combo+70;
				end
				if (luchador.hit_combo>39 and luchador.hit_combo<50)
					graph=luchador.hit_combo+60;
				end
				if (luchador.hit_combo>49 and luchador.hit_combo<60)
					graph=luchador.hit_combo+50;
				end
			end
			if (luchador.hit_combo>hit_combo)
				hit_combo=luchador.hit_combo;
				size=160; y=80;
			end
			if (luchador.hit_combo==0)
				paso++;
				if (time==0 and paso<(fps_target>>1)) paso=(fps_target>>1); end
				if (paso>(fps_target>>1)) size-=10; end
				if (size<0) return; end
			end
			if (luchador.hit_combo==1) return; end
		end
		if (tipo==2)
			if (size>100)
				if (size==160) y+=7; end
				if (size==150) y-=7; end
				if (size==140) y+=5; end
				if (size==130) y-=5; end
				if (size==120) y+=3; end
				if (size==110) y-=3; end
				size-=5;
			end
			if (luchador==id_luchador1 and luchador.hit_combo>1) x=265; end
			if (luchador==id_luchador2 and luchador.hit_combo>1) x=58;  end
			if (luchador.hit_combo=>hit_combo)
				graph=(luchador.hit_combo/10)+100;
			end
			if (luchador.hit_combo>hit_combo)
				hit_combo=luchador.hit_combo;
				size=160; y=80;
			end
			if (luchador.hit_combo==0)
				paso++;
				if (paso>(fps_target>>1)) size-=10; end
				if (size<0) return; end
			end
			if (luchador.hit_combo==1) return; end
		end
		if (tipo==3)
			if (luchador==id_luchador1 and luchador.hit_combo>1) x=250; end
			if (luchador==id_luchador2 and luchador.hit_combo>1) x=40;  end
			graph=38;
			if (luchador.hit_combo==0)
				paso++;
				if (paso>(fps_target>>1)) size-=10; end
				if (size<0) return; end
			end
			if (luchador.hit_combo==1) return; end
		end
		if (tipo==4)
			if (luchador==id_luchador1 and luchador.hit_combo>1) x=310; end
			if (luchador==id_luchador2 and luchador.hit_combo>1) x=110;  end
			graph=39;
			if (luchador.hit_combo==0)
				paso++;
				if (paso>(fps_target>>1)) size-=10; end
				if (size<0) return; end
			end
			if (luchador.hit_combo==1) return; end
		end
	end
end

process game_over(tipo);

private
	texto1[]="3rd color abailable","4th color abailable","Kyo'95 is now abailable","RB Terry Bogard is now abailable","Crimsom flames' Iori is now abailable","";
	texto2[]="by pressing weak kick button","by pressing strong kick button","by pressing up with the cursor on Kyo","by pressing up with the cursor on Terry","by pressing up with the cursor on Iori","";
	/* BENNU /*
	tricks[]="CHEATS",
	"-Indi striker: Type 'indy' and a sound", "will confirm the cheat is on.",
	"Then select Iori or K9999 and press", "UP while you're selecting your striker.","",
	"-Moe striker: Type 'moe' and a sound", "will confirm the cheat is on.",
	"Then select Kyo or Athena and press", "UP while you're selecting your striker.","",
	"-Type 'FLY' in the second",  "splash screen and a fly will follow", "the characters";
	/* BENNU_WII /*
	tricks[]="CHEATS",
	"-Indi striker: Push up, down, up, down ", "and a sound will confirm the cheat is on.",
	"Then select Iori or K9999 and press", "UP while you're selecting your striker.","",
	"-Moe striker: Push L, R, L, R ", "and a sound will confirm the cheat is on.",
	"Then select Kyo or Athena and press", "UP while you're selecting your striker.","",
	"-Type 'FLY' in the first",  "splash screen and a fly will follow", "the characters";
	/* BENNU_WIZ /*
	tricks[]="CHEATS",
	"-Indi striker: Push up, down, up, down ", "and a sound will confirm the cheat is on.",
	"Then select Iori or K9999 and press", "UP while you're selecting your striker.","",
	"-Moe striker: Push L, R, L, R ", "and a sound will confirm the cheat is on.",
	"Then select Kyo or Athena and press", "UP while you're selecting your striker.","",
	"-Type 'FLY' in the first",  "splash screen and a fly will follow", "the characters";
	/* BENNU_GCW0 /**/
	tricks[]="CHEATS",
	"-Indi striker: Push up, down, up, down ", "and a sound will confirm the cheat is on.",
	"Then select Iori or K9999 and press", "UP while you're selecting your striker.","",
	"-Moe striker: Push L, R, L, R ", "and a sound will confirm the cheat is on.",
	"Then select Kyo or Athena and press", "UP while you're selecting your striker.","",
	"-Type 'FLY' in the first",  "splash screen and a fly will follow", "the characters";
	/* GEMIX /*
	tricks[]="CHEATS",
	"-Indi striker: Type 'indy' and a sound", "will confirm the cheat is on.",
	"Then select Iori or K9999 and press", "UP while you're selecting your striker.","",
	"-Moe striker: Type 'moe' and a sound", "will confirm the cheat is on.",
	"Then select Kyo or Athena and press", "UP while you're selecting your striker.","",
	"-Type 'FLY' in the second",  "splash screen and a fly will follow", "the characters";
	/**/
	
	archivo;

begin
	id_constructor.bloker=1;
	if (tipo==0)
		plano1 = load_map("kof\gameover.map");
		put_screen (0,plano1);
		write (0,160,210,4,"beat the game to unlock some secrets!");
	end
	
	if (tipo==1)
		plano1 = load_map("kof\gameover.map");
		put_screen (0,plano1);
	end
	
	if (tipo==2)
		plano1 = load_map ("kof\optionco.map");
		put_screen (0,plano1);
		write (0,160,180,4,texto1[cleared_games]);
		write (0,160,190,4,texto2[cleared_games]);
		if (cleared_games<5) write (font_menu,SIZEX2,50,4,"CONGRATULATIONS!!!"); end
		if (cleared_games==2) file=load_fpg("kof\kyo.fpg"); end
		if (cleared_games==3) file=load_fpg("kof\terry.fpg"); end
		if (cleared_games==4)
			file=load_fpg("kof\iori.fpg");
			map_put_pixel(file,1,46,12,153);map_put_pixel(file,1,46,13,156);
			map_put_pixel(file,2,46,12,153);map_put_pixel(file,2,46,13,156);
			map_put_pixel(file,3,47,12,153);map_put_pixel(file,3,47,13,156);
			map_put_pixel(file,4,48,12,153);map_put_pixel(file,4,48,13,156);
			map_put_pixel(file,5,50,12,153);map_put_pixel(file,5,50,13,156);
			map_put_pixel(file,6,51,12,153);map_put_pixel(file,6,51,13,156);
			map_put_pixel(file,7,51,12,153);map_put_pixel(file,7,51,13,156);
			map_put_pixel(file,8,49,12,153);map_put_pixel(file,8,49,13,156);
			map_put_pixel(file,9,47,12,153);map_put_pixel(file,9,47,13,156);
			
			from counter=1 to 9; convert_palette(file,counter,&crimson_normal); end
		end
		if (cleared_games==5)
			for (paso=0; paso<sizeof(tricks)/DIV; paso++)
				write (0,40,22+(paso*14),0,tricks[paso]);
			end
		end
		paso=0;
	end
	fade_on();
	
	loop
		
		if (tipo==0 or tipo==1)
			paso++;
			if (paso>320 or (p1_button_start and id_constructor.bloker==0))
				unload_graph (plano1);
				game_frame = 0;
				game_state = ST_MAIN;
				id_constructor.bloker=1;
				return;
			end
			if (!p1_button_start)
				id_constructor.bloker=0;
			end
		end
		if (tipo==2)
			x=160; y=170;
			if (cleared_games==2)
				graph=pos_kyo[paso++];
				if (paso=>sizeof(pos_kyo)/DIV)
					paso=0;
				end
			end
			if (cleared_games==3)
				graph=pos[paso++];
				if (paso=>sizeof(pos)/DIV)
					paso=0;
				end
			end
			if (cleared_games==4)
				graph=pos_vd[paso++];
				if (paso=>sizeof(pos_vd)/DIV)
					paso=0;
				end
			end
			
			if (control_enter and id_constructor.bloker==0)
				unload_graph (plano1);
				delete_text (all_text);
				cleared_games++;
				if (cleared_games>MAX_BEATS)
					cleared_games=MAX_BEATS;
				end
				
				save_data (S_SETUP);
				game_over(1);
				id_constructor.bloker=1;
				return;
				
			end
			if (not control_enter)
				id_constructor.bloker=0;
			end
		end
		frame;
	end
end

process options();

private
	washinofail;
	option;
	button_code;
	num_options;
	cursor_bloker;
	MAIN_Y0 = 60;
	MAIN_Y1;

	
begin
	
	washinofail = load_fpg("kof\config.fpg");
	file = washinofail;
	y = 60;
	priority = 1;

	tipo_control = control_menu;
	
	loop
		frame;
		paso++;
		
		if (paso == 1)
			fade_on ();
		end
		
		if (true)
			delete_text (all_text);
			delete_draw (all_drawing);
		end
		
		if (option==OPT_MAIN)//menu de opciones
			write (font_menu,SIZEX2,30,4,"OPTION MENU");
			num_options = sizeof(MENUST_MAIN)/DIV;
			MAIN_Y1 = 30 + (num_options*30);
			
			if (paso>0 and paso<=num_options*5)
				if (paso%5==0)
					pegata (-160, 30+((paso/5)*30), 999, c_screen, 0, 100, 10, 72, file);
				end
			end
			
			if (paso>25)
				if (control(agachar) and !cursor_bloker)
					y+=30;
					play_snd (s_select,512,256);
					if (y>MAIN_Y1) y=MAIN_Y0; end
					cursor_bloker = true;
				end
				if (control(saltar) and !cursor_bloker)
					y-=30;
					play_snd (s_select,512,256);
					if (y<MAIN_Y0) y=MAIN_Y1; end
					cursor_bloker = true;
				end
				if (!control(saltar) and !control(agachar))
					cursor_bloker = false;
				end
				
				if (control_enter and bloker==0)
					fade_off ();
					play_snd (s_selectdo,512,256);
					delete_text(all_text);
					signal(type pegata,s_kill);
					
					option = MENUST_MAIN[(y-60)/30];
					paso=0; y=60;
				end
				if (control_cancel and bloker==0)
					unload_fpg(washinofail);
					delete_text(all_text);
					signal(type pegata,s_kill);
				   
					game_frame = 0;
					game_state = ST_MAIN;
					
					return;
				end
			end
		end
		
		//opciones durante el juego
		if (option==OPT_GAME)
			write (font_menu,SIZEX2,30,4,"Game Settings");
			write (font_p2,SIZEX2,224,4,PUSH_SCAPE_TO_OPTION);
			if (paso==5)
				pegata (-160,60,999,c_screen,0,100,10,73,file);
			end
			if (paso==10)
				pegata (-160,90,999,c_screen,0,100,10,73,file);
			end
			if (paso==15)
				pegata (-160,120,999,c_screen,0,100,10,73,file);
			end
			if (paso==20)
				pegata (-160,150,999,c_screen,0,100,10,73,file);
			end
			if (paso==25)
				pegata (-160,180,999,c_screen,0,100,10,73,file);
			end
			if (paso>25)
				if (control(agachar) and !cursor_bloker)
					y+=30;
					play_snd (s_select,512,256);
					if (y>180) y=60; end
					cursor_bloker = true;
				end
				if (control(saltar) and !cursor_bloker)
					y-=30;
					play_snd (s_select,512,256);
					if (y<60) y=180; end
					cursor_bloker = true;
				end
				if (!control(saltar) and ! control(agachar))
					cursor_bloker = false;
				end
				
				if (control(retroceder))
					vida--;
				end
				while (control(retroceder))
					frame;
				end
				if (control(avanzar))
					vida++;
				end
				while (control(avanzar))
					frame;
				end
			end
			if (control_cancel and bloker==0)
				fade_off ();
				delete_text(all_text);
				signal(type pegata,s_kill);
				save_data (S_SETUP);
				y=60; paso=0;
				option=OPT_MAIN;
			end
		end
		
		//setup para 486
		if (option==OPT_SETUP)
			if (paso==0)
				mouse.file=file;
				mouse.graph=1;
			end
			
			if (paso>2)
				write (font_menu,SIZEX2,25,4,"Computer Setup");
				write (font_menu,MENU_X0+150,44,3,"FPS Settings");
				write (font_menu,MENU_X0+150,97,3,"Speed Settings");
				write (font_menu,MENU_X0+150,155,3,"Canvas Settings");
				
				if (SLOW_MACHINE)
					write (font_p1,158,127,4,"Slow Machines");
				else
					write (font_p1,158,127,4,"Normal Game");
				end
				
				write_int (font_p1,29,74,4,&FPS_TARGET);
				write_int (font_p1,134,74,4,&SKIP);
			end
			
			if (paso==3) 
				put_screen (washinofail,900);
				fich1 = load_fpg("kof\kyo.fpg");
				pegata (30,75,899,0,0,100,z,85,file);//tubo de FPS
				pegata (134,75,899,0,0,100,z,86,file);//tubo de SKIP
				pegata (64,74,graph,0,0,100,-2,76,file);//boton - FPS
				pegata (85,74,graph,0,0,100,-2,77,file);//boton + FPS
				pegata (168,74,graph,0,0,100,-2,78,file);//boton - SKIP
				pegata (189,74,graph,0,0,100,-2,79,file);//boton + SKIP
				pegata (55,119,graph,0,0,100,-2,80,file);//boton truco
				pegata (55,135,graph,0,0,100,-2,81,file);//boton no truco
				
				pegata (264,178,graph,0,0,100,-2,82,file);//boton default
				pegata (264,195,graph,0,0,100,-2,83,file);//boton save
				pegata (264,212,graph,0,0,100,-2,87,file);//boton exit
				
				pegata (55,185,graph,0,0,100,-2,146,file);//boton normal
				pegata (55,201,graph,0,0,100,-2,147,file);//boton scale
				pegata (55,217,graph,0,0,100,-2,148,file);//boton scanlines
				pegata (158,185,graph,0,0,100,-2,149,file);//boton fullscreen
				pegata (158,201,graph,0,0,100,-2,150,file);//boton window
				
				pegata (264,114,graph,0,0,65,-2,84,file);//kyo demo
			end
			
			if (FPS_TARGET < 40) FPS_TARGET = 40; end
			if (FPS_TARGET > 80) FPS_TARGET = 80; end
			if (SKIP < 0) SKIP = 0; end
			if (SKIP > 5) SKIP = 5; end
			
			set_fps (FPS_TARGET, SKIP);
			
			if ((control_cancel and bloker==0) or estado==1)
				fade_off ();
				delete_text(all_text);
				signal(type pegata,s_kill);
				unload_fpg(fich1); fich1=0;
				mouse.graph=0;
				clear_screen();
				put_screen (0,mapa);
				y=60; paso=0;
				estado=0;
				option=OPT_MAIN;
			end
		end
		
		if (option==OPT_SOUND)//sound test
			write (font_menu,SIZEX2,30,4,"Sound Options");
			if (cd_ok!=2) write (font_p2,SIZEX2,224,4,PUSH_SCAPE_TO_OPTION); end
			if (paso==1) 
				s_kyo2=load_snd("kof\snd\kyo2.wav",0);
				s_kyo3=load_snd("kof\snd\kyo3.wav",0);
				s_kyo4=load_snd("kof\snd\kyo4.wav",0);
				s_kyo5=load_snd("kof\snd\kyo5.wav",0);
				s_kyo6=load_snd("kof\snd\kyo6.wav",0);
				s_kyo7=load_snd("kof\snd\kyo7.wav",0);
				s_kyo8=load_snd("kof\snd\kyo8.wav",0);
				s_kyo9=load_snd("kof\snd\kyo9.wav",0);
				s_kyo10=load_snd("kof\snd\kyo10.wav",0);
				s_kyo11=load_snd("kof\snd\kyo11.wav",0);
				s_kyo12=load_snd("kof\snd\kyo12.wav",0);
				s_kyo13=load_snd("kof\snd\kyo13.wav",0);
				s_kyo14=load_snd("kof\snd\kyo14.wav",0);
				s_kyo15=load_snd("kof\snd\kyo15.wav",0);
				s_kyo16=load_snd("kof\snd\kyo16.wav",0);
				s_kyo17=load_snd("kof\snd\kyo17.wav",0);
				s_kyo18=load_snd("kof\snd\kyo18.wav",0);
				s_kyo19=load_snd("kof\snd\kyo19.wav",0);
				s_kyo20=load_snd("kof\snd\kyo20.wav",0);
				s_kyo21=load_snd("kof\snd\kyo21.wav",0);
				s_kyo22=load_snd("kof\snd\kyo22.wav",0);
				s_kyo23=load_snd("kof\snd\kyo23.wav",0);
				s_kyo24=load_snd("kof\snd\kyo24.wav",0);
				s_kyo25=load_snd("kof\snd\kyo25.wav",0);
				s_kyo26=load_snd("kof\snd\kyo26.wav",0);
				s_kyo27=load_snd("kof\snd\kyo27.wav",0);
				s_kyo28=load_snd("kof\snd\kyo28.wav",0);
				s_kyo29=load_snd("kof\snd\kyo29.wav",0);
				s_kyo30=load_snd("kof\snd\kyo30.wav",0);
				s_kyo31=load_snd("kof\snd\kyo31.wav",0);
				s_kyo32=load_snd("kof\snd\kyo32.wav",0);
				luchador=FIGHTER_KYO;
				/* BENNU /*
				cd_drive = cd_getinfo(0);
				/* GEMIX /*
				cd_drive= cd_info(0, cd_tracks);
				/**/
			end
			if (paso==5)
				pegata (-160,60,999,c_screen,0,100,10,74,file);
			end
			if (paso==10)
				pegata (-160,90,999,c_screen,0,100,10,74,file);
			end
			if (paso==15 and cd_drive)
				pegata (-160,120,999,c_screen,0,100,10,74,file);
			end
			if (paso>25)
				if (cd_ok<2)
					if (control(agachar) and !cursor_bloker)
						y+=30;
						play_snd (s_select,512,256);
						if (y>90 and !cd_drive) y=60; end
						if (y>120) y=60; end
						cursor_bloker = true;
					end
					if (control(saltar) and !cursor_bloker)
						y-=30;
						play_snd (s_select,512,256);
						if (y<60)
							if (!cd_drive) y=90; else y=120; end
						end
						cursor_bloker = true;
					end
					if (!control(saltar) and ! control(agachar))
						cursor_bloker = false;
					end
					
					if (control(retroceder))  
						x1++;
						if (y1==0 or x1>(fps_target>>1))
							vida--;
							if (y==90) he_dado--; end
							y1=1;
						end
					end
					if (control(avanzar)) 
						x0++;
						if (y0==0 or x0>(fps_target>>1))
							vida++;
							if (y==90) he_dado++; end
							y0=1;
						end
					end
					if (not control(avanzar) and
						not control(retroceder))
						y0=0; y1=0; x0=0; x1=0;
					end
				end
			end
			if (control_cancel and cd_ok<2 and bloker==0)
				
				if (is_playing_snd(s_voice1))
					stop_snd (s_voice1);
				end
				
				if (luchador==FIGHTER_KYO)
					unload_snd(s_kyo2);unload_snd(s_kyo3);unload_snd(s_kyo4);
					unload_snd(s_kyo5);unload_snd(s_kyo6);unload_snd(s_kyo7);
					unload_snd(s_kyo8);unload_snd(s_kyo9);unload_snd(s_kyo10);
					unload_snd(s_kyo11);unload_snd(s_kyo12);unload_snd(s_kyo13);
					unload_snd(s_kyo14);unload_snd(s_kyo15);unload_snd(s_kyo16);
					unload_snd(s_kyo17);unload_snd(s_kyo18);unload_snd(s_kyo19);
					unload_snd(s_kyo20);unload_snd(s_kyo21);unload_snd(s_kyo22);
					unload_snd(s_kyo23);unload_snd(s_kyo24);unload_snd(s_kyo25);
					unload_snd(s_kyo26);unload_snd(s_kyo27);unload_snd(s_kyo28);
					unload_snd(s_kyo29);unload_snd(s_kyo30);unload_snd(s_kyo31);
					unload_snd(s_kyo32);
				end
				if (luchador==FIGHTER_ATHENA)
					unload_snd(s_ath10);unload_snd(s_ath11);unload_snd(s_ath12);
					unload_snd(s_ath13);unload_snd(s_ath14);unload_snd(s_ath15);
					unload_snd(s_ath16);unload_snd(s_ath17);unload_snd(s_ath18);
					unload_snd(s_ath19);unload_snd(s_ath20);unload_snd(s_ath21);
					unload_snd(s_ath22);unload_snd(s_ath23);unload_snd(s_ath24);
					unload_snd(s_ath25);unload_snd(s_ath26);unload_snd(s_ath27);
					unload_snd(s_ath28);unload_snd(s_ath29);unload_snd(s_ath30);
				end
				if (luchador==FIGHTER_IORI)
					unload_snd(s_iori1);unload_snd(s_iori2);unload_snd(s_iori3);
					unload_snd(s_iori4);unload_snd(s_iori5);unload_snd(s_iori6);
					unload_snd(s_iori7);unload_snd(s_iori8);unload_snd(s_iori9);
					unload_snd(s_iori10);unload_snd(s_iori11);unload_snd(s_iori12);
					unload_snd(s_iori13);unload_snd(s_iori14);unload_snd(s_iori15);
					unload_snd(s_iori16);unload_snd(s_iori17);unload_snd(s_iori18);
					unload_snd(s_iori19);unload_snd(s_iori20);unload_snd(s_iori21);
					unload_snd(s_iori22);unload_snd(s_iori23);unload_snd(s_iori24);
					unload_snd(s_iori25);unload_snd(s_iori26);unload_snd(s_iori27);
					unload_snd(s_iori28);unload_snd(s_iori29);unload_snd(s_iori30);
				end
				if (luchador==FIGHTER_TERRY)
					unload_snd(s_terry4);unload_snd(s_terry5);unload_snd(s_terry6);
					unload_snd(s_terry7);unload_snd(s_terry8);unload_snd(s_terry9);
					unload_snd(s_terry10);unload_snd(s_terry11);unload_snd(s_terry12);
					unload_snd(s_terry13);unload_snd(s_terry14);unload_snd(s_terry15);
					unload_snd(s_terry16);unload_snd(s_terry17);unload_snd(s_terry18);
					unload_snd(s_terry19);unload_snd(s_terry20);unload_snd(s_terry21);
					unload_snd(s_terry22);unload_snd(s_terry23);unload_snd(s_terry24);
				end
				if (luchador==FIGHTER_KASUMI)
					unload_snd(s_kasumi1);unload_snd(s_kasumi2);unload_snd(s_kasumi3);
					unload_snd(s_kasumi4);unload_snd(s_kasumi5);unload_snd(s_kasumi6);
					unload_snd(s_kasumi7);unload_snd(s_kasumi8);unload_snd(s_kasumi9);
					unload_snd(s_kasumi10);unload_snd(s_kasumi11);unload_snd(s_kasumi12);
					unload_snd(s_kasumi13);unload_snd(s_kasumi14);unload_snd(s_kasumi15);
					unload_snd(s_kasumi16);unload_snd(s_kasumi17);unload_snd(s_kasumi18);
					unload_snd(s_kasumi19);unload_snd(s_kasumi20);unload_snd(s_kasumi21);
				end
				if (luchador==FIGHTER_TAKUMA)
					unload_snd(s_takuma3);unload_snd(s_takuma22);unload_snd(s_takuma23);
					unload_snd(s_takuma4);unload_snd(s_takuma5);unload_snd(s_takuma6);
					unload_snd(s_takuma7);unload_snd(s_takuma8);unload_snd(s_takuma9);
					unload_snd(s_takuma10);unload_snd(s_takuma11);unload_snd(s_takuma12);
					unload_snd(s_takuma13);unload_snd(s_takuma14);unload_snd(s_takuma15);
					unload_snd(s_takuma16);unload_snd(s_takuma17);unload_snd(s_takuma18);
					unload_snd(s_takuma19);unload_snd(s_takuma20);unload_snd(s_takuma21);
				end
				if (luchador==FIGHTER_K)
					unload_snd(s_k3);unload_snd(s_k4);unload_snd(s_k5);
					unload_snd(s_k6);unload_snd(s_k7);unload_snd(s_k8);
					unload_snd(s_k9);unload_snd(s_k11);unload_snd(s_k12);
					unload_snd(s_k13);unload_snd(s_k14);unload_snd(s_k15);
					unload_snd(s_k16);unload_snd(s_k17);unload_snd(s_k18);
					unload_snd(s_k19);
				end
				if (luchador==FIGHTER_KULA)
					unload_snd(s_kura6);unload_snd(s_kura7);unload_snd(s_kura8);
					unload_snd(s_kura9);unload_snd(s_kura11);unload_snd(s_kura12);
					unload_snd(s_kura13);unload_snd(s_kura14);unload_snd(s_kura15);
					unload_snd(s_kura16);unload_snd(s_kura17);unload_snd(s_kura18);
					unload_snd(s_kura19);unload_snd(s_kura20);unload_snd(s_kura21);
					unload_snd(s_kura22);unload_snd(s_kura23);unload_snd(s_kura24);
					unload_snd(s_kura25);unload_snd(s_kura26);unload_snd(s_kura27);
					unload_snd(s_kura28);unload_snd(s_kura29);unload_snd(s_kura30);
					unload_snd(s_kura31);unload_snd(s_kura32);
				end
				if (luchador==FIGHTER_K9999)
					unload_snd(s_tetsuo5);unload_snd(s_tetsuo6);unload_snd(s_tetsuo7);
					unload_snd(s_tetsuo8);unload_snd(s_tetsuo9);unload_snd(s_tetsuo10);
					unload_snd(s_tetsuo11);unload_snd(s_tetsuo12);unload_snd(s_tetsuo13);
					unload_snd(s_tetsuo14);unload_snd(s_tetsuo15);unload_snd(s_tetsuo16);
					unload_snd(s_tetsuo17);unload_snd(s_tetsuo18);unload_snd(s_tetsuo19);
					unload_snd(s_tetsuo20);unload_snd(s_tetsuo21);unload_snd(s_tetsuo22);
					unload_snd(s_tetsuo23);
				end
				
				frame(200);
				save_data (S_SOUND);
				fade_off ();
				delete_text(all_text);
				signal(type pegata,s_kill);
				y=60; paso=0;
				option=OPT_MAIN;
				
			end
		end
		
		//configuracion de teclado o pad
		if (option==OPT_KEYS)
			write (font_menu,SIZEX2,30,4,"Control Configuration");
			
			if (estado==0)
				write (font_p2,SIZEX2,224,4,PUSH_SCAPE_TO_OPTION);
			end
			if (paso==5)
				pegata (-160,60,999,c_screen,0,100,10,92,file);
			end
			if (paso==10)
				pegata (-160,90,999,c_screen,0,100,10,92,file);
			end
			if (paso==15)
				pegata (-160,120,999,c_screen,0,100,10,92,file);
			end
			if (paso==20)
				pegata (-160,150,999,c_screen,0,100,10,92,file);
			end
			
			if (paso>25)
				// estado 0: eligiendo elemento a configurar
				if (estado==0)
					if (control(agachar) and !cursor_bloker)
						play_snd (s_select,512,256);
						y = 60 + (((y-60)+150)%120);
						cursor_bloker = true;
					end
					if (control(saltar) and !cursor_bloker)
						y = 60 + (((y-60)+90)%120);
						play_snd (s_select,512,256);
						cursor_bloker = true;
					end
					if (!control(saltar) and !control(agachar))
						cursor_bloker = false;
					end
					
				// estado 1: configurando botones	
				elseif (estado==1)
					draw_z = 0;
					draw (3, 1, 10, 0, 0, SIZEY2-30, SIZEX, SIZEY2+20);
					
					// title
					if (y==60)  write (font_p3,SIZEX2,100,4,"KEYBOARD PLAYER 1"); end
					if (y==90)  write (font_p3,SIZEX2,100,4,"KEYBOARD PLAYER 2"); end
					if (y==120) write (font_p3,SIZEX2,100,4,"CONTROL PAD PLAYER 1"); end
					if (y==150) write (font_p3,SIZEX2,100,4,"CONTROL PAD PLAYER 2"); end
					
					// configuracion teclado
					if (y==60 or y==90)
						if (accion==0) write (fontstriker1,120,130,3,"Up"); end
						if (accion==1) write (fontstriker1,120,130,3,"Down"); end
						if (accion==2) write (fontstriker1,120,130,3,"Left"); end
						if (accion==3) write (fontstriker1,120,130,3,"Right"); end
						if (accion==4) write (fontstriker1,120,130,3,"Weak punch"); end
						if (accion==5) write (fontstriker1,120,130,3,"Weak kick"); end
						if (accion==6) write (fontstriker1,120,130,3,"Evade"); end
						if (accion==7) write (fontstriker1,120,130,3,"Strong punch"); end
						if (accion==8) write (fontstriker1,120,130,3,"Strong Kick"); end
						if (accion==9) write (fontstriker1,120,130,3,"Blow Away"); end
						
						if (scan_code!=0 and scan_code<>28 and scan_code<>14 and scan_code<>1)
							write (fontstriker1,200,130,5,"OK");
							
							if (y==60) kmap1[accion++] = scan_code; end
							if (y==90) kmap2[accion++] = scan_code; end
							if (accion>9) 
								estado=0; paso=0; 
								save_data (S_CONTROL);
							end
							frame (3600);
							
						else
							if ((game_frame%FPS_TARGET)<(FPS_TARGET>>1))
								write (font_p1,200,130,5,"_");
							end
						end
					end
					
					// configuracion pad
					if (y==120 or y==150)
						if (accion==0) write (fontstriker1,120,130,3,"Weak punch"); end
						if (accion==1) write (fontstriker1,120,130,3,"Weak kick"); end
						if (accion==2) write (fontstriker1,120,130,3,"Evade"); end
						if (accion==3) write (fontstriker1,120,130,3,"Strong punch"); end
						if (accion==4) write (fontstriker1,120,130,3,"Strong Kick"); end
						if (accion==5) write (fontstriker1,120,130,3,"Blow Away"); end
						if (accion==6) write (fontstriker1,120,130,3,"Start button"); end
						if (accion==7) write (fontstriker1,120,130,3,"Cancel button"); end					
						
						if (y==120)
							for (button_code=0; button_code<pad_1; button_code++)
								if (get_joy_button(0,button_code))
									break;
								end	
							end
							if (button_code==pmap1[6] and accion==0) button_code=pad_1; end
							
							if (button_code<pad_1)
								write (fontstriker1,200,130,5,"OK");
								pmap1[accion++] = button_code;
								if (accion>7) 
									estado=0; paso=0; 
									save_data (S_CONTROL);
								end
								frame (3600);
							else
								if ((game_frame%FPS_TARGET)<(FPS_TARGET>>1))
									write (font_p1,200,130,5,"_");
								end
							end
						else
							for (button_code=0; button_code<pad_2; button_code++)
								if (get_joy_button(1,button_code))
									break;
								end	
							end
							if (button_code==pmap2[6] and accion==0) button_code=pad_2; end
							
							if (button_code<pad_2)
								write (fontstriker1,200,130,5,"OK");
								pmap2[accion++] = button_code;
								if (accion>7) 
									estado=0; paso=0; 
									save_data (S_CONTROL);
								end
								frame (3600);
							else
								if ((game_frame%FPS_TARGET)<(FPS_TARGET>>1))
									write (font_p1,200,130,5,"_");
								end
							end
						end
					end					
				end
			end
			if (control_cancel and bloker==0)
				if (estado==1) 
					//estado=0; paso=0; bloker=1;
				else	
					fade_off (); delete_text(all_text);
					signal(type pegata,s_kill);
					y=60; paso=0; 
					option=OPT_MAIN;
				end	
			end
		end
		
		if (option==OPT_GFXS)//Test de graficos
			write (font_menu,SIZEX2,30,4,"Graphic Test");
			if (paso==5)
				pegata (-160,60,999,c_screen,0,100,10,93,file);
			end
			if (estado==1)
				fade_off (); delete_text(all_text);
				signal(type pegata,s_kill);
				y=60; paso=0; estado=0; 
				option=OPT_MAIN;
			end
		end
		if (control_cancel or control_enter) bloker=1; end
		if (!control_cancel and !control_enter) bloker=0; end
	end
end

process partido(estado);

begin
	blanquear=1;
	loop
		delete_text(all_text);
		frame;
		paso++;
		if (estado==0)
			if (paso==1)
				fade(200,200,200,1);
				if (!cd_ok) set_musica_volume(s_music1, 128); end
				poder=128;
			end
			if (poder>0)
				poder-=2;
				if (!cd_ok) set_musica_volume(s_music1, poder); end
			end
			
			if (paso>50 and fading==0)
				if (cd_ok==false)
					unload_musica (s_musica);
				else
					stop_cd();
				end
				set_musica_volume (s_music1, 128);
				if (id_luchador1.setwin>id_luchador2.setwin) wins1++; end
				if (id_luchador2.setwin>id_luchador1.setwin) wins2++; end
				estado=1; paso=0;
			end
		end
		if (estado==1 or estado==2)
			if (paso==FPS_TARGET)
			    signal (type prota, s_freeze_tree);
			    signal (type pegata, s_freeze);
				unload_fpg(fich1); unload_fpg(fich2);
				unload_fpg(fichstr1);unload_fpg(fichstr2);
				unload_fpg(fichstg); unload_fpg(fichad);
				unload_fpg(fichtxt); unload_graph(plano1);
				unload_graph(plano2);
				
				if (id_luchador1.luchador==FIGHTER_KYO or id_luchador2.luchador==FIGHTER_KYO or
					id_luchador1.luchador==FIGHTER_KYO94 or id_luchador2.luchador==FIGHTER_KYO94)
					unload_snd(s_kyo1);unload_snd(s_kyo2);unload_snd(s_kyo3);
					unload_snd(s_kyo4);unload_snd(s_kyo5);unload_snd(s_kyo6);
					unload_snd(s_kyo7);unload_snd(s_kyo8);unload_snd(s_kyo9);
					unload_snd(s_kyo10);unload_snd(s_kyo11);unload_snd(s_kyo12);
					unload_snd(s_kyo13);unload_snd(s_kyo14);unload_snd(s_kyo15);
					unload_snd(s_kyo16);unload_snd(s_kyo17);unload_snd(s_kyo18);
					unload_snd(s_kyo19);unload_snd(s_kyo20);unload_snd(s_kyo21);
					unload_snd(s_kyo22);unload_snd(s_kyo23);unload_snd(s_kyo24);
					unload_snd(s_kyo25);unload_snd(s_kyo26);unload_snd(s_kyo27);
					unload_snd(s_kyo28);unload_snd(s_kyo29);unload_snd(s_kyo30);
					unload_snd(s_kyo31);unload_snd(s_kyo32);
				end
				if (id_luchador1.luchador==FIGHTER_ATHENA or id_luchador2.luchador==FIGHTER_ATHENA)
					unload_snd(s_ath1);unload_snd(s_ath2);unload_snd(s_ath3);
					unload_snd(s_ath4);unload_snd(s_ath5);unload_snd(s_ath6);
					unload_snd(s_ath7);unload_snd(s_ath8);unload_snd(s_ath9);
					unload_snd(s_ath10);unload_snd(s_ath11);unload_snd(s_ath12);
					unload_snd(s_ath13);unload_snd(s_ath14);unload_snd(s_ath15);
					unload_snd(s_ath16);unload_snd(s_ath17);unload_snd(s_ath18);
					unload_snd(s_ath19);unload_snd(s_ath20);unload_snd(s_ath21);
					unload_snd(s_ath22);unload_snd(s_ath23);unload_snd(s_ath24);
					unload_snd(s_ath25);unload_snd(s_ath26);unload_snd(s_ath27);
					unload_snd(s_ath28);unload_snd(s_ath29);unload_snd(s_ath30);
				end
				
				if (id_luchador1.luchador==FIGHTER_IORI or id_luchador2.luchador==FIGHTER_IORI or
					id_luchador1.luchador==FIGHTER_CRIMSON or id_luchador2.luchador==FIGHTER_CRIMSON)
					unload_snd(s_iori1);unload_snd(s_iori2);unload_snd(s_iori3);
					unload_snd(s_iori4);unload_snd(s_iori5);unload_snd(s_iori6);
					unload_snd(s_iori7);unload_snd(s_iori8);unload_snd(s_iori9);
					unload_snd(s_iori10);unload_snd(s_iori11);unload_snd(s_iori12);
					unload_snd(s_iori13);unload_snd(s_iori14);unload_snd(s_iori15);
					unload_snd(s_iori16);unload_snd(s_iori17);unload_snd(s_iori18);
					unload_snd(s_iori19);unload_snd(s_iori20);unload_snd(s_iori21);
					unload_snd(s_iori22);unload_snd(s_iori23);unload_snd(s_iori24);
					unload_snd(s_iori25);unload_snd(s_iori26);unload_snd(s_iori27);
					unload_snd(s_iori28);unload_snd(s_iori29);unload_snd(s_iori30);
					unload_snd(s_iori31);unload_snd(s_iori32);
				end
				
				if (id_luchador1.luchador==FIGHTER_TERRY or id_luchador2.luchador==FIGHTER_TERRY or
					id_luchador1.luchador==FIGHTER_TERRY94 or id_luchador2.luchador==FIGHTER_TERRY94)
					unload_snd(s_terry1);unload_snd(s_terry2);unload_snd(s_terry3);
					unload_snd(s_terry4);unload_snd(s_terry5);unload_snd(s_terry6);
					unload_snd(s_terry7);unload_snd(s_terry8);unload_snd(s_terry9);
					unload_snd(s_terry10);unload_snd(s_terry11);unload_snd(s_terry12);
					unload_snd(s_terry13);unload_snd(s_terry14);unload_snd(s_terry15);
					unload_snd(s_terry16);unload_snd(s_terry17);unload_snd(s_terry18);
					unload_snd(s_terry19);unload_snd(s_terry20);unload_snd(s_terry21);
					unload_snd(s_terry22);unload_snd(s_terry23);unload_snd(s_terry24);
					unload_snd(s_terry25);
				end
				if (id_luchador1.luchador==FIGHTER_KASUMI or id_luchador2.luchador==FIGHTER_KASUMI)
					unload_snd(s_kasumi1);unload_snd(s_kasumi2);unload_snd(s_kasumi3);
					unload_snd(s_kasumi4);unload_snd(s_kasumi5);unload_snd(s_kasumi6);
					unload_snd(s_kasumi7);unload_snd(s_kasumi8);unload_snd(s_kasumi9);
					unload_snd(s_kasumi10);unload_snd(s_kasumi11);unload_snd(s_kasumi12);
					unload_snd(s_kasumi13);unload_snd(s_kasumi14);unload_snd(s_kasumi15);
					unload_snd(s_kasumi16);unload_snd(s_kasumi17);unload_snd(s_kasumi18);
					unload_snd(s_kasumi19);unload_snd(s_kasumi20);unload_snd(s_kasumi21);
					unload_snd(s_kasumi22);unload_snd(s_kasumi23);
				end
				if (id_luchador1.luchador==FIGHTER_TAKUMA or id_luchador2.luchador==FIGHTER_TAKUMA)
					unload_snd(s_takuma1);unload_snd(s_takuma2);unload_snd(s_takuma3);
					unload_snd(s_takuma4);unload_snd(s_takuma5);unload_snd(s_takuma6);
					unload_snd(s_takuma7);unload_snd(s_takuma8);unload_snd(s_takuma9);
					unload_snd(s_takuma10);unload_snd(s_takuma11);unload_snd(s_takuma12);
					unload_snd(s_takuma13);unload_snd(s_takuma14);unload_snd(s_takuma15);
					unload_snd(s_takuma16);unload_snd(s_takuma17);unload_snd(s_takuma18);
					unload_snd(s_takuma19);unload_snd(s_takuma20);unload_snd(s_takuma21);
					unload_snd(s_takuma22);unload_snd(s_takuma23);unload_snd(s_takuma24);
				end
				if (id_luchador1.luchador==FIGHTER_K or id_luchador2.luchador==FIGHTER_K)
					unload_snd(s_k1);unload_snd(s_k2);unload_snd(s_k3);
					unload_snd(s_k4);unload_snd(s_k5);unload_snd(s_k6);
					unload_snd(s_k7);unload_snd(s_k8);unload_snd(s_k9);
					unload_snd(s_k10);unload_snd(s_k11);unload_snd(s_k12);
					unload_snd(s_k13);unload_snd(s_k14);unload_snd(s_k15);
					unload_snd(s_k16);unload_snd(s_k17);unload_snd(s_k18);
					unload_snd(s_k19);unload_snd(s_k20);unload_snd(s_k21);
					unload_snd(s_k22);unload_snd(s_k23);
				end
				if (id_luchador1.luchador==FIGHTER_KULA or id_luchador2.luchador==FIGHTER_KULA)
					unload_snd(s_kura1);unload_snd(s_kura2);unload_snd(s_kura3);
					unload_snd(s_kura4);unload_snd(s_kura5);unload_snd(s_kura6);
					unload_snd(s_kura7);unload_snd(s_kura8);unload_snd(s_kura9);
					unload_snd(s_kura10);unload_snd(s_kura11);unload_snd(s_kura12);
					unload_snd(s_kura13);unload_snd(s_kura14);unload_snd(s_kura15);
					unload_snd(s_kura16);unload_snd(s_kura17);unload_snd(s_kura18);
					unload_snd(s_kura19);unload_snd(s_kura20);unload_snd(s_kura21);
					unload_snd(s_kura22);unload_snd(s_kura23);unload_snd(s_kura24);
					unload_snd(s_kura25);unload_snd(s_kura26);unload_snd(s_kura27);
					unload_snd(s_kura28);unload_snd(s_kura29);unload_snd(s_kura30);
					unload_snd(s_kura31);unload_snd(s_kura32);unload_snd(s_kura33);
					unload_snd(s_kura34);unload_snd(s_kura35);unload_snd(s_kura36);
					unload_snd(s_kura37);unload_snd(s_kura38);unload_snd(s_kura39);
					unload_snd(s_kura40);
				end
				if (id_luchador1.luchador==FIGHTER_K9999 or id_luchador2.luchador==FIGHTER_K9999)
					unload_snd(s_tetsuo1);unload_snd(s_tetsuo2);unload_snd(s_tetsuo3);
					unload_snd(s_tetsuo4);unload_snd(s_tetsuo5);unload_snd(s_tetsuo6);
					unload_snd(s_tetsuo7);unload_snd(s_tetsuo8);unload_snd(s_tetsuo9);
					unload_snd(s_tetsuo10);unload_snd(s_tetsuo11);unload_snd(s_tetsuo12);
					unload_snd(s_tetsuo13);unload_snd(s_tetsuo14);unload_snd(s_tetsuo15);
					unload_snd(s_tetsuo16);unload_snd(s_tetsuo17);unload_snd(s_tetsuo18);
					unload_snd(s_tetsuo19);unload_snd(s_tetsuo20);unload_snd(s_tetsuo21);
					unload_snd(s_tetsuo22);unload_snd(s_tetsuo23);
				end
				if ((id_luchador1.luchador==FIGHTER_KYO and striker1==2) or
					(id_luchador2.luchador==FIGHTER_KYO and striker2==2) or
					(id_luchador1.luchador==FIGHTER_KYO94 and striker1==2) or
					(id_luchador2.luchador==FIGHTER_KYO94 and striker2==2))
					unload_snd(s_beni1);unload_snd(s_beni2);
				end
				if ((id_luchador1.luchador==FIGHTER_KYO and striker1==1) or
					(id_luchador2.luchador==FIGHTER_KYO and striker2==1) or
					(id_luchador1.luchador==FIGHTER_KYO94 and striker1==1) or
					(id_luchador2.luchador==FIGHTER_KYO94 and striker2==1))
					unload_snd(s_ryu1);unload_snd(s_ryu2);unload_snd(s_ryu3);
				end
				if ((id_luchador1.luchador==FIGHTER_KYO and striker1==0) or
					(id_luchador2.luchador==FIGHTER_KYO and striker2==0) or
					(id_luchador1.luchador==FIGHTER_KYO94 and striker1==0) or
					(id_luchador2.luchador==FIGHTER_KYO94 and striker2==0))
					unload_snd(s_kazuki1);unload_snd(s_kazuki2);
					unload_snd(s_kazuki3);unload_snd(s_kazuki4);
				end
				if ((id_luchador1.luchador==FIGHTER_ATHENA and striker1==0) or
					(id_luchador2.luchador==FIGHTER_ATHENA and striker2==0))
					unload_snd(s_akari1);unload_snd(s_akari2);
				end
				if ((id_luchador1.luchador==FIGHTER_ATHENA and striker1==1) or
					(id_luchador2.luchador==FIGHTER_ATHENA and striker2==1))
					unload_snd(s_jin1);unload_snd(s_jin2);
				end
				if ((id_luchador1.luchador==FIGHTER_ATHENA and striker1==2) or
					(id_luchador2.luchador==FIGHTER_ATHENA and striker2==2))
					unload_snd(s_hotaru1);unload_snd(s_hotaru2);
					unload_snd(s_hotaru3);
				end
				if ((id_luchador1.luchador==FIGHTER_IORI and striker1==0) or
					(id_luchador2.luchador==FIGHTER_IORI and striker2==0))
					unload_snd(s_gen1);unload_snd(s_gen2);
				end
				if ((id_luchador1.luchador==FIGHTER_IORI and striker1==1) or
					(id_luchador2.luchador==FIGHTER_IORI and striker2==1))
					unload_snd(s_blanka1);
				end
				if ((id_luchador1.luchador==FIGHTER_IORI and striker1==2) or
					(id_luchador2.luchador==FIGHTER_IORI and striker2==2))
					unload_snd(s_eiji1);unload_snd(s_eiji2);
				end
				if ((id_luchador1.luchador==FIGHTER_IORI  and striker1==3) or
					(id_luchador2.luchador==FIGHTER_K9999 and striker2==3) or
					(id_luchador1.luchador==FIGHTER_K9999 and striker1==3) or
					(id_luchador2.luchador==FIGHTER_IORI  and striker2==3))
					unload_snd(s_indi1);unload_snd(s_indi2);
					unload_snd(s_indi4);unload_snd(s_indi5);
				end
				if ((id_luchador1.luchador==FIGHTER_TERRY and striker1==0) or
					(id_luchador2.luchador==FIGHTER_TERRY and striker2==0) or
					(id_luchador1.luchador==FIGHTER_TERRY94 and striker1==0) or
					(id_luchador2.luchador==FIGHTER_TERRY94 and striker2==0))
					unload_snd(s_galford1);unload_snd(s_galford2);
					unload_snd(s_galford3);
				end
				if ((id_luchador1.luchador==FIGHTER_TERRY and striker1==2) or
					(id_luchador2.luchador==FIGHTER_TERRY and striker2==2) or
					(id_luchador1.luchador==FIGHTER_TERRY94 and striker1==2) or
					(id_luchador2.luchador==FIGHTER_TERRY94 and striker2==2))
					unload_snd(s_joe1);unload_snd(s_joe2);unload_snd(s_joe3);
				end
				if ((id_luchador1.luchador==FIGHTER_CRIMSON and striker1==1) or
					(id_luchador2.luchador==FIGHTER_CRIMSON and striker2==1))
					unload_snd(s_kaede1);unload_snd(s_kaede2);
					unload_snd(s_kaede3);unload_snd(s_kaede4);
				end
				if ((id_luchador1.luchador==FIGHTER_KASUMI and striker1==0) or
					(id_luchador2.luchador==FIGHTER_KASUMI and striker2==0))
					unload_snd(s_nakoruru1);unload_snd(s_nakoruru2);
					unload_snd(s_nakoruru3);
				end
				if ((id_luchador1.luchador==FIGHTER_KASUMI and striker1==1) or
					(id_luchador2.luchador==FIGHTER_KASUMI and striker2==1))
					unload_snd(s_ryoko1);unload_snd(s_ryoko2);
				end
				if ((id_luchador1.luchador==FIGHTER_KASUMI and striker1==2) or
					(id_luchador2.luchador==FIGHTER_KASUMI and striker2==2))
					unload_snd(s_xianfei1);unload_snd(s_xianfei2);
				end
				if ((id_luchador1.luchador==FIGHTER_TAKUMA and striker1==0) or
					(id_luchador2.luchador==FIGHTER_TAKUMA and striker2==0))
					unload_snd(s_jubei1);unload_snd(s_jubei2);
					unload_snd(s_jubei3);
				end
				if ((id_luchador1.luchador==FIGHTER_TAKUMA and striker1==1) or
					(id_luchador2.luchador==FIGHTER_TAKUMA and striker2==1))
					unload_snd(s_tung1);unload_snd(s_tung2);
				end
				if ((id_luchador1.luchador==FIGHTER_TAKUMA and striker1==2) or
					(id_luchador2.luchador==FIGHTER_TAKUMA and striker2==2))
					unload_snd(s_ryo1);unload_snd(s_ryo2);
				end
				if ((id_luchador1.luchador==FIGHTER_K and striker1==0) or
					(id_luchador2.luchador==FIGHTER_K and striker2==0))
					unload_snd(s_setsuna1);unload_snd(s_setsuna2);
					unload_snd(s_setsuna3);
				end
				if ((id_luchador1.luchador==FIGHTER_K and striker1==1) or
					(id_luchador2.luchador==FIGHTER_K and striker2==1))
					unload_snd(s_hanzo1);unload_snd(s_hanzo2);
					unload_snd(s_hanzo3);unload_snd(s_hanzo4);
				end
				if ((id_luchador1.luchador==FIGHTER_K and striker1==2) or
					(id_luchador2.luchador==FIGHTER_K and striker2==2))
					unload_snd(s_max1);unload_snd(s_max2);
				end
				if ((id_luchador1.luchador==FIGHTER_KULA and striker1==1) or
					(id_luchador2.luchador==FIGHTER_KULA and striker2==1))
					unload_snd(s_yuki1);unload_snd(s_yuki2);
					unload_snd(s_yuki3);
				end
				if ((id_luchador1.luchador==FIGHTER_K9999 and striker1==1) or
					(id_luchador2.luchador==FIGHTER_K9999 and striker2==1))
					unload_snd(s_krisad1);unload_snd(s_krisad2);
				end
				
				if (escenario==1 or escenario==4)
					unload_snd(s_stage1);unload_snd(s_stage2);
				end
				
				if (game_mode==MODE_ARCADE)
					if (id_luchador1.setwin+1=>asaltos)
						eliminados[id_luchador2.luchador]=1;
					end
				end
				
				set_fps (FPS_TARGET, SKIP);
				striker1=0; striker2=0; blanquear=0;
				choose1=1; choose2=1; round=1;
				cputype=0;display=0;damegi1=0;damegi2=0;
				maxcombo1=0;maxcombo2=0; rojo=0;
				
				fich_select=load_fpg("kof\select.fpg");
				from nuevo_estado=0 to 255;
					pintura[nuevo_estado]=1 mod 256;
				end
				convert_palette (fich_game,999,&pintura);
				
				stop_scroll(0);
				delete_draw(all_drawing);
				
				game_frame = 0;
				if (estado==1)
					game_state = ST_SELECT;
				else
					game_state = ST_MAIN;
				end	
			end
		end
	end
end

process pausa();

private
	box1, box2, box3;
	bTrazas;
	iFramePause;

begin
	priority = -10;
	file=fich_game;
	bPausa = true;
	
	signal(type conjelador,s_freeze);
	signal(father,s_freeze);
	signal(type extra_scroll,s_freeze);
	signal(type straiker,s_freeze);
	signal(type substrk,s_freeze);
	signal(type hadoken,s_freeze);
	signal(type orlas,s_freeze);
	signal(type crimsom,s_freeze);
	signal(type hielo,s_freeze);
	signal(type hit_stars,s_freeze);
	signal(type special_star,s_freeze);
	signal(type texto_inflar,s_freeze);
	signal(id_luchador1,s_freeze_tree);
	signal(id_luchador2,s_freeze_tree);
	if (game_mode==MODE_TRAINING)
		signal(type combos,s_sleep);
	end
	
	play_snd (s_select,512,256);
	bloker=1;
	estado_juego=0;
	
	if (game_mode==MODE_TRAINING)//trainig
		if (id_luchador1.vida==MAX_LIFE) vida=0;
		else vida=1; end
		if (id_luchador1.infinitypow==0) power=0;
		else power=1; end
	end
	
	blend_frame = 1;
	draw_z = -255;
	z = -256;	
	tipo_control = control_menu;
	
	loop
		frame;
		iFramePause++;
		draw_hud_text (true);
		
		
		if (iFramePause>1)
		    delete_draw (box1);
	       	delete_draw (box2);
	       	delete_draw (box3);
		end
		
		if (cd_ok==true)
			if (is_playing_cd()==0)
				if (id_luchador1.luchador==FIGHTER_KYO) play_cd(track[0],0); end
				if (id_luchador1.luchador==FIGHTER_ATHENA) play_cd(track[1],0); end
				if (id_luchador1.luchador==FIGHTER_IORI) play_cd(track[2],0); end
				if (id_luchador1.luchador==FIGHTER_TERRY or id_luchador1.luchador==FIGHTER_TERRY94)
					play_cd(track[4],0);
				end
				if (id_luchador1.luchador==FIGHTER_CRIMSON)  play_cd(track[3],0);  end
				if (id_luchador1.luchador==FIGHTER_KYO94)  play_cd(track[5],0);  end
				if (id_luchador1.luchador==FIGHTER_KASUMI)  play_cd(track[6],0);  end
				if (id_luchador1.luchador==FIGHTER_TAKUMA)  play_cd(track[7],0);  end
				if (id_luchador1.luchador==FIGHTER_K)  play_cd(track[8],0);  end
				if (id_luchador1.luchador==FIGHTER_KULA) play_cd(track[9],0);  end
				if (id_luchador1.luchador==FIGHTER_K9999) play_cd(track[10],0); end
			end
		end
		if (game_mode==MODE_TRAINING)//training
			
			graph=38; x=100;
			if (estado==0) y=100; end
			if (estado==1) y=110; end
			if (estado==2) y=120; end
			if (estado==3) y=130; end
			
			if (control(saltar) and blend_frame==0) 
				estado=(estado+4-1)%4; blend_frame=1; 
			end
			
			if (control(agachar) and blend_frame==0) 
				estado=(estado+4+1)%4; blend_frame=1; 
			end
			
			if (!control(saltar) and !control(agachar) and 
				!control(avanzar) and !control(retroceder))
				blend_frame=0;
			end
			
			if (estado==0)
				if ((control(avanzar) or control(retroceder)) and blend_frame==0) 
					rojo=1-rojo; blend_frame=1; 
				end
			end
			if (estado==1)
				if ((control(avanzar) or control(retroceder)) and blend_frame==0) 
					power=1-power; blend_frame=1;
				end	
			end
			if (estado==2)
				if (control(retroceder) and blend_frame==0) 
					cputype=(cputype+4-1)%4; blend_frame=1;
					/* BENNU_WIZ /*
					if (cputype==3) cputype=0; end
					/**/
				end
				if (control(avanzar) and blend_frame==0) 
					cputype=(cputype+4+1)%4; blend_frame=1; 
					/* BENNU_WIZ /*
					if (cputype==3) cputype=2; end
					/**/
				end 
			end
			if (estado==3)
				if ((control(avanzar) or control(retroceder)) and blend_frame==0) 
					display=1-display; blend_frame=1;
				end	
			end
			
			box1 = draw (3, 1, 8, 0, 0, SIZEY2-30, SIZEX, SIZEY2+20);
			box2 = draw (3, 1, 8, 0, 0, SIZEY2-60, SIZEX, SIZEY2-40);
			box3 = draw (3, 1, 8, 0, 0, SIZEY2+30, SIZEX, SIZEY2+50);
			write (fontstriker1,110,100,3,"Gauge");
			write (fontstriker1,110,110,3,"Pow Type");
			write (fontstriker1,110,120,3,"CPU Action");
			write (fontstriker1,110,130,3,"Info");
		//	write (font_p2,160,86,4,"Practice Menu");
			
			if (rojo==0) 	write (fontstriker2,210,100,5,"Full"); end
			if (rojo==1) 	write (fontstriker2,210,100,5,"Red"); end
			if (power==0) 	write (fontstriker2,210,110,5,"Normal"); end
			if (power==1) 	write (fontstriker2,210,110,5,"Infinity"); end
			if (cputype==0) write (fontstriker2,210,120,5,"Stand");end
			if (cputype==1) write (fontstriker2,210,120,5,"Jump");end
			if (cputype==2) write (fontstriker2,210,120,5,"Crouch");end
			if (cputype==3) write (fontstriker2,210,120,5,"Manual");end
			if (display==0) write (fontstriker2,210,130,5,"Off"); end
			if (display==1) write (fontstriker2,210,130,5,"On"); end
			/* BENNU /*
			write (fontstriker3,game_frame%SIZEX, SIZEY2-50+1, 4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			write (fontstriker3,SIZEX - (game_frame%SIZEX), SIZEY2+40+1, 4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			/* BENNU_WII /*
			write (fontstriker3,game_frame%SIZEX, SIZEY2-50+1, 4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			write (fontstriker3,SIZEX - (game_frame%SIZEX), SIZEY2+40+1, 4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			/* BENNU_WIZ /*
			write (fontstriker3,game_frame%SIZEX, SIZEY2-50+1, 4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			write (fontstriker3,SIZEX - (game_frame%SIZEX), SIZEY2+40+1, 4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			/* BENNU_GCW0 /**/
			write (fontstriker3,game_frame%SIZEX, SIZEY2-50+1, 4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			write (fontstriker3,SIZEX - (game_frame%SIZEX), SIZEY2+40+1, 4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			/* GEMIX /*
			write (fontstriker3,(game_frame%(SIZEX-16))-SIZEX+22, SIZEY2-50+1, 3,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			write (fontstriker3,(SIZEX - (game_frame%(SIZEX-16)))-SIZEX+12, SIZEY2+40+1, 3,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");			
			/**/
			
		else
			box1 = draw (3, 1, 8, 0, 0, SIZEY2-18, 1, SIZEY2);
			box2 = draw (3, 1, 8, 1, 0, SIZEY2-18, 2, SIZEY2);
			box3 = draw (3, 1, 8, 2, 0, SIZEY2-18, SIZEX, SIZEY2);
			/* BENNU /*
			write (fontstriker3,game_frame%SIZEX,112,4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			/* BENNU_WII /*
			write (fontstriker3,game_frame%SIZEX,112,4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			/* BENNU_WIZ /*
			write (fontstriker3,game_frame%SIZEX,112,4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			/* BENNU_GCW0 /**/
			write (fontstriker3,game_frame%SIZEX,112,4,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			/* GEMIX /*
			write (fontstriker3,(game_frame%(SIZEX-16))-SIZEX+22,112,3,"PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!! PAUSED!!");
			/**/
			
		end
		
		
		if (bTrazas)
			// trazas
			write (0,2,170,3,"estado");
			write (0,2,180,3,"intensidad");
			write (0,2,190,3,"paso");
			write (0,2,200,3,"he_dado");
			write_int (0,90,170,5,&id_luchador1.estado);
			write_int (0,90,180,5,&id_luchador1.intensidad);
			write_int (0,90,190,5,&id_luchador1.paso);
			write_int (0,90,200,5,&id_luchador1.he_dado);
			write (0,SIZEX-90,170,3,"estado");
			write (0,SIZEX-90,180,3,"intensidad");
			write (0,SIZEX-90,190,3,"paso");
			write (0,SIZEX-90,200,3,"he_dado");
			write_int (0,SIZEX-2,170,5,&id_luchador2.estado);
			write_int (0,SIZEX-2,180,5,&id_luchador2.intensidad);
			write_int (0,SIZEX-2,190,5,&id_luchador2.paso);
			write_int (0,SIZEX-2,200,5,&id_luchador2.he_dado);
		end
		if (key(_t) and bloker==0)
			bTrazas = 1-bTrazas; bloker=1;
		end
		
		
		if ((control_enter or control_cancel) and bloker==0)
			if (game_mode==MODE_TRAINING)//training
				if (rojo==0) id_luchador1.vida=MAX_LIFE; end
				if (rojo==1) id_luchador1.vida=DANGER_LIFE-1;  end
				if (power==0) id_luchador1.infinitypow=0; end
				if (power==1) id_luchador1.infinitypow=1; end
				if (cputype==1) id_luchador2.inc_x=0; end
				if (cputype==3)
					if (rojo==0) id_luchador2.vida=MAX_LIFE; end
					if (rojo==1) id_luchador2.vida=DANGER_LIFE-1;  end
					if (power==0) id_luchador2.infinitypow=0; end
					if (power==1) id_luchador2.infinitypow=1; end
				else
					id_luchador2.infinitypow=0;
				end
				signal(type combos,s_wakeup);
			end
			
			signal(father,s_wakeup);
			signal(type extra_scroll,s_wakeup);
			signal(type special_star,s_wakeup);
			signal(type texto_inflar,s_wakeup);			
			signal(type hadoken,s_wakeup);
			signal(type hit_stars,s_wakeup);
			signal(type hielo,s_wakeup);
			signal(type crimsom,s_wakeup);
			signal(type conjelador,s_wakeup);
			signal(type straiker,s_wakeup);
			signal(type substrk,s_wakeup);
			signal(id_luchador1,s_wakeup_tree);
			signal(id_luchador2,s_wakeup_tree);
			
			play_snd (s_selectdo,512,256);
			delete_draw (box1);
			delete_draw (box2);
			delete_draw (box3);
			estado_juego=1; bloker=1;
			bPausa = false;
			return;
		end
		if (!control_enter and !control_cancel and !key(_t)) bloker=0; end
		
		/* BENNU_WIZ /*
		if (show_volume_frames<120)
			write_int (0,SIZEX-15,5,2,&master_volume);
			write (0,SIZEX-40,5,2,"VOL");
			write (0,SIZEX-5,5,2,"%");
		end		
		/**/
		
	end
end

process exit_screen ()

begin
	file = fich_game;
	graph = 998;
	priority = -10;
	x0 = SIZEX2-70; 
	x = SIZEX2; 
	y=SIZEY2;
	z = -9999;
	
	tipo_control = control_menu;
	
	signal (id_constructor, s_freeze);
	switch (game_state)		
		// ST_INIT
		case ST_INIT, ST_LOGO, ST_TITLE, ST_MAIN, ST_OPTIONS, ST_GAME_OVER:
			signal (id_option, s_freeze_tree);
			signal (type pegata, s_freeze_tree);
		end
		case ST_SELECT:
			signal (id_select, s_freeze_tree);
		end
		case ST_PLAYING:
			if (!bPausa) 
				signal (type combate, s_freeze_tree); 
			else
				signal (type pausa, s_freeze);
				signal (type pegata, s_freeze_tree);
				signal (type stage_obj, s_freeze_tree);
			end
		end
	end	
	
	play_snd (s_select,512,256);
	size=0; estado=0;
	
	loop
		if (estado==0)
			if (size < 100)
				size+=((100-size)/5)+1;
				
			else
				pegata (x0-1,SIZEY2+13,997,c_screen,0,100,z-1,-1,fich_game);
				
				get_controls();
				if ((control(avanzar) or control(retroceder)) and bloker==0)
					if (x0==SIZEX2-70) x0=SIZEX2+30; else x0=SIZEX2-70; end
					bloker = 1;
				end
				
				if ((control_cancel or control_enter or control_home or control(cuatro)) and bloker==0)
					estado=1;				
				end
				if (((control_enter or control(cuatro)) and x0==SIZEX2-70) and bloker==0)
					exit("", 0);
				end
				if (!control_enter and !control_cancel and !control_home and 
					!control(avanzar) and !control(retroceder) and !control(cuatro))
					bloker = 0;
				end
			end
		else	
			size-=(size/5)+1;
			if (size<=0)
				signal (id_constructor, s_wakeup);
				switch (game_state)
					// ST_INIT
					case ST_INIT, ST_LOGO, ST_TITLE, ST_MAIN, ST_GAME_OVER:
						signal (type pegata, s_wakeup_tree);
						id_constructor.bloker=1;
					end
					case ST_OPTIONS:
						signal (id_option, s_wakeup_tree);
						signal (type pegata, s_wakeup_tree);
						id_option.bloker=1;
					end
					case ST_SELECT:
						signal (id_select, s_wakeup_tree);
					end
					case ST_PLAYING:
						if (!bPausa) 
							signal (type combate, s_wakeup_tree);
						else
							signal (type pausa, s_wakeup);
							signal (type pegata, s_wakeup_tree);
							signal (type stage_obj, s_wakeup_tree);
						end
					end
				end
				
				p1_button_a = p1_button_b = p1_button_c = 0;
				p1_button_x = p1_button_y = p1_button_z = 0;
				p1_button_start = p1_button_cancel = 0;
				
				p2_button_a = p2_button_b = p2_button_c = 0;
				p2_button_x = p2_button_y = p2_button_z = 0;
				p2_button_start = p2_button_cancel = 0;
				
				control_enter = control_cancel = control_home = 0;
				
				return;
			end
		end
		frame;
	end
end

process control (accion)
	
begin
	if ((estado_juego==0 and father.tipo_control!=control_menu) or 
		(game_mode==MODE_TRAINING and father==id_luchador2 and cputype<>3))
		return(0);
	end
	
	switch(father.tipo_control)
		
		case control_teclado1:			
			switch(accion)
				case saltar:
					if (father.m8_step==1) 
						return(key(kmap1[1]) or p1_joy_y>JOY_RANGE or p1_hat_down);
					else 
						return(key(kmap1[0]) or p1_joy_y<-JOY_RANGE or p1_hat_up); 
					end
				end
				case agachar:
					if (father.m8_step==1) 
						return(key(kmap1[0]) or p1_joy_y<-JOY_RANGE or p1_hat_up);
					else 
						return(key(kmap1[1]) or p1_joy_y>JOY_RANGE or p1_hat_down); 
					end
				end
				case avanzar:
					if ((father.flags==1 and father.m8_step<>1) or
						(father.flags==0 and father.m8_step==1))
						return(key(kmap1[2]) or (p1_joy_x<-JOY_RANGE) or p1_hat_left);
					end
					if ((father.flags==1 and father.m8_step==1) or
						(father.flags==0 and father.m8_step<>1))
						return(key(kmap1[3]) or (p1_joy_x>JOY_RANGE) or p1_hat_right);
					end
				end
				case retroceder:
					if ((father.flags==1 and father.m8_step<>1) or
						(father.flags==0 and father.m8_step==1))
						return(key(kmap1[3]) or (p1_joy_x>JOY_RANGE) or p1_hat_right);
					end
					if ((father.flags==1 and father.m8_step==1) or
						(father.flags==0 and father.m8_step<>1))
						return(key(kmap1[2]) or (p1_joy_x<-JOY_RANGE) or p1_hat_left);
					end
				end
				
				case l_punch:
					return (p1_button_a and !(p1_button_b or p1_button_x or p1_button_y));
				end
				case s_punch:
					return (p1_button_x and !(p1_button_a or p1_button_b or p1_button_y));
				end
				case l_kick:
					return (p1_button_b and !(p1_button_a or p1_button_x or p1_button_y));
				end
				case s_kick:
					return (p1_button_y and !(p1_button_a or p1_button_b or p1_button_x));
				end
				
				case rodar:
					return ((p1_button_a and p1_button_b and !(p1_button_x or p1_button_y)) or p1_button_c);
				end
				case toss:
					return ((p1_button_x and p1_button_y and !(p1_button_a or p1_button_b)) or p1_button_z);
				end
				case guasa:
					return (p1_button_b and p1_button_x and !(p1_button_a or p1_button_y));
				end
				case striker:
					return (p1_button_a and p1_button_y and !(p1_button_b or p1_button_x));
				end
				case charge:
					return (p1_button_a and p1_button_b and p1_button_x);
				end
				case cuatro:
					return ((p1_button_a and p1_button_b and p1_button_x and p1_button_y) or (p1_button_c and p1_button_z));
				end
			end
		end
		case control_teclado2:
			switch(accion)
				case saltar:
					if (father.m8_step==1) 
						return(key(kmap2[1]) or p2_joy_y>JOY_RANGE or p2_hat_down);
					else 
						return(key(kmap2[0]) or p2_joy_y<-JOY_RANGE or p2_hat_up); 
					end
				end
				
				case agachar:
					if (father.m8_step==1) 
						return(key(kmap2[0]) or p2_joy_y<-JOY_RANGE or p2_hat_up);
					else 
						return(key(kmap2[1]) or p2_joy_y>JOY_RANGE or p2_hat_down);
					end
				end
				case avanzar:
					if ((father.flags==1 and father.m8_step<>1) or
						(father.flags==0 and father.m8_step==1))
						return(key(kmap2[2]) or (p2_joy_x<-JOY_RANGE) or p2_hat_left);
					end
					if ((father.flags==1 and father.m8_step==1) or
						(father.flags==0 and father.m8_step<>1))
						return(key(kmap2[3]) or (p2_joy_x>JOY_RANGE) or p2_hat_right);
					end
				end
				case retroceder:
					if ((father.flags==1 and father.m8_step<>1) or
						(father.flags==0 and father.m8_step==1))
						return(key(kmap2[3]) or (p2_joy_x>JOY_RANGE) or p2_hat_right);
					end
					if ((father.flags==1 and father.m8_step==1) or
						(father.flags==0 and father.m8_step<>1))
						return(key(kmap2[2]) or (p2_joy_x<-JOY_RANGE) or p2_hat_left);
					end
				end
				case l_punch:
					return (p2_button_a and !(p2_button_b or p2_button_x or p2_button_y));
				end
				case s_punch:
					return (p2_button_x and !(p2_button_a or p2_button_b or p2_button_y));
				end
				case l_kick:
					return (p2_button_b and !(p2_button_a or p2_button_x or p2_button_y));
				end
				case s_kick:
					return (p2_button_y and !(p2_button_a or p2_button_b or p2_button_x));
				end
				
				case rodar:
					return ((p2_button_a and p2_button_b and !(p2_button_x or p2_button_y)) or p2_button_c);
				end
				case toss:
					return ((p2_button_x and p2_button_y and !(p2_button_a or p2_button_b)) or p2_button_z);
				end
				case guasa:
					return (p2_button_b and p2_button_x and !(p2_button_a or p2_button_y));
				end
				case striker:
					return (p2_button_a and p2_button_y and !(p2_button_b or p2_button_x));
				end
				case charge:
					return (p2_button_a and p2_button_b and p2_button_x);
				end
				case cuatro:
					return ((p2_button_a and p2_button_b and p2_button_x and p2_button_y) or (p2_button_c and p2_button_z));
				end
			end
		end
		
		case control_menu:
			switch(accion)
				case saltar:
					return (key(kmap2[0]) or p2_joy_y<-JOY_RANGE or p2_hat_up or
							key(kmap1[0]) or p1_joy_y<-JOY_RANGE or p1_hat_up); 
				end
				case agachar:
					return (key(kmap2[1]) or p2_joy_y>JOY_RANGE or p2_hat_down or
							key(kmap1[1]) or p1_joy_y>JOY_RANGE or p1_hat_down);
				end
				case avanzar:
					return (key(kmap2[3]) or p2_joy_x>JOY_RANGE or p2_hat_right or
							key(kmap1[3]) or p1_joy_x>JOY_RANGE or p1_hat_right);
				end
				case retroceder:
					return (key(kmap2[2]) or p2_joy_x<-JOY_RANGE or p2_hat_left or
							key(kmap1[2]) or p1_joy_x<-JOY_RANGE or p1_hat_left);
				end
				case l_punch:
					return (p1_button_a or p2_button_a);
				end
				case s_punch:
					return (p1_button_x or p2_button_x);
				end
				case l_kick:
					return (p1_button_b or p2_button_b);
				end
				case s_kick:
					return (p1_button_y or p2_button_y);
				end
				case rodar:
					return (p1_button_c or p2_button_c);
				end
				case toss:
					return (p1_button_z or p2_button_z);
				end
				
				case cuatro:
					return (p1_button_a or p1_button_b or p1_button_x or p1_button_y or 
							p2_button_a or p2_button_b or p2_button_x or p2_button_y);
				end
			end
		end
		
		case control_cpu:
			switch (father.estado)
            //en parado
            case _normal:
				switch (accion)
					case s_punch:
						if (id_luchador1.tipo_ataque==COJER)
							return(1);
						end
						if (abs(id_luchador1.x-id_luchador2.x)<55) 
							if (id_luchador2.estado>29 and id_luchador2<36) return(1); end
							if (id_luchador1.flags==id_luchador2.flags and rand(0,12)==0) return(1); end
						end
					end
					case agachar:
						if (id_luchador1.tipo_ataque==BAJO and rand(0,4)==1)
							return(1);
						end
					end
					case retroceder:
						if (id_luchador1.tipo_ataque==NORMAL or
							id_luchador1.tipo_ataque==ALTO)
							if (abs(id_luchador1.x-id_luchador2.x)<120 and 
								id_luchador1.flags!=id_luchador2.flags and
								rand(0,5)==1)
								return(1);
							end
						end
					end
					case avanzar:
						if ((id_luchador1.estado<10 or id_luchador1.tipo_ataque==VULN) and
							(rand(0,30)==0 and abs(id_luchador1.x-id_luchador2.x)<120))
							return;
						end
						if (abs(id_luchador1.x-id_luchador2.x)>119)
							return;
						end
						if (id_luchador1.estado==_pajaritos or
							id_luchador1.estado==_burla)
							return;
						end
					end
					case charge:
						if (id_luchador1.estado==_charge)
							return(1);
						end
					end
					case rodar:
						if (id_luchador1.magia)
							if (id_luchador2.flags and id_luchador1.magia.x<id_luchador2.x)
								return(1);
							end
							if (id_luchador2.flags==0 and id_luchador1.magia.x>id_luchador2.x)
								return(1);
							end
						end
					end
					case striker:
						if (id_luchador1.estado==_recibir_toss)
							if ((id_luchador2.luchador==FIGHTER_TERRY ||
								id_luchador2.luchador==FIGHTER_TERRY94) and
								striker2==0)
								return(1);
							end
						end
					end
				end
				if (id_luchador1.y<200 and abs(id_luchador1.x-id_luchador2.x)<120 and
					id_luchador1.estado<>_recibir_toss and id_luchador2.m8_step<>2)
					
					if ((id_luchador2.power==74 or id_luchador2.vida<DANGER_LIFE) and
						rand(0,10)==0)
						if (id_luchador2.luchador==FIGHTER_KYO or
							id_luchador2.luchador==FIGHTER_ATHENA or
							id_luchador2.luchador==FIGHTER_CRIMSON or
							id_luchador2.luchador==FIGHTER_KYO94 or
							id_luchador2.luchador==FIGHTER_K9999)
							id_luchador2.nuevo_estado=_special2;
						end
						if (id_luchador2.luchador==FIGHTER_TERRY or
							id_luchador2.luchador==FIGHTER_KASUMI or
							id_luchador2.luchador==FIGHTER_TERRY94 or
							id_luchador2.luchador==FIGHTER_KULA)
							id_luchador2.nuevo_estado=_special1;
						end
						if (id_luchador2.power==74 and id_luchador2.vida<DANGER_LIFE)
							id_luchador2.super_sp=1;
						end
					else
						if (id_luchador2.luchador<>FIGHTER_KASUMI)
							if (game_frame%32==0)
								id_luchador2.nuevo_estado=_shoryuken;
								id_luchador2.intensidad=2;
								if (id_luchador2.luchador==FIGHTER_K)
									id_luchador2.intensidad=2;
								end
							end	
						else
							if (game_frame%24==0)
								if (id_luchador1.tipo_ataque==ALTO)
									id_luchador2.nuevo_estado=_u_kick;
									id_luchador2.intensidad=2;
								end
							end
						end
					end
				end
				if (id_luchador1.y<200 and abs(id_luchador1.x-id_luchador2.x)<120 and
					(id_luchador1.estado==_recibir_toss and id_luchador1.vulnerable>0) and
					id_luchador2.m8_step<>2)
					
					if ((id_luchador2.power==74 or id_luchador2.vida<DANGER_LIFE) and
						rand(0,5)==0 and id_luchador2.m8_step<>2)
						if (id_luchador2.luchador==FIGHTER_KYO or
							id_luchador2.luchador==FIGHTER_ATHENA or
							id_luchador2.luchador==FIGHTER_CRIMSON or
							id_luchador2.luchador==FIGHTER_KYO94)
							id_luchador2.nuevo_estado=_special2;
						end
						if (id_luchador2.luchador==FIGHTER_TERRY or
							id_luchador2.luchador==FIGHTER_KASUMI or
							id_luchador2.luchador==FIGHTER_TERRY94 or
							id_luchador2.luchador==FIGHTER_K or
							id_luchador2.luchador==FIGHTER_K9999)
							id_luchador2.nuevo_estado=_special1;
						end
						if (id_luchador2.power==74 and id_luchador2.vida<DANGER_LIFE)
							id_luchador2.super_sp=1;
						end
						
					elseif (game_frame%32==0)
						switch (id_luchador2.luchador)
							case FIGHTER_KYO:
								if (abs(id_luchador1.x-id_luchador2.x)<100)
									id_luchador2.nuevo_estado=_shoryuken;
									id_luchador2.intensidad=2;
								else
									id_luchador2.nuevo_estado=_uatras_kick;
									id_luchador2.intensidad=2;
								end
							end
							case FIGHTER_ATHENA:
								if (id_luchador1.inc_y>2)
									id_luchador2.nuevo_estado=_shoryuken;
									id_luchador2.intensidad=2;
								end
							end
							case FIGHTER_IORI, FIGHTER_CRIMSON, FIGHTER_KYO94:
								id_luchador2.nuevo_estado=_shoryuken;
								id_luchador2.intensidad=2;
							end
							case FIGHTER_TERRY, FIGHTER_TERRY94:
								if (id_luchador1.vulnerable==1)
									id_luchador2.nuevo_estado=_uatras_kick;
									id_luchador2.intensidad=2;
								end
							end
							case FIGHTER_KASUMI:
								if (id_luchador1.tipo_ataque==ALTO)
									id_luchador2.nuevo_estado=_u_kick;
									id_luchador2.intensidad=2;
								end
							end
							case FIGHTER_TAKUMA:
								if (abs(id_luchador1.x-id_luchador2.x)<100)
									id_luchador2.nuevo_estado=_shoryuken;
									id_luchador2.intensidad=2;
								else
									id_luchador2.nuevo_estado=_ayuken;
									id_luchador2.intensidad=2;
								end
							end
							case FIGHTER_K, FIGHTER_KULA:
								if (abs(id_luchador1.x-id_luchador2.x)<100)
									id_luchador2.nuevo_estado=_shoryuken;
									id_luchador2.intensidad=1;
								else
									id_luchador2.nuevo_estado=_uatras_kick;
									id_luchador2.intensidad=2;
								end
							end
							case FIGHTER_K9999:
								if (id_luchador1.vulnerable==1)
									id_luchador2.nuevo_estado=_shoryuken;
									id_luchador2.intensidad=1;
								end
							end
						end
					end
				end
				
				// lanza bolas
				if (abs(id_luchador1.x-id_luchador2.x)>=120 and (rand(0,32)==1))
					if (id_luchador2.luchador==FIGHTER_ATHENA)
						id_luchador2.nuevo_estado=_uatras_punch;
						id_luchador2.intensidad=2;
					end
					if (id_luchador2.luchador==FIGHTER_TERRY or
						id_luchador2.luchador==FIGHTER_TERRY94 or
						id_luchador2.luchador==FIGHTER_TAKUMA or
						id_luchador2.luchador==FIGHTER_KYO94 or
						id_luchador2.luchador==FIGHTER_IORI)
						id_luchador2.nuevo_estado=_ayuken;
						id_luchador2.intensidad=2;
					end
				end
            end
            case _avanzar:
				switch (accion)
					case s_punch:
						if (abs(id_luchador1.x-id_luchador2.x)<50)
							return(1);
						end
						if (abs(id_luchador1.x-id_luchador2.x)<55 and
							id_luchador2.estado>29 and id_luchador2<36)
							return(1);
						end
					end
					case agachar:
						if (id_luchador1.tipo_ataque==BAJO)
							return(1);
						end
					end
					case saltar:
						if (id_luchador1.estado==_retroceder and
							abs(id_luchador1.x-id_luchador2.x)<160 and rand(0,4)==0)
							return(1);
						end
					end
					case avanzar:
						if ((id_luchador1.estado<10 or id_luchador1.tipo_ataque==VULN) and
							abs(id_luchador1.x-id_luchador2.x)<140 and
							rand(0,20)<>0)
							return(1);
						end
					end
					case retroceder:
						if (id_luchador1.tipo_ataque==NORMAL or
							id_luchador1.tipo_ataque==ALTO)
							return(1);
						end
					end
				end
			end
            case _retroceder:
				switch (accion)
					case agachar:
						if (id_luchador1.tipo_ataque==BAJO)
							return(1);
						end
					end
					case retroceder:
						if (id_luchador1.tipo_ataque==NORMAL or
							id_luchador1.tipo_ataque==ALTO)
							if (id_luchador1.flags!=id_luchador2.flags)
								return(1);
							end
						end
					end
					case s_punch:
						if (abs(id_luchador1.x-id_luchador2.x)<70 and 
							id_luchador1.flags==id_luchador2.flags and
							rand(0,12)==0)
							return(1);
						end
					end
					case s_kick:
						if (id_luchador1.he_dado==-1 and rand(0,9)==0)
							return(1);
						end
					end
				end
            end
            case _correr:
				switch (accion)
					case avanzar:
						if (abs(id_luchador1.x-id_luchador2.x)>50 and
							((id_luchador2.flags and id_luchador1.x<id_luchador2.x) or
							(id_luchador2.flags==0 and id_luchador1.x>id_luchador2.x)) and
							// si es atacado se frena
							!(id_luchador1.tipo_ataque==NULO and abs(id_luchador1.x-id_luchador2.x)<140 and rand(0,24)==0)
							)
							return(1);
						end
					end
					case s_punch:
						if (id_luchador1.luchador==FIGHTER_ATHENA or
							id_luchador1.luchador==FIGHTER_IORI or
							id_luchador1.luchador==FIGHTER_TERRY or
							id_luchador1.luchador==FIGHTER_CRIMSON or
							id_luchador1.luchador==FIGHTER_KASUMI or
							id_luchador1.luchador==FIGHTER_TAKUMA or
							id_luchador1.luchador==FIGHTER_TERRY94 or
							id_luchador1.luchador==FIGHTER_K9999)
							if (abs(id_luchador1.x-id_luchador2.x)<80 and
								id_luchador2.y==220 and (rand(0,10)==0))
								return(1);
							end
						end
					end
					case s_kick:
						if (id_luchador1.luchador==FIGHTER_KYO or
							id_luchador1.luchador==FIGHTER_KYO94 or
							id_luchador1.luchador==FIGHTER_K or
							id_luchador1.luchador==FIGHTER_KULA)
							if (abs(id_luchador1.x-id_luchador2.x)<80 and
								id_luchador2.y==220 and (rand(0,10)==0))
								return(1);
							end
						end
					end
					case striker:
						if (id_luchador2.luchador<>FIGHTER_TERRY and
							id_luchador2.luchador<>FIGHTER_TERRY94 and striker2!=0)
							if (rand(0,12)==0)
								return(1);
							end
						end
					end
					case rodar:
						if (id_luchador1.magia)
							if (id_luchador2.flags and id_luchador1.magia.x<id_luchador2.x)
								return(1);
							end
							if (id_luchador2.flags==0 and id_luchador1.magia.x>id_luchador2.x)
								return(1);
							end
						end
						if (id_luchador1.tipo_ataque<>NULO and 
							id_luchador1.flags!=id_luchador2.flags and
							abs(id_luchador1.x-id_luchador2.x)<140 and
							rand(0,24)==0)
							return(1);
						end
					end
					case saltar:
						if (id_luchador1.luchador==FIGHTER_IORI or
							id_luchador1.luchador==FIGHTER_TERRY or
							id_luchador1.luchador==FIGHTER_KASUMI or
							id_luchador1.luchador==FIGHTER_TERRY94 or
							id_luchador1.luchador==FIGHTER_KULA or
							id_luchador1.luchador==FIGHTER_K9999)
							if (abs(id_luchador1.x-id_luchador2.x)>90 and
								abs(id_luchador1.x-id_luchador2.x)<120 and
								id_luchador2.y==220 and (rand(0,10)==0))
								return(1);
							end
						end
					end
				end
            end
            case _agachar:
				id_luchador2.estado=_agachadoguardia;
            end
            case _agachadoguardia:
				switch (accion)
					case agachar:
						if (id_luchador1.tipo_ataque==BAJO or
							id_luchador1.estado==_agachado or
							id_luchador1.estado==_agachadoguardia)
							return(1);
						end
					end
					case retroceder:
						return(1);
					end
					case l_kick:
						if (abs(id_luchador1.x-id_luchador2.x)<69)
							if (id_luchador1.he_dado==-1)
								return(1);
							end
						end
					end
					case s_kick:
						if (abs(id_luchador1.x-id_luchador2.x)>70)
							if (id_luchador1.he_dado==-1)
								return(1);
							end
						end
					end
				end
            end
            case _saltar:
				switch (accion)
					case avanzar:
						if (abs(id_luchador1.x-id_luchador2.x)>60)
							return(1);
						end
					end			
					case saltar:
						if (abs(id_luchador1.x-id_luchador2.x)>120)
							return(1);
						end
					end
					case s_kick:
						if (id_luchador2.luchador<>11)
							if (abs(id_luchador1.x-id_luchador2.x)<75)
								return(1);
							end
						end
					end
					case s_punch:
						if (id_luchador2.luchador==11)
							if (abs(id_luchador1.x-id_luchador2.x)<75)
								return(1);
							end
						end
					end
				end
            end
            case _lkickaga:
				if (id_luchador2.he_dado==0 and id_luchador2.m8_step<>2)
					switch (id_luchador2.luchador)
						case 0:
							random=rand(0,4);
							if (random==0)
								id_luchador2.nuevo_estado=_shoryuken;
								id_luchador2.intensidad=1;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_u_kick;
								id_luchador2.intensidad=1;
							end
						end
						case 1:
							id_luchador2.nuevo_estado=_ayuken;
							id_luchador2.intensidad=1;
						end
						case 2:
							id_luchador2.nuevo_estado=_uatras_punch;
							id_luchador2.intensidad=2;
						end
						case 3:
							random=rand(0,1);
							id_luchador2.nuevo_estado=_uatras_kick;
							id_luchador2.intensidad=1;
						end
						case 4:
							id_luchador2.nuevo_estado=_uatras_punch;
							id_luchador2.intensidad=2;
						end
						case 5:
							random=rand(0,1);
							if (random==1)
								id_luchador2.nuevo_estado=_shoryuken;
								id_luchador2.intensidad=2;
							end
						end
						case 8:
							id_luchador2.nuevo_estado=_uatras_kick;
							id_luchador2.intensidad=1;
						end
						case 9:
							random=rand(0,1);
							if (random==0)
								id_luchador2.nuevo_estado=_ayuken;
								id_luchador2.intensidad=1;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_shoryuken;
								id_luchador2.intensidad=1;
							end
						end
						case 10:
							id_luchador2.nuevo_estado=_shoryuken;
							id_luchador2.intensidad=1;
						end
						case 11:
							random=rand(0,1);
							if (random==0)
								id_luchador2.nuevo_estado=_ayuken;
								id_luchador2.intensidad=1;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_u_kick;
								id_luchador2.intensidad=1;
							end
						end
					end
				else
					switch (accion)
						case agachar:
							if (abs(id_luchador1.x-id_luchador2.x)<65)
								return(1);
							end
						end
						case l_kick:
							if (abs(id_luchador1.x-id_luchador2.x)<65)
								return(1);
							end
						end
					end
				end
			end
            case _spunch1:
				if (id_luchador2.he_dado<>1 and id_luchador2.m8_step<>2)
					switch (id_luchador2.luchador)
						/*case FIGHTER_IORI:
							id_luchador2.nuevo_estado=_uatras_kick;
							id_luchador2.intensidad=1;
							return 0;
						end*/
						case FIGHTER_KYO94:
							id_luchador2.nuevo_estado=_ayuken;
							id_luchador2.intensidad=2;
						end
						case FIGHTER_K:
							id_luchador2.nuevo_estado=_ayuken;
							id_luchador2.intensidad=1;
						end
					end
				end
            end
            case _skick1:
				if (id_luchador2.he_dado<>1 and id_luchador2.m8_step<>2)
					switch (id_luchador2.luchador)
						case FIGHTER_KYO94:
							if (id_luchador2.intensidad==2 and
								id_luchador2.paso>12)
								random=rand(0,1);
								if (random==0)
									id_luchador2.nuevo_estado=_satras_kick;
									id_luchador2.intensidad=2;
								end
								if (random==1)
									id_luchador2.nuevo_estado=_shoryuken;
									id_luchador2.intensidad=2;
								end
							end
						end
						case FIGHTER_TERRY94:
							id_luchador2.nuevo_estado=_u_kick;
							id_luchador2.intensidad=2;
						end
					end
				end
            end
            case _spunch2:
				if (id_luchador2.he_dado<>1 and id_luchador2.m8_step<>2)
					switch (id_luchador2.luchador)
						case FIGHTER_KYO:
							random=rand(0,4);
							if (random>1)
								id_luchador2.nuevo_estado=_ayuken;
								id_luchador2.intensidad=1;
							end
							if (random==0)
								id_luchador2.nuevo_estado=_u_kick;
								id_luchador2.intensidad=2;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_uatras_kick;
								id_luchador2.intensidad=rand(1,2);
							end
						end
						case FIGHTER_ATHENA:
							id_luchador2.nuevo_estado=_ayuken;
							id_luchador2.intensidad=2;
						end
						case FIGHTER_IORI:
							random=rand(0,1);
							if (random==0)
								id_luchador2.nuevo_estado=_uatras_punch;
								id_luchador2.intensidad=2;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_uatras_kick;
								id_luchador2.intensidad=rand(1,2);
							end
						end
						case FIGHTER_TERRY:
							random=rand(0,1);
							if (random==0)
								id_luchador2.nuevo_estado=_uatras_punch;
								id_luchador2.intensidad=1;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_u_kick;
								id_luchador2.intensidad=1;
							end
						end
						case FIGHTER_CRIMSON:
							id_luchador2.nuevo_estado=_uatras_punch;
							id_luchador2.nuevo_paso=1;
							id_luchador2.intensidad=2;
						end
						case FIGHTER_KYO94:
							if (id_luchador2.he_dado==0)
								id_luchador2.nuevo_estado=_skick1;
								id_luchador2.nuevo_paso=3;
								id_luchador2.intensidad=2;
							else
								id_luchador2.nuevo_estado=_ayuken;
								id_luchador2.intensidad=2;
							end
						end
						case FIGHTER_KASUMI:
							random=rand(0,1);
							if (random==0)
								id_luchador2.nuevo_estado=_uatras_punch;
								id_luchador2.intensidad=2;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_shoryuken;
								id_luchador2.intensidad=2;
							end
						end
						case FIGHTER_TAKUMA:
							random=rand(0,1);
							if (random==0)
								id_luchador2.nuevo_estado=_shoryuken;
								id_luchador2.intensidad=2;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_uatras_kick;
								id_luchador2.intensidad=1;
							end
						end
						case FIGHTER_TERRY94:
							id_luchador2.nuevo_estado=_uatras_kick;
							id_luchador2.intensidad=1;
						end
						case FIGHTER_K:
							random=rand(0,1);
							if (random==0)
								id_luchador2.nuevo_estado=_ayuken;
								id_luchador2.intensidad=1;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_uatras_kick;
								id_luchador2.intensidad=2;
							end
						end
						case FIGHTER_KULA:
							random=rand(0,1);
							if (random==0)
								id_luchador2.nuevo_estado=_ayuken;
								id_luchador2.intensidad=1;
							end
							if (random==1)
								id_luchador2.nuevo_estado=_shoryuken;
								id_luchador2.intensidad=1;
							end
						end
						case FIGHTER_K9999:
							if (id_luchador1.hit_combo>2)
								random=rand(0,1);
								if (random==0)
									id_luchador2.nuevo_estado=_ayuken;
									id_luchador2.intensidad=1;
								end
								if (random==1)
									id_luchador2.nuevo_estado=_u_kick;
									id_luchador2.intensidad=1;
								end
							end
						end
					end
				end
            end
            case _ayuken:
				if (id_luchador2.he_dado<>1)
					switch (id_luchador2.luchador)
						case FIGHTER_KYO:
							if (id_luchador2.intensidad==1)
								id_luchador2.paso=0;
								id_luchador2.he_dado=1;
								id_luchador2.intensidad=10;
							else
								if (id_luchador2.intensidad==10)
									id_luchador2.paso=0;
									id_luchador2.he_dado=1;
									id_luchador2.intensidad=11;
									if (id_luchador1.estado==_agachado or
										id_luchador1.estado==_agachadoguardia)
										id_luchador2.intensidad=13;
									end
									if (id_luchador1.estado==_guardiaalta or
										id_luchador1.estado==_retroceder)
										id_luchador2.intensidad=13;
									end
								end
							end
						end
						case FIGHTER_K:
							if (id_luchador2.he_dado==0 and 
								id_luchador2.intensidad==1)
								if (abs(id_luchador1.x-id_luchador2.x)<60)
									id_luchador2.paso=0;
									id_luchador2.he_dado=1;
									id_luchador2.intensidad=4;
								else
									id_luchador2.paso=0;
									id_luchador2.he_dado=1;
									id_luchador2.intensidad=3;
								end
							end
						end
					end
				end
            end
            case _shoryuken:
				if (id_luchador2.he_dado<>1)
					switch (id_luchador2.luchador)
						case FIGHTER_K:
							if (id_luchador2.intensidad==2 and id_luchador2.paso>26)
								id_luchador2.paso=0;
								id_luchador2.he_dado=1;
								id_luchador2.intensidad=3;
							end
						end
					end
				end
            end
            case _uatras_punch:
				if (id_luchador2.he_dado<>1)
					switch (id_luchador2.luchador)
						case FIGHTER_IORI:
							if (id_luchador2.intensidad==1 or
								id_luchador2.intensidad==2)
								if (id_luchador2.paso>11)
									id_luchador2.paso=0;
									id_luchador2.he_dado=1;
									id_luchador2.intensidad=12;
								end
							elseif (id_luchador2.intensidad==12)
								if (id_luchador2.paso>11 and 
									id_luchador2.he_dado==0)
									id_luchador2.paso=0;
									id_luchador2.he_dado=1;
									id_luchador2.intensidad=22;
								end
							end
						end
						
						case FIGHTER_CRIMSON:
							if (id_luchador2.intensidad==2)
								id_luchador2.paso=1;
								id_luchador2.he_dado=0;
								id_luchador2.intensidad=6;
							else
								if (id_luchador2.intensidad==6)
									id_luchador2.paso=0;
									id_luchador2.he_dado=1;
									id_luchador2.intensidad=1;
								end
							end
						end
						case FIGHTER_KASUMI:
							if (id_luchador2.intensidad==2)
								id_luchador2.paso=1;
								id_luchador2.he_dado=0;
								id_luchador2.intensidad=4;
							end
						end
					end
				end
            end
            case _u_kick:
				if (id_luchador2.he_dado<>1)
					switch (id_luchador2.luchador)
						case FIGHTER_KYO:
							if (id_luchador2.intensidad==0)
								id_luchador2.paso=1;
								id_luchador2.he_dado=1;
								id_luchador2.intensidad=2;
							else
								if (id_luchador2.intensidad==1 or
									id_luchador2.intensidad==2)
									id_luchador2.paso=0;
									id_luchador2.he_dado=1;
									id_luchador2.intensidad=20;
								end
							end
						end
						case FIGHTER_K9999:
							if (id_luchador2.intensidad<2)
								id_luchador2.he_dado=0;
							end
						end
					end
				end
            end
            case _charge:
				switch (accion)
					case agachar:
						if (id_luchador1.tipo_ataque==BAJO)
							return(1);
						end
					end
					case retroceder:
						if (id_luchador1.tipo_ataque==NORMAL or
							id_luchador1.tipo_ataque==ALTO)
							return(1);
						end
					end
					case charge:
						if (id_luchador1.tipo_ataque==NULO)
							return(1);
						end
					end
				end
            end
            case _voltear:
				switch (accion)
					case striker:
						if (id_luchador2.luchador==3 or id_luchador2.luchador==8)
							return(1);
						end
					end
				end
            end
            case _guardiaalta:
				switch (accion)
					case agachar:
						if (id_luchador1.tipo_ataque==BAJO)
							return(1);
						end
					end
					case retroceder:
						if (id_luchador1.flags!=id_luchador2.flags)
							return(1);
						end	
					end
					case s_punch:
						if (id_luchador1.he_dado==-1)
							return(1);
						end
					end
				end
            end
            case _guardiaaltafloja:
				switch (accion)
					case agachar:
						if (id_luchador1.tipo_ataque==BAJO)
							return(1);
						end
					end
					case retroceder:
						if (id_luchador1.flags!=id_luchador2.flags)
							return(1);
						end	
					end
					case l_punch:
						if (id_luchador1.he_dado==-1)
							return(1);
						end
					end
				end
            end
            case _guardiabaja:
				switch (accion)
					case agachar:
						return(1);
					end
					case retroceder:
						if (id_luchador1.flags!=id_luchador2.flags)
							return(1);
						end
					end
				end
            end
            case _guardiabajafloja:
				switch (accion)
					case agachar:
						return(1);
					end
					case retroceder:
						if (id_luchador1.flags!=id_luchador2.flags)
							return(1);
						end
					end
				end
            end
            case _levantandose, _recibir_fuertes_aire:
				switch (accion)
					case agachar:
						if (id_luchador1.tipo_ataque==BAJO)
							return(1);
						end
					end
					case retroceder:
						if (id_luchador1.tipo_ataque<>NULO)
							return(1);
						end
					end
				end
            end
			end
			return(0);
		end	  
	end
end

function play_voice (sound_id, volume, frequence)

begin
	if (father==id_luchador1)	
		if (s_voice1>-1 and is_playing_snd(s_voice2))
			stop_snd(s_voice1);
        end
		s_voice1 = play_snd (sound_id, volume, frequence);
	end	
    if (father==id_luchador2)
		if (s_voice2>-1 and is_playing_snd(s_voice2))
			stop_snd(s_voice2);
        end
		s_voice2 = play_snd (sound_id, volume, frequence);
    end
end

function is_playing_voice (id_callar)

begin
    if (id_callar==id_luchador1)
		if (s_voice1>-1 and is_playing_snd(s_voice1))
        	return (true);
        end
    end   
    if (id_callar==id_luchador2)
		if (s_voice2>-1 and is_playing_snd(s_voice2))
            return (true);
        end
    end
	return (false);
end

function stop_voice (id_callar)

begin
    if (id_callar==id_luchador1)
		if (s_voice1>-1 and is_playing_snd(s_voice1))
        	stop_snd(s_voice1); s_voice1=-1;
        end
    end   
    if (id_callar==id_luchador2)
		if (s_voice2>-1 and is_playing_snd(s_voice2))
            stop_snd(s_voice2); s_voice2=-1;
        end
    end
end


function load_data (target)

begin  
	if (target == S_SETUP)
		if (file_exists ("kof/setup.dat"))
			
			/* BENNU /*
			load ("kof/setup.dat", set_up);
			/* BENNU_WII /*
			load ("kof/setup.dat", set_up);
			/* BENNU_WIZ /*
			load ("kof/setup.dat", set_up);
			/* BENNU_GCW0 /**/
			load ("kof/setup.dat", set_up);
			/* GEMIX /*
			load ("kof/setup.dat", &set_up);
			/**/
			
			FPS_TARGET = set_up[0];
			SKIP = set_up[1]; 
			SLOW_MACHINE = set_up[2];
			FILTER = set_up[3]; 
			cleared_games = set_up[4];
			cronometro = set_up[5]; 
			asaltos = set_up[6]; 
			cntype = set_up[7];
			SCREEN_MODE = set_up[8];
			fuerza = set_up[9]; 
			powinf = set_up[10];
		end    
	end
  
	if (target == S_SOUND)    
		/* BENNU /*
		if (file_exists ("kof/sound.dat"))
			load ("kof/sound.dat", track);
			cd_ok = track[11];
		end
		/* GEMIX /*
		if (file_exists ("kof/sound.dat"))
			load ("kof/sound.dat", &track);
			cd_ok = track[11];
		end
		/**/
	end
	
	if (target == S_CONTROL)
		
		/* BENNU /*
		if (file_exists ("kof/control.dat"))
			load ("kof/control.dat", save_cmap);
			for (i=0; i<10; i++)
				kmap1[i]=save_cmap[i];
			end
			for (i=10; i<20; i++)
				kmap2[i-10]=save_cmap[i];
			end
			for (i=20; i<28; i++)
				pmap1[i-20]=save_cmap[i];
			end
			for (i=28; i<36; i++)
				pmap2[i-28]=save_cmap[i];
			end
		end
		/* GEMIX /*
		if (file_exists ("kof/control.dat"))
			load ("kof/control.dat", &save_cmap);
			for (i=0; i<10; i++)
				kmap1[i]=save_cmap[i];
			end
			for (i=10; i<20; i++)
				kmap2[i-10]=save_cmap[i];
			end
			for (i=20; i<28; i++)
				pmap1[i-20]=save_cmap[i];
			end
			for (i=28; i<36; i++)
				pmap2[i-28]=save_cmap[i];
			end
		end
		/**/
			
	end
end

function save_data (target)

begin

	if (target == S_SETUP)
		set_up[0] = FPS_TARGET;
		set_up[1] = SKIP; 
		set_up[2] = SLOW_MACHINE;
		set_up[3] = FILTER;
		set_up[4] = cleared_games;
		set_up[5] = cronometro; 
		set_up[6] = asaltos; 
		set_up[7] = cntype;
		set_up[8] = SCREEN_MODE;
		set_up[9] = fuerza; 
		set_up[10] = powinf;
		
		/* BENNU /*
		save ("kof/setup.dat", set_up);
		/* BENNU_WII /*
		save ("kof/setup.dat", set_up);
		/* BENNU_WIZ /*
		save ("kof/setup.dat", set_up);
		/* BENNU_GCW0 /**/
		save ("kof/setup.dat", set_up);
		/* GEMIX /*
		save ("kof/setup.dat", &set_up, sizeof(set_up));
		/**/
	end
  
	if (target == S_SOUND)
		/* BENNU /*
		track[11] = cd_ok;
		save ("kof/sound.dat", track);
		/* GEMIX /*
		track[11] = cd_ok;
		save ("kof/sound.dat", &track, sizeof(track));
		/**/
	end
	
	if (target == S_CONTROL)
		
		/* BENNU /*
		for (i=0; i<10; i++)
			save_cmap[i]=kmap1[i];
		end
		for (i=10; i<20; i++)
			save_cmap[i]=kmap2[i-10];
		end
		for (i=20; i<28; i++)
			save_cmap[i]=pmap1[i-20];
		end
		for (i=28; i<36; i++)
			save_cmap[i]=pmap2[i-28];
		end
		save ("kof/control.dat", save_cmap);
		
		/* GEMIX /*
		for (i=0; i<10; i++)
			save_cmap[i]=kmap1[i];
		end
		for (i=10; i<20; i++)
			save_cmap[i]=kmap2[i-10];
		end
		for (i=20; i<28; i++)
			save_cmap[i]=pmap1[i-20];
		end
		for (i=28; i<36; i++)
			save_cmap[i]=pmap2[i-28];
		end
		save ("kof/control.dat", &save_cmap, sizeof(save_cmap));
		/**/
		
	end

end



// musica /////////////////////////////////////
function load_musica (string musica_path);

begin
	if (sound_active == true)
		/* BENNU /*
		return (load_song (musica_path));
		/* BENNU_WII /*
		return (load_song (musica_path));
		/* BENNU_WIZ /*
		return (load_song (musica_path));
		/* BENNU_GCW0 /**/
		return (load_song (musica_path));
		/* GEMIX /*
		return (load_music (musica_path));
		/**/	 
	end
end

function unload_musica (musica_id);

begin
	if (sound_active == true)
		/* BENNU /*
		stop_song();
		unload_song (musica_id);
		/* BENNU_WII /*
		stop_song();
		unload_song (musica_id);
		/* BENNU_WIZ /*
		stop_song();
		unload_song (musica_id);
		/* BENNU_GCW0 /**/
		stop_song();
		unload_song (musica_id);
		/* GEMIX /*
		stop_music (musica_id);
		unload_music (musica_id);
		/**/
	end
end


function set_musica_volume (music_id, volume)

begin
	if (sound_active == true)
		/* BENNU /*
		set_song_volume (volume);
		/* BENNU_WII /*
		set_song_volume (volume);
		/* BENNU_WIZ /*
		final_volume = (volume*master_volume)/100;
		set_song_volume (final_volume);
		/* BENNU_GCW0 /**/
		set_song_volume (volume);
		/* GEMIX /*
		set_music_volume (music_id, volume<<1);
		/**/
	
	end	
end

function play_musica (musica_id, looping);

begin
	if (sound_active == true)
		/* BENNU /*
		play_song (musica_id, looping);
		/* BENNU_WII /*
		play_song (musica_id, 0);
		timer[0]=0;
		/* BENNU_WIZ /*
		play_song (musica_id, looping);
		/* BENNU_GCW0 /**/
		play_song (musica_id, looping);
		/* GEMIX /*
		play_music (musica_id, 1);
		/**/
	end
end


// wavs ////////////////////////////////
function load_snd (string sound_path, int putamierda);

begin
	if (sound_active == true)
		return (load_wav (sound_path));
	end
end

function unload_snd (sound_id);

begin
	if (sound_active == true and sound_id!=0)
		unload_wav (sound_id); 
		sound_id = 0;
	end
end

function play_snd (sound_id, volume, frequency);

begin
	if (sound_active == true)
		/* BENNU /*
		return play_wav (sound_id, 0);
		/* BENNU_WII /*
		return play_wav (sound_id, 0);
		/* BENNU_WIZ /*
		if (master_volume > 0) return play_wav (sound_id, 0);
		else return false; end
		/* BENNU_GCW0 /**/
		return play_wav (sound_id, 0);
		/* GEMIX /*
		return (sound (sound_id, volume, frequency));	
    /**/
	end	
end

function stop_snd (channel_id);

begin
	if (sound_active == true)
		/* BENNU /*
		stop_wav (channel_id);
		/* BENNU_WII /*
		stop_wav (channel_id);
		/* BENNU_WIZ /*
		stop_wav (channel_id);
		/* BENNU_GCW0 /**/
		stop_wav (channel_id);
		/* GEMIX /*
		stop_sound (channel_id);
		/**/
	end
end

function is_playing_snd (id_sound);

begin
	if (sound_active == true)
		/* BENNU /*
		return is_playing_wav (id_sound);
		/* BENNU_WII /*
		return is_playing_wav (id_sound);
		/* BENNU_WIZ /*
		return is_playing_wav (id_sound);
		/* BENNU_GCW0 /**/
		return is_playing_wav (id_sound);
		/* GEMIX /*
		return (is_playing_sound (id_sound));
		/**/
	end
end


function unload_graph (gfx_id)

begin
	/* BENNU /*
	unload_map (0, gfx_id);
	/* BENNU_WII /*
	unload_map (0, gfx_id);
	/* BENNU_WIZ /*
	unload_map (0, gfx_id);
	/* BENNU_GCW0 /**/
	unload_map (0, gfx_id);
	/* GEMIX /*
	unload_map (gfx_id);
	/**/	
end


function blend_gfx (id_file, id_gfx, id_fighter, effect);

begin
	/* BENNU /*
	if (effect==2)//si se prenden naranja
		blendop_assign (id_file, id_gfx, blend_red);
	end	
	if (effect==3)//si se prenden morado
		blendop_assign (id_file, id_gfx, blend_pur);
	end	
	if (effect==4)//si conjela
		blendop_assign (id_file, id_gfx, blend_ice);
	end
	
	/* BENNU_WII /*
	if (effect==2)//si se prenden naranja
		blendop_assign (id_file, id_gfx, blend_red);
	end	
	if (effect==3)//si se prenden morado
		blendop_assign (id_file, id_gfx, blend_pur);
	end	
	if (effect==4)//si conjela
		blendop_assign (id_file, id_gfx, blend_ice);
	end
	
	/* BENNU_WIZ /*
	if (effect==2)//si se prenden naranja
		blendop_assign (id_file, id_gfx, blend_red);
	end	
	if (effect==3)//si se prenden morado
		blendop_assign (id_file, id_gfx, blend_pur);
	end	
	if (effect==4)//si conjela
		blendop_assign (id_file, id_gfx, blend_ice);
	end

	/* BENNU_GCW0 /**/
	if (effect==2)//si se prenden naranja
		blendop_assign (id_file, id_gfx, blend_red);
	end	
	if (effect==3)//si se prenden morado
		blendop_assign (id_file, id_gfx, blend_pur);
	end	
	if (effect==4)//si conjela
		blendop_assign (id_file, id_gfx, blend_ice);
	end
	
	/* GEMIX /*
	// strikers
	if (id_fighter == -1) return; end
	
	if (effect==2)//si se prenden naranja
			
		if (id_fighter==FIGHTER_KYO or id_fighter==FIGHTER_KYO94)
			convert_palette (id_file, id_gfx,&burn_kyo);
		end
		if (id_fighter==FIGHTER_ATHENA)
			convert_palette (id_file, id_gfx,&burn_ath);
		end
		if (id_fighter==FIGHTER_IORI)
			convert_palette (id_file, id_gfx,&burn_iori);
		end
		if (id_fighter==FIGHTER_TERRY or id_fighter==FIGHTER_TERRY94)
			convert_palette (id_file, id_gfx, &burn_terry);
		end
		if (id_fighter==FIGHTER_CRIMSON)
			convert_palette (id_file, id_gfx, &burn_crimsom);
		end
		if (id_fighter==FIGHTER_KASUMI)
			convert_palette (id_file, id_gfx, &burn_kasumi);
		end
		if (id_fighter==FIGHTER_TAKUMA)
			convert_palette (id_file, id_gfx, &burn_takuma);
		end
		if (id_fighter==FIGHTER_K)
			convert_palette (id_file, id_gfx, &burn_k);
		end
		if (id_fighter==FIGHTER_KULA)
			convert_palette (id_file, id_gfx, &burn_kula);
		end
		if (id_fighter==FIGHTER_K9999)
			convert_palette (id_file, id_gfx, &burn_tetsuo);
		end
	end	
	if (effect==3)//si se prenden morado
		if (id_fighter==FIGHTER_KYO or id_fighter==FIGHTER_KYO94)
			convert_palette (id_file,COUNTER,&anti_kyo);
		end
		if (id_fighter==FIGHTER_ATHENA)
			convert_palette (id_file,COUNTER,&anti_ath);
		end
		if (id_fighter==FIGHTER_IORI)
			convert_palette (id_file,COUNTER,&anti_iori);
		end
		if (id_fighter==FIGHTER_TERRY or id_fighter==FIGHTER_TERRY94)
			convert_palette (id_file,COUNTER,&anti_terry);
		end
		if (id_fighter==FIGHTER_CRIMSON)
			convert_palette (id_file,COUNTER,&anti_crimsom);
		end
		if (id_fighter==FIGHTER_KASUMI)
			convert_palette (id_file,COUNTER,&anti_kasumi);
		end
		if (id_fighter==FIGHTER_TAKUMA)
			convert_palette (id_file,COUNTER,&anti_takuma);
		end
		if (id_fighter==FIGHTER_K)
			convert_palette (id_file,COUNTER,&anti_k);
		end
		if (id_fighter==FIGHTER_KULA)
			convert_palette (id_file,COUNTER,&anti_kula);
		end
		if (id_fighter==FIGHTER_K9999)
			convert_palette (id_file,COUNTER,&anti_tetsuo);
		end
	end
	if (effect==4)//si conjela
		if (id_fighter==FIGHTER_KYO or id_fighter==FIGHTER_KYO94)
			convert_palette (id_file,COUNTER,&fres_kyo);
		end
		if (id_fighter==FIGHTER_ATHENA)
			convert_palette (id_file,COUNTER,&fres_ath);
		end
		if (id_fighter==FIGHTER_IORI)
			convert_palette (id_file,COUNTER,&fres_iori);
		end
		if (id_fighter==FIGHTER_TERRY or id_fighter==FIGHTER_TERRY94)
			convert_palette (id_file,COUNTER,&fres_terry);
		end
		if (id_fighter==FIGHTER_CRIMSON)
			convert_palette (id_file,COUNTER,&blue_crimsom);
		end
		if (id_fighter==FIGHTER_KASUMI)
			convert_palette (id_file,COUNTER,&blue_kasumi);
		end
		if (id_fighter==FIGHTER_TAKUMA)
			convert_palette (id_file,COUNTER,&blue_takuma);
		end
		if (id_fighter==FIGHTER_K)
			convert_palette (id_file,COUNTER,&blue_k);
		end
		if (id_fighter==FIGHTER_KULA)
			convert_palette (id_file,COUNTER,&blue_kula);
		end
		if (id_fighter==FIGHTER_K9999)
			convert_palette (id_file,COUNTER,&blue_tetsuo);
		end
	end	
	/**/
end

function blend_return (id_file, id_gfx, id_fighter, player_color);

begin
	/* BENNU /*
	blendop_assign (id_file,id_gfx,NULL);
	
	/* BENNU_WII /*
	blendop_assign (id_file,id_gfx,NULL);
	
	/* BENNU_WIZ /*
	blendop_assign (id_file,id_gfx,NULL);
	
	/* BENNU_GCW0 /**/
	blendop_assign (id_file,id_gfx,NULL);

	/* GEMIX /*
	// strikers
	if (id_fighter == -1) return; end
	
	if (id_fighter==FIGHTER_KYO or id_fighter==FIGHTER_KYO94)
		convert_palette (id_file,id_gfx,&return_kyo);
		if (player_color==1) convert_palette (id_file,id_gfx,&red_kyo); end
		if (player_color==2) convert_palette (id_file,id_gfx,&green_kyo); end
		if (player_color==3) convert_palette (id_file,id_gfx,&blue_kyo); end
	end
	if (id_fighter==FIGHTER_ATHENA)
		convert_palette (id_file,id_gfx,&return_ath);
		if (player_color==1) convert_palette (id_file,id_gfx,&green_athena); end
		if (player_color==2) convert_palette (id_file,id_gfx,&new_athena); end
		if (player_color==3) convert_palette (id_file,id_gfx,&blue_athena); end
	end
	if (id_fighter==FIGHTER_IORI)
		convert_palette (id_file,id_gfx,&return_iori);
		if (player_color==0) convert_palette (id_file,id_gfx,&normal_iori); end
		if (player_color==1) convert_palette (id_file,id_gfx,&gold_iori); end
		if (player_color==2) convert_palette (id_file,id_gfx,&blue_iori); end
		if (player_color==3) convert_palette (id_file,id_gfx,&purple_iori); end
	end
	if (id_fighter==FIGHTER_TERRY or id_fighter==FIGHTER_TERRY94)
		convert_palette (id_file,id_gfx,&return_terry);
		if (player_color==0) convert_palette (id_file,id_gfx,&normal_terry); end
		if (player_color==1) convert_palette (id_file,id_gfx,&rare_terry); end
		if (player_color==2) convert_palette (id_file,id_gfx,&final_terry); end
		if (player_color==3) convert_palette (id_file,id_gfx,&blue_terry); end
	end
	if (id_fighter==FIGHTER_CRIMSON)
		convert_palette (id_file,id_gfx,&return_crimsom);
		if (player_color==0) convert_palette (id_file,id_gfx,&crimson_normal); end
		if (player_color==1) convert_palette (id_file,id_gfx,&silver_crimsom); end
		if (player_color==2) convert_palette (id_file,id_gfx,&green_crimsom); end
		if (player_color==3) convert_palette (id_file,id_gfx,&outlaw_crimsom); end
	end
	if (id_fighter==FIGHTER_KASUMI)
		convert_palette (id_file,id_gfx,&return_kasumi);
		if (player_color==0) convert_palette (id_file,id_gfx,&normal_kas); END
		if (player_color==1) convert_palette (id_file,id_gfx,&masayo_kas); END
		if (player_color==2) convert_palette (id_file,id_gfx,&magent_kas); END
		if (player_color==3) convert_palette (id_file,id_gfx,&sombra_kas); end
	end
	if (id_fighter==FIGHTER_TAKUMA)
		convert_palette (id_file,id_gfx,&return_takuma);
		if (player_color==1) convert_palette (id_file,id_gfx,&takuma_juanh); END
		if (player_color==2) convert_palette (id_file,id_gfx,&takuma_azulon); END
		if (player_color==3) convert_palette (id_file,id_gfx,&takuma_naranja); end
	end
	if (id_fighter==FIGHTER_K)
		convert_palette (id_file,id_gfx,&return_k);
		if (player_color==1) convert_palette (id_file,id_gfx,&k_verd); END
		if (player_color==2) convert_palette (id_file,id_gfx,&k_mage); END
		if (player_color==3) convert_palette (id_file,id_gfx,&k_azul); end
	end
	if (id_fighter==FIGHTER_KULA)
		convert_palette (id_file,id_gfx,&return_kula);
		if (player_color==1) convert_palette (id_file,id_gfx,&kula_topa); END
		if (player_color==2) convert_palette (id_file,id_gfx,&kula_rubi); END
		if (player_color==3) convert_palette (id_file,id_gfx,&kula_kuro); end
	end
	if (id_fighter==FIGHTER_K9999)
		convert_palette (id_file,id_gfx,&return_tetsuo);
		if (player_color==1) convert_palette (id_file,id_gfx,&tetsuo_hort); END
		if (player_color==2) convert_palette (id_file,id_gfx,&tetsuo_bars); END
		if (player_color==3) convert_palette (id_file,id_gfx,&tetsuo_rojo); end
	end
	/**/
end

function draw_hud_text (pause);

begin
	if (blanquear) return; end
	
	// textos
	if (true)
		delete_text (all_text);
	end
	
	write (font_p1,31,28,0,nombres[luchador1]);
	write (font_p2,288,28,2,nombres[luchador2]);
	if (game_mode==MODE_VS2P)
		write (fontstriker1,80,6,4,"Beat by");
		write (fontstriker2,220,6,4,"Beat by");
		write_int (fontstriker1,110,6,4,&wins1);
		write_int (fontstriker2,250,6,4,&wins2);
		
	elseif (game_mode==MODE_ARCADE)
		if (wins1=>MAX_FASES)
			write (fontstriker1,90,6,4,"Last Stage");
		else
			write (fontstriker1,80,6,4,"Stage");
			write_int (fontstriker1,110,6,4,&wins1);
		end
		
	elseif (game_mode==MODE_TRAINING)
		write (fontstriker1,90,6,4,"Practice");
		write (fontstriker2,230,6,4,"Practice");
	end
	
	if (game_mode!=MODE_TRAINING)
		write_int (font_numbers,130,227,4,&id_luchador1.striks);
		write_int (font_numbers,189,227,4,&id_luchador2.striks);
	end
	
	if (cronometro>0 and game_mode!=MODE_TRAINING)
		if (time > 9)
			digit_0 = time/10;
			digit_1 = time%10;
			write_int (font_numbers,SIZEX2-6,22,4,&digit_0);
			write_int (font_numbers,SIZEX2+6,22,4,&digit_1);
		else
			write_int (font_numbers,SIZEX2,22,4,&time);
		end		
	end
end

function draw_alpha (alpha)

begin
	/* BENNU /*
	drawing_alpha (alpha);
	/* BENNU_WII /*
	drawing_alpha (alpha);
	/* BENNU_WIZ /*
	drawing_alpha (alpha);
	/* BENNU_GCW0 /**/
	drawing_alpha (alpha);
	/* GEMIX /*
	//drawing_alpha (alpha);
	/**/
end

/* BENNU /*
function draw (tipo, color, alpha, regin, x0, y0, x1, y1);
	
begin
	drawing_z (draw_z);
	
	if (color==1)       color = rgb (0,0,0); // negro
	elseif (color==15)  color = rgb (255,255,255); // blanco
	elseif (color==18)  color = rgb (240,15,60); //magenta
	elseif (color==26)  color = rgb (255,0,0); // red
	elseif (color==50)  color = rgb (255,180,0); // yellow
	elseif (color==52)  color = rgb (255,100,0); // orange
	elseif (color==55)  color = rgb (255,150,0); // orange-red
	elseif (color==152) color = rgb (255,240,200); // yellow-white
	else color = rgb (255, 255, 255); end
	
	drawing_color (color);
	drawing_alpha (alpha*17); 
	
	if (tipo == 3) // fillrect
		return draw_box (x0, y0, x1, y1); 
	end
	if (tipo == 5) // fillroundrect
		return draw_fcircle (x0 + ((x1-x0)>>2), y0 + ((y1-y0)>>2), ((x1-x0)>>1)); 
	end	
end

function play_cd (id_track, mode);

begin
	if (sound_active == true)
		cd_play(0, id_track);
	end	
end

function stop_cd();

begin
	if (sound_active == true)
		cd_stop(0);
	end	
end

function is_playing_music (id_music);

begin
	if (sound_active == true)
		return is_playing_song();
	end	
end

function is_playing_cd ();

begin
	if (sound_active == true)
		return (cd_status (0) == CD_PLAYING);
	end	
end
/**/

/* BENNU_WII /*
function draw (tipo, color, alpha, regin, x0, y0, x1, y1);
	
begin
	drawing_z (draw_z);
	
	if (color==1)       color = rgb (0,0,0); // negro
	elseif (color==15)  color = rgb (255,255,255); // blanco
	elseif (color==18)  color = rgb (240,15,60); //magenta
	elseif (color==26)  color = rgb (255,0,0); // red
	elseif (color==50)  color = rgb (255,180,0); // yellow
	elseif (color==52)  color = rgb (255,100,0); // orange
	elseif (color==55)  color = rgb (255,150,0); // orange-red
	elseif (color==152) color = rgb (255,240,200); // yellow-white
	else color = rgb (255, 255, 255); end
	
	drawing_color (color);
	drawing_alpha (alpha*17); 
	
	if (tipo == 3) // fillrect
		return draw_box (x0, y0, x1, y1); 
	end
	if (tipo == 5) // fillroundrect
		return draw_fcircle (x0 + ((x1-x0)>>2), y0 + ((y1-y0)>>2), ((x1-x0)>>1)); 
	end	
end

function play_cd (id_track, mode);

begin
end

function stop_cd();

begin
end

function is_playing_music (id_music);

begin
end

function is_playing_cd ();

begin
end
/**/

/* BENNU_WIZ /*
function draw (tipo, color, alpha, regin, x0, y0, x1, y1);
	
begin
	drawing_z (draw_z);
	
	if (color==1)       color = rgb (0,0,0); // negro
	elseif (color==15)  color = rgb (255,255,255); // blanco
	elseif (color==18)  color = rgb (240,15,60); //magenta
	elseif (color==26)  color = rgb (255,0,0); // red
	elseif (color==50)  color = rgb (255,180,0); // yellow
	elseif (color==52)  color = rgb (255,100,0); // orange
	elseif (color==55)  color = rgb (255,150,0); // orange-red
	elseif (color==152) color = rgb (255,240,200); // yellow-white
	else color = rgb (255, 255, 255); end
	
	drawing_color (color);
	drawing_alpha (alpha*17); 
	
	if (tipo == 3) // fillrect
		return draw_box (x0, y0, x1, y1); 
	end
	if (tipo == 5) // fillroundrect
		return draw_fcircle (x0 + ((x1-x0)>>2), y0 + ((y1-y0)>>2), ((x1-x0)>>1)); 
	end	
end

function play_cd (id_track, mode);

begin
end

function stop_cd();

begin
end

function is_playing_music (id_music);

begin
end

function is_playing_cd ();

begin
end
/**/

/* BENNU_GCW0 /**/
function draw (tipo, color, alpha, regin, x0, y0, x1, y1);
	
begin
	drawing_z (draw_z);
	
	if (color==1)       color = rgb (0,0,0); // negro
	elseif (color==15)  color = rgb (255,255,255); // blanco
	elseif (color==18)  color = rgb (240,15,60); //magenta
	elseif (color==26)  color = rgb (255,0,0); // red
	elseif (color==50)  color = rgb (255,180,0); // yellow
	elseif (color==52)  color = rgb (255,100,0); // orange
	elseif (color==55)  color = rgb (255,150,0); // orange-red
	elseif (color==152) color = rgb (255,240,200); // yellow-white
	else color = rgb (255, 255, 255); end
	
	drawing_color (color);
	drawing_alpha (alpha*17); 
	
	if (tipo == 3) // fillrect
		return draw_box (x0, y0, x1, y1); 
	end
	if (tipo == 5) // fillroundrect
		return draw_fcircle (x0 + ((x1-x0)>>2), y0 + ((y1-y0)>>2), ((x1-x0)>>1)); 
	end	
end

function play_cd (id_track, mode);

begin
end

function stop_cd();

begin
end

function is_playing_music (id_music);

begin
end

function is_playing_cd ();

begin
end
/**/

function get_controls ()

begin
	p1_joy_x = p1_joy_y = 0;
	p1_hat_up = -1;
	p1_hat_up = p1_hat_down = p1_hat_right = p1_hat_left = 0;

	p1_button_a = p1_button_b = p1_button_c = 0;
	p1_button_x = p1_button_y = p1_button_z = 0;
	p1_button_start = 0;
	
	p2_joy_x = p2_joy_y = 0;
	p2_hat_up = -1;
	p2_hat_up = p2_hat_down = p2_hat_right = p2_hat_left = 0;
	p2_button_a = p2_button_b = p2_button_c = 0;
	p2_button_x = p2_button_y = p2_button_z = 0;
	p2_button_start = 0;
	
	/* BENNU /*
	if (pad_1 != -1)
		p1_joy_x = get_joy_position(0,0);
		p1_joy_y = get_joy_position(0,1);
		
		p1_hat = joy_gethat (0,0);
		p1_hat_up = (p1_hat==JOY_HAT_UP or p1_hat==JOY_HAT_RIGHTUP or p1_hat==JOY_HAT_LEFTUP); 
		p1_hat_down = (p1_hat==JOY_HAT_DOWN or p1_hat==JOY_HAT_RIGHTDOWN or p1_hat==JOY_HAT_LEFTDOWN); 
		p1_hat_left = (p1_hat==JOY_HAT_LEFT or p1_hat==JOY_HAT_LEFTDOWN or p1_hat==JOY_HAT_LEFTUP);
		p1_hat_right = (p1_hat==JOY_HAT_RIGHT or p1_hat==JOY_HAT_RIGHTDOWN or p1_hat==JOY_HAT_RIGHTUP);
		
		p1_button_a = get_joy_button(0,pmap1[0]) or key(kmap1[4]);
		p1_button_b = get_joy_button(0,pmap1[1]) or key(kmap1[5]);
		p1_button_c = get_joy_button(0,pmap1[2]) or key(kmap1[6]);
		p1_button_x = get_joy_button(0,pmap1[3]) or key(kmap1[7]);
		p1_button_y = get_joy_button(0,pmap1[4]) or key(kmap1[8]);
		p1_button_z = get_joy_button(0,pmap1[5]) or key(kmap1[9]);
		p1_button_start = get_joy_button(0, pmap1[6]) or key(_enter);
		p1_button_cancel = get_joy_button(0, pmap1[7]) or key(_esc);
		
	else	
		p1_button_a = key (kmap1[4]);
		p1_button_b = key (kmap1[5]);
		p1_button_c = key (kmap1[6]);
		p1_button_x = key (kmap1[7]);
		p1_button_y = key (kmap1[8]);
		p1_button_z = key (kmap1[9]);
		p1_button_start = key (_enter);
		p1_button_cancel = key(_esc);
		
	end
	
	if (pad_2 != -1)
		p2_joy_x = get_joy_position(1,0);
		p2_joy_y = get_joy_position(1,1);
		
		p2_hat = joy_gethat (0,0);
		p2_hat_up = (p2_hat==JOY_HAT_UP or p2_hat==JOY_HAT_RIGHTUP or p2_hat==JOY_HAT_LEFTUP); 
		p2_hat_down = (p2_hat==JOY_HAT_DOWN or p2_hat==JOY_HAT_RIGHTDOWN or p2_hat==JOY_HAT_LEFTDOWN); 
		p2_hat_left = (p2_hat==JOY_HAT_LEFT or p2_hat==JOY_HAT_LEFTDOWN or p2_hat==JOY_HAT_LEFTUP);
		p2_hat_right = (p2_hat==JOY_HAT_RIGHT or p2_hat==JOY_HAT_RIGHTDOWN or p2_hat==JOY_HAT_RIGHTUP);
		
		p2_button_a = get_joy_button(1,pmap2[0]) or key(kmap2[4]);
		p2_button_b = get_joy_button(1,pmap2[1]) or key(kmap2[5]);
		p2_button_c = get_joy_button(1,pmap2[2]) or key(kmap2[6]);
		p2_button_x = get_joy_button(1,pmap2[3]) or key(kmap2[7]);
		p2_button_y = get_joy_button(1,pmap2[4]) or key(kmap2[8]);
		p2_button_z = get_joy_button(1,pmap2[5]) or key(kmap2[9]);
		p2_button_start = get_joy_button(1, pmap2[6]) or key(_enter);
		p2_button_cancel = get_joy_button(1, pmap2[7]) or key(_esc);
		
	else
		p2_button_a = key (kmap2[4]);
		p2_button_b = key (kmap2[5]);
		p2_button_c = key (kmap2[6]);
		p2_button_x = key (kmap2[7]);
		p2_button_y = key (kmap2[8]);
		p2_button_z = key (kmap2[9]);
		p2_button_start = key (_enter);
		p2_button_cancel = key(_esc);
		
	end
	
	/* BENNU_WII /*
	if (wpad_is_ready(0))
		p1_joy_x = get_joy_position(0,0);
		p1_joy_y = get_joy_position(0,1);
		p1_hat = joy_gethat (0,0);
		p1_hat = joy_gethat (0,0);
		p1_hat_up = (p1_hat==JOY_HAT_UP or p1_hat==JOY_HAT_RIGHTUP or p1_hat==JOY_HAT_LEFTUP); 
		p1_hat_down = (p1_hat==JOY_HAT_DOWN or p1_hat==JOY_HAT_RIGHTDOWN or p1_hat==JOY_HAT_LEFTDOWN); 
		p1_hat_left = (p1_hat==JOY_HAT_LEFT or p1_hat==JOY_HAT_LEFTDOWN or p1_hat==JOY_HAT_LEFTUP);
		p1_hat_right = (p1_hat==JOY_HAT_RIGHT or p1_hat==JOY_HAT_RIGHTDOWN or p1_hat==JOY_HAT_RIGHTUP);
		
		p1_button_a = get_joy_button(0, 0) or get_joy_button(0,10);
		p1_button_b = get_joy_button(0, 1) or get_joy_button(0,9);
		p1_button_c = get_joy_button(0,13);
		p1_button_x = get_joy_button(0, 2) or get_joy_button(0,8) or get_joy_button(0,12);
		p1_button_y = get_joy_button(0, 3) or get_joy_button(0,7) or get_joy_button(0,11);
		p1_button_z = get_joy_button(0,14);
		p1_button_start  = get_joy_button(0, 5) or get_joy_button(0,18);
		p1_button_cancel = get_joy_button(0, 4) or get_joy_button(0,17);
	end
	
	if (wpad_is_ready(1))
		p2_joy_x = get_joy_position(1,0);
		p2_joy_y = get_joy_position(1,1);
		p2_hat = joy_gethat (1,0);
		p2_hat_up = (p2_hat==JOY_HAT_UP or p2_hat==JOY_HAT_RIGHTUP or p2_hat==JOY_HAT_LEFTUP); 
		p2_hat_down = (p2_hat==JOY_HAT_DOWN or p2_hat==JOY_HAT_RIGHTDOWN or p2_hat==JOY_HAT_LEFTDOWN); 
		p2_hat_left = (p2_hat==JOY_HAT_LEFT or p2_hat==JOY_HAT_LEFTDOWN or p2_hat==JOY_HAT_LEFTUP);
		p2_hat_right = (p2_hat==JOY_HAT_RIGHT or p2_hat==JOY_HAT_RIGHTDOWN or p2_hat==JOY_HAT_RIGHTUP);
		
		p2_button_a = get_joy_button(1, 0) or get_joy_button(1,10);
		p2_button_b = get_joy_button(1, 1) or get_joy_button(1,9);
		p2_button_c = get_joy_button(1,13);
		p2_button_x = get_joy_button(1, 2) or get_joy_button(1,8) or get_joy_button(1,12);
		p2_button_y = get_joy_button(1, 3) or get_joy_button(1,7) or get_joy_button(1,11);
		p2_button_z = get_joy_button(1,14);
		p2_button_start  = get_joy_button(1, 5) or get_joy_button(1,18);
		p2_button_cancel = get_joy_button(1, 4) or get_joy_button(1,17);
	end

	control_home = 0;
	control_home = get_joy_button(0,6) or get_joy_button(1,6) or get_joy_button(0,19) or get_joy_button(1,19);

	
	/* BENNU_WIZ /*
	
	if (get_joy_button(0,0)) p1_joy_y=-10000; end // arriba
	if (get_joy_button(0,7)) p1_joy_y=-10000; p1_joy_x=10000; end // der
	if (get_joy_button(0,1)) p1_joy_y=-10000; p1_joy_x=-10000; end // izq
	if (get_joy_button(0,4)) p1_joy_y=10000; end // abajo
	if (get_joy_button(0,5)) p1_joy_y=10000; p1_joy_x=10000; end // der
	if (get_joy_button(0,3)) p1_joy_y=10000; p1_joy_x=-10000; end // izq
	if (get_joy_button(0,6)) p1_joy_x=10000; end // der
	if (get_joy_button(0,2)) p1_joy_x=-10000; end // izq
	
	p1_button_a = get_joy_button(0,12);
	p1_button_b = get_joy_button(0,13);
	p1_button_c = get_joy_button(0,10);
	p1_button_x = get_joy_button(0,14);
	p1_button_y = get_joy_button(0,15);
	p1_button_z = get_joy_button(0,11);
	p1_button_start = get_joy_button(0, 9);
	p1_button_cancel = get_joy_button(0, 8);

	control_home = 0;	
	control_volup = 0;
	control_voldown = 0;
	control_volup = get_joy_button(0,16);
	control_voldown = get_joy_button(0,17);
	
	/* BENNU_GCW0 /**/
	
	if (key (_UP)) p1_joy_y=-10000; end // arriba
	if (key (_DOWN)) p1_joy_y=10000; end // abajo
	if (key (_RIGHT)) p1_joy_x=10000; end // der
	if (key (_LEFT)) p1_joy_x=-10000; end // izq

	p1_button_a = key (_L_CONTROL);
	p1_button_b = key (_L_ALT);
	p1_button_c = key (_TAB);
	p1_button_x = key (_SPACE);
	p1_button_y = key (_L_SHIFT);
	p1_button_z = key (_BACKSPACE);
	p1_button_start = key (_enter);
	p1_button_cancel = key(_esc);

	/* GEMIX /*
	if (pad_1 != -1)
		p1_joy_x = get_joy_position(0,0);
		p1_joy_y = get_joy_position(0,1);
		
		p1_hat = get_joy_hat (0,joy_hat1);
		p1_hat_up = ((p1_hat==0) or (p1_hat==315000) or (p1_hat==45000)); 
		p1_hat_down = ((p1_hat==180000) or (p1_hat==135000) or (p1_hat==225000)); 
		p1_hat_left = ((p1_hat==270000) or (p1_hat==225000) or (p1_hat==315000));
		p1_hat_right = ((p1_hat==90000) or (p1_hat==135000) or (p1_hat==45000));
		
		p1_button_a = get_joy_button(0,pmap1[0]) or key(kmap1[4]);
		p1_button_b = get_joy_button(0,pmap1[1]) or key(kmap1[5]);
		p1_button_c = get_joy_button(0,pmap1[2]) or key(kmap1[6]);
		p1_button_x = get_joy_button(0,pmap1[3]) or key(kmap1[7]);
		p1_button_y = get_joy_button(0,pmap1[4]) or key(kmap1[8]);
		p1_button_z = get_joy_button(0,pmap1[5]) or key(kmap1[9]);
		p1_button_start = get_joy_button(0, pmap1[6]) or key(_enter);
		p1_button_cancel = get_joy_button(0, pmap1[7]) or key(_esc);
		
	else	
		p1_button_a = key (kmap1[4]);
		p1_button_b = key (kmap1[5]);
		p1_button_c = key (kmap1[6]);
		p1_button_x = key (kmap1[7]);
		p1_button_y = key (kmap1[8]);
		p1_button_z = key (kmap1[9]);
		p1_button_start = key (_enter);
		p1_button_cancel = key(_esc);
		
	end
	
	if (pad_2 != -1)
		p2_joy_x = get_joy_position(1,0);
		p2_joy_y = get_joy_position(1,1);
		
		p2_hat = get_joy_hat(1,joy_hat1);
		p2_hat_up = ((p2_hat==0) or (p2_hat==315000) or (p2_hat==45000));
		p2_hat_down = ((p2_hat==180000) or (p2_hat==135000) or (p2_hat==225000)); 
		p2_hat_left = ((p2_hat==270000) or (p2_hat==225000) or (p2_hat==315000));
		p2_hat_right = ((p2_hat==90000) or (p2_hat==135000) or (p2_hat==45000));
		
		p2_button_a = get_joy_button(1,pmap2[0]) or key(kmap2[4]);
		p2_button_b = get_joy_button(1,pmap2[1]) or key(kmap2[5]);
		p2_button_c = get_joy_button(1,pmap2[2]) or key(kmap2[6]);
		p2_button_x = get_joy_button(1,pmap2[3]) or key(kmap2[7]);
		p2_button_y = get_joy_button(1,pmap2[4]) or key(kmap2[8]);
		p2_button_z = get_joy_button(1,pmap2[5]) or key(kmap2[9]);
		p2_button_start = get_joy_button(1, pmap2[6]) or key(_enter);
		p2_button_cancel = get_joy_button(1, pmap2[7]) or key(_esc);
		
	else
		p2_button_a = key (kmap2[4]);
		p2_button_b = key (kmap2[5]);
		p2_button_c = key (kmap2[6]);
		p2_button_x = key (kmap2[7]);
		p2_button_y = key (kmap2[8]);
		p2_button_z = key (kmap2[9]);
		p2_button_start = key (_enter);
		p2_button_cancel = key(_esc);
		
	end
	/**/
	
	/*
	control_up = (p1_joy_y < -JOY_RANGE or p2_joy_y < -JOY_RANGE or key(_w) or key(_up));
	control_down = (p1_joy_y > JOY_RANGE or p2_joy_y > JOY_RANGE or key(_s) or key(_down));
	control_left = (p1_joy_x < -JOY_RANGE or p2_joy_x < -JOY_RANGE or key(_a) or key(_left));
	control_right = (p1_joy_x > JOY_RANGE or p2_joy_x > JOY_RANGE or key(_d) or key(_right));
	*/
	
	control_enter = (p1_button_start or p2_button_start);
	control_cancel = (p1_button_cancel or p2_button_cancel);

end

function get_real_damage (value)

begin
	
	value = value<<PRECISION_BITS;
	if (fuerza==1) value=(value*75)/100; end
	if (fuerza==3) value=(value*100)/75; end
	
	if (time=<0) value=0; end
	
	return (value);
end

function insert_particle (x, y, inc_x, inc_y, acc_x, acc_y, tipo);

begin
	for (i=0; i<NUM_PARTICLES; i++)
		if (!particles[i][PART_ALIVE])
			particles[i][PART_ALIVE] = 1;
			particles[i][PART_FRAME] = 0;
			particles[i][PART_X] = x;
			particles[i][PART_Y] = y;
			particles[i][PART_INC_X] = inc_x;
			particles[i][PART_INC_Y] = inc_y;
			particles[i][PART_ACC_X] = acc_x;
			particles[i][PART_ACC_Y] = acc_y;
			particles[i][PART_TYPE] = tipo;
			
			/* BENNU /*
			particles[i][PART_TYPE] = rgb (255,255,rand(0,255));
			/**/
			break;
		end
	end
end

function draw_particles ();

begin
	for (i=0; i<NUM_PARTICLES; i++)
		if (particles[i][PART_ALIVE])
			if (particles[i][PART_ALIVE])
				
				x = particles[i][PART_X];
				y = particles[i][PART_Y];
				paso = particles[i][PART_FRAME];
				
				/* BENNU /*
				size = (8*(120-particles[i][PART_FRAME]))/120;
				
				x0 = (size*cos(90000 + (paso*10000)));
				y0 = (size*sin(90000 + (paso*10000)));
				x1 = (size*cos(paso*10000));
				y1 = (size*sin(paso*10000));
				
				drawing_color (particles[i][PART_TYPE]);
				draw_line (x - x0, y - y0, x + x0, y + y0);
				draw_line (x - x1, y - y1, x + x1, y + y1);
				draw_box (x-(size/3), y-(size/3), x+(size/3), y+(size/3));
				
				/* GEMIX /*
				size = 2+((particles[i][PART_FRAME]/2)%4);
				size = (size*(120-particles[i][PART_FRAME]))/120;
				
				draw (5,50,8,0,
					x - (size>>1),
					y - (size>>1),
					x + 2 + size,
					y + 2 + size);
				/**/
				
				particles[i][PART_X] += particles[i][PART_INC_X]>>PRECISION_BITS;
				particles[i][PART_Y] += particles[i][PART_INC_Y]>>PRECISION_BITS;
				
				particles[i][PART_INC_X] += particles[i][PART_ACC_X];
				particles[i][PART_INC_Y] += particles[i][PART_ACC_Y];
				
				particles[i][PART_FRAME] ++;
				if (particles[i][PART_FRAME]==120 or size<=0)
					particles[i][PART_ALIVE] = 0;
				end	
			end	
		end
	end
end
/**/

//BUGS
/*
GFX

SELECT

GAME
-Athena si hace el especial en el aire es empujada y separada de las bolas

GEMIX
BENNU
WII
-Salvar partida
WIZ

ARREGLADO
-Aunque K este en modo let's rock debe recibir golpes de volteos
-Iori vs Kyo se desplaza raro al final de la presentacion
-K uatras patada debe atravesar si el enemigo esta en atravesar
-K modo let's rock debe desaparecer entre round y round
-Super Iori suena el estampar varias veces
-K especial gafas no infla adecuadamente
-Super cojer Kasumi peta el juego
-Kyo se conjela agachado a veces
-Cojer uatras alante iori queda mal
-Strikers hadoken peta
-En el select a veces se queda bloqueado en el modo practice
-Kyo94 red kick gran inc_y y inc_x a 0
-Select striker 2 a veces sale candy de color blanco tras seleccionar
-Agachado hacia atras no bloquea los golpes
-Al dar esc ha petao "Runtime in PEGATA - Process xxx no active" fase Athena
-Athena healing el enemigo debe ir a por ti

*/